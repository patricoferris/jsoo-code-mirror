"use strict";function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r);}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r);}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n2=0,F=function F(){};return{s:F,n:function n(){return _n2>=r.length?{done:!0}:{done:!1,value:r[_n2++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t["return"]||t["return"]();}finally{if(u)throw o;}}};}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t);}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=_get(_getPrototypeOf(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var p=_superPropBase(e,t);if(p){var n=Object.getOwnPropertyDescriptor(p,t);return n.get?n.get.call(arguments.length<3?e:r):n.value;}},_get.apply(null,arguments);}function _superPropBase(t,o){for(;!{}.hasOwnProperty.call(t,o)&&null!==(t=_getPrototypeOf(t)););return t;}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t);},_getPrototypeOf(t);}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e);}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t;},_setPrototypeOf(t,e);}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0;}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(r){if(Array.isArray(r))return r;}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o);}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}(function(){var __defProp=Object.defineProperty;var __export=function __export(target,all){for(var name2 in all)__defProp(target,name2,{get:all[name2],enumerable:true});};// ../node_modules/@marijn/find-cluster-break/src/index.js
var rangeFrom=[];var rangeTo=[];(function(){var numbers="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(function(s){return s?parseInt(s,36):1;});for(var _i=0,n=0;_i<numbers.length;_i++)(_i%2?rangeTo:rangeFrom).push(n=n+numbers[_i]);})();function isExtendingChar(code){if(code<768)return false;for(var from=0,to=rangeFrom.length;;){var mid=from+to>>1;if(code<rangeFrom[mid])to=mid;else if(code>=rangeTo[mid])from=mid+1;else return true;if(from==to)return false;}}function isRegionalIndicator(code){return code>=127462&&code<=127487;}var ZWJ=8205;function findClusterBreak(str,pos){var forward=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var includeExtending=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return(forward?nextClusterBreak:prevClusterBreak)(str,pos,includeExtending);}function nextClusterBreak(str,pos,includeExtending){if(pos==str.length)return pos;if(pos&&surrogateLow(str.charCodeAt(pos))&&surrogateHigh(str.charCodeAt(pos-1)))pos--;var prev=codePointAt(str,pos);pos+=codePointSize(prev);while(pos<str.length){var next=codePointAt(str,pos);if(prev==ZWJ||next==ZWJ||includeExtending&&isExtendingChar(next)){pos+=codePointSize(next);prev=next;}else if(isRegionalIndicator(next)){var countBefore=0,_i2=pos-2;while(_i2>=0&&isRegionalIndicator(codePointAt(str,_i2))){countBefore++;_i2-=2;}if(countBefore%2==0)break;else pos+=2;}else{break;}}return pos;}function prevClusterBreak(str,pos,includeExtending){while(pos>0){var found=nextClusterBreak(str,pos-2,includeExtending);if(found<pos)return found;pos--;}return 0;}function codePointAt(str,pos){var code0=str.charCodeAt(pos);if(!surrogateHigh(code0)||pos+1==str.length)return code0;var code1=str.charCodeAt(pos+1);if(!surrogateLow(code1))return code0;return(code0-55296<<10)+(code1-56320)+65536;}function surrogateLow(ch){return ch>=56320&&ch<57344;}function surrogateHigh(ch){return ch>=55296&&ch<56320;}function codePointSize(code){return code<65536?1:2;}// ../node_modules/@codemirror/state/dist/index.js
var _Text=/*#__PURE__*/function(){function Text(){_classCallCheck(this,Text);}return _createClass(Text,[{key:"lineAt",value:function lineAt(pos){if(pos<0||pos>this.length)throw new RangeError("Invalid position ".concat(pos," in document of length ").concat(this.length));return this.lineInner(pos,false,1,0);}},{key:"line",value:function line(n){if(n<1||n>this.lines)throw new RangeError("Invalid line number ".concat(n," in ").concat(this.lines,"-line document"));return this.lineInner(n,true,1,0);}},{key:"replace",value:function replace(from,to,text){var _clip=clip(this,from,to);var _clip2=_slicedToArray(_clip,2);from=_clip2[0];to=_clip2[1];var parts=[];this.decompose(0,from,parts,2);if(text.length)text.decompose(0,text.length,parts,1|2);this.decompose(to,this.length,parts,1);return _TextNode.from(parts,this.length-(to-from)+text.length);}},{key:"append",value:function append(other){return this.replace(this.length,this.length,other);}},{key:"slice",value:function slice(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length;var _clip3=clip(this,from,to);var _clip4=_slicedToArray(_clip3,2);from=_clip4[0];to=_clip4[1];var parts=[];this.decompose(from,to,parts,0);return _TextNode.from(parts,to-from);}},{key:"eq",value:function eq(other){if(other==this)return true;if(other.length!=this.length||other.lines!=this.lines)return false;var start=this.scanIdentical(other,1),end=this.length-this.scanIdentical(other,-1);var a=new RawTextCursor(this),b=new RawTextCursor(other);for(var skip=start,pos=start;;){a.next(skip);b.next(skip);skip=0;if(a.lineBreak!=b.lineBreak||a.done!=b.done||a.value!=b.value)return false;pos+=a.value.length;if(a.done||pos>=end)return true;}}},{key:"iter",value:function iter(){var dir=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return new RawTextCursor(this,dir);}},{key:"iterRange",value:function iterRange(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length;return new PartialTextCursor(this,from,to);}},{key:"iterLines",value:function iterLines(from,to){var inner;if(from==null){inner=this.iter();}else{if(to==null)to=this.lines+1;var start=this.line(from).from;inner=this.iterRange(start,Math.max(start,to==this.lines+1?this.length:to<=1?0:this.line(to-1).to));}return new LineCursor(inner);}},{key:"toString",value:function toString(){return this.sliceString(0);}},{key:"toJSON",value:function toJSON(){var lines=[];this.flatten(lines);return lines;}}],[{key:"of",value:function of(text){if(text.length==0)throw new RangeError("A document must have at least one line");if(text.length==1&&!text[0])return _Text.empty;return text.length<=32?new _TextLeaf(text):_TextNode.from(_TextLeaf.split(text,[]));}}]);}();var _TextLeaf=/*#__PURE__*/function(_Text2){function TextLeaf(text){var _this;var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:textLength(text);_classCallCheck(this,TextLeaf);_this=_callSuper(this,TextLeaf);_this.text=text;_this.length=length;return _this;}_inherits(TextLeaf,_Text2);return _createClass(TextLeaf,[{key:"lines",get:function get(){return this.text.length;}},{key:"children",get:function get(){return null;}},{key:"lineInner",value:function lineInner(target,isLine,line,offset){for(var _i3=0;;_i3++){var string2=this.text[_i3],end=offset+string2.length;if((isLine?line:end)>=target)return new Line(offset,end,line,string2);offset=end+1;line++;}}},{key:"decompose",value:function decompose(from,to,target,open){var text=from<=0&&to>=this.length?this:new _TextLeaf(sliceText(this.text,from,to),Math.min(to,this.length)-Math.max(0,from));if(open&1){var prev=target.pop();var joined=appendText(text.text,prev.text.slice(),0,text.length);if(joined.length<=32){target.push(new _TextLeaf(joined,prev.length+text.length));}else{var mid=joined.length>>1;target.push(new _TextLeaf(joined.slice(0,mid)),new _TextLeaf(joined.slice(mid)));}}else{target.push(text);}}},{key:"replace",value:function replace(from,to,text){if(!(text instanceof _TextLeaf))return _superPropGet(TextLeaf,"replace",this,3)([from,to,text]);var _clip5=clip(this,from,to);var _clip6=_slicedToArray(_clip5,2);from=_clip6[0];to=_clip6[1];var lines=appendText(this.text,appendText(text.text,sliceText(this.text,0,from)),to);var newLen=this.length+text.length-(to-from);if(lines.length<=32)return new _TextLeaf(lines,newLen);return _TextNode.from(_TextLeaf.split(lines,[]),newLen);}},{key:"sliceString",value:function sliceString(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length;var lineSep=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"\n";var _clip7=clip(this,from,to);var _clip8=_slicedToArray(_clip7,2);from=_clip8[0];to=_clip8[1];var result="";for(var pos=0,_i4=0;pos<=to&&_i4<this.text.length;_i4++){var line=this.text[_i4],end=pos+line.length;if(pos>from&&_i4)result+=lineSep;if(from<end&&to>pos)result+=line.slice(Math.max(0,from-pos),to-pos);pos=end+1;}return result;}},{key:"flatten",value:function flatten(target){var _iterator=_createForOfIteratorHelper(this.text),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;target.push(line);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"scanIdentical",value:function scanIdentical(){return 0;}}],[{key:"split",value:function split(text,target){var part=[],len=-1;var _iterator2=_createForOfIteratorHelper(text),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var line=_step2.value;part.push(line);len+=line.length+1;if(part.length==32){target.push(new _TextLeaf(part,len));part=[];len=-1;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(len>-1)target.push(new _TextLeaf(part,len));return target;}}]);}(_Text);var _TextNode=/*#__PURE__*/function(_Text3){function TextNode(children,length){var _this2;_classCallCheck(this,TextNode);_this2=_callSuper(this,TextNode);_this2.children=children;_this2.length=length;_this2.lines=0;var _iterator3=_createForOfIteratorHelper(children),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var child=_step3.value;_this2.lines+=child.lines;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return _this2;}_inherits(TextNode,_Text3);return _createClass(TextNode,[{key:"lineInner",value:function lineInner(target,isLine,line,offset){for(var _i5=0;;_i5++){var child=this.children[_i5],end=offset+child.length,endLine=line+child.lines-1;if((isLine?endLine:end)>=target)return child.lineInner(target,isLine,line,offset);offset=end+1;line=endLine+1;}}},{key:"decompose",value:function decompose(from,to,target,open){for(var _i6=0,pos=0;pos<=to&&_i6<this.children.length;_i6++){var child=this.children[_i6],end=pos+child.length;if(from<=end&&to>=pos){var childOpen=open&((pos<=from?1:0)|(end>=to?2:0));if(pos>=from&&end<=to&&!childOpen)target.push(child);else child.decompose(from-pos,to-pos,target,childOpen);}pos=end+1;}}},{key:"replace",value:function replace(from,to,text){var _clip9=clip(this,from,to);var _clip0=_slicedToArray(_clip9,2);from=_clip0[0];to=_clip0[1];if(text.lines<this.lines)for(var _i7=0,pos=0;_i7<this.children.length;_i7++){var child=this.children[_i7],end=pos+child.length;if(from>=pos&&to<=end){var updated=child.replace(from-pos,to-pos,text);var totalLines=this.lines-child.lines+updated.lines;if(updated.lines<totalLines>>5-1&&updated.lines>totalLines>>5+1){var copy=this.children.slice();copy[_i7]=updated;return new _TextNode(copy,this.length-(to-from)+text.length);}return _superPropGet(TextNode,"replace",this,3)([pos,end,updated]);}pos=end+1;}return _superPropGet(TextNode,"replace",this,3)([from,to,text]);}},{key:"sliceString",value:function sliceString(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.length;var lineSep=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"\n";var _clip1=clip(this,from,to);var _clip10=_slicedToArray(_clip1,2);from=_clip10[0];to=_clip10[1];var result="";for(var _i8=0,pos=0;_i8<this.children.length&&pos<=to;_i8++){var child=this.children[_i8],end=pos+child.length;if(pos>from&&_i8)result+=lineSep;if(from<end&&to>pos)result+=child.sliceString(from-pos,to-pos,lineSep);pos=end+1;}return result;}},{key:"flatten",value:function flatten(target){var _iterator4=_createForOfIteratorHelper(this.children),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var child=_step4.value;child.flatten(target);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}},{key:"scanIdentical",value:function scanIdentical(other,dir){if(!(other instanceof _TextNode))return 0;var length=0;var _ref=dir>0?[0,0,this.children.length,other.children.length]:[this.children.length-1,other.children.length-1,-1,-1],_ref2=_slicedToArray(_ref,4),iA=_ref2[0],iB=_ref2[1],eA=_ref2[2],eB=_ref2[3];for(;;iA+=dir,iB+=dir){if(iA==eA||iB==eB)return length;var chA=this.children[iA],chB=other.children[iB];if(chA!=chB)return length+chA.scanIdentical(chB,dir);length+=chA.length+1;}}}],[{key:"from",value:function from(children){var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:children.reduce(function(l,ch){return l+ch.length+1;},-1);var lines=0;var _iterator5=_createForOfIteratorHelper(children),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _ch=_step5.value;lines+=_ch.lines;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}if(lines<32){var flat=[];var _iterator6=_createForOfIteratorHelper(children),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var ch=_step6.value;ch.flatten(flat);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return new _TextLeaf(flat,length);}var chunk=Math.max(32,lines>>5),maxChunk=chunk<<1,minChunk=chunk>>1;var chunked=[],currentLines=0,currentLen=-1,currentChunk=[];function add2(child){var last;if(child.lines>maxChunk&&child instanceof _TextNode){var _iterator7=_createForOfIteratorHelper(child.children),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var node=_step7.value;add2(node);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}else if(child.lines>minChunk&&(currentLines>minChunk||!currentLines)){flush();chunked.push(child);}else if(child instanceof _TextLeaf&&currentLines&&(last=currentChunk[currentChunk.length-1])instanceof _TextLeaf&&child.lines+last.lines<=32){currentLines+=child.lines;currentLen+=child.length+1;currentChunk[currentChunk.length-1]=new _TextLeaf(last.text.concat(child.text),last.length+1+child.length);}else{if(currentLines+child.lines>chunk)flush();currentLines+=child.lines;currentLen+=child.length+1;currentChunk.push(child);}}function flush(){if(currentLines==0)return;chunked.push(currentChunk.length==1?currentChunk[0]:_TextNode.from(currentChunk,currentLen));currentLen=-1;currentLines=currentChunk.length=0;}var _iterator8=_createForOfIteratorHelper(children),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var child=_step8.value;add2(child);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}flush();return chunked.length==1?chunked[0]:new _TextNode(chunked,length);}}]);}(_Text);_Text.empty=/* @__PURE__ */new _TextLeaf([""],0);function textLength(text){var length=-1;var _iterator9=_createForOfIteratorHelper(text),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var line=_step9.value;length+=line.length+1;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return length;}function appendText(text,target){var from=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var to=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1e9;for(var pos=0,_i9=0,first=true;_i9<text.length&&pos<=to;_i9++){var line=text[_i9],end=pos+line.length;if(end>=from){if(end>to)line=line.slice(0,to-pos);if(pos<from)line=line.slice(from-pos);if(first){target[target.length-1]+=line;first=false;}else target.push(line);}pos=end+1;}return target;}function sliceText(text,from,to){return appendText(text,[""],from,to);}var RawTextCursor=/*#__PURE__*/function(){function RawTextCursor(text){var dir=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;_classCallCheck(this,RawTextCursor);this.dir=dir;this.done=false;this.lineBreak=false;this.value="";this.nodes=[text];this.offsets=[dir>0?1:(text instanceof _TextLeaf?text.text.length:text.children.length)<<1];}return _createClass(RawTextCursor,[{key:"nextInner",value:function nextInner(skip,dir){this.done=this.lineBreak=false;for(;;){var last=this.nodes.length-1;var top2=this.nodes[last],offsetValue=this.offsets[last],offset=offsetValue>>1;var size=top2 instanceof _TextLeaf?top2.text.length:top2.children.length;if(offset==(dir>0?size:0)){if(last==0){this.done=true;this.value="";return this;}if(dir>0)this.offsets[last-1]++;this.nodes.pop();this.offsets.pop();}else if((offsetValue&1)==(dir>0?0:1)){this.offsets[last]+=dir;if(skip==0){this.lineBreak=true;this.value="\n";return this;}skip--;}else if(top2 instanceof _TextLeaf){var next=top2.text[offset+(dir<0?-1:0)];this.offsets[last]+=dir;if(next.length>Math.max(0,skip)){this.value=skip==0?next:dir>0?next.slice(skip):next.slice(0,next.length-skip);return this;}skip-=next.length;}else{var _next=top2.children[offset+(dir<0?-1:0)];if(skip>_next.length){skip-=_next.length;this.offsets[last]+=dir;}else{if(dir<0)this.offsets[last]--;this.nodes.push(_next);this.offsets.push(dir>0?1:(_next instanceof _TextLeaf?_next.text.length:_next.children.length)<<1);}}}}},{key:"next",value:function next(){var skip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(skip<0){this.nextInner(-skip,-this.dir);skip=this.value.length;}return this.nextInner(skip,this.dir);}}]);}();var PartialTextCursor=/*#__PURE__*/function(){function PartialTextCursor(text,start,end){_classCallCheck(this,PartialTextCursor);this.value="";this.done=false;this.cursor=new RawTextCursor(text,start>end?-1:1);this.pos=start>end?text.length:0;this.from=Math.min(start,end);this.to=Math.max(start,end);}return _createClass(PartialTextCursor,[{key:"nextInner",value:function nextInner(skip,dir){if(dir<0?this.pos<=this.from:this.pos>=this.to){this.value="";this.done=true;return this;}skip+=Math.max(0,dir<0?this.pos-this.to:this.from-this.pos);var limit=dir<0?this.pos-this.from:this.to-this.pos;if(skip>limit)skip=limit;limit-=skip;var _this$cursor$next=this.cursor.next(skip),value=_this$cursor$next.value;this.pos+=(value.length+skip)*dir;this.value=value.length<=limit?value:dir<0?value.slice(value.length-limit):value.slice(0,limit);this.done=!this.value;return this;}},{key:"next",value:function next(){var skip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(skip<0)skip=Math.max(skip,this.from-this.pos);else if(skip>0)skip=Math.min(skip,this.to-this.pos);return this.nextInner(skip,this.cursor.dir);}},{key:"lineBreak",get:function get(){return this.cursor.lineBreak&&this.value!="";}}]);}();var LineCursor=/*#__PURE__*/function(){function LineCursor(inner){_classCallCheck(this,LineCursor);this.inner=inner;this.afterBreak=true;this.value="";this.done=false;}return _createClass(LineCursor,[{key:"next",value:function next(){var skip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var _this$inner$next=this.inner.next(skip),done=_this$inner$next.done,lineBreak=_this$inner$next.lineBreak,value=_this$inner$next.value;if(done&&this.afterBreak){this.value="";this.afterBreak=false;}else if(done){this.done=true;this.value="";}else if(lineBreak){if(this.afterBreak){this.value="";}else{this.afterBreak=true;this.next();}}else{this.value=value;this.afterBreak=false;}return this;}},{key:"lineBreak",get:function get(){return false;}}]);}();if(typeof Symbol!="undefined"){_Text.prototype[Symbol.iterator]=function(){return this.iter();};RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this;};}var Line=/*#__PURE__*/function(){function Line(from,to,number2,text){_classCallCheck(this,Line);this.from=from;this.to=to;this.number=number2;this.text=text;}return _createClass(Line,[{key:"length",get:function get(){return this.to-this.from;}}]);}();function clip(text,from,to){from=Math.max(0,Math.min(text.length,from));return[from,Math.max(from,Math.min(text.length,to))];}function findClusterBreak2(str,pos){var forward=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var includeExtending=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return findClusterBreak(str,pos,forward,includeExtending);}function surrogateLow2(ch){return ch>=56320&&ch<57344;}function surrogateHigh2(ch){return ch>=55296&&ch<56320;}function codePointAt2(str,pos){var code0=str.charCodeAt(pos);if(!surrogateHigh2(code0)||pos+1==str.length)return code0;var code1=str.charCodeAt(pos+1);if(!surrogateLow2(code1))return code0;return(code0-55296<<10)+(code1-56320)+65536;}function fromCodePoint(code){if(code<=65535)return String.fromCharCode(code);code-=65536;return String.fromCharCode((code>>10)+55296,(code&1023)+56320);}function codePointSize2(code){return code<65536?1:2;}var DefaultSplit=/\r\n?|\n/;var MapMode=/* @__PURE__ */function(MapMode2){MapMode2[MapMode2["Simple"]=0]="Simple";MapMode2[MapMode2["TrackDel"]=1]="TrackDel";MapMode2[MapMode2["TrackBefore"]=2]="TrackBefore";MapMode2[MapMode2["TrackAfter"]=3]="TrackAfter";return MapMode2;}(MapMode||(MapMode={}));var _ChangeDesc=/*#__PURE__*/function(){function ChangeDesc(sections){_classCallCheck(this,ChangeDesc);this.sections=sections;}return _createClass(ChangeDesc,[{key:"length",get:function get(){var result=0;for(var _i0=0;_i0<this.sections.length;_i0+=2)result+=this.sections[_i0];return result;}},{key:"newLength",get:function get(){var result=0;for(var _i1=0;_i1<this.sections.length;_i1+=2){var ins=this.sections[_i1+1];result+=ins<0?this.sections[_i1]:ins;}return result;}},{key:"empty",get:function get(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0;}},{key:"iterGaps",value:function iterGaps(f){for(var _i10=0,posA=0,posB=0;_i10<this.sections.length;){var len=this.sections[_i10++],ins=this.sections[_i10++];if(ins<0){f(posA,posB,len);posB+=len;}else{posB+=ins;}posA+=len;}}},{key:"iterChangedRanges",value:function iterChangedRanges(f){var individual=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_iterChanges(this,f,individual);}},{key:"invertedDesc",get:function get(){var sections=[];for(var _i11=0;_i11<this.sections.length;){var len=this.sections[_i11++],ins=this.sections[_i11++];if(ins<0)sections.push(len,ins);else sections.push(ins,len);}return new _ChangeDesc(sections);}},{key:"composeDesc",value:function composeDesc(other){return this.empty?other:other.empty?this:composeSets(this,other);}},{key:"mapDesc",value:function mapDesc(other){var before=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return other.empty?this:mapSet(this,other,before);}},{key:"mapPos",value:function mapPos(pos){var assoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:MapMode.Simple;var posA=0,posB=0;for(var _i12=0;_i12<this.sections.length;){var len=this.sections[_i12++],ins=this.sections[_i12++],endA=posA+len;if(ins<0){if(endA>pos)return posB+(pos-posA);posB+=len;}else{if(mode!=MapMode.Simple&&endA>=pos&&(mode==MapMode.TrackDel&&posA<pos&&endA>pos||mode==MapMode.TrackBefore&&posA<pos||mode==MapMode.TrackAfter&&endA>pos))return null;if(endA>pos||endA==pos&&assoc<0&&!len)return pos==posA||assoc<0?posB:posB+ins;posB+=ins;}posA=endA;}if(pos>posA)throw new RangeError("Position ".concat(pos," is out of range for changeset of length ").concat(posA));return posB;}},{key:"touchesRange",value:function touchesRange(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;for(var _i13=0,pos=0;_i13<this.sections.length&&pos<=to;){var len=this.sections[_i13++],ins=this.sections[_i13++],end=pos+len;if(ins>=0&&pos<=to&&end>=from)return pos<from&&end>to?"cover":true;pos=end;}return false;}},{key:"toString",value:function toString(){var result="";for(var _i14=0;_i14<this.sections.length;){var len=this.sections[_i14++],ins=this.sections[_i14++];result+=(result?" ":"")+len+(ins>=0?":"+ins:"");}return result;}},{key:"toJSON",value:function toJSON(){return this.sections;}}],[{key:"fromJSON",value:function fromJSON(json){if(!Array.isArray(json)||json.length%2||json.some(function(a){return typeof a!="number";}))throw new RangeError("Invalid JSON representation of ChangeDesc");return new _ChangeDesc(json);}},{key:"create",value:function create(sections){return new _ChangeDesc(sections);}}]);}();var _ChangeSet=/*#__PURE__*/function(_ChangeDesc2){function ChangeSet(sections,inserted){var _this3;_classCallCheck(this,ChangeSet);_this3=_callSuper(this,ChangeSet,[sections]);_this3.inserted=inserted;return _this3;}_inherits(ChangeSet,_ChangeDesc2);return _createClass(ChangeSet,[{key:"apply",value:function apply(doc2){if(this.length!=doc2.length)throw new RangeError("Applying change set to a document with the wrong length");_iterChanges(this,function(fromA,toA,fromB,_toB,text){return doc2=doc2.replace(fromB,fromB+(toA-fromA),text);},false);return doc2;}},{key:"mapDesc",value:function mapDesc(other){var before=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return mapSet(this,other,before,true);}},{key:"invert",value:function invert(doc2){var sections=this.sections.slice(),inserted=[];for(var _i15=0,pos=0;_i15<sections.length;_i15+=2){var len=sections[_i15],ins=sections[_i15+1];if(ins>=0){sections[_i15]=ins;sections[_i15+1]=len;var index=_i15>>1;while(inserted.length<index)inserted.push(_Text.empty);inserted.push(len?doc2.slice(pos,pos+len):_Text.empty);}pos+=len;}return new _ChangeSet(sections,inserted);}},{key:"compose",value:function compose(other){return this.empty?other:other.empty?this:composeSets(this,other,true);}},{key:"map",value:function map(other){var before=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return other.empty?this:mapSet(this,other,before,true);}},{key:"iterChanges",value:function iterChanges(f){var individual=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_iterChanges(this,f,individual);}},{key:"desc",get:function get(){return _ChangeDesc.create(this.sections);}},{key:"filter",value:function filter(ranges){var resultSections=[],resultInserted=[],filteredSections=[];var iter=new SectionIter(this);done:for(var _i16=0,pos=0;;){var next=_i16==ranges.length?1e9:ranges[_i16++];while(pos<next||pos==next&&iter.len==0){if(iter.done)break done;var len=Math.min(iter.len,next-pos);addSection(filteredSections,len,-1);var ins=iter.ins==-1?-1:iter.off==0?iter.ins:0;addSection(resultSections,len,ins);if(ins>0)addInsert(resultInserted,resultSections,iter.text);iter.forward(len);pos+=len;}var end=ranges[_i16++];while(pos<end){if(iter.done)break done;var _len=Math.min(iter.len,end-pos);addSection(resultSections,_len,-1);addSection(filteredSections,_len,iter.ins==-1?-1:iter.off==0?iter.ins:0);iter.forward(_len);pos+=_len;}}return{changes:new _ChangeSet(resultSections,resultInserted),filtered:_ChangeDesc.create(filteredSections)};}},{key:"toJSON",value:function toJSON(){var parts=[];for(var _i17=0;_i17<this.sections.length;_i17+=2){var len=this.sections[_i17],ins=this.sections[_i17+1];if(ins<0)parts.push(len);else if(ins==0)parts.push([len]);else parts.push([len].concat(this.inserted[_i17>>1].toJSON()));}return parts;}}],[{key:"of",value:function of(changes,length,lineSep){var sections=[],inserted=[],pos=0;var total=null;function flush(){var force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!force&&!sections.length)return;if(pos<length)addSection(sections,length-pos,-1);var set=new _ChangeSet(sections,inserted);total=total?total.compose(set.map(total)):set;sections=[];inserted=[];pos=0;}function process2(spec){if(Array.isArray(spec)){var _iterator0=_createForOfIteratorHelper(spec),_step0;try{for(_iterator0.s();!(_step0=_iterator0.n()).done;){var sub=_step0.value;process2(sub);}}catch(err){_iterator0.e(err);}finally{_iterator0.f();}}else if(spec instanceof _ChangeSet){if(spec.length!=length)throw new RangeError("Mismatched change set length (got ".concat(spec.length,", expected ").concat(length,")"));flush();total=total?total.compose(spec.map(total)):spec;}else{var from=spec.from,_spec$to=spec.to,to=_spec$to===void 0?from:_spec$to,insert2=spec.insert;if(from>to||from<0||to>length)throw new RangeError("Invalid change range ".concat(from," to ").concat(to," (in doc of length ").concat(length,")"));var insText=!insert2?_Text.empty:typeof insert2=="string"?_Text.of(insert2.split(lineSep||DefaultSplit)):insert2;var insLen=insText.length;if(from==to&&insLen==0)return;if(from<pos)flush();if(from>pos)addSection(sections,from-pos,-1);addSection(sections,to-from,insLen);addInsert(inserted,sections,insText);pos=to;}}process2(changes);flush(!total);return total;}},{key:"empty",value:function empty(length){return new _ChangeSet(length?[length,-1]:[],[]);}},{key:"fromJSON",value:function fromJSON(json){if(!Array.isArray(json))throw new RangeError("Invalid JSON representation of ChangeSet");var sections=[],inserted=[];for(var _i18=0;_i18<json.length;_i18++){var part=json[_i18];if(typeof part=="number"){sections.push(part,-1);}else if(!Array.isArray(part)||typeof part[0]!="number"||part.some(function(e,i2){return i2&&typeof e!="string";})){throw new RangeError("Invalid JSON representation of ChangeSet");}else if(part.length==1){sections.push(part[0],0);}else{while(inserted.length<_i18)inserted.push(_Text.empty);inserted[_i18]=_Text.of(part.slice(1));sections.push(part[0],inserted[_i18].length);}}return new _ChangeSet(sections,inserted);}},{key:"createSet",value:function createSet(sections,inserted){return new _ChangeSet(sections,inserted);}}]);}(_ChangeDesc);function addSection(sections,len,ins){var forceJoin=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(len==0&&ins<=0)return;var last=sections.length-2;if(last>=0&&ins<=0&&ins==sections[last+1])sections[last]+=len;else if(last>=0&&len==0&&sections[last]==0)sections[last+1]+=ins;else if(forceJoin){sections[last]+=len;sections[last+1]+=ins;}else sections.push(len,ins);}function addInsert(values2,sections,value){if(value.length==0)return;var index=sections.length-2>>1;if(index<values2.length){values2[values2.length-1]=values2[values2.length-1].append(value);}else{while(values2.length<index)values2.push(_Text.empty);values2.push(value);}}function _iterChanges(desc,f,individual){var inserted=desc.inserted;for(var posA=0,posB=0,_i19=0;_i19<desc.sections.length;){var len=desc.sections[_i19++],ins=desc.sections[_i19++];if(ins<0){posA+=len;posB+=len;}else{var endA=posA,endB=posB,text=_Text.empty;for(;;){endA+=len;endB+=ins;if(ins&&inserted)text=text.append(inserted[_i19-2>>1]);if(individual||_i19==desc.sections.length||desc.sections[_i19+1]<0)break;len=desc.sections[_i19++];ins=desc.sections[_i19++];}f(posA,endA,posB,endB,text);posA=endA;posB=endB;}}}function mapSet(setA,setB,before){var mkSet=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var sections=[],insert2=mkSet?[]:null;var a=new SectionIter(setA),b=new SectionIter(setB);for(var inserted=-1;;){if(a.done&&b.len||b.done&&a.len){throw new Error("Mismatched change set lengths");}else if(a.ins==-1&&b.ins==-1){var len=Math.min(a.len,b.len);addSection(sections,len,-1);a.forward(len);b.forward(len);}else if(b.ins>=0&&(a.ins<0||inserted==a.i||a.off==0&&(b.len<a.len||b.len==a.len&&!before))){var _len2=b.len;addSection(sections,b.ins,-1);while(_len2){var piece=Math.min(a.len,_len2);if(a.ins>=0&&inserted<a.i&&a.len<=piece){addSection(sections,0,a.ins);if(insert2)addInsert(insert2,sections,a.text);inserted=a.i;}a.forward(piece);_len2-=piece;}b.next();}else if(a.ins>=0){var _len3=0,left=a.len;while(left){if(b.ins==-1){var _piece=Math.min(left,b.len);_len3+=_piece;left-=_piece;b.forward(_piece);}else if(b.ins==0&&b.len<left){left-=b.len;b.next();}else{break;}}addSection(sections,_len3,inserted<a.i?a.ins:0);if(insert2&&inserted<a.i)addInsert(insert2,sections,a.text);inserted=a.i;a.forward(a.len-left);}else if(a.done&&b.done){return insert2?_ChangeSet.createSet(sections,insert2):_ChangeDesc.create(sections);}else{throw new Error("Mismatched change set lengths");}}}function composeSets(setA,setB){var mkSet=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var sections=[];var insert2=mkSet?[]:null;var a=new SectionIter(setA),b=new SectionIter(setB);for(var open=false;;){if(a.done&&b.done){return insert2?_ChangeSet.createSet(sections,insert2):_ChangeDesc.create(sections);}else if(a.ins==0){addSection(sections,a.len,0,open);a.next();}else if(b.len==0&&!b.done){addSection(sections,0,b.ins,open);if(insert2)addInsert(insert2,sections,b.text);b.next();}else if(a.done||b.done){throw new Error("Mismatched change set lengths");}else{var len=Math.min(a.len2,b.len),sectionLen=sections.length;if(a.ins==-1){var insB=b.ins==-1?-1:b.off?0:b.ins;addSection(sections,len,insB,open);if(insert2&&insB)addInsert(insert2,sections,b.text);}else if(b.ins==-1){addSection(sections,a.off?0:a.len,len,open);if(insert2)addInsert(insert2,sections,a.textBit(len));}else{addSection(sections,a.off?0:a.len,b.off?0:b.ins,open);if(insert2&&!b.off)addInsert(insert2,sections,b.text);}open=(a.ins>len||b.ins>=0&&b.len>len)&&(open||sections.length>sectionLen);a.forward2(len);b.forward(len);}}}var SectionIter=/*#__PURE__*/function(){function SectionIter(set){_classCallCheck(this,SectionIter);this.set=set;this.i=0;this.next();}return _createClass(SectionIter,[{key:"next",value:function next(){var sections=this.set.sections;if(this.i<sections.length){this.len=sections[this.i++];this.ins=sections[this.i++];}else{this.len=0;this.ins=-2;}this.off=0;}},{key:"done",get:function get(){return this.ins==-2;}},{key:"len2",get:function get(){return this.ins<0?this.len:this.ins;}},{key:"text",get:function get(){var inserted=this.set.inserted,index=this.i-2>>1;return index>=inserted.length?_Text.empty:inserted[index];}},{key:"textBit",value:function textBit(len){var inserted=this.set.inserted,index=this.i-2>>1;return index>=inserted.length&&!len?_Text.empty:inserted[index].slice(this.off,len==null?void 0:this.off+len);}},{key:"forward",value:function forward(len){if(len==this.len)this.next();else{this.len-=len;this.off+=len;}}},{key:"forward2",value:function forward2(len){if(this.ins==-1)this.forward(len);else if(len==this.ins)this.next();else{this.ins-=len;this.off+=len;}}}]);}();var _SelectionRange=/*#__PURE__*/function(){function SelectionRange(from,to,flags){_classCallCheck(this,SelectionRange);this.from=from;this.to=to;this.flags=flags;}return _createClass(SelectionRange,[{key:"anchor",get:function get(){return this.flags&32?this.to:this.from;}},{key:"head",get:function get(){return this.flags&32?this.from:this.to;}},{key:"empty",get:function get(){return this.from==this.to;}},{key:"assoc",get:function get(){return this.flags&8?-1:this.flags&16?1:0;}},{key:"bidiLevel",get:function get(){var level=this.flags&7;return level==7?null:level;}},{key:"goalColumn",get:function get(){var value=this.flags>>6;return value==16777215?void 0:value;}},{key:"map",value:function map(change){var assoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var from,to;if(this.empty){from=to=change.mapPos(this.from,assoc);}else{from=change.mapPos(this.from,1);to=change.mapPos(this.to,-1);}return from==this.from&&to==this.to?this:new _SelectionRange(from,to,this.flags);}},{key:"extend",value:function extend(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;if(from<=this.anchor&&to>=this.anchor)return _EditorSelection.range(from,to);var head=Math.abs(from-this.anchor)>Math.abs(to-this.anchor)?from:to;return _EditorSelection.range(this.anchor,head);}},{key:"eq",value:function eq(other){var includeAssoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.anchor==other.anchor&&this.head==other.head&&(!includeAssoc||!this.empty||this.assoc==other.assoc);}},{key:"toJSON",value:function toJSON(){return{anchor:this.anchor,head:this.head};}}],[{key:"fromJSON",value:function fromJSON(json){if(!json||typeof json.anchor!="number"||typeof json.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return _EditorSelection.range(json.anchor,json.head);}},{key:"create",value:function create(from,to,flags){return new _SelectionRange(from,to,flags);}}]);}();var _EditorSelection=/*#__PURE__*/function(){function EditorSelection(ranges,mainIndex){_classCallCheck(this,EditorSelection);this.ranges=ranges;this.mainIndex=mainIndex;}return _createClass(EditorSelection,[{key:"map",value:function map(change){var assoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(change.empty)return this;return _EditorSelection.create(this.ranges.map(function(r){return r.map(change,assoc);}),this.mainIndex);}},{key:"eq",value:function eq(other){var includeAssoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.ranges.length!=other.ranges.length||this.mainIndex!=other.mainIndex)return false;for(var _i20=0;_i20<this.ranges.length;_i20++)if(!this.ranges[_i20].eq(other.ranges[_i20],includeAssoc))return false;return true;}},{key:"main",get:function get(){return this.ranges[this.mainIndex];}},{key:"asSingle",value:function asSingle(){return this.ranges.length==1?this:new _EditorSelection([this.main],0);}},{key:"addRange",value:function addRange(range){var main=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return _EditorSelection.create([range].concat(this.ranges),main?0:this.mainIndex+1);}},{key:"replaceRange",value:function replaceRange(range){var which=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.mainIndex;var ranges=this.ranges.slice();ranges[which]=range;return _EditorSelection.create(ranges,this.mainIndex);}},{key:"toJSON",value:function toJSON(){return{ranges:this.ranges.map(function(r){return r.toJSON();}),main:this.mainIndex};}}],[{key:"fromJSON",value:function fromJSON(json){if(!json||!Array.isArray(json.ranges)||typeof json.main!="number"||json.main>=json.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _EditorSelection(json.ranges.map(function(r){return _SelectionRange.fromJSON(r);}),json.main);}},{key:"single",value:function single(anchor){var head=arguments.length>1&&arguments[1]!==undefined?arguments[1]:anchor;return new _EditorSelection([_EditorSelection.range(anchor,head)],0);}},{key:"create",value:function create(ranges){var mainIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(ranges.length==0)throw new RangeError("A selection needs at least one range");for(var pos=0,_i21=0;_i21<ranges.length;_i21++){var range=ranges[_i21];if(range.empty?range.from<=pos:range.from<pos)return _EditorSelection.normalized(ranges.slice(),mainIndex);pos=range.to;}return new _EditorSelection(ranges,mainIndex);}},{key:"cursor",value:function cursor(pos){var assoc=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var bidiLevel=arguments.length>2?arguments[2]:undefined;var goalColumn=arguments.length>3?arguments[3]:undefined;return _SelectionRange.create(pos,pos,(assoc==0?0:assoc<0?8:16)|(bidiLevel==null?7:Math.min(6,bidiLevel))|(goalColumn!==null&&goalColumn!==void 0?goalColumn:16777215)<<6);}},{key:"range",value:function range(anchor,head,goalColumn,bidiLevel){var flags=(goalColumn!==null&&goalColumn!==void 0?goalColumn:16777215)<<6|(bidiLevel==null?7:Math.min(6,bidiLevel));return head<anchor?_SelectionRange.create(head,anchor,32|16|flags):_SelectionRange.create(anchor,head,(head>anchor?8:0)|flags);}},{key:"normalized",value:function normalized(ranges){var mainIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var main=ranges[mainIndex];ranges.sort(function(a,b){return a.from-b.from;});mainIndex=ranges.indexOf(main);for(var _i22=1;_i22<ranges.length;_i22++){var range=ranges[_i22],prev=ranges[_i22-1];if(range.empty?range.from<=prev.to:range.from<prev.to){var from=prev.from,to=Math.max(range.to,prev.to);if(_i22<=mainIndex)mainIndex--;ranges.splice(--_i22,2,range.anchor>range.head?_EditorSelection.range(to,from):_EditorSelection.range(from,to));}}return new _EditorSelection(ranges,mainIndex);}}]);}();function checkSelection(selection2,docLength){var _iterator1=_createForOfIteratorHelper(selection2.ranges),_step1;try{for(_iterator1.s();!(_step1=_iterator1.n()).done;){var range=_step1.value;if(range.to>docLength)throw new RangeError("Selection points outside of document");}}catch(err){_iterator1.e(err);}finally{_iterator1.f();}}var nextID=0;var _Facet=/*#__PURE__*/function(){function Facet(combine,compareInput,compare2,isStatic,enables){_classCallCheck(this,Facet);this.combine=combine;this.compareInput=compareInput;this.compare=compare2;this.isStatic=isStatic;this.id=nextID++;this["default"]=combine([]);this.extensions=typeof enables=="function"?enables(this):enables;}return _createClass(Facet,[{key:"reader",get:function get(){return this;}},{key:"of",value:function of(value){return new FacetProvider([],this,0,value);}},{key:"compute",value:function compute(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,1,get);}},{key:"computeN",value:function computeN(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,2,get);}},{key:"from",value:function from(field,get){if(!get)get=function get(x){return x;};return this.compute([field],function(state){return get(state.field(field));});}}],[{key:"define",value:function define(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new _Facet(config2.combine||function(a){return a;},config2.compareInput||function(a,b){return a===b;},config2.compare||(!config2.combine?sameArray:function(a,b){return a===b;}),!!config2["static"],config2.enables);}}]);}();function sameArray(a,b){return a==b||a.length==b.length&&a.every(function(e,i){return e===b[i];});}var FacetProvider=/*#__PURE__*/function(){function FacetProvider(dependencies,facet,type,value){_classCallCheck(this,FacetProvider);this.dependencies=dependencies;this.facet=facet;this.type=type;this.value=value;this.id=nextID++;}return _createClass(FacetProvider,[{key:"dynamicSlot",value:function dynamicSlot(addresses){var _this4=this;var _a2;var getter=this.value;var compare2=this.facet.compareInput;var id2=this.id,idx=addresses[id2]>>1,multi=this.type==2;var depDoc=false,depSel=false,depAddrs=[];var _iterator10=_createForOfIteratorHelper(this.dependencies),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var dep=_step10.value;if(dep=="doc")depDoc=true;else if(dep=="selection")depSel=true;else if((((_a2=addresses[dep.id])!==null&&_a2!==void 0?_a2:1)&1)==0)depAddrs.push(addresses[dep.id]);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return{create:function create(state){state.values[idx]=getter(state);return 1;},update:function update(state,tr){if(depDoc&&tr.docChanged||depSel&&(tr.docChanged||tr.selection)||ensureAll(state,depAddrs)){var newVal=getter(state);if(multi?!compareArray(newVal,state.values[idx],compare2):!compare2(newVal,state.values[idx])){state.values[idx]=newVal;return 1;}}return 0;},reconfigure:function reconfigure(state,oldState){var newVal,oldAddr=oldState.config.address[id2];if(oldAddr!=null){var oldVal=getAddr(oldState,oldAddr);if(_this4.dependencies.every(function(dep){return dep instanceof _Facet?oldState.facet(dep)===state.facet(dep):dep instanceof _StateField?oldState.field(dep,false)==state.field(dep,false):true;})||(multi?compareArray(newVal=getter(state),oldVal,compare2):compare2(newVal=getter(state),oldVal))){state.values[idx]=oldVal;return 0;}}else{newVal=getter(state);}state.values[idx]=newVal;return 1;}};}}]);}();function compareArray(a,b,compare2){if(a.length!=b.length)return false;for(var _i23=0;_i23<a.length;_i23++)if(!compare2(a[_i23],b[_i23]))return false;return true;}function ensureAll(state,addrs){var changed=false;var _iterator11=_createForOfIteratorHelper(addrs),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var addr=_step11.value;if(ensureAddr(state,addr)&1)changed=true;}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}return changed;}function dynamicFacetSlot(addresses,facet,providers){var providerAddrs=providers.map(function(p){return addresses[p.id];});var providerTypes=providers.map(function(p){return p.type;});var dynamic=providerAddrs.filter(function(p){return!(p&1);});var idx=addresses[facet.id]>>1;function get(state){var values2=[];for(var _i24=0;_i24<providerAddrs.length;_i24++){var value=getAddr(state,providerAddrs[_i24]);if(providerTypes[_i24]==2){var _iterator12=_createForOfIteratorHelper(value),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var val=_step12.value;values2.push(val);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}else values2.push(value);}return facet.combine(values2);}return{create:function create(state){var _iterator13=_createForOfIteratorHelper(providerAddrs),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var addr=_step13.value;ensureAddr(state,addr);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}state.values[idx]=get(state);return 1;},update:function update(state,tr){if(!ensureAll(state,dynamic))return 0;var value=get(state);if(facet.compare(value,state.values[idx]))return 0;state.values[idx]=value;return 1;},reconfigure:function reconfigure(state,oldState){var depChanged=ensureAll(state,providerAddrs);var oldProviders=oldState.config.facets[facet.id],oldValue=oldState.facet(facet);if(oldProviders&&!depChanged&&sameArray(providers,oldProviders)){state.values[idx]=oldValue;return 0;}var value=get(state);if(facet.compare(value,oldValue)){state.values[idx]=oldValue;return 0;}state.values[idx]=value;return 1;}};}var initField=/* @__PURE__ */_Facet.define({"static":true});var _StateField=/*#__PURE__*/function(){function StateField(id2,createF,updateF,compareF,spec){_classCallCheck(this,StateField);this.id=id2;this.createF=createF;this.updateF=updateF;this.compareF=compareF;this.spec=spec;this.provides=void 0;}return _createClass(StateField,[{key:"create",value:function create(state){var _this5=this;var init=state.facet(initField).find(function(i){return i.field==_this5;});return((init===null||init===void 0?void 0:init.create)||this.createF)(state);}},{key:"slot",value:function slot(addresses){var _this6=this;var idx=addresses[this.id]>>1;return{create:function create(state){state.values[idx]=_this6.create(state);return 1;},update:function update(state,tr){var oldVal=state.values[idx];var value=_this6.updateF(oldVal,tr);if(_this6.compareF(oldVal,value))return 0;state.values[idx]=value;return 1;},reconfigure:function reconfigure(state,oldState){var init=state.facet(initField),oldInit=oldState.facet(initField),reInit;if((reInit=init.find(function(i){return i.field==_this6;}))&&reInit!=oldInit.find(function(i){return i.field==_this6;})){state.values[idx]=reInit.create(state);return 1;}if(oldState.config.address[_this6.id]!=null){state.values[idx]=oldState.field(_this6);return 0;}state.values[idx]=_this6.create(state);return 1;}};}},{key:"init",value:function init(create){return[this,initField.of({field:this,create:create})];}},{key:"extension",get:function get(){return this;}}],[{key:"define",value:function define(config2){var field=new _StateField(nextID++,config2.create,config2.update,config2.compare||function(a,b){return a===b;},config2);if(config2.provide)field.provides=config2.provide(field);return field;}}]);}();var Prec_={lowest:4,low:3,"default":2,high:1,highest:0};function prec(value){return function(ext){return new PrecExtension(ext,value);};}var Prec={highest:/* @__PURE__ */prec(Prec_.highest),high:/* @__PURE__ */prec(Prec_.high),"default":/* @__PURE__ */prec(Prec_["default"]),low:/* @__PURE__ */prec(Prec_.low),lowest:/* @__PURE__ */prec(Prec_.lowest)};var PrecExtension=/*#__PURE__*/_createClass(function PrecExtension(inner,prec2){_classCallCheck(this,PrecExtension);this.inner=inner;this.prec=prec2;});var _Compartment=/*#__PURE__*/function(){function Compartment(){_classCallCheck(this,Compartment);}return _createClass(Compartment,[{key:"of",value:function of(ext){return new CompartmentInstance(this,ext);}},{key:"reconfigure",value:function reconfigure(content2){return _Compartment.reconfigure.of({compartment:this,extension:content2});}},{key:"get",value:function get(state){return state.config.compartments.get(this);}}]);}();var CompartmentInstance=/*#__PURE__*/_createClass(function CompartmentInstance(compartment,inner){_classCallCheck(this,CompartmentInstance);this.compartment=compartment;this.inner=inner;});var _Configuration=/*#__PURE__*/function(){function Configuration(base2,compartments,dynamicSlots,address,staticValues,facets){_classCallCheck(this,Configuration);this.base=base2;this.compartments=compartments;this.dynamicSlots=dynamicSlots;this.address=address;this.staticValues=staticValues;this.facets=facets;this.statusTemplate=[];while(this.statusTemplate.length<dynamicSlots.length)this.statusTemplate.push(0);}return _createClass(Configuration,[{key:"staticFacet",value:function staticFacet(facet){var addr=this.address[facet.id];return addr==null?facet["default"]:this.staticValues[addr>>1];}}],[{key:"resolve",value:function resolve(base2,compartments,oldState){var fields=[];var facets=/* @__PURE__ */Object.create(null);var newCompartments=/* @__PURE__ */new Map();var _iterator14=_createForOfIteratorHelper(flatten(base2,compartments,newCompartments)),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var ext=_step14.value;if(ext instanceof _StateField)fields.push(ext);else(facets[ext.facet.id]||(facets[ext.facet.id]=[])).push(ext);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}var address=/* @__PURE__ */Object.create(null);var staticValues=[];var dynamicSlots=[];var _loop=function _loop(){var field=_fields[_i25];address[field.id]=dynamicSlots.length<<1;dynamicSlots.push(function(a){return field.slot(a);});};for(var _i25=0,_fields=fields;_i25<_fields.length;_i25++){_loop();}var oldFacets=oldState===null||oldState===void 0?void 0:oldState.config.facets;var _loop2=function _loop2(){var providers=facets[id2],facet=providers[0].facet;var oldProviders=oldFacets&&oldFacets[id2]||[];if(providers.every(function(p){return p.type==0;})){address[facet.id]=staticValues.length<<1|1;if(sameArray(oldProviders,providers)){staticValues.push(oldState.facet(facet));}else{var value=facet.combine(providers.map(function(p){return p.value;}));staticValues.push(oldState&&facet.compare(value,oldState.facet(facet))?oldState.facet(facet):value);}}else{var _iterator15=_createForOfIteratorHelper(providers),_step15;try{var _loop3=function _loop3(){var p=_step15.value;if(p.type==0){address[p.id]=staticValues.length<<1|1;staticValues.push(p.value);}else{address[p.id]=dynamicSlots.length<<1;dynamicSlots.push(function(a){return p.dynamicSlot(a);});}};for(_iterator15.s();!(_step15=_iterator15.n()).done;){_loop3();}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}address[facet.id]=dynamicSlots.length<<1;dynamicSlots.push(function(a){return dynamicFacetSlot(a,facet,providers);});}};for(var id2 in facets){_loop2();}var dynamic=dynamicSlots.map(function(f){return f(address);});return new _Configuration(base2,newCompartments,dynamic,address,staticValues,facets);}}]);}();function flatten(extension,compartments,newCompartments){var result=[[],[],[],[],[]];var seen=/* @__PURE__ */new Map();function inner(ext,prec2){var known=seen.get(ext);if(known!=null){if(known<=prec2)return;var found=result[known].indexOf(ext);if(found>-1)result[known].splice(found,1);if(ext instanceof CompartmentInstance)newCompartments["delete"](ext.compartment);}seen.set(ext,prec2);if(Array.isArray(ext)){var _iterator16=_createForOfIteratorHelper(ext),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var e=_step16.value;inner(e,prec2);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}else if(ext instanceof CompartmentInstance){if(newCompartments.has(ext.compartment))throw new RangeError("Duplicate use of compartment in extensions");var content2=compartments.get(ext.compartment)||ext.inner;newCompartments.set(ext.compartment,content2);inner(content2,prec2);}else if(ext instanceof PrecExtension){inner(ext.inner,ext.prec);}else if(ext instanceof _StateField){result[prec2].push(ext);if(ext.provides)inner(ext.provides,prec2);}else if(ext instanceof FacetProvider){result[prec2].push(ext);if(ext.facet.extensions)inner(ext.facet.extensions,Prec_["default"]);}else{var _content2=ext.extension;if(!_content2)throw new Error("Unrecognized extension value in extension set (".concat(ext,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));inner(_content2,prec2);}}inner(extension,Prec_["default"]);return result.reduce(function(a,b){return a.concat(b);});}function ensureAddr(state,addr){if(addr&1)return 2;var idx=addr>>1;var status=state.status[idx];if(status==4)throw new Error("Cyclic dependency between fields and/or facets");if(status&2)return status;state.status[idx]=4;var changed=state.computeSlot(state,state.config.dynamicSlots[idx]);return state.status[idx]=2|changed;}function getAddr(state,addr){return addr&1?state.config.staticValues[addr>>1]:state.values[addr>>1];}var languageData=/* @__PURE__ */_Facet.define();var allowMultipleSelections=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.some(function(v){return v;});},"static":true});var lineSeparator=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?values2[0]:void 0;},"static":true});var changeFilter=/* @__PURE__ */_Facet.define();var transactionFilter=/* @__PURE__ */_Facet.define();var transactionExtender=/* @__PURE__ */_Facet.define();var readOnly=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?values2[0]:false;}});var Annotation=/*#__PURE__*/function(){function Annotation(type,value){_classCallCheck(this,Annotation);this.type=type;this.value=value;}return _createClass(Annotation,null,[{key:"define",value:function define(){return new AnnotationType();}}]);}();var AnnotationType=/*#__PURE__*/function(){function AnnotationType(){_classCallCheck(this,AnnotationType);}return _createClass(AnnotationType,[{key:"of",value:function of(value){return new Annotation(this,value);}}]);}();var StateEffectType=/*#__PURE__*/function(){function StateEffectType(map){_classCallCheck(this,StateEffectType);this.map=map;}return _createClass(StateEffectType,[{key:"of",value:function of(value){return new _StateEffect(this,value);}}]);}();var _StateEffect=/*#__PURE__*/function(){function StateEffect(type,value){_classCallCheck(this,StateEffect);this.type=type;this.value=value;}return _createClass(StateEffect,[{key:"map",value:function map(mapping){var mapped=this.type.map(this.value,mapping);return mapped===void 0?void 0:mapped==this.value?this:new _StateEffect(this.type,mapped);}},{key:"is",value:function is(type){return this.type==type;}}],[{key:"define",value:function define(){var spec=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new StateEffectType(spec.map||function(v){return v;});}},{key:"mapEffects",value:function mapEffects(effects,mapping){if(!effects.length)return effects;var result=[];var _iterator17=_createForOfIteratorHelper(effects),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var effect=_step17.value;var mapped=effect.map(mapping);if(mapped)result.push(mapped);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return result;}}]);}();_StateEffect.reconfigure=/* @__PURE__ */_StateEffect.define();_StateEffect.appendConfig=/* @__PURE__ */_StateEffect.define();var _Transaction=/*#__PURE__*/function(){function Transaction(startState,changes,selection2,effects,annotations,scrollIntoView3){_classCallCheck(this,Transaction);this.startState=startState;this.changes=changes;this.selection=selection2;this.effects=effects;this.annotations=annotations;this.scrollIntoView=scrollIntoView3;this._doc=null;this._state=null;if(selection2)checkSelection(selection2,changes.newLength);if(!annotations.some(function(a){return a.type==_Transaction.time;}))this.annotations=annotations.concat(_Transaction.time.of(Date.now()));}return _createClass(Transaction,[{key:"newDoc",get:function get(){return this._doc||(this._doc=this.changes.apply(this.startState.doc));}},{key:"newSelection",get:function get(){return this.selection||this.startState.selection.map(this.changes);}},{key:"state",get:function get(){if(!this._state)this.startState.applyTransaction(this);return this._state;}},{key:"annotation",value:function annotation(type){var _iterator18=_createForOfIteratorHelper(this.annotations),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var ann=_step18.value;if(ann.type==type)return ann.value;}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}return void 0;}},{key:"docChanged",get:function get(){return!this.changes.empty;}},{key:"reconfigured",get:function get(){return this.startState.config!=this.state.config;}},{key:"isUserEvent",value:function isUserEvent(event){var e=this.annotation(_Transaction.userEvent);return!!(e&&(e==event||e.length>event.length&&e.slice(0,event.length)==event&&e[event.length]=="."));}}],[{key:"create",value:function create(startState,changes,selection2,effects,annotations,scrollIntoView3){return new _Transaction(startState,changes,selection2,effects,annotations,scrollIntoView3);}}]);}();_Transaction.time=/* @__PURE__ */Annotation.define();_Transaction.userEvent=/* @__PURE__ */Annotation.define();_Transaction.addToHistory=/* @__PURE__ */Annotation.define();_Transaction.remote=/* @__PURE__ */Annotation.define();function joinRanges(a,b){var result=[];for(var iA=0,iB=0;;){var from=void 0,to=void 0;if(iA<a.length&&(iB==b.length||b[iB]>=a[iA])){from=a[iA++];to=a[iA++];}else if(iB<b.length){from=b[iB++];to=b[iB++];}else return result;if(!result.length||result[result.length-1]<from)result.push(from,to);else if(result[result.length-1]<to)result[result.length-1]=to;}}function mergeTransaction(a,b,sequential){var _a2;var mapForA,mapForB,changes;if(sequential){mapForA=b.changes;mapForB=_ChangeSet.empty(b.changes.length);changes=a.changes.compose(b.changes);}else{mapForA=b.changes.map(a.changes);mapForB=a.changes.mapDesc(b.changes,true);changes=a.changes.compose(mapForA);}return{changes:changes,selection:b.selection?b.selection.map(mapForB):(_a2=a.selection)===null||_a2===void 0?void 0:_a2.map(mapForA),effects:_StateEffect.mapEffects(a.effects,mapForA).concat(_StateEffect.mapEffects(b.effects,mapForB)),annotations:a.annotations.length?a.annotations.concat(b.annotations):b.annotations,scrollIntoView:a.scrollIntoView||b.scrollIntoView};}function resolveTransactionInner(state,spec,docSize){var sel=spec.selection,annotations=asArray(spec.annotations);if(spec.userEvent)annotations=annotations.concat(_Transaction.userEvent.of(spec.userEvent));return{changes:spec.changes instanceof _ChangeSet?spec.changes:_ChangeSet.of(spec.changes||[],docSize,state.facet(lineSeparator)),selection:sel&&(sel instanceof _EditorSelection?sel:_EditorSelection.single(sel.anchor,sel.head)),effects:asArray(spec.effects),annotations:annotations,scrollIntoView:!!spec.scrollIntoView};}function resolveTransaction(state,specs,filter){var s=resolveTransactionInner(state,specs.length?specs[0]:{},state.doc.length);if(specs.length&&specs[0].filter===false)filter=false;for(var _i26=1;_i26<specs.length;_i26++){if(specs[_i26].filter===false)filter=false;var seq=!!specs[_i26].sequential;s=mergeTransaction(s,resolveTransactionInner(state,specs[_i26],seq?s.changes.newLength:state.doc.length),seq);}var tr=_Transaction.create(state,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return extendTransaction(filter?filterTransaction(tr):tr);}function filterTransaction(tr){var state=tr.startState;var result=true;var _iterator19=_createForOfIteratorHelper(state.facet(changeFilter)),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var filter=_step19.value;var value=filter(tr);if(value===false){result=false;break;}if(Array.isArray(value))result=result===true?value:joinRanges(result,value);}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}if(result!==true){var changes,back;if(result===false){back=tr.changes.invertedDesc;changes=_ChangeSet.empty(state.doc.length);}else{var filtered=tr.changes.filter(result);changes=filtered.changes;back=filtered.filtered.mapDesc(filtered.changes).invertedDesc;}tr=_Transaction.create(state,changes,tr.selection&&tr.selection.map(back),_StateEffect.mapEffects(tr.effects,back),tr.annotations,tr.scrollIntoView);}var filters=state.facet(transactionFilter);for(var _i27=filters.length-1;_i27>=0;_i27--){var _filtered=filters[_i27](tr);if(_filtered instanceof _Transaction)tr=_filtered;else if(Array.isArray(_filtered)&&_filtered.length==1&&_filtered[0]instanceof _Transaction)tr=_filtered[0];else tr=resolveTransaction(state,asArray(_filtered),false);}return tr;}function extendTransaction(tr){var state=tr.startState,extenders=state.facet(transactionExtender),spec=tr;for(var _i28=extenders.length-1;_i28>=0;_i28--){var extension=extenders[_i28](tr);if(extension&&Object.keys(extension).length)spec=mergeTransaction(spec,resolveTransactionInner(state,extension,tr.changes.newLength),true);}return spec==tr?tr:_Transaction.create(state,tr.changes,tr.selection,spec.effects,spec.annotations,spec.scrollIntoView);}var none=[];function asArray(value){return value==null?none:Array.isArray(value)?value:[value];}var CharCategory=/* @__PURE__ */function(CharCategory2){CharCategory2[CharCategory2["Word"]=0]="Word";CharCategory2[CharCategory2["Space"]=1]="Space";CharCategory2[CharCategory2["Other"]=2]="Other";return CharCategory2;}(CharCategory||(CharCategory={}));var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var wordChar;try{wordChar=/* @__PURE__ */new RegExp("[\\p{Alphabetic}\\p{Number}_]","u");}catch(_){}function hasWordChar(str){if(wordChar)return wordChar.test(str);for(var _i29=0;_i29<str.length;_i29++){var ch=str[_i29];if(/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch)))return true;}return false;}function makeCategorizer(wordChars){return function(_char){if(!/\S/.test(_char))return CharCategory.Space;if(hasWordChar(_char))return CharCategory.Word;for(var _i30=0;_i30<wordChars.length;_i30++)if(_char.indexOf(wordChars[_i30])>-1)return CharCategory.Word;return CharCategory.Other;};}var _EditorState=/*#__PURE__*/function(){function EditorState(config2,doc2,selection2,values2,computeSlot,tr){_classCallCheck(this,EditorState);this.config=config2;this.doc=doc2;this.selection=selection2;this.values=values2;this.status=config2.statusTemplate.slice();this.computeSlot=computeSlot;if(tr)tr._state=this;for(var _i31=0;_i31<this.config.dynamicSlots.length;_i31++)ensureAddr(this,_i31<<1);this.computeSlot=null;}return _createClass(EditorState,[{key:"field",value:function field(_field){var require2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var addr=this.config.address[_field.id];if(addr==null){if(require2)throw new RangeError("Field is not present in this state");return void 0;}ensureAddr(this,addr);return getAddr(this,addr);}},{key:"update",value:function update(){for(var _len4=arguments.length,specs=new Array(_len4),_key=0;_key<_len4;_key++){specs[_key]=arguments[_key];}return resolveTransaction(this,specs,true);}},{key:"applyTransaction",value:function applyTransaction(tr){var _this7=this;var conf=this.config,_conf=conf,base2=_conf.base,compartments=_conf.compartments;var _iterator20=_createForOfIteratorHelper(tr.effects),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var effect=_step20.value;if(effect.is(_Compartment.reconfigure)){if(conf){compartments=/* @__PURE__ */new Map();conf.compartments.forEach(function(val,key){return compartments.set(key,val);});conf=null;}compartments.set(effect.value.compartment,effect.value.extension);}else if(effect.is(_StateEffect.reconfigure)){conf=null;base2=effect.value;}else if(effect.is(_StateEffect.appendConfig)){conf=null;base2=asArray(base2).concat(effect.value);}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}var startValues;if(!conf){conf=_Configuration.resolve(base2,compartments,this);var intermediateState=new _EditorState(conf,this.doc,this.selection,conf.dynamicSlots.map(function(){return null;}),function(state,slot){return slot.reconfigure(state,_this7);},null);startValues=intermediateState.values;}else{startValues=tr.startState.values.slice();}var selection2=tr.startState.facet(allowMultipleSelections)?tr.newSelection:tr.newSelection.asSingle();new _EditorState(conf,tr.newDoc,selection2,startValues,function(state,slot){return slot.update(state,tr);},tr);}},{key:"replaceSelection",value:function replaceSelection(text){if(typeof text=="string")text=this.toText(text);return this.changeByRange(function(range){return{changes:{from:range.from,to:range.to,insert:text},range:_EditorSelection.cursor(range.from+text.length)};});}},{key:"changeByRange",value:function changeByRange(f){var sel=this.selection;var result1=f(sel.ranges[0]);var changes=this.changes(result1.changes),ranges=[result1.range];var effects=asArray(result1.effects);for(var _i32=1;_i32<sel.ranges.length;_i32++){var result=f(sel.ranges[_i32]);var newChanges=this.changes(result.changes),newMapped=newChanges.map(changes);for(var j=0;j<_i32;j++)ranges[j]=ranges[j].map(newMapped);var mapBy=changes.mapDesc(newChanges,true);ranges.push(result.range.map(mapBy));changes=changes.compose(newMapped);effects=_StateEffect.mapEffects(effects,newMapped).concat(_StateEffect.mapEffects(asArray(result.effects),mapBy));}return{changes:changes,selection:_EditorSelection.create(ranges,sel.mainIndex),effects:effects};}},{key:"changes",value:function changes(){var spec=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(spec instanceof _ChangeSet)return spec;return _ChangeSet.of(spec,this.doc.length,this.facet(_EditorState.lineSeparator));}},{key:"toText",value:function toText(string2){return _Text.of(string2.split(this.facet(_EditorState.lineSeparator)||DefaultSplit));}},{key:"sliceDoc",value:function sliceDoc(){var from=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.doc.length;return this.doc.sliceString(from,to,this.lineBreak);}},{key:"facet",value:function facet(_facet){var addr=this.config.address[_facet.id];if(addr==null)return _facet["default"];ensureAddr(this,addr);return getAddr(this,addr);}},{key:"toJSON",value:function toJSON(fields){var result={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(fields)for(var prop in fields){var value=fields[prop];if(value instanceof _StateField&&this.config.address[value.id]!=null)result[prop]=value.spec.toJSON(this.field(fields[prop]),this);}return result;}},{key:"tabSize",get:function get(){return this.facet(_EditorState.tabSize);}},{key:"lineBreak",get:function get(){return this.facet(_EditorState.lineSeparator)||"\n";}},{key:"readOnly",get:function get(){return this.facet(readOnly);}},{key:"phrase",value:function phrase(phrase2){for(var _len5=arguments.length,insert2=new Array(_len5>1?_len5-1:0),_key2=1;_key2<_len5;_key2++){insert2[_key2-1]=arguments[_key2];}var _iterator21=_createForOfIteratorHelper(this.facet(_EditorState.phrases)),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var map=_step21.value;if(Object.prototype.hasOwnProperty.call(map,phrase2)){phrase2=map[phrase2];break;}}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}if(insert2.length)phrase2=phrase2.replace(/\$(\$|\d*)/g,function(m,i){if(i=="$")return"$";var n=+(i||1);return!n||n>insert2.length?m:insert2[n-1];});return phrase2;}},{key:"languageDataAt",value:function languageDataAt(name2,pos){var side=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;var values2=[];var _iterator22=_createForOfIteratorHelper(this.facet(languageData)),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var provider=_step22.value;var _iterator23=_createForOfIteratorHelper(provider(this,pos,side)),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var result=_step23.value;if(Object.prototype.hasOwnProperty.call(result,name2))values2.push(result[name2]);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return values2;}},{key:"charCategorizer",value:function charCategorizer(at){return makeCategorizer(this.languageDataAt("wordChars",at).join(""));}},{key:"wordAt",value:function wordAt(pos){var _this$doc$lineAt=this.doc.lineAt(pos),text=_this$doc$lineAt.text,from=_this$doc$lineAt.from,length=_this$doc$lineAt.length;var cat=this.charCategorizer(pos);var start=pos-from,end=pos-from;while(start>0){var prev=findClusterBreak2(text,start,false);if(cat(text.slice(prev,start))!=CharCategory.Word)break;start=prev;}while(end<length){var next=findClusterBreak2(text,end);if(cat(text.slice(end,next))!=CharCategory.Word)break;end=next;}return start==end?null:_EditorSelection.range(start+from,end+from);}}],[{key:"fromJSON",value:function fromJSON(json){var config2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var fields=arguments.length>2?arguments[2]:undefined;if(!json||typeof json.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");var fieldInit=[];if(fields){var _loop4=function _loop4(){if(Object.prototype.hasOwnProperty.call(json,prop)){var field=fields[prop],value=json[prop];fieldInit.push(field.init(function(state){return field.spec.fromJSON(value,state);}));}};for(var prop in fields){_loop4();}}return _EditorState.create({doc:json.doc,selection:_EditorSelection.fromJSON(json.selection),extensions:config2.extensions?fieldInit.concat([config2.extensions]):fieldInit});}},{key:"create",value:function create(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var configuration=_Configuration.resolve(config2.extensions||[],/* @__PURE__ */new Map());var doc2=config2.doc instanceof _Text?config2.doc:_Text.of((config2.doc||"").split(configuration.staticFacet(_EditorState.lineSeparator)||DefaultSplit));var selection2=!config2.selection?_EditorSelection.single(0):config2.selection instanceof _EditorSelection?config2.selection:_EditorSelection.single(config2.selection.anchor,config2.selection.head);checkSelection(selection2,doc2.length);if(!configuration.staticFacet(allowMultipleSelections))selection2=selection2.asSingle();return new _EditorState(configuration,doc2,selection2,configuration.dynamicSlots.map(function(){return null;}),function(state,slot){return slot.create(state);},null);}}]);}();_EditorState.allowMultipleSelections=allowMultipleSelections;_EditorState.tabSize=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?values2[0]:4;}});_EditorState.lineSeparator=lineSeparator;_EditorState.readOnly=readOnly;_EditorState.phrases=/* @__PURE__ */_Facet.define({compare:function compare(a,b){var kA=Object.keys(a),kB=Object.keys(b);return kA.length==kB.length&&kA.every(function(k){return a[k]==b[k];});}});_EditorState.languageData=languageData;_EditorState.changeFilter=changeFilter;_EditorState.transactionFilter=transactionFilter;_EditorState.transactionExtender=transactionExtender;_Compartment.reconfigure=/* @__PURE__ */_StateEffect.define();function combineConfig(configs,defaults3){var combine=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var result={};var _iterator24=_createForOfIteratorHelper(configs),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var config2=_step24.value;for(var _i33=0,_Object$keys=Object.keys(config2);_i33<_Object$keys.length;_i33++){var _key3=_Object$keys[_i33];var value=config2[_key3],current=result[_key3];if(current===void 0)result[_key3]=value;else if(current===value||value===void 0);else if(Object.hasOwnProperty.call(combine,_key3))result[_key3]=combine[_key3](current,value);else throw new Error("Config merge conflict for field "+_key3);}}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}for(var key in defaults3)if(result[key]===void 0)result[key]=defaults3[key];return result;}var RangeValue=/*#__PURE__*/function(){function RangeValue(){_classCallCheck(this,RangeValue);}return _createClass(RangeValue,[{key:"eq",value:function eq(other){return this==other;}},{key:"range",value:function range(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;return _Range.create(from,to,this);}}]);}();RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=false;RangeValue.prototype.mapMode=MapMode.TrackDel;var _Range=/*#__PURE__*/function(){function Range(from,to,value){_classCallCheck(this,Range);this.from=from;this.to=to;this.value=value;}return _createClass(Range,null,[{key:"create",value:function create(from,to,value){return new _Range(from,to,value);}}]);}();function cmpRange(a,b){return a.from-b.from||a.value.startSide-b.value.startSide;}var _Chunk=/*#__PURE__*/function(){function Chunk(from,to,value,maxPoint){_classCallCheck(this,Chunk);this.from=from;this.to=to;this.value=value;this.maxPoint=maxPoint;}return _createClass(Chunk,[{key:"length",get:function get(){return this.to[this.to.length-1];}},{key:"findIndex",value:function findIndex(pos,side,end){var startAt=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var arr=end?this.to:this.from;for(var lo=startAt,hi=arr.length;;){if(lo==hi)return lo;var mid=lo+hi>>1;var diff=arr[mid]-pos||(end?this.value[mid].endSide:this.value[mid].startSide)-side;if(mid==lo)return diff>=0?lo:hi;if(diff>=0)hi=mid;else lo=mid+1;}}},{key:"between",value:function between(offset,from,to,f){for(var _i34=this.findIndex(from,-1e9,true),e=this.findIndex(to,1e9,false,_i34);_i34<e;_i34++)if(f(this.from[_i34]+offset,this.to[_i34]+offset,this.value[_i34])===false)return false;}},{key:"map",value:function map(offset,changes){var value=[],from=[],to=[],newPos=-1,maxPoint=-1;for(var _i35=0;_i35<this.value.length;_i35++){var val=this.value[_i35],curFrom=this.from[_i35]+offset,curTo=this.to[_i35]+offset,newFrom=void 0,newTo=void 0;if(curFrom==curTo){var mapped=changes.mapPos(curFrom,val.startSide,val.mapMode);if(mapped==null)continue;newFrom=newTo=mapped;if(val.startSide!=val.endSide){newTo=changes.mapPos(curFrom,val.endSide);if(newTo<newFrom)continue;}}else{newFrom=changes.mapPos(curFrom,val.startSide);newTo=changes.mapPos(curTo,val.endSide);if(newFrom>newTo||newFrom==newTo&&val.startSide>0&&val.endSide<=0)continue;}if((newTo-newFrom||val.endSide-val.startSide)<0)continue;if(newPos<0)newPos=newFrom;if(val.point)maxPoint=Math.max(maxPoint,newTo-newFrom);value.push(val);from.push(newFrom-newPos);to.push(newTo-newPos);}return{mapped:value.length?new _Chunk(from,to,value,maxPoint):null,pos:newPos};}}]);}();var _RangeSet=/*#__PURE__*/function(){function RangeSet(chunkPos,chunk,nextLayer,maxPoint){_classCallCheck(this,RangeSet);this.chunkPos=chunkPos;this.chunk=chunk;this.nextLayer=nextLayer;this.maxPoint=maxPoint;}return _createClass(RangeSet,[{key:"length",get:function get(){var last=this.chunk.length-1;return last<0?0:Math.max(this.chunkEnd(last),this.nextLayer.length);}},{key:"size",get:function get(){if(this.isEmpty)return 0;var size=this.nextLayer.size;var _iterator25=_createForOfIteratorHelper(this.chunk),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var chunk=_step25.value;size+=chunk.value.length;}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return size;}},{key:"chunkEnd",value:function chunkEnd(index){return this.chunkPos[index]+this.chunk[index].length;}},{key:"update",value:function update(updateSpec){var _updateSpec$add=updateSpec.add,add2=_updateSpec$add===void 0?[]:_updateSpec$add,_updateSpec$sort=updateSpec.sort,sort=_updateSpec$sort===void 0?false:_updateSpec$sort,_updateSpec$filterFro=updateSpec.filterFrom,filterFrom=_updateSpec$filterFro===void 0?0:_updateSpec$filterFro,_updateSpec$filterTo=updateSpec.filterTo,filterTo=_updateSpec$filterTo===void 0?this.length:_updateSpec$filterTo;var filter=updateSpec.filter;if(add2.length==0&&!filter)return this;if(sort)add2=add2.slice().sort(cmpRange);if(this.isEmpty)return add2.length?_RangeSet.of(add2):this;var cur2=new LayerCursor(this,null,-1)["goto"](0),i=0,spill=[];var builder=new _RangeSetBuilder();while(cur2.value||i<add2.length){if(i<add2.length&&(cur2.from-add2[i].from||cur2.startSide-add2[i].value.startSide)>=0){var range=add2[i++];if(!builder.addInner(range.from,range.to,range.value))spill.push(range);}else if(cur2.rangeIndex==1&&cur2.chunkIndex<this.chunk.length&&(i==add2.length||this.chunkEnd(cur2.chunkIndex)<add2[i].from)&&(!filter||filterFrom>this.chunkEnd(cur2.chunkIndex)||filterTo<this.chunkPos[cur2.chunkIndex])&&builder.addChunk(this.chunkPos[cur2.chunkIndex],this.chunk[cur2.chunkIndex])){cur2.nextChunk();}else{if(!filter||filterFrom>cur2.to||filterTo<cur2.from||filter(cur2.from,cur2.to,cur2.value)){if(!builder.addInner(cur2.from,cur2.to,cur2.value))spill.push(_Range.create(cur2.from,cur2.to,cur2.value));}cur2.next();}}return builder.finishInner(this.nextLayer.isEmpty&&!spill.length?_RangeSet.empty:this.nextLayer.update({add:spill,filter:filter,filterFrom:filterFrom,filterTo:filterTo}));}},{key:"map",value:function map(changes){if(changes.empty||this.isEmpty)return this;var chunks=[],chunkPos=[],maxPoint=-1;for(var _i36=0;_i36<this.chunk.length;_i36++){var start=this.chunkPos[_i36],chunk=this.chunk[_i36];var touch=changes.touchesRange(start,start+chunk.length);if(touch===false){maxPoint=Math.max(maxPoint,chunk.maxPoint);chunks.push(chunk);chunkPos.push(changes.mapPos(start));}else if(touch===true){var _chunk$map=chunk.map(start,changes),mapped=_chunk$map.mapped,pos=_chunk$map.pos;if(mapped){maxPoint=Math.max(maxPoint,mapped.maxPoint);chunks.push(mapped);chunkPos.push(pos);}}}var next=this.nextLayer.map(changes);return chunks.length==0?next:new _RangeSet(chunkPos,chunks,next||_RangeSet.empty,maxPoint);}},{key:"between",value:function between(from,to,f){if(this.isEmpty)return;for(var _i37=0;_i37<this.chunk.length;_i37++){var start=this.chunkPos[_i37],chunk=this.chunk[_i37];if(to>=start&&from<=start+chunk.length&&chunk.between(start,from-start,to-start,f)===false)return;}this.nextLayer.between(from,to,f);}},{key:"iter",value:function iter(){var from=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return _HeapCursor.from([this])["goto"](from);}},{key:"isEmpty",get:function get(){return this.nextLayer==this;}}],[{key:"create",value:function create(chunkPos,chunk,nextLayer,maxPoint){return new _RangeSet(chunkPos,chunk,nextLayer,maxPoint);}},{key:"iter",value:function iter(sets){var from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return _HeapCursor.from(sets)["goto"](from);}},{key:"compare",value:function compare(oldSets,newSets,textDiff,comparator){var minPointSize=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;var a=oldSets.filter(function(set){return set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize;});var b=newSets.filter(function(set){return set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize;});var sharedChunks=findSharedChunks(a,b,textDiff);var sideA=new SpanCursor(a,sharedChunks,minPointSize);var sideB=new SpanCursor(b,sharedChunks,minPointSize);textDiff.iterGaps(function(fromA,fromB,length){return _compare(sideA,fromA,sideB,fromB,length,comparator);});if(textDiff.empty&&textDiff.length==0)_compare(sideA,0,sideB,0,0,comparator);}},{key:"eq",value:function eq(oldSets,newSets){var from=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var to=arguments.length>3?arguments[3]:undefined;if(to==null)to=1e9-1;var a=oldSets.filter(function(set){return!set.isEmpty&&newSets.indexOf(set)<0;});var b=newSets.filter(function(set){return!set.isEmpty&&oldSets.indexOf(set)<0;});if(a.length!=b.length)return false;if(!a.length)return true;var sharedChunks=findSharedChunks(a,b);var sideA=new SpanCursor(a,sharedChunks,0)["goto"](from),sideB=new SpanCursor(b,sharedChunks,0)["goto"](from);for(;;){if(sideA.to!=sideB.to||!sameValues(sideA.active,sideB.active)||sideA.point&&(!sideB.point||!sideA.point.eq(sideB.point)))return false;if(sideA.to>to)return true;sideA.next();sideB.next();}}},{key:"spans",value:function spans(sets,from,to,iterator){var minPointSize=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;var cursor2=new SpanCursor(sets,null,minPointSize)["goto"](from),pos=from;var openRanges=cursor2.openStart;for(;;){var curTo=Math.min(cursor2.to,to);if(cursor2.point){var active=cursor2.activeForPoint(cursor2.to);var openCount=cursor2.pointFrom<from?active.length+1:cursor2.point.startSide<0?active.length:Math.min(active.length,openRanges);iterator.point(pos,curTo,cursor2.point,active,openCount,cursor2.pointRank);openRanges=Math.min(cursor2.openEnd(curTo),active.length);}else if(curTo>pos){iterator.span(pos,curTo,cursor2.active,openRanges);openRanges=cursor2.openEnd(curTo);}if(cursor2.to>to)return openRanges+(cursor2.point&&cursor2.to>to?1:0);pos=cursor2.to;cursor2.next();}}},{key:"of",value:function of(ranges){var sort=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var build=new _RangeSetBuilder();var _iterator26=_createForOfIteratorHelper(ranges instanceof _Range?[ranges]:sort?lazySort(ranges):ranges),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var range=_step26.value;build.add(range.from,range.to,range.value);}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}return build.finish();}},{key:"join",value:function join(sets){if(!sets.length)return _RangeSet.empty;var result=sets[sets.length-1];for(var _i38=sets.length-2;_i38>=0;_i38--){for(var layer2=sets[_i38];layer2!=_RangeSet.empty;layer2=layer2.nextLayer)result=new _RangeSet(layer2.chunkPos,layer2.chunk,result,Math.max(layer2.maxPoint,result.maxPoint));}return result;}}]);}();_RangeSet.empty=/* @__PURE__ */new _RangeSet([],[],null,-1);function lazySort(ranges){if(ranges.length>1)for(var prev=ranges[0],_i39=1;_i39<ranges.length;_i39++){var cur2=ranges[_i39];if(cmpRange(prev,cur2)>0)return ranges.slice().sort(cmpRange);prev=cur2;}return ranges;}_RangeSet.empty.nextLayer=_RangeSet.empty;var _RangeSetBuilder=/*#__PURE__*/function(){function RangeSetBuilder(){_classCallCheck(this,RangeSetBuilder);this.chunks=[];this.chunkPos=[];this.chunkStart=-1;this.last=null;this.lastFrom=-1e9;this.lastTo=-1e9;this.from=[];this.to=[];this.value=[];this.maxPoint=-1;this.setMaxPoint=-1;this.nextLayer=null;}return _createClass(RangeSetBuilder,[{key:"finishChunk",value:function finishChunk(newArrays){this.chunks.push(new _Chunk(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;if(newArrays){this.from=[];this.to=[];this.value=[];}}},{key:"add",value:function add(from,to,value){if(!this.addInner(from,to,value))(this.nextLayer||(this.nextLayer=new _RangeSetBuilder())).add(from,to,value);}},{key:"addInner",value:function addInner(from,to,value){var diff=from-this.lastTo||value.startSide-this.last.endSide;if(diff<=0&&(from-this.lastFrom||value.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");if(diff<0)return false;if(this.from.length==250)this.finishChunk(true);if(this.chunkStart<0)this.chunkStart=from;this.from.push(from-this.chunkStart);this.to.push(to-this.chunkStart);this.last=value;this.lastFrom=from;this.lastTo=to;this.value.push(value);if(value.point)this.maxPoint=Math.max(this.maxPoint,to-from);return true;}},{key:"addChunk",value:function addChunk(from,chunk){if((from-this.lastTo||chunk.value[0].startSide-this.last.endSide)<0)return false;if(this.from.length)this.finishChunk(true);this.setMaxPoint=Math.max(this.setMaxPoint,chunk.maxPoint);this.chunks.push(chunk);this.chunkPos.push(from);var last=chunk.value.length-1;this.last=chunk.value[last];this.lastFrom=chunk.from[last]+from;this.lastTo=chunk.to[last]+from;return true;}},{key:"finish",value:function finish(){return this.finishInner(_RangeSet.empty);}},{key:"finishInner",value:function finishInner(next){if(this.from.length)this.finishChunk(false);if(this.chunks.length==0)return next;var result=_RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(next):next,this.setMaxPoint);this.from=null;return result;}}]);}();function findSharedChunks(a,b,textDiff){var inA=/* @__PURE__ */new Map();var _iterator27=_createForOfIteratorHelper(a),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var set=_step27.value;for(var _i40=0;_i40<set.chunk.length;_i40++)if(set.chunk[_i40].maxPoint<=0)inA.set(set.chunk[_i40],set.chunkPos[_i40]);}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}var shared=/* @__PURE__ */new Set();var _iterator28=_createForOfIteratorHelper(b),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _set=_step28.value;for(var _i41=0;_i41<_set.chunk.length;_i41++){var known=inA.get(_set.chunk[_i41]);if(known!=null&&(textDiff?textDiff.mapPos(known):known)==_set.chunkPos[_i41]&&!(textDiff===null||textDiff===void 0?void 0:textDiff.touchesRange(known,known+_set.chunk[_i41].length)))shared.add(_set.chunk[_i41]);}}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}return shared;}var LayerCursor=/*#__PURE__*/function(){function LayerCursor(layer2,skip,minPoint){var rank=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,LayerCursor);this.layer=layer2;this.skip=skip;this.minPoint=minPoint;this.rank=rank;}return _createClass(LayerCursor,[{key:"startSide",get:function get(){return this.value?this.value.startSide:0;}},{key:"endSide",get:function get(){return this.value?this.value.endSide:0;}},{key:"goto",value:function _goto(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9;this.chunkIndex=this.rangeIndex=0;this.gotoInner(pos,side,false);return this;}},{key:"gotoInner",value:function gotoInner(pos,side,forward){while(this.chunkIndex<this.layer.chunk.length){var next=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(next)||this.layer.chunkEnd(this.chunkIndex)<pos||next.maxPoint<this.minPoint))break;this.chunkIndex++;forward=false;}if(this.chunkIndex<this.layer.chunk.length){var rangeIndex=this.layer.chunk[this.chunkIndex].findIndex(pos-this.layer.chunkPos[this.chunkIndex],side,true);if(!forward||this.rangeIndex<rangeIndex)this.setRangeIndex(rangeIndex);}this.next();}},{key:"forward",value:function forward(pos,side){if((this.to-pos||this.endSide-side)<0)this.gotoInner(pos,side,true);}},{key:"next",value:function next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9;this.value=null;break;}else{var chunkPos=this.layer.chunkPos[this.chunkIndex],chunk=this.layer.chunk[this.chunkIndex];var from=chunkPos+chunk.from[this.rangeIndex];this.from=from;this.to=chunkPos+chunk.to[this.rangeIndex];this.value=chunk.value[this.rangeIndex];this.setRangeIndex(this.rangeIndex+1);if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break;}}}},{key:"setRangeIndex",value:function setRangeIndex(index){if(index==this.layer.chunk[this.chunkIndex].value.length){this.chunkIndex++;if(this.skip){while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;}this.rangeIndex=0;}else{this.rangeIndex=index;}}},{key:"nextChunk",value:function nextChunk(){this.chunkIndex++;this.rangeIndex=0;this.next();}},{key:"compare",value:function compare(other){return this.from-other.from||this.startSide-other.startSide||this.rank-other.rank||this.to-other.to||this.endSide-other.endSide;}}]);}();var _HeapCursor=/*#__PURE__*/function(){function HeapCursor(heap){_classCallCheck(this,HeapCursor);this.heap=heap;}return _createClass(HeapCursor,[{key:"startSide",get:function get(){return this.value?this.value.startSide:0;}},{key:"goto",value:function _goto2(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9;var _iterator29=_createForOfIteratorHelper(this.heap),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var cur2=_step29.value;cur2["goto"](pos,side);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}for(var _i42=this.heap.length>>1;_i42>=0;_i42--)heapBubble(this.heap,_i42);this.next();return this;}},{key:"forward",value:function forward(pos,side){var _iterator30=_createForOfIteratorHelper(this.heap),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var cur2=_step30.value;cur2.forward(pos,side);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}for(var _i43=this.heap.length>>1;_i43>=0;_i43--)heapBubble(this.heap,_i43);if((this.to-pos||this.value.endSide-side)<0)this.next();}},{key:"next",value:function next(){if(this.heap.length==0){this.from=this.to=1e9;this.value=null;this.rank=-1;}else{var top2=this.heap[0];this.from=top2.from;this.to=top2.to;this.value=top2.value;this.rank=top2.rank;if(top2.value)top2.next();heapBubble(this.heap,0);}}}],[{key:"from",value:function from(sets){var skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var minPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;var heap=[];for(var _i44=0;_i44<sets.length;_i44++){for(var cur2=sets[_i44];!cur2.isEmpty;cur2=cur2.nextLayer){if(cur2.maxPoint>=minPoint)heap.push(new LayerCursor(cur2,skip,minPoint,_i44));}}return heap.length==1?heap[0]:new _HeapCursor(heap);}}]);}();function heapBubble(heap,index){for(var cur2=heap[index];;){var childIndex=(index<<1)+1;if(childIndex>=heap.length)break;var child=heap[childIndex];if(childIndex+1<heap.length&&child.compare(heap[childIndex+1])>=0){child=heap[childIndex+1];childIndex++;}if(cur2.compare(child)<0)break;heap[childIndex]=cur2;heap[index]=child;index=childIndex;}}var SpanCursor=/*#__PURE__*/function(){function SpanCursor(sets,skip,minPoint){_classCallCheck(this,SpanCursor);this.minPoint=minPoint;this.active=[];this.activeTo=[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointFrom=0;this.pointRank=0;this.to=-1e9;this.endSide=0;this.openStart=-1;this.cursor=_HeapCursor.from(sets,skip,minPoint);}return _createClass(SpanCursor,[{key:"goto",value:function _goto3(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1e9;this.cursor["goto"](pos,side);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=pos;this.endSide=side;this.openStart=-1;this.next();return this;}},{key:"forward",value:function forward(pos,side){while(this.minActive>-1&&(this.activeTo[this.minActive]-pos||this.active[this.minActive].endSide-side)<0)this.removeActive(this.minActive);this.cursor.forward(pos,side);}},{key:"removeActive",value:function removeActive(index){remove(this.active,index);remove(this.activeTo,index);remove(this.activeRank,index);this.minActive=findMinIndex(this.active,this.activeTo);}},{key:"addActive",value:function addActive(trackOpen){var i=0,_this$cursor=this.cursor,value=_this$cursor.value,to=_this$cursor.to,rank=_this$cursor.rank;while(i<this.activeRank.length&&(rank-this.activeRank[i]||to-this.activeTo[i])>0)i++;insert(this.active,i,value);insert(this.activeTo,i,to);insert(this.activeRank,i,rank);if(trackOpen)insert(trackOpen,i,this.cursor.from);this.minActive=findMinIndex(this.active,this.activeTo);}},{key:"next",value:function next(){var from=this.to,wasPoint=this.point;this.point=null;var trackOpen=this.openStart<0?[]:null;for(;;){var a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>from){this.to=this.activeTo[a];this.endSide=this.active[a].endSide;break;}this.removeActive(a);if(trackOpen)remove(trackOpen,a);}else if(!this.cursor.value){this.to=this.endSide=1e9;break;}else if(this.cursor.from>from){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break;}else{var nextVal=this.cursor.value;if(!nextVal.point){this.addActive(trackOpen);this.cursor.next();}else if(wasPoint&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to){this.cursor.next();}else{this.point=nextVal;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;this.to=this.cursor.to;this.endSide=nextVal.endSide;this.cursor.next();this.forward(this.to,this.endSide);break;}}}if(trackOpen){this.openStart=0;for(var _i45=trackOpen.length-1;_i45>=0&&trackOpen[_i45]<from;_i45--)this.openStart++;}}},{key:"activeForPoint",value:function activeForPoint(to){if(!this.active.length)return this.active;var active=[];for(var _i46=this.active.length-1;_i46>=0;_i46--){if(this.activeRank[_i46]<this.pointRank)break;if(this.activeTo[_i46]>to||this.activeTo[_i46]==to&&this.active[_i46].endSide>=this.point.endSide)active.push(this.active[_i46]);}return active.reverse();}},{key:"openEnd",value:function openEnd(to){var open=0;for(var _i47=this.activeTo.length-1;_i47>=0&&this.activeTo[_i47]>to;_i47--)open++;return open;}}]);}();function _compare(a,startA,b,startB,length,comparator){a["goto"](startA);b["goto"](startB);var endB=startB+length;var pos=startB,dPos=startB-startA;for(;;){var dEnd=a.to+dPos-b.to,diff=dEnd||a.endSide-b.endSide;var end=diff<0?a.to+dPos:b.to,clipEnd=Math.min(end,endB);if(a.point||b.point){if(!(a.point&&b.point&&(a.point==b.point||a.point.eq(b.point))&&sameValues(a.activeForPoint(a.to),b.activeForPoint(b.to))))comparator.comparePoint(pos,clipEnd,a.point,b.point);}else{if(clipEnd>pos&&!sameValues(a.active,b.active))comparator.compareRange(pos,clipEnd,a.active,b.active);}if(end>endB)break;if((dEnd||a.openEnd!=b.openEnd)&&comparator.boundChange)comparator.boundChange(end);pos=end;if(diff<=0)a.next();if(diff>=0)b.next();}}function sameValues(a,b){if(a.length!=b.length)return false;for(var _i48=0;_i48<a.length;_i48++)if(a[_i48]!=b[_i48]&&!a[_i48].eq(b[_i48]))return false;return true;}function remove(array,index){for(var _i49=index,e=array.length-1;_i49<e;_i49++)array[_i49]=array[_i49+1];array.pop();}function insert(array,index,value){for(var _i50=array.length-1;_i50>=index;_i50--)array[_i50+1]=array[_i50];array[index]=value;}function findMinIndex(value,array){var found=-1,foundPos=1e9;for(var _i51=0;_i51<array.length;_i51++)if((array[_i51]-foundPos||value[_i51].endSide-value[found].endSide)<0){found=_i51;foundPos=array[_i51];}return found;}function _countColumn(string2,tabSize){var to=arguments.length>2&&arguments[2]!==undefined?arguments[2]:string2.length;var n=0;for(var _i52=0;_i52<to&&_i52<string2.length;){if(string2.charCodeAt(_i52)==9){n+=tabSize-n%tabSize;_i52++;}else{n++;_i52=findClusterBreak2(string2,_i52);}}return n;}function findColumn(string2,col,tabSize,strict){for(var _i53=0,n=0;;){if(n>=col)return _i53;if(_i53==string2.length)break;n+=string2.charCodeAt(_i53)==9?tabSize-n%tabSize:1;_i53=findClusterBreak2(string2,_i53);}return strict===true?-1:string2.length;}// ../node_modules/style-mod/src/style-mod.js
var C="\u037C";var COUNT=typeof Symbol=="undefined"?"__"+C:Symbol["for"](C);var SET=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet");var top=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};var StyleModule=/*#__PURE__*/function(){function StyleModule(spec,options){_classCallCheck(this,StyleModule);this.rules=[];var _ref3=options||{},finish=_ref3.finish;function splitSelector(selector){return /^@/.test(selector)?[selector]:selector.split(/,\s*/);}function render(selectors,spec2,target,isKeyframes){var local=[],isAt=/^@(\w+)\b/.exec(selectors[0]),keyframes=isAt&&isAt[1]=="keyframes";if(isAt&&spec2==null)return target.push(selectors[0]+";");for(var prop in spec2){var value=spec2[prop];if(/&/.test(prop)){render(prop.split(/,\s*/).map(function(part){return selectors.map(function(sel){return part.replace(/&/,sel);});}).reduce(function(a,b){return a.concat(b);}),value,target);}else if(value&&_typeof(value)=="object"){if(!isAt)throw new RangeError("The value of a property ("+prop+") should be a primitive value.");render(splitSelector(prop),value,local,keyframes);}else if(value!=null){local.push(prop.replace(/_.*/,"").replace(/[A-Z]/g,function(l){return"-"+l.toLowerCase();})+": "+value+";");}}if(local.length||keyframes){target.push((finish&&!isAt&&!isKeyframes?selectors.map(finish):selectors).join(", ")+" {"+local.join(" ")+"}");}}for(var prop in spec)render(splitSelector(prop),spec[prop],this.rules);}return _createClass(StyleModule,[{key:"getRules",value:function getRules(){return this.rules.join("\n");}}],[{key:"newName",value:function newName(){var id2=top[COUNT]||1;top[COUNT]=id2+1;return C+id2.toString(36);}},{key:"mount",value:function mount(root,modules,options){var set=root[SET],nonce=options&&options.nonce;if(!set)set=new StyleSet(root,nonce);else if(nonce)set.setNonce(nonce);set.mount(Array.isArray(modules)?modules:[modules],root);}}]);}();var adoptedSet=/* @__PURE__ */new Map();var StyleSet=/*#__PURE__*/function(){function StyleSet(root,nonce){_classCallCheck(this,StyleSet);var doc2=root.ownerDocument||root,win=doc2.defaultView;if(!root.head&&root.adoptedStyleSheets&&win.CSSStyleSheet){var adopted=adoptedSet.get(doc2);if(adopted)return root[SET]=adopted;this.sheet=new win.CSSStyleSheet();adoptedSet.set(doc2,this);}else{this.styleTag=doc2.createElement("style");if(nonce)this.styleTag.setAttribute("nonce",nonce);}this.modules=[];root[SET]=this;}return _createClass(StyleSet,[{key:"mount",value:function mount(modules,root){var sheet=this.sheet;var pos=0,j=0;for(var _i54=0;_i54<modules.length;_i54++){var mod=modules[_i54],index=this.modules.indexOf(mod);if(index<j&&index>-1){this.modules.splice(index,1);j--;index=-1;}if(index==-1){this.modules.splice(j++,0,mod);if(sheet)for(var k=0;k<mod.rules.length;k++)sheet.insertRule(mod.rules[k],pos++);}else{while(j<index)pos+=this.modules[j++].rules.length;pos+=mod.rules.length;j++;}}if(sheet){if(root.adoptedStyleSheets.indexOf(this.sheet)<0)root.adoptedStyleSheets=[this.sheet].concat(_toConsumableArray(root.adoptedStyleSheets));}else{var text="";for(var _i55=0;_i55<this.modules.length;_i55++)text+=this.modules[_i55].getRules()+"\n";this.styleTag.textContent=text;var target=root.head||root;if(this.styleTag.parentNode!=target)target.insertBefore(this.styleTag,target.firstChild);}}},{key:"setNonce",value:function setNonce(nonce){if(this.styleTag&&this.styleTag.getAttribute("nonce")!=nonce)this.styleTag.setAttribute("nonce",nonce);}}]);}();// ../node_modules/w3c-keyname/index.js
var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'};var mac=typeof navigator!="undefined"&&/Mac/.test(navigator.platform);var ie=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(i=0;i<10;i++)base[48+i]=base[96+i]=String(i);var i;for(i=1;i<=24;i++)base[i+111]="F"+i;var i;for(i=65;i<=90;i++){base[i]=String.fromCharCode(i+32);shift[i]=String.fromCharCode(i);}var i;for(code in base)if(!shift.hasOwnProperty(code))shift[code]=base[code];var code;function keyName(event){var ignoreKey=mac&&event.metaKey&&event.shiftKey&&!event.ctrlKey&&!event.altKey||ie&&event.shiftKey&&event.key&&event.key.length==1||event.key=="Unidentified";var name2=!ignoreKey&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";if(name2=="Esc")name2="Escape";if(name2=="Del")name2="Delete";if(name2=="Left")name2="ArrowLeft";if(name2=="Up")name2="ArrowUp";if(name2=="Right")name2="ArrowRight";if(name2=="Down")name2="ArrowDown";return name2;}// ../node_modules/@codemirror/view/dist/index.js
function getSelection(root){var target;if(root.nodeType==11){target=root.getSelection?root:root.ownerDocument;}else{target=root;}return target.getSelection();}function contains(dom,node){return node?dom==node||dom.contains(node.nodeType!=1?node.parentNode:node):false;}function hasSelection(dom,selection2){if(!selection2.anchorNode)return false;try{return contains(dom,selection2.anchorNode);}catch(_){return false;}}function clientRectsFor(dom){if(dom.nodeType==3)return textRange(dom,0,dom.nodeValue.length).getClientRects();else if(dom.nodeType==1)return dom.getClientRects();else return[];}function isEquivalentPosition(node,off,targetNode,targetOff){return targetNode?scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1):false;}function domIndex(node){for(var index=0;;index++){node=node.previousSibling;if(!node)return index;}}function isBlockElement(node){return node.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(node.nodeName);}function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return true;if(off==(dir<0?0:maxOffset(node))){if(node.nodeName=="DIV")return false;var parent=node.parentNode;if(!parent||parent.nodeType!=1)return false;off=domIndex(node)+(dir<0?0:1);node=parent;}else if(node.nodeType==1){node=node.childNodes[off+(dir<0?-1:0)];if(node.nodeType==1&&node.contentEditable=="false")return false;off=dir<0?maxOffset(node):0;}else{return false;}}}function maxOffset(node){return node.nodeType==3?node.nodeValue.length:node.childNodes.length;}function flattenRect(rect,left){var x=left?rect.left:rect.right;return{left:x,right:x,top:rect.top,bottom:rect.bottom};}function windowRect(win){var vp=win.visualViewport;if(vp)return{left:0,right:vp.width,top:0,bottom:vp.height};return{left:0,right:win.innerWidth,top:0,bottom:win.innerHeight};}function getScale(elt2,rect){var scaleX=rect.width/elt2.offsetWidth;var scaleY=rect.height/elt2.offsetHeight;if(scaleX>0.995&&scaleX<1.005||!isFinite(scaleX)||Math.abs(rect.width-elt2.offsetWidth)<1)scaleX=1;if(scaleY>0.995&&scaleY<1.005||!isFinite(scaleY)||Math.abs(rect.height-elt2.offsetHeight)<1)scaleY=1;return{scaleX:scaleX,scaleY:scaleY};}function scrollRectIntoView(dom,rect,side,x,y,xMargin,yMargin,ltr){var doc2=dom.ownerDocument,win=doc2.defaultView||window;for(var cur2=dom,stop=false;cur2&&!stop;){if(cur2.nodeType==1){var bounding=void 0,top2=cur2==doc2.body;var scaleX=1,scaleY=1;if(top2){bounding=windowRect(win);}else{if(/^(fixed|sticky)$/.test(getComputedStyle(cur2).position))stop=true;if(cur2.scrollHeight<=cur2.clientHeight&&cur2.scrollWidth<=cur2.clientWidth){cur2=cur2.assignedSlot||cur2.parentNode;continue;}var rect2=cur2.getBoundingClientRect();var _getScale=getScale(cur2,rect2);scaleX=_getScale.scaleX;scaleY=_getScale.scaleY;bounding={left:rect2.left,right:rect2.left+cur2.clientWidth*scaleX,top:rect2.top,bottom:rect2.top+cur2.clientHeight*scaleY};}var moveX=0,moveY=0;if(y=="nearest"){if(rect.top<bounding.top){moveY=rect.top-(bounding.top+yMargin);if(side>0&&rect.bottom>bounding.bottom+moveY)moveY=rect.bottom-bounding.bottom+yMargin;}else if(rect.bottom>bounding.bottom){moveY=rect.bottom-bounding.bottom+yMargin;if(side<0&&rect.top-moveY<bounding.top)moveY=rect.top-(bounding.top+yMargin);}}else{var rectHeight=rect.bottom-rect.top,boundingHeight=bounding.bottom-bounding.top;var targetTop=y=="center"&&rectHeight<=boundingHeight?rect.top+rectHeight/2-boundingHeight/2:y=="start"||y=="center"&&side<0?rect.top-yMargin:rect.bottom-boundingHeight+yMargin;moveY=targetTop-bounding.top;}if(x=="nearest"){if(rect.left<bounding.left){moveX=rect.left-(bounding.left+xMargin);if(side>0&&rect.right>bounding.right+moveX)moveX=rect.right-bounding.right+xMargin;}else if(rect.right>bounding.right){moveX=rect.right-bounding.right+xMargin;if(side<0&&rect.left<bounding.left+moveX)moveX=rect.left-(bounding.left+xMargin);}}else{var targetLeft=x=="center"?rect.left+(rect.right-rect.left)/2-(bounding.right-bounding.left)/2:x=="start"==ltr?rect.left-xMargin:rect.right-(bounding.right-bounding.left)+xMargin;moveX=targetLeft-bounding.left;}if(moveX||moveY){if(top2){win.scrollBy(moveX,moveY);}else{var movedX=0,movedY=0;if(moveY){var start=cur2.scrollTop;cur2.scrollTop+=moveY/scaleY;movedY=(cur2.scrollTop-start)*scaleY;}if(moveX){var _start2=cur2.scrollLeft;cur2.scrollLeft+=moveX/scaleX;movedX=(cur2.scrollLeft-_start2)*scaleX;}rect={left:rect.left-movedX,top:rect.top-movedY,right:rect.right-movedX,bottom:rect.bottom-movedY};if(movedX&&Math.abs(movedX-moveX)<1)x="nearest";if(movedY&&Math.abs(movedY-moveY)<1)y="nearest";}}if(top2)break;if(rect.top<bounding.top||rect.bottom>bounding.bottom||rect.left<bounding.left||rect.right>bounding.right)rect={left:Math.max(rect.left,bounding.left),right:Math.min(rect.right,bounding.right),top:Math.max(rect.top,bounding.top),bottom:Math.min(rect.bottom,bounding.bottom)};cur2=cur2.assignedSlot||cur2.parentNode;}else if(cur2.nodeType==11){cur2=cur2.host;}else{break;}}}function scrollableParents(dom){var doc2=dom.ownerDocument,x,y;for(var cur2=dom.parentNode;cur2;){if(cur2==doc2.body||x&&y){break;}else if(cur2.nodeType==1){if(!y&&cur2.scrollHeight>cur2.clientHeight)y=cur2;if(!x&&cur2.scrollWidth>cur2.clientWidth)x=cur2;cur2=cur2.assignedSlot||cur2.parentNode;}else if(cur2.nodeType==11){cur2=cur2.host;}else{break;}}return{x:x,y:y};}var DOMSelectionState=/*#__PURE__*/function(){function DOMSelectionState(){_classCallCheck(this,DOMSelectionState);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0;}return _createClass(DOMSelectionState,[{key:"eq",value:function eq(domSel){return this.anchorNode==domSel.anchorNode&&this.anchorOffset==domSel.anchorOffset&&this.focusNode==domSel.focusNode&&this.focusOffset==domSel.focusOffset;}},{key:"setRange",value:function setRange(range){var anchorNode=range.anchorNode,focusNode=range.focusNode;this.set(anchorNode,Math.min(range.anchorOffset,anchorNode?maxOffset(anchorNode):0),focusNode,Math.min(range.focusOffset,focusNode?maxOffset(focusNode):0));}},{key:"set",value:function set(anchorNode,anchorOffset,focusNode,focusOffset){this.anchorNode=anchorNode;this.anchorOffset=anchorOffset;this.focusNode=focusNode;this.focusOffset=focusOffset;}}]);}();var preventScrollSupported=null;function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);var stack=[];for(var cur2=dom;cur2;cur2=cur2.parentNode){stack.push(cur2,cur2.scrollTop,cur2.scrollLeft);if(cur2==cur2.ownerDocument)break;}dom.focus(preventScrollSupported==null?Object.defineProperties({},{preventScroll:{get:function get(){preventScrollSupported={preventScroll:true};return true;},configurable:true,enumerable:true}}):void 0);if(!preventScrollSupported){preventScrollSupported=false;for(var _i56=0;_i56<stack.length;){var elt2=stack[_i56++],top2=stack[_i56++],left=stack[_i56++];if(elt2.scrollTop!=top2)elt2.scrollTop=top2;if(elt2.scrollLeft!=left)elt2.scrollLeft=left;}}}var scratchRange;function textRange(node,from){var to=arguments.length>2&&arguments[2]!==undefined?arguments[2]:from;var range=scratchRange||(scratchRange=document.createRange());range.setEnd(node,to);range.setStart(node,from);return range;}function dispatchKey(elt2,name2,code,mods){var options={key:name2,code:name2,keyCode:code,which:code,cancelable:true};if(mods){options.altKey=mods.altKey;options.ctrlKey=mods.ctrlKey;options.shiftKey=mods.shiftKey;options.metaKey=mods.metaKey;}var down=new KeyboardEvent("keydown",options);down.synthetic=true;elt2.dispatchEvent(down);var up=new KeyboardEvent("keyup",options);up.synthetic=true;elt2.dispatchEvent(up);return down.defaultPrevented||up.defaultPrevented;}function getRoot(node){while(node){if(node&&(node.nodeType==9||node.nodeType==11&&node.host))return node;node=node.assignedSlot||node.parentNode;}return null;}function clearAttributes(node){while(node.attributes.length)node.removeAttributeNode(node.attributes[0]);}function atElementStart(doc2,selection2){var node=selection2.focusNode,offset=selection2.focusOffset;if(!node||selection2.anchorNode!=node||selection2.anchorOffset!=offset)return false;offset=Math.min(offset,maxOffset(node));for(;;){if(offset){if(node.nodeType!=1)return false;var prev=node.childNodes[offset-1];if(prev.contentEditable=="false")offset--;else{node=prev;offset=maxOffset(node);}}else if(node==doc2){return true;}else{offset=domIndex(node);node=node.parentNode;}}}function isScrolledToBottom(elt2){return elt2.scrollTop>Math.max(1,elt2.scrollHeight-elt2.clientHeight-4);}function textNodeBefore(startNode,startOffset){for(var node=startNode,offset=startOffset;;){if(node.nodeType==3&&offset>0){return{node:node,offset:offset};}else if(node.nodeType==1&&offset>0){if(node.contentEditable=="false")return null;node=node.childNodes[offset-1];offset=maxOffset(node);}else if(node.parentNode&&!isBlockElement(node)){offset=domIndex(node);node=node.parentNode;}else{return null;}}}function textNodeAfter(startNode,startOffset){for(var node=startNode,offset=startOffset;;){if(node.nodeType==3&&offset<node.nodeValue.length){return{node:node,offset:offset};}else if(node.nodeType==1&&offset<node.childNodes.length){if(node.contentEditable=="false")return null;node=node.childNodes[offset];offset=0;}else if(node.parentNode&&!isBlockElement(node)){offset=domIndex(node)+1;node=node.parentNode;}else{return null;}}}var _DOMPos=/*#__PURE__*/function(){function DOMPos(node,offset){var precise=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;_classCallCheck(this,DOMPos);this.node=node;this.offset=offset;this.precise=precise;}return _createClass(DOMPos,null,[{key:"before",value:function before(dom,precise){return new _DOMPos(dom.parentNode,domIndex(dom),precise);}},{key:"after",value:function after(dom,precise){return new _DOMPos(dom.parentNode,domIndex(dom)+1,precise);}}]);}();var noChildren=[];var _ContentView=/*#__PURE__*/function(){function ContentView(){_classCallCheck(this,ContentView);this.parent=null;this.dom=null;this.flags=2;}return _createClass(ContentView,[{key:"overrideDOMText",get:function get(){return null;}},{key:"posAtStart",get:function get(){return this.parent?this.parent.posBefore(this):0;}},{key:"posAtEnd",get:function get(){return this.posAtStart+this.length;}},{key:"posBefore",value:function posBefore(view){var pos=this.posAtStart;var _iterator31=_createForOfIteratorHelper(this.children),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var child=_step31.value;if(child==view)return pos;pos+=child.length+child.breakAfter;}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}throw new RangeError("Invalid child in posBefore");}},{key:"posAfter",value:function posAfter(view){return this.posBefore(view)+view.length;}},{key:"sync",value:function sync(view,track){if(this.flags&2){var parent=this.dom;var prev=null,next;var _iterator32=_createForOfIteratorHelper(this.children),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var child=_step32.value;if(child.flags&7){if(!child.dom&&(next=prev?prev.nextSibling:parent.firstChild)){var contentView=_ContentView.get(next);if(!contentView||!contentView.parent&&contentView.canReuseDOM(child))child.reuseDOM(next);}child.sync(view,track);child.flags&=~7;}next=prev?prev.nextSibling:parent.firstChild;if(track&&!track.written&&track.node==parent&&next!=child.dom)track.written=true;if(child.dom.parentNode==parent){while(next&&next!=child.dom)next=rm$1(next);}else{parent.insertBefore(child.dom,next);}prev=child.dom;}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}next=prev?prev.nextSibling:parent.firstChild;if(next&&track&&track.node==parent)track.written=true;while(next)next=rm$1(next);}else if(this.flags&1){var _iterator33=_createForOfIteratorHelper(this.children),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var _child=_step33.value;if(_child.flags&7){_child.sync(view,track);_child.flags&=~7;}}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}}}},{key:"reuseDOM",value:function reuseDOM(_dom){}},{key:"localPosFromDOM",value:function localPosFromDOM(node,offset){var after;if(node==this.dom){after=this.dom.childNodes[offset];}else{var bias=maxOffset(node)==0?0:offset==0?-1:1;for(;;){var parent=node.parentNode;if(parent==this.dom)break;if(bias==0&&parent.firstChild!=parent.lastChild){if(node==parent.firstChild)bias=-1;else bias=1;}node=parent;}if(bias<0)after=node;else after=node.nextSibling;}if(after==this.dom.firstChild)return 0;while(after&&!_ContentView.get(after))after=after.nextSibling;if(!after)return this.length;for(var _i57=0,pos=0;;_i57++){var child=this.children[_i57];if(child.dom==after)return pos;pos+=child.length+child.breakAfter;}}},{key:"domBoundsAround",value:function domBoundsAround(from,to){var offset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var fromI=-1,fromStart=-1,toI=-1,toEnd=-1;for(var _i58=0,pos=offset,prevEnd=offset;_i58<this.children.length;_i58++){var child=this.children[_i58],end=pos+child.length;if(pos<from&&end>to)return child.domBoundsAround(from,to,pos);if(end>=from&&fromI==-1){fromI=_i58;fromStart=pos;}if(pos>to&&child.dom.parentNode==this.dom){toI=_i58;toEnd=prevEnd;break;}prevEnd=end;pos=end+child.breakAfter;}return{from:fromStart,to:toEnd<0?offset+this.length:toEnd,startDOM:(fromI?this.children[fromI-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:toI<this.children.length&&toI>=0?this.children[toI].dom:null};}},{key:"markDirty",value:function markDirty(){var andParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.flags|=2;this.markParentsDirty(andParent);}},{key:"markParentsDirty",value:function markParentsDirty(childList){for(var parent=this.parent;parent;parent=parent.parent){if(childList)parent.flags|=2;if(parent.flags&1)return;parent.flags|=1;childList=false;}}},{key:"setParent",value:function setParent(parent){if(this.parent!=parent){this.parent=parent;if(this.flags&7)this.markParentsDirty(true);}}},{key:"setDOM",value:function setDOM(dom){if(this.dom==dom)return;if(this.dom)this.dom.cmView=null;this.dom=dom;dom.cmView=this;}},{key:"rootView",get:function get(){for(var v=this;;){var parent=v.parent;if(!parent)return v;v=parent;}}},{key:"replaceChildren",value:function replaceChildren(from,to){var _this$children;var children=arguments.length>2&&arguments[2]!==undefined?arguments[2]:noChildren;this.markDirty();for(var _i59=from;_i59<to;_i59++){var child=this.children[_i59];if(child.parent==this&&children.indexOf(child)<0)child.destroy();}if(children.length<250)(_this$children=this.children).splice.apply(_this$children,[from,to-from].concat(_toConsumableArray(children)));else this.children=[].concat(this.children.slice(0,from),children,this.children.slice(to));for(var _i60=0;_i60<children.length;_i60++)children[_i60].setParent(this);}},{key:"ignoreMutation",value:function ignoreMutation(_rec){return false;}},{key:"ignoreEvent",value:function ignoreEvent(_event){return false;}},{key:"childCursor",value:function childCursor(){var pos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;return new ChildCursor(this.children,pos,this.children.length);}},{key:"childPos",value:function childPos(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.childCursor().findPos(pos,bias);}},{key:"toString",value:function toString(){var name2=this.constructor.name.replace("View","");return name2+(this.children.length?"("+this.children.join()+")":this.length?"["+(name2=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"");}},{key:"isEditable",get:function get(){return true;}},{key:"isWidget",get:function get(){return false;}},{key:"isHidden",get:function get(){return false;}},{key:"merge",value:function merge(from,to,source,hasStart,openStart,openEnd){return false;}},{key:"become",value:function become(other){return false;}},{key:"canReuseDOM",value:function canReuseDOM(other){return other.constructor==this.constructor&&!((this.flags|other.flags)&8);}},{key:"getSide",value:function getSide(){return 0;}},{key:"destroy",value:function destroy(){var _iterator34=_createForOfIteratorHelper(this.children),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var child=_step34.value;if(child.parent==this)child.destroy();}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}this.parent=null;}}],[{key:"get",value:function get(node){return node.cmView;}}]);}();_ContentView.prototype.breakAfter=0;function rm$1(dom){var next=dom.nextSibling;dom.parentNode.removeChild(dom);return next;}var ChildCursor=/*#__PURE__*/function(){function ChildCursor(children,pos,i){_classCallCheck(this,ChildCursor);this.children=children;this.pos=pos;this.i=i;this.off=0;}return _createClass(ChildCursor,[{key:"findPos",value:function findPos(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;for(;;){if(pos>this.pos||pos==this.pos&&(bias>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=pos-this.pos;return this;}var next=this.children[--this.i];this.pos-=next.length+next.breakAfter;}}}]);}();function replaceRange(parent,fromI,fromOff,toI,toOff,insert2,breakAtStart,openStart,openEnd){var children=parent.children;var before=children.length?children[fromI]:null;var last=insert2.length?insert2[insert2.length-1]:null;var breakAtEnd=last?last.breakAfter:breakAtStart;if(fromI==toI&&before&&!breakAtStart&&!breakAtEnd&&insert2.length<2&&before.merge(fromOff,toOff,insert2.length?last:null,fromOff==0,openStart,openEnd))return;if(toI<children.length){var after=children[toI];if(after&&(toOff<after.length||after.breakAfter&&(last===null||last===void 0?void 0:last.breakAfter))){if(fromI==toI){after=after.split(toOff);toOff=0;}if(!breakAtEnd&&last&&after.merge(0,toOff,last,true,0,openEnd)){insert2[insert2.length-1]=after;}else{if(toOff||after.children.length&&!after.children[0].length)after.merge(0,toOff,null,false,0,openEnd);insert2.push(after);}}else if(after===null||after===void 0?void 0:after.breakAfter){if(last)last.breakAfter=1;else breakAtStart=1;}toI++;}if(before){before.breakAfter=breakAtStart;if(fromOff>0){if(!breakAtStart&&insert2.length&&before.merge(fromOff,before.length,insert2[0],false,openStart,0)){before.breakAfter=insert2.shift().breakAfter;}else if(fromOff<before.length||before.children.length&&before.children[before.children.length-1].length==0){before.merge(fromOff,before.length,null,false,openStart,0);}fromI++;}}while(fromI<toI&&insert2.length){if(children[toI-1].become(insert2[insert2.length-1])){toI--;insert2.pop();openEnd=insert2.length?0:openStart;}else if(children[fromI].become(insert2[0])){fromI++;insert2.shift();openStart=insert2.length?0:openEnd;}else{break;}}if(!insert2.length&&fromI&&toI<children.length&&!children[fromI-1].breakAfter&&children[toI].merge(0,0,children[fromI-1],false,openStart,openEnd))fromI--;if(fromI<toI||insert2.length)parent.replaceChildren(fromI,toI,insert2);}function mergeChildrenInto(parent,from,to,insert2,openStart,openEnd){var cur2=parent.childCursor();var _cur2$findPos=cur2.findPos(to,1),toI=_cur2$findPos.i,toOff=_cur2$findPos.off;var _cur2$findPos2=cur2.findPos(from,-1),fromI=_cur2$findPos2.i,fromOff=_cur2$findPos2.off;var dLen=from-to;var _iterator35=_createForOfIteratorHelper(insert2),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var view=_step35.value;dLen+=view.length;}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}parent.length+=dLen;replaceRange(parent,fromI,fromOff,toI,toOff,insert2,0,openStart,openEnd);}var nav=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""};var doc=typeof document!="undefined"?document:{documentElement:{style:{}}};var ie_edge=/* @__PURE__ *//Edge\/(\d+)/.exec(nav.userAgent);var ie_upto10=/* @__PURE__ *//MSIE \d/.test(nav.userAgent);var ie_11up=/* @__PURE__ *//Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent);var ie2=!!(ie_upto10||ie_11up||ie_edge);var gecko=!ie2&&/* @__PURE__ *//gecko\/(\d+)/i.test(nav.userAgent);var chrome=!ie2&&/* @__PURE__ *//Chrome\/(\d+)/.exec(nav.userAgent);var webkit="webkitFontSmoothing"in doc.documentElement.style;var safari=!ie2&&/* @__PURE__ *//Apple Computer/.test(nav.vendor);var ios=safari&&(/* @__PURE__ *//Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/* @__PURE__ *//Mac/.test(nav.platform),windows:/* @__PURE__ *//Win/.test(nav.platform),linux:/* @__PURE__ *//Linux|X11/.test(nav.platform),ie:ie2,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko:gecko,gecko_version:gecko?+(/* @__PURE__ *//Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios:ios,android:/* @__PURE__ *//Android\b/.test(nav.userAgent),webkit:webkit,safari:safari,webkit_version:webkit?+(/* @__PURE__ *//\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};var MaxJoinLen=256;var _TextView=/*#__PURE__*/function(_ContentView2){function TextView(text){var _this8;_classCallCheck(this,TextView);_this8=_callSuper(this,TextView);_this8.text=text;return _this8;}_inherits(TextView,_ContentView2);return _createClass(TextView,[{key:"length",get:function get(){return this.text.length;}},{key:"createDOM",value:function createDOM(textDOM){this.setDOM(textDOM||document.createTextNode(this.text));}},{key:"sync",value:function sync(view,track){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(track&&track.node==this.dom)track.written=true;this.dom.nodeValue=this.text;}}},{key:"reuseDOM",value:function reuseDOM(dom){if(dom.nodeType==3)this.createDOM(dom);}},{key:"merge",value:function merge(from,to,source){if(this.flags&8||source&&(!(source instanceof _TextView)||this.length-(to-from)+source.length>MaxJoinLen||source.flags&8))return false;this.text=this.text.slice(0,from)+(source?source.text:"")+this.text.slice(to);this.markDirty();return true;}},{key:"split",value:function split(from){var result=new _TextView(this.text.slice(from));this.text=this.text.slice(0,from);this.markDirty();result.flags|=this.flags&8;return result;}},{key:"localPosFromDOM",value:function localPosFromDOM(node,offset){return node==this.dom?offset:offset?this.text.length:0;}},{key:"domAtPos",value:function domAtPos(pos){return new _DOMPos(this.dom,pos);}},{key:"domBoundsAround",value:function domBoundsAround(_from,_to,offset){return{from:offset,to:offset+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling};}},{key:"coordsAt",value:function coordsAt(pos,side){return textCoords(this.dom,pos,side);}}]);}(_ContentView);var _MarkView=/*#__PURE__*/function(_ContentView3){function MarkView(mark){var _this9;var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var length=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,MarkView);_this9=_callSuper(this,MarkView);_this9.mark=mark;_this9.children=children;_this9.length=length;var _iterator36=_createForOfIteratorHelper(children),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var ch=_step36.value;ch.setParent(_this9);}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}return _this9;}_inherits(MarkView,_ContentView3);return _createClass(MarkView,[{key:"setAttrs",value:function setAttrs(dom){clearAttributes(dom);if(this.mark["class"])dom.className=this.mark["class"];if(this.mark.attrs)for(var name2 in this.mark.attrs)dom.setAttribute(name2,this.mark.attrs[name2]);return dom;}},{key:"canReuseDOM",value:function canReuseDOM(other){return _superPropGet(MarkView,"canReuseDOM",this,3)([other])&&!((this.flags|other.flags)&8);}},{key:"reuseDOM",value:function reuseDOM(node){if(node.nodeName==this.mark.tagName.toUpperCase()){this.setDOM(node);this.flags|=4|2;}}},{key:"sync",value:function sync(view,track){if(!this.dom)this.setDOM(this.setAttrs(document.createElement(this.mark.tagName)));else if(this.flags&4)this.setAttrs(this.dom);_superPropGet(MarkView,"sync",this,3)([view,track]);}},{key:"merge",value:function merge(from,to,source,_hasStart,openStart,openEnd){if(source&&(!(source instanceof _MarkView&&source.mark.eq(this.mark))||from&&openStart<=0||to<this.length&&openEnd<=0))return false;mergeChildrenInto(this,from,to,source?source.children.slice():[],openStart-1,openEnd-1);this.markDirty();return true;}},{key:"split",value:function split(from){var result=[],off=0,detachFrom=-1,i=0;var _iterator37=_createForOfIteratorHelper(this.children),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var elt2=_step37.value;var end=off+elt2.length;if(end>from)result.push(off<from?elt2.split(from-off):elt2);if(detachFrom<0&&off>=from)detachFrom=i;off=end;i++;}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}var length=this.length-from;this.length=from;if(detachFrom>-1){this.children.length=detachFrom;this.markDirty();}return new _MarkView(this.mark,result,length);}},{key:"domAtPos",value:function domAtPos(pos){return inlineDOMAtPos(this,pos);}},{key:"coordsAt",value:function coordsAt(pos,side){return coordsInChildren(this,pos,side);}}]);}(_ContentView);function textCoords(text,pos,side){var length=text.nodeValue.length;if(pos>length)pos=length;var from=pos,to=pos,flatten2=0;if(pos==0&&side<0||pos==length&&side>=0){if(!(browser.chrome||browser.gecko)){if(pos){from--;flatten2=1;}else if(to<length){to++;flatten2=-1;}}}else{if(side<0)from--;else if(to<length)to++;}var rects=textRange(text,from,to).getClientRects();if(!rects.length)return null;var rect=rects[(flatten2?flatten2<0:side>=0)?0:rects.length-1];if(browser.safari&&!flatten2&&rect.width==0)rect=Array.prototype.find.call(rects,function(r){return r.width;})||rect;return flatten2?flattenRect(rect,flatten2<0):rect||null;}var _WidgetView=/*#__PURE__*/function(_ContentView4){function WidgetView(widget,length,side){var _this0;_classCallCheck(this,WidgetView);_this0=_callSuper(this,WidgetView);_this0.widget=widget;_this0.length=length;_this0.side=side;_this0.prevWidget=null;return _this0;}_inherits(WidgetView,_ContentView4);return _createClass(WidgetView,[{key:"split",value:function split(from){var result=_WidgetView.create(this.widget,this.length-from,this.side);this.length-=from;return result;}},{key:"sync",value:function sync(view){if(!this.dom||!this.widget.updateDOM(this.dom,view)){if(this.dom&&this.prevWidget)this.prevWidget.destroy(this.dom);this.prevWidget=null;this.setDOM(this.widget.toDOM(view));if(!this.widget.editable)this.dom.contentEditable="false";}}},{key:"getSide",value:function getSide(){return this.side;}},{key:"merge",value:function merge(from,to,source,hasStart,openStart,openEnd){if(source&&(!(source instanceof _WidgetView)||!this.widget.compare(source.widget)||from>0&&openStart<=0||to<this.length&&openEnd<=0))return false;this.length=from+(source?source.length:0)+(this.length-to);return true;}},{key:"become",value:function become(other){if(other instanceof _WidgetView&&other.side==this.side&&this.widget.constructor==other.widget.constructor){if(!this.widget.compare(other.widget))this.markDirty(true);if(this.dom&&!this.prevWidget)this.prevWidget=this.widget;this.widget=other.widget;this.length=other.length;return true;}return false;}},{key:"ignoreMutation",value:function ignoreMutation(){return true;}},{key:"ignoreEvent",value:function ignoreEvent(event){return this.widget.ignoreEvent(event);}},{key:"overrideDOMText",get:function get(){if(this.length==0)return _Text.empty;var top2=this;while(top2.parent)top2=top2.parent;var _top=top2,view=_top.view,text=view&&view.state.doc,start=this.posAtStart;return text?text.slice(start,start+this.length):_Text.empty;}},{key:"domAtPos",value:function domAtPos(pos){return(this.length?pos==0:this.side>0)?_DOMPos.before(this.dom):_DOMPos.after(this.dom,pos==this.length);}},{key:"domBoundsAround",value:function domBoundsAround(){return null;}},{key:"coordsAt",value:function coordsAt(pos,side){var custom=this.widget.coordsAt(this.dom,pos,side);if(custom)return custom;var rects=this.dom.getClientRects(),rect=null;if(!rects.length)return null;var fromBack=this.side?this.side<0:pos>0;for(var _i61=fromBack?rects.length-1:0;;_i61+=fromBack?-1:1){rect=rects[_i61];if(pos>0?_i61==0:_i61==rects.length-1||rect.top<rect.bottom)break;}return flattenRect(rect,!fromBack);}},{key:"isEditable",get:function get(){return false;}},{key:"isWidget",get:function get(){return true;}},{key:"isHidden",get:function get(){return this.widget.isHidden;}},{key:"destroy",value:function destroy(){_superPropGet(WidgetView,"destroy",this,3)([]);if(this.dom)this.widget.destroy(this.dom);}}],[{key:"create",value:function create(widget,length,side){return new _WidgetView(widget,length,side);}}]);}(_ContentView);var _WidgetBufferView=/*#__PURE__*/function(_ContentView5){function WidgetBufferView(side){var _this1;_classCallCheck(this,WidgetBufferView);_this1=_callSuper(this,WidgetBufferView);_this1.side=side;return _this1;}_inherits(WidgetBufferView,_ContentView5);return _createClass(WidgetBufferView,[{key:"length",get:function get(){return 0;}},{key:"merge",value:function merge(){return false;}},{key:"become",value:function become(other){return other instanceof _WidgetBufferView&&other.side==this.side;}},{key:"split",value:function split(){return new _WidgetBufferView(this.side);}},{key:"sync",value:function sync(){if(!this.dom){var dom=document.createElement("img");dom.className="cm-widgetBuffer";dom.setAttribute("aria-hidden","true");this.setDOM(dom);}}},{key:"getSide",value:function getSide(){return this.side;}},{key:"domAtPos",value:function domAtPos(pos){return this.side>0?_DOMPos.before(this.dom):_DOMPos.after(this.dom);}},{key:"localPosFromDOM",value:function localPosFromDOM(){return 0;}},{key:"domBoundsAround",value:function domBoundsAround(){return null;}},{key:"coordsAt",value:function coordsAt(pos){return this.dom.getBoundingClientRect();}},{key:"overrideDOMText",get:function get(){return _Text.empty;}},{key:"isHidden",get:function get(){return true;}}]);}(_ContentView);_TextView.prototype.children=_WidgetView.prototype.children=_WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(parent,pos){var dom=parent.dom,children=parent.children,i=0;for(var off=0;i<children.length;i++){var child=children[i],end=off+child.length;if(end==off&&child.getSide()<=0)continue;if(pos>off&&pos<end&&child.dom.parentNode==dom)return child.domAtPos(pos-off);if(pos<=off)break;off=end;}for(var j=i;j>0;j--){var prev=children[j-1];if(prev.dom.parentNode==dom)return prev.domAtPos(prev.length);}for(var _j=i;_j<children.length;_j++){var next=children[_j];if(next.dom.parentNode==dom)return next.domAtPos(0);}return new _DOMPos(dom,0);}function joinInlineInto(parent,view,open){var last,children=parent.children;if(open>0&&view instanceof _MarkView&&children.length&&(last=children[children.length-1])instanceof _MarkView&&last.mark.eq(view.mark)){joinInlineInto(last,view.children[0],open-1);}else{children.push(view);view.setParent(parent);}parent.length+=view.length;}function coordsInChildren(view,pos,side){var before=null,beforePos=-1,after=null,afterPos=-1;function scan(view2,pos2){for(var _i62=0,off=0;_i62<view2.children.length&&off<=pos2;_i62++){var child=view2.children[_i62],end=off+child.length;if(end>=pos2){if(child.children.length){scan(child,pos2-off);}else if((!after||after.isHidden&&(side>0||onSameLine(after,child)))&&(end>pos2||off==end&&child.getSide()>0)){after=child;afterPos=pos2-off;}else if(off<pos2||off==end&&child.getSide()<0&&!child.isHidden){before=child;beforePos=pos2-off;}}off=end;}}scan(view,pos);var target=(side<0?before:after)||before||after;if(target)return target.coordsAt(Math.max(0,target==before?beforePos:afterPos),side);return fallbackRect(view);}function fallbackRect(view){var last=view.dom.lastChild;if(!last)return view.dom.getBoundingClientRect();var rects=clientRectsFor(last);return rects[rects.length-1]||null;}function onSameLine(a,b){var posA=a.coordsAt(0,1),posB=b.coordsAt(0,1);return posA&&posB&&posB.top<posA.bottom;}function combineAttrs(source,target){for(var name2 in source){if(name2=="class"&&target["class"])target["class"]+=" "+source["class"];else if(name2=="style"&&target.style)target.style+=";"+source.style;else target[name2]=source[name2];}return target;}var noAttrs=/* @__PURE__ */Object.create(null);function attrsEq(a,b,ignore){if(a==b)return true;if(!a)a=noAttrs;if(!b)b=noAttrs;var keysA=Object.keys(a),keysB=Object.keys(b);if(keysA.length-(ignore&&keysA.indexOf(ignore)>-1?1:0)!=keysB.length-(ignore&&keysB.indexOf(ignore)>-1?1:0))return false;for(var _i63=0,_keysA=keysA;_i63<_keysA.length;_i63++){var key=_keysA[_i63];if(key!=ignore&&(keysB.indexOf(key)==-1||a[key]!==b[key]))return false;}return true;}function _updateAttrs(dom,prev,attrs){var changed=false;if(prev){for(var name2 in prev)if(!(attrs&&name2 in attrs)){changed=true;if(name2=="style")dom.style.cssText="";else dom.removeAttribute(name2);}}if(attrs){for(var _name in attrs)if(!(prev&&prev[_name]==attrs[_name])){changed=true;if(_name=="style")dom.style.cssText=attrs[_name];else dom.setAttribute(_name,attrs[_name]);}}return changed;}function getAttrs(dom){var attrs=/* @__PURE__ */Object.create(null);for(var _i64=0;_i64<dom.attributes.length;_i64++){var attr=dom.attributes[_i64];attrs[attr.name]=attr.value;}return attrs;}var WidgetType=/*#__PURE__*/function(){function WidgetType(){_classCallCheck(this,WidgetType);}return _createClass(WidgetType,[{key:"eq",value:function eq(widget){return false;}},{key:"updateDOM",value:function updateDOM(dom,view){return false;}},{key:"compare",value:function compare(other){return this==other||this.constructor==other.constructor&&this.eq(other);}},{key:"estimatedHeight",get:function get(){return-1;}},{key:"lineBreaks",get:function get(){return 0;}},{key:"ignoreEvent",value:function ignoreEvent(event){return true;}},{key:"coordsAt",value:function coordsAt(dom,pos,side){return null;}},{key:"isHidden",get:function get(){return false;}},{key:"editable",get:function get(){return false;}},{key:"destroy",value:function destroy(dom){}}]);}();var BlockType=/* @__PURE__ */function(BlockType2){BlockType2[BlockType2["Text"]=0]="Text";BlockType2[BlockType2["WidgetBefore"]=1]="WidgetBefore";BlockType2[BlockType2["WidgetAfter"]=2]="WidgetAfter";BlockType2[BlockType2["WidgetRange"]=3]="WidgetRange";return BlockType2;}(BlockType||(BlockType={}));var Decoration=/*#__PURE__*/function(_RangeValue){function Decoration(startSide,endSide,widget,spec){var _this10;_classCallCheck(this,Decoration);_this10=_callSuper(this,Decoration);_this10.startSide=startSide;_this10.endSide=endSide;_this10.widget=widget;_this10.spec=spec;return _this10;}_inherits(Decoration,_RangeValue);return _createClass(Decoration,[{key:"heightRelevant",get:function get(){return false;}},{key:"hasHeight",value:function hasHeight(){return this.widget?this.widget.estimatedHeight>-1:false;}}],[{key:"mark",value:function mark(spec){return new _MarkDecoration(spec);}},{key:"widget",value:function widget(spec){var side=Math.max(-1e4,Math.min(1e4,spec.side||0)),block=!!spec.block;side+=block&&!spec.inlineOrder?side>0?3e8:-4e8:side>0?1e8:-1e8;return new _PointDecoration(spec,side,side,block,spec.widget||null,false);}},{key:"replace",value:function replace(spec){var block=!!spec.block,startSide,endSide;if(spec.isBlockGap){startSide=-5e8;endSide=4e8;}else{var _getInclusive=getInclusive(spec,block),start=_getInclusive.start,end=_getInclusive.end;startSide=(start?block?-3e8:-1:5e8)-1;endSide=(end?block?2e8:1:-6e8)+1;}return new _PointDecoration(spec,startSide,endSide,block,spec.widget||null,true);}},{key:"line",value:function line(spec){return new _LineDecoration(spec);}},{key:"set",value:function set(of){var sort=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return _RangeSet.of(of,sort);}}]);}(RangeValue);Decoration.none=_RangeSet.empty;var _MarkDecoration=/*#__PURE__*/function(_Decoration){function MarkDecoration(spec){var _this11;_classCallCheck(this,MarkDecoration);var _getInclusive2=getInclusive(spec),start=_getInclusive2.start,end=_getInclusive2.end;_this11=_callSuper(this,MarkDecoration,[start?-1:5e8,end?1:-6e8,null,spec]);_this11.tagName=spec.tagName||"span";_this11["class"]=spec["class"]||"";_this11.attrs=spec.attributes||null;return _this11;}_inherits(MarkDecoration,_Decoration);return _createClass(MarkDecoration,[{key:"eq",value:function eq(other){var _a2,_b;return this==other||other instanceof _MarkDecoration&&this.tagName==other.tagName&&(this["class"]||((_a2=this.attrs)===null||_a2===void 0?void 0:_a2["class"]))==(other["class"]||((_b=other.attrs)===null||_b===void 0?void 0:_b["class"]))&&attrsEq(this.attrs,other.attrs,"class");}},{key:"range",value:function range(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;if(from>=to)throw new RangeError("Mark decorations may not be empty");return _superPropGet(MarkDecoration,"range",this,3)([from,to]);}}]);}(Decoration);_MarkDecoration.prototype.point=false;var _LineDecoration=/*#__PURE__*/function(_Decoration2){function LineDecoration(spec){_classCallCheck(this,LineDecoration);return _callSuper(this,LineDecoration,[-2e8,-2e8,null,spec]);}_inherits(LineDecoration,_Decoration2);return _createClass(LineDecoration,[{key:"eq",value:function eq(other){return other instanceof _LineDecoration&&this.spec["class"]==other.spec["class"]&&attrsEq(this.spec.attributes,other.spec.attributes);}},{key:"range",value:function range(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;if(to!=from)throw new RangeError("Line decoration ranges must be zero-length");return _superPropGet(LineDecoration,"range",this,3)([from,to]);}}]);}(Decoration);_LineDecoration.prototype.mapMode=MapMode.TrackBefore;_LineDecoration.prototype.point=true;var _PointDecoration=/*#__PURE__*/function(_Decoration3){function PointDecoration(spec,startSide,endSide,block,widget,isReplace){var _this12;_classCallCheck(this,PointDecoration);_this12=_callSuper(this,PointDecoration,[startSide,endSide,widget,spec]);_this12.block=block;_this12.isReplace=isReplace;_this12.mapMode=!block?MapMode.TrackDel:startSide<=0?MapMode.TrackBefore:MapMode.TrackAfter;return _this12;}_inherits(PointDecoration,_Decoration3);return _createClass(PointDecoration,[{key:"type",get:function get(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter;}},{key:"heightRelevant",get:function get(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0);}},{key:"eq",value:function eq(other){return other instanceof _PointDecoration&&widgetsEq(this.widget,other.widget)&&this.block==other.block&&this.startSide==other.startSide&&this.endSide==other.endSide;}},{key:"range",value:function range(from){var to=arguments.length>1&&arguments[1]!==undefined?arguments[1]:from;if(this.isReplace&&(from>to||from==to&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&to!=from)throw new RangeError("Widget decorations can only have zero-length ranges");return _superPropGet(PointDecoration,"range",this,3)([from,to]);}}]);}(Decoration);_PointDecoration.prototype.point=true;function getInclusive(spec){var block=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var start=spec.inclusiveStart,end=spec.inclusiveEnd;if(start==null)start=spec.inclusive;if(end==null)end=spec.inclusive;return{start:start!==null&&start!==void 0?start:block,end:end!==null&&end!==void 0?end:block};}function widgetsEq(a,b){return a==b||!!(a&&b&&a.compare(b));}function addRange(from,to,ranges){var margin=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var last=ranges.length-1;if(last>=0&&ranges[last]+margin>=from)ranges[last]=Math.max(ranges[last],to);else ranges.push(from,to);}var _LineView=/*#__PURE__*/function(_ContentView6){function LineView(){var _this13;_classCallCheck(this,LineView);_this13=_callSuper(this,LineView,arguments);_this13.children=[];_this13.length=0;_this13.prevAttrs=void 0;_this13.attrs=null;_this13.breakAfter=0;return _this13;}_inherits(LineView,_ContentView6);return _createClass(LineView,[{key:"merge",value:function merge(from,to,source,hasStart,openStart,openEnd){if(source){if(!(source instanceof _LineView))return false;if(!this.dom)source.transferDOM(this);}if(hasStart)this.setDeco(source?source.attrs:null);mergeChildrenInto(this,from,to,source?source.children.slice():[],openStart,openEnd);return true;}},{key:"split",value:function split(at){var end=new _LineView();end.breakAfter=this.breakAfter;if(this.length==0)return end;var _this$childPos=this.childPos(at),i=_this$childPos.i,off=_this$childPos.off;if(off){end.append(this.children[i].split(off),0);this.children[i].merge(off,this.children[i].length,null,false,0,0);i++;}for(var j=i;j<this.children.length;j++)end.append(this.children[j],0);while(i>0&&this.children[i-1].length==0)this.children[--i].destroy();this.children.length=i;this.markDirty();this.length=at;return end;}},{key:"transferDOM",value:function transferDOM(other){if(!this.dom)return;this.markDirty();other.setDOM(this.dom);other.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs;this.prevAttrs=void 0;this.dom=null;}},{key:"setDeco",value:function setDeco(attrs){if(!attrsEq(this.attrs,attrs)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty();}this.attrs=attrs;}}},{key:"append",value:function append(child,openStart){joinInlineInto(this,child,openStart);}},{key:"addLineDeco",value:function addLineDeco(deco){var attrs=deco.spec.attributes,cls=deco.spec["class"];if(attrs)this.attrs=combineAttrs(attrs,this.attrs||{});if(cls)this.attrs=combineAttrs({"class":cls},this.attrs||{});}},{key:"domAtPos",value:function domAtPos(pos){return inlineDOMAtPos(this,pos);}},{key:"reuseDOM",value:function reuseDOM(node){if(node.nodeName=="DIV"){this.setDOM(node);this.flags|=4|2;}}},{key:"sync",value:function sync(view,track){var _a2;if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void 0;}else if(this.flags&4){clearAttributes(this.dom);this.dom.className="cm-line";this.prevAttrs=this.attrs?null:void 0;}if(this.prevAttrs!==void 0){_updateAttrs(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=void 0;}_superPropGet(LineView,"sync",this,3)([view,track]);var last=this.dom.lastChild;while(last&&_ContentView.get(last)instanceof _MarkView)last=last.lastChild;if(!last||!this.length||last.nodeName!="BR"&&((_a2=_ContentView.get(last))===null||_a2===void 0?void 0:_a2.isEditable)==false&&(!browser.ios||!this.children.some(function(ch){return ch instanceof _TextView;}))){var hack=document.createElement("BR");hack.cmIgnore=true;this.dom.appendChild(hack);}}},{key:"measureTextSize",value:function measureTextSize(){if(this.children.length==0||this.length>20)return null;var totalWidth=0,textHeight;var _iterator38=_createForOfIteratorHelper(this.children),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var child=_step38.value;if(!(child instanceof _TextView)||/[^ -~]/.test(child.text))return null;var rects=clientRectsFor(child.dom);if(rects.length!=1)return null;totalWidth+=rects[0].width;textHeight=rects[0].height;}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return!totalWidth?null:{lineHeight:this.dom.getBoundingClientRect().height,charWidth:totalWidth/this.length,textHeight:textHeight};}},{key:"coordsAt",value:function coordsAt(pos,side){var rect=coordsInChildren(this,pos,side);if(!this.children.length&&rect&&this.parent){var heightOracle=this.parent.view.viewState.heightOracle,height=rect.bottom-rect.top;if(Math.abs(height-heightOracle.lineHeight)<2&&heightOracle.textHeight<height){var dist2=(height-heightOracle.textHeight)/2;return{top:rect.top+dist2,bottom:rect.bottom-dist2,left:rect.left,right:rect.left};}}return rect;}},{key:"become",value:function become(other){return other instanceof _LineView&&this.children.length==0&&other.children.length==0&&attrsEq(this.attrs,other.attrs)&&this.breakAfter==other.breakAfter;}},{key:"covers",value:function covers(){return true;}}],[{key:"find",value:function find(docView,pos){for(var _i65=0,off=0;_i65<docView.children.length;_i65++){var block=docView.children[_i65],end=off+block.length;if(end>=pos){if(block instanceof _LineView)return block;if(end>pos)break;}off=end+block.breakAfter;}return null;}}]);}(_ContentView);var _BlockWidgetView=/*#__PURE__*/function(_ContentView7){function BlockWidgetView(widget,length,deco){var _this14;_classCallCheck(this,BlockWidgetView);_this14=_callSuper(this,BlockWidgetView);_this14.widget=widget;_this14.length=length;_this14.deco=deco;_this14.breakAfter=0;_this14.prevWidget=null;return _this14;}_inherits(BlockWidgetView,_ContentView7);return _createClass(BlockWidgetView,[{key:"merge",value:function merge(from,to,source,_takeDeco,openStart,openEnd){if(source&&(!(source instanceof _BlockWidgetView)||!this.widget.compare(source.widget)||from>0&&openStart<=0||to<this.length&&openEnd<=0))return false;this.length=from+(source?source.length:0)+(this.length-to);return true;}},{key:"domAtPos",value:function domAtPos(pos){return pos==0?_DOMPos.before(this.dom):_DOMPos.after(this.dom,pos==this.length);}},{key:"split",value:function split(at){var len=this.length-at;this.length=at;var end=new _BlockWidgetView(this.widget,len,this.deco);end.breakAfter=this.breakAfter;return end;}},{key:"children",get:function get(){return noChildren;}},{key:"sync",value:function sync(view){if(!this.dom||!this.widget.updateDOM(this.dom,view)){if(this.dom&&this.prevWidget)this.prevWidget.destroy(this.dom);this.prevWidget=null;this.setDOM(this.widget.toDOM(view));if(!this.widget.editable)this.dom.contentEditable="false";}}},{key:"overrideDOMText",get:function get(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_Text.empty;}},{key:"domBoundsAround",value:function domBoundsAround(){return null;}},{key:"become",value:function become(other){if(other instanceof _BlockWidgetView&&other.widget.constructor==this.widget.constructor){if(!other.widget.compare(this.widget))this.markDirty(true);if(this.dom&&!this.prevWidget)this.prevWidget=this.widget;this.widget=other.widget;this.length=other.length;this.deco=other.deco;this.breakAfter=other.breakAfter;return true;}return false;}},{key:"ignoreMutation",value:function ignoreMutation(){return true;}},{key:"ignoreEvent",value:function ignoreEvent(event){return this.widget.ignoreEvent(event);}},{key:"isEditable",get:function get(){return false;}},{key:"isWidget",get:function get(){return true;}},{key:"coordsAt",value:function coordsAt(pos,side){var custom=this.widget.coordsAt(this.dom,pos,side);if(custom)return custom;if(this.widget instanceof BlockGapWidget)return null;return flattenRect(this.dom.getBoundingClientRect(),this.length?pos==0:side<=0);}},{key:"destroy",value:function destroy(){_superPropGet(BlockWidgetView,"destroy",this,3)([]);if(this.dom)this.widget.destroy(this.dom);}},{key:"covers",value:function covers(side){var _this$deco=this.deco,startSide=_this$deco.startSide,endSide=_this$deco.endSide;return startSide==endSide?false:side<0?startSide<0:endSide>0;}}]);}(_ContentView);var BlockGapWidget=/*#__PURE__*/function(_WidgetType){function BlockGapWidget(height){var _this15;_classCallCheck(this,BlockGapWidget);_this15=_callSuper(this,BlockGapWidget);_this15.height=height;return _this15;}_inherits(BlockGapWidget,_WidgetType);return _createClass(BlockGapWidget,[{key:"toDOM",value:function toDOM(){var elt2=document.createElement("div");elt2.className="cm-gap";this.updateDOM(elt2);return elt2;}},{key:"eq",value:function eq(other){return other.height==this.height;}},{key:"updateDOM",value:function updateDOM(elt2){elt2.style.height=this.height+"px";return true;}},{key:"editable",get:function get(){return true;}},{key:"estimatedHeight",get:function get(){return this.height;}},{key:"ignoreEvent",value:function ignoreEvent(){return false;}}]);}(WidgetType);var _ContentBuilder=/*#__PURE__*/function(){function ContentBuilder(doc2,pos,end,disallowBlockEffectsFor){_classCallCheck(this,ContentBuilder);this.doc=doc2;this.pos=pos;this.end=end;this.disallowBlockEffectsFor=disallowBlockEffectsFor;this.content=[];this.curLine=null;this.breakAtStart=0;this.pendingBuffer=0;this.bufferMarks=[];this.atCursorPos=true;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=doc2.iter();this.skip=pos;}return _createClass(ContentBuilder,[{key:"posCovered",value:function posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var last=this.content[this.content.length-1];return!(last.breakAfter||last instanceof _BlockWidgetView&&last.deco.endSide<0);}},{key:"getLine",value:function getLine(){if(!this.curLine){this.content.push(this.curLine=new _LineView());this.atCursorPos=true;}return this.curLine;}},{key:"flushBuffer",value:function flushBuffer(){var active=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.bufferMarks;if(this.pendingBuffer){this.curLine.append(wrapMarks(new _WidgetBufferView(-1),active),active.length);this.pendingBuffer=0;}}},{key:"addBlockWidget",value:function addBlockWidget(view){this.flushBuffer();this.curLine=null;this.content.push(view);}},{key:"finish",value:function finish(openEnd){if(this.pendingBuffer&&openEnd<=this.bufferMarks.length)this.flushBuffer();else this.pendingBuffer=0;if(!this.posCovered()&&!(openEnd&&this.content.length&&this.content[this.content.length-1]instanceof _BlockWidgetView))this.getLine();}},{key:"buildText",value:function buildText(length,active,openStart){while(length>0){if(this.textOff==this.text.length){var _this$cursor$next2=this.cursor.next(this.skip),value=_this$cursor$next2.value,lineBreak=_this$cursor$next2.lineBreak,done=_this$cursor$next2.done;this.skip=0;if(done)throw new Error("Ran out of text content when drawing inline views");if(lineBreak){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else this.breakAtStart=1;this.flushBuffer();this.curLine=null;this.atCursorPos=true;length--;continue;}else{this.text=value;this.textOff=0;}}var take=Math.min(this.text.length-this.textOff,length,512);this.flushBuffer(active.slice(active.length-openStart));this.getLine().append(wrapMarks(new _TextView(this.text.slice(this.textOff,this.textOff+take)),active),openStart);this.atCursorPos=true;this.textOff+=take;length-=take;openStart=0;}}},{key:"span",value:function span(from,to,active,openStart){this.buildText(to-from,active,openStart);this.pos=to;if(this.openStart<0)this.openStart=openStart;}},{key:"point",value:function point(from,to,deco,active,openStart,index){if(this.disallowBlockEffectsFor[index]&&deco instanceof _PointDecoration){if(deco.block)throw new RangeError("Block decorations may not be specified via plugins");if(to>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins");}var len=to-from;if(deco instanceof _PointDecoration){if(deco.block){if(deco.startSide>0&&!this.posCovered())this.getLine();this.addBlockWidget(new _BlockWidgetView(deco.widget||NullWidget.block,len,deco));}else{var view=_WidgetView.create(deco.widget||NullWidget.inline,len,len?0:deco.startSide);var cursorBefore=this.atCursorPos&&!view.isEditable&&openStart<=active.length&&(from<to||deco.startSide>0);var cursorAfter=!view.isEditable&&(from<to||openStart>active.length||deco.startSide<=0);var line=this.getLine();if(this.pendingBuffer==2&&!cursorBefore&&!view.isEditable)this.pendingBuffer=0;this.flushBuffer(active);if(cursorBefore){line.append(wrapMarks(new _WidgetBufferView(1),active),openStart);openStart=active.length+Math.max(0,openStart-active.length);}line.append(wrapMarks(view,active),openStart);this.atCursorPos=cursorAfter;this.pendingBuffer=!cursorAfter?0:from<to||openStart>active.length?1:2;if(this.pendingBuffer)this.bufferMarks=active.slice();}}else if(this.doc.lineAt(this.pos).from==this.pos){this.getLine().addLineDeco(deco);}if(len){if(this.textOff+len<=this.text.length){this.textOff+=len;}else{this.skip+=len-(this.text.length-this.textOff);this.text="";this.textOff=0;}this.pos=to;}if(this.openStart<0)this.openStart=openStart;}}],[{key:"build",value:function build(text,from,to,decorations2,dynamicDecorationMap){var builder=new _ContentBuilder(text,from,to,dynamicDecorationMap);builder.openEnd=_RangeSet.spans(decorations2,from,to,builder);if(builder.openStart<0)builder.openStart=builder.openEnd;builder.finish(builder.openEnd);return builder;}}]);}();function wrapMarks(view,active){var _iterator39=_createForOfIteratorHelper(active),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var mark=_step39.value;view=new _MarkView(mark,[view],view.length);}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}return view;}var NullWidget=/*#__PURE__*/function(_WidgetType2){function NullWidget(tag){var _this16;_classCallCheck(this,NullWidget);_this16=_callSuper(this,NullWidget);_this16.tag=tag;return _this16;}_inherits(NullWidget,_WidgetType2);return _createClass(NullWidget,[{key:"eq",value:function eq(other){return other.tag==this.tag;}},{key:"toDOM",value:function toDOM(){return document.createElement(this.tag);}},{key:"updateDOM",value:function updateDOM(elt2){return elt2.nodeName.toLowerCase()==this.tag;}},{key:"isHidden",get:function get(){return true;}}]);}(WidgetType);NullWidget.inline=/* @__PURE__ */new NullWidget("span");NullWidget.block=/* @__PURE__ */new NullWidget("div");var Direction=/* @__PURE__ */function(Direction2){Direction2[Direction2["LTR"]=0]="LTR";Direction2[Direction2["RTL"]=1]="RTL";return Direction2;}(Direction||(Direction={}));var LTR=Direction.LTR;var RTL=Direction.RTL;function dec(str){var result=[];for(var _i66=0;_i66<str.length;_i66++)result.push(1<<+str[_i66]);return result;}var LowTypes=/* @__PURE__ */dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008");var ArabicTypes=/* @__PURE__ */dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333");var Brackets=/* @__PURE__ */Object.create(null);var BracketStack=[];for(var _i67=0,_arr=["()","[]","{}"];_i67<_arr.length;_i67++){var p=_arr[_i67];var l=/* @__PURE__ */p.charCodeAt(0),r=/* @__PURE__ */p.charCodeAt(1);Brackets[l]=r;Brackets[r]=-l;}function charType(ch){return ch<=247?LowTypes[ch]:1424<=ch&&ch<=1524?2:1536<=ch&&ch<=1785?ArabicTypes[ch-1536]:1774<=ch&&ch<=2220?4:8192<=ch&&ch<=8204?256:64336<=ch&&ch<=65023?4:1;}var BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;var BidiSpan=/*#__PURE__*/function(){function BidiSpan(from,to,level){_classCallCheck(this,BidiSpan);this.from=from;this.to=to;this.level=level;}return _createClass(BidiSpan,[{key:"dir",get:function get(){return this.level%2?RTL:LTR;}},{key:"side",value:function side(end,dir){return this.dir==dir==end?this.to:this.from;}},{key:"forward",value:function forward(_forward,dir){return _forward==(this.dir==dir);}}],[{key:"find",value:function find(order,index,level,assoc){var maybe=-1;for(var _i68=0;_i68<order.length;_i68++){var span=order[_i68];if(span.from<=index&&span.to>=index){if(span.level==level)return _i68;if(maybe<0||(assoc!=0?assoc<0?span.from<index:span.to>index:order[maybe].level>span.level))maybe=_i68;}}if(maybe<0)throw new RangeError("Index out of range");return maybe;}}]);}();function isolatesEq(a,b){if(a.length!=b.length)return false;for(var _i69=0;_i69<a.length;_i69++){var iA=a[_i69],iB=b[_i69];if(iA.from!=iB.from||iA.to!=iB.to||iA.direction!=iB.direction||!isolatesEq(iA.inner,iB.inner))return false;}return true;}var types=[];function computeCharTypes(line,rFrom,rTo,isolates,outerType){for(var iI=0;iI<=isolates.length;iI++){var from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;var prevType=iI?256:outerType;for(var _i70=from,prev=prevType,prevStrong=prevType;_i70<to;_i70++){var type=charType(line.charCodeAt(_i70));if(type==512)type=prev;else if(type==8&&prevStrong==4)type=16;types[_i70]=type==4?2:type;if(type&7)prevStrong=type;prev=type;}for(var _i71=from,_prev=prevType,_prevStrong=prevType;_i71<to;_i71++){var _type2=types[_i71];if(_type2==128){if(_i71<to-1&&_prev==types[_i71+1]&&_prev&24)_type2=types[_i71]=_prev;else types[_i71]=256;}else if(_type2==64){var end=_i71+1;while(end<to&&types[end]==64)end++;var replace2=_i71&&_prev==8||end<rTo&&types[end]==8?_prevStrong==1?1:8:256;for(var j=_i71;j<end;j++)types[j]=replace2;_i71=end-1;}else if(_type2==8&&_prevStrong==1){types[_i71]=1;}_prev=_type2;if(_type2&7)_prevStrong=_type2;}}}function processBracketPairs(line,rFrom,rTo,isolates,outerType){var oppositeType=outerType==1?2:1;for(var iI=0,sI=0,context=0;iI<=isolates.length;iI++){var from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(var _i72=from,ch,br,type;_i72<to;_i72++){if(br=Brackets[ch=line.charCodeAt(_i72)]){if(br<0){for(var sJ=sI-3;sJ>=0;sJ-=3){if(BracketStack[sJ+1]==-br){var flags=BracketStack[sJ+2];var type2=flags&2?outerType:!(flags&4)?0:flags&1?oppositeType:outerType;if(type2)types[_i72]=types[BracketStack[sJ]]=type2;sI=sJ;break;}}}else if(BracketStack.length==189){break;}else{BracketStack[sI++]=_i72;BracketStack[sI++]=ch;BracketStack[sI++]=context;}}else if((type=types[_i72])==2||type==1){var embed=type==outerType;context=embed?0:1;for(var _sJ=sI-3;_sJ>=0;_sJ-=3){var cur2=BracketStack[_sJ+2];if(cur2&2)break;if(embed){BracketStack[_sJ+2]|=2;}else{if(cur2&4)break;BracketStack[_sJ+2]|=4;}}}}}}function processNeutrals(rFrom,rTo,isolates,outerType){for(var iI=0,prev=outerType;iI<=isolates.length;iI++){var from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(var _i73=from;_i73<to;){var type=types[_i73];if(type==256){var end=_i73+1;for(;;){if(end==to){if(iI==isolates.length)break;end=isolates[iI++].to;to=iI<isolates.length?isolates[iI].from:rTo;}else if(types[end]==256){end++;}else{break;}}var beforeL=prev==1;var afterL=(end<rTo?types[end]:outerType)==1;var replace2=beforeL==afterL?beforeL?1:2:outerType;for(var j=end,jI=iI,fromJ=jI?isolates[jI-1].to:rFrom;j>_i73;){if(j==fromJ){j=isolates[--jI].from;fromJ=jI?isolates[jI-1].to:rFrom;}types[--j]=replace2;}_i73=end;}else{prev=type;_i73++;}}}}function emitSpans(line,from,to,level,baseLevel,isolates,order){var ourType=level%2?2:1;if(level%2==baseLevel%2){for(var iCh=from,iI=0;iCh<to;){var sameDir=true,isNum=false;if(iI==isolates.length||iCh<isolates[iI].from){var next=types[iCh];if(next!=ourType){sameDir=false;isNum=next==16;}}var recurse=!sameDir&&ourType==1?[]:null;var localLevel=sameDir?level:level+1;var iScan=iCh;run:for(;;){if(iI<isolates.length&&iScan==isolates[iI].from){if(isNum)break run;var iso=isolates[iI];if(!sameDir)for(var upto=iso.to,jI=iI+1;;){if(upto==to)break run;if(jI<isolates.length&&isolates[jI].from==upto)upto=isolates[jI++].to;else if(types[upto]==ourType)break run;else break;}iI++;if(recurse){recurse.push(iso);}else{if(iso.from>iCh)order.push(new BidiSpan(iCh,iso.from,localLevel));var dirSwap=iso.direction==LTR!=!(localLevel%2);computeSectionOrder(line,dirSwap?level+1:level,baseLevel,iso.inner,iso.from,iso.to,order);iCh=iso.to;}iScan=iso.to;}else if(iScan==to||(sameDir?types[iScan]!=ourType:types[iScan]==ourType)){break;}else{iScan++;}}if(recurse)emitSpans(line,iCh,iScan,level+1,baseLevel,recurse,order);else if(iCh<iScan)order.push(new BidiSpan(iCh,iScan,localLevel));iCh=iScan;}}else{for(var _iCh=to,_iI=isolates.length;_iCh>from;){var _sameDir=true,_isNum=false;if(!_iI||_iCh>isolates[_iI-1].to){var _next2=types[_iCh-1];if(_next2!=ourType){_sameDir=false;_isNum=_next2==16;}}var _recurse=!_sameDir&&ourType==1?[]:null;var _localLevel=_sameDir?level:level+1;var _iScan=_iCh;run:for(;;){if(_iI&&_iScan==isolates[_iI-1].to){if(_isNum)break run;var _iso=isolates[--_iI];if(!_sameDir)for(var _upto=_iso.from,_jI=_iI;;){if(_upto==from)break run;if(_jI&&isolates[_jI-1].to==_upto)_upto=isolates[--_jI].from;else if(types[_upto-1]==ourType)break run;else break;}if(_recurse){_recurse.push(_iso);}else{if(_iso.to<_iCh)order.push(new BidiSpan(_iso.to,_iCh,_localLevel));var _dirSwap=_iso.direction==LTR!=!(_localLevel%2);computeSectionOrder(line,_dirSwap?level+1:level,baseLevel,_iso.inner,_iso.from,_iso.to,order);_iCh=_iso.from;}_iScan=_iso.from;}else if(_iScan==from||(_sameDir?types[_iScan-1]!=ourType:types[_iScan-1]==ourType)){break;}else{_iScan--;}}if(_recurse)emitSpans(line,_iScan,_iCh,level+1,baseLevel,_recurse,order);else if(_iScan<_iCh)order.push(new BidiSpan(_iScan,_iCh,_localLevel));_iCh=_iScan;}}}function computeSectionOrder(line,level,baseLevel,isolates,from,to,order){var outerType=level%2?2:1;computeCharTypes(line,from,to,isolates,outerType);processBracketPairs(line,from,to,isolates,outerType);processNeutrals(from,to,isolates,outerType);emitSpans(line,from,to,level,baseLevel,isolates,order);}function computeOrder(line,direction,isolates){if(!line)return[new BidiSpan(0,0,direction==RTL?1:0)];if(direction==LTR&&!isolates.length&&!BidiRE.test(line))return trivialOrder(line.length);if(isolates.length)while(line.length>types.length)types[types.length]=256;var order=[],level=direction==LTR?0:1;computeSectionOrder(line,level,level,isolates,0,line.length,order);return order;}function trivialOrder(length){return[new BidiSpan(0,length,0)];}var movedOver="";function moveVisually(line,order,dir,start,forward){var _a2;var startIndex=start.head-line.from;var spanI=BidiSpan.find(order,startIndex,(_a2=start.bidiLevel)!==null&&_a2!==void 0?_a2:-1,start.assoc);var span=order[spanI],spanEnd=span.side(forward,dir);if(startIndex==spanEnd){var nextI=spanI+=forward?1:-1;if(nextI<0||nextI>=order.length)return null;span=order[spanI=nextI];startIndex=span.side(!forward,dir);spanEnd=span.side(forward,dir);}var nextIndex=findClusterBreak2(line.text,startIndex,span.forward(forward,dir));if(nextIndex<span.from||nextIndex>span.to)nextIndex=spanEnd;movedOver=line.text.slice(Math.min(startIndex,nextIndex),Math.max(startIndex,nextIndex));var nextSpan=spanI==(forward?order.length-1:0)?null:order[spanI+(forward?1:-1)];if(nextSpan&&nextIndex==spanEnd&&nextSpan.level+(forward?0:1)<span.level)return _EditorSelection.cursor(nextSpan.side(!forward,dir)+line.from,nextSpan.forward(forward,dir)?1:-1,nextSpan.level);return _EditorSelection.cursor(nextIndex+line.from,span.forward(forward,dir)?-1:1,span.level);}function autoDirection(text,from,to){for(var _i74=from;_i74<to;_i74++){var type=charType(text.charCodeAt(_i74));if(type==1)return LTR;if(type==2||type==4)return RTL;}return LTR;}var clickAddsSelectionRange=/* @__PURE__ */_Facet.define();var dragMovesSelection$1=/* @__PURE__ */_Facet.define();var mouseSelectionStyle=/* @__PURE__ */_Facet.define();var exceptionSink=/* @__PURE__ */_Facet.define();var updateListener=/* @__PURE__ */_Facet.define();var inputHandler=/* @__PURE__ */_Facet.define();var focusChangeEffect=/* @__PURE__ */_Facet.define();var clipboardInputFilter=/* @__PURE__ */_Facet.define();var clipboardOutputFilter=/* @__PURE__ */_Facet.define();var perLineTextDirection=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.some(function(x){return x;});}});var nativeSelectionHidden=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.some(function(x){return x;});}});var scrollHandler=/* @__PURE__ */_Facet.define();var _ScrollTarget=/*#__PURE__*/function(){function ScrollTarget(range){var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"nearest";var x=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"nearest";var yMargin=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5;var xMargin=arguments.length>4&&arguments[4]!==undefined?arguments[4]:5;var isSnapshot=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;_classCallCheck(this,ScrollTarget);this.range=range;this.y=y;this.x=x;this.yMargin=yMargin;this.xMargin=xMargin;this.isSnapshot=isSnapshot;}return _createClass(ScrollTarget,[{key:"map",value:function map(changes){return changes.empty?this:new _ScrollTarget(this.range.map(changes),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot);}},{key:"clip",value:function clip(state){return this.range.to<=state.doc.length?this:new _ScrollTarget(_EditorSelection.cursor(state.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot);}}]);}();var _scrollIntoView=/* @__PURE__ */_StateEffect.define({map:function map(t2,ch){return t2.map(ch);}});var setEditContextFormatting=/* @__PURE__ */_StateEffect.define();function logException(state,exception,context){var handler=state.facet(exceptionSink);if(handler.length)handler[0](exception);else if(window.onerror)window.onerror(String(exception),context,void 0,void 0,exception);else if(context)console.error(context+":",exception);else console.error(exception);}var editable=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?values2[0]:true;}});var nextPluginID=0;var viewPlugin=/* @__PURE__ */_Facet.define();var _ViewPlugin=/*#__PURE__*/function(){function ViewPlugin(id2,create,domEventHandlers,domEventObservers,buildExtensions){_classCallCheck(this,ViewPlugin);this.id=id2;this.create=create;this.domEventHandlers=domEventHandlers;this.domEventObservers=domEventObservers;this.extension=buildExtensions(this);}return _createClass(ViewPlugin,null,[{key:"define",value:function define(create,spec){var _ref4=spec||{},eventHandlers=_ref4.eventHandlers,eventObservers=_ref4.eventObservers,provide=_ref4.provide,deco=_ref4.decorations;return new _ViewPlugin(nextPluginID++,create,eventHandlers,eventObservers,function(plugin){var ext=[viewPlugin.of(plugin)];if(deco)ext.push(decorations.of(function(view){var pluginInst=view.plugin(plugin);return pluginInst?deco(pluginInst):Decoration.none;}));if(provide)ext.push(provide(plugin));return ext;});}},{key:"fromClass",value:function fromClass(cls,spec){return _ViewPlugin.define(function(view){return new cls(view);},spec);}}]);}();var PluginInstance=/*#__PURE__*/function(){function PluginInstance(spec){_classCallCheck(this,PluginInstance);this.spec=spec;this.mustUpdate=null;this.value=null;}return _createClass(PluginInstance,[{key:"update",value:function update(view){if(!this.value){if(this.spec){try{this.value=this.spec.create(view);}catch(e){logException(view.state,e,"CodeMirror plugin crashed");this.deactivate();}}}else if(this.mustUpdate){var _update=this.mustUpdate;this.mustUpdate=null;if(this.value.update){try{this.value.update(_update);}catch(e){logException(_update.state,e,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy();}catch(_){}this.deactivate();}}}return this;}},{key:"destroy",value:function destroy(view){var _a2;if((_a2=this.value)===null||_a2===void 0?void 0:_a2.destroy){try{this.value.destroy();}catch(e){logException(view.state,e,"CodeMirror plugin crashed");}}}},{key:"deactivate",value:function deactivate(){this.spec=this.value=null;}}]);}();var editorAttributes=/* @__PURE__ */_Facet.define();var contentAttributes=/* @__PURE__ */_Facet.define();var decorations=/* @__PURE__ */_Facet.define();var outerDecorations=/* @__PURE__ */_Facet.define();var atomicRanges=/* @__PURE__ */_Facet.define();var bidiIsolatedRanges=/* @__PURE__ */_Facet.define();function getIsolatedRanges(view,line){var isolates=view.state.facet(bidiIsolatedRanges);if(!isolates.length)return isolates;var sets=isolates.map(function(i){return i instanceof Function?i(view):i;});var result=[];_RangeSet.spans(sets,line.from,line.to,{point:function point(){},span:function span(fromDoc,toDoc,active,open){var from=fromDoc-line.from,to=toDoc-line.from;var level=result;for(var _i75=active.length-1;_i75>=0;_i75--,open--){var direction=active[_i75].spec.bidiIsolate,update=void 0;if(direction==null)direction=autoDirection(line.text,from,to);if(open>0&&level.length&&(update=level[level.length-1]).to==from&&update.direction==direction){update.to=to;level=update.inner;}else{var add2={from:from,to:to,direction:direction,inner:[]};level.push(add2);level=add2.inner;}}}});return result;}var scrollMargins=/* @__PURE__ */_Facet.define();function getScrollMargins(view){var left=0,right=0,top2=0,bottom=0;var _iterator40=_createForOfIteratorHelper(view.state.facet(scrollMargins)),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var source=_step40.value;var m=source(view);if(m){if(m.left!=null)left=Math.max(left,m.left);if(m.right!=null)right=Math.max(right,m.right);if(m.top!=null)top2=Math.max(top2,m.top);if(m.bottom!=null)bottom=Math.max(bottom,m.bottom);}}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}return{left:left,right:right,top:top2,bottom:bottom};}var styleModule=/* @__PURE__ */_Facet.define();var _ChangedRange=/*#__PURE__*/function(){function ChangedRange(fromA,toA,fromB,toB){_classCallCheck(this,ChangedRange);this.fromA=fromA;this.toA=toA;this.fromB=fromB;this.toB=toB;}return _createClass(ChangedRange,[{key:"join",value:function join(other){return new _ChangedRange(Math.min(this.fromA,other.fromA),Math.max(this.toA,other.toA),Math.min(this.fromB,other.fromB),Math.max(this.toB,other.toB));}},{key:"addToSet",value:function addToSet(set){var i=set.length,me=this;for(;i>0;i--){var range=set[i-1];if(range.fromA>me.toA)continue;if(range.toA<me.fromA)break;me=me.join(range);set.splice(i-1,1);}set.splice(i,0,me);return set;}}],[{key:"extendWithRanges",value:function extendWithRanges(diff,ranges){if(ranges.length==0)return diff;var result=[];for(var dI=0,rI=0,posA=0,posB=0;;dI++){var next=dI==diff.length?null:diff[dI],off=posA-posB;var end=next?next.fromB:1e9;while(rI<ranges.length&&ranges[rI]<end){var from=ranges[rI],to=ranges[rI+1];var fromB=Math.max(posB,from),toB=Math.min(end,to);if(fromB<=toB)new _ChangedRange(fromB+off,toB+off,fromB,toB).addToSet(result);if(to>end)break;else rI+=2;}if(!next)return result;new _ChangedRange(next.fromA,next.toA,next.fromB,next.toB).addToSet(result);posA=next.toA;posB=next.toB;}}}]);}();var _ViewUpdate=/*#__PURE__*/function(){function ViewUpdate(view,state,transactions){_classCallCheck(this,ViewUpdate);this.view=view;this.state=state;this.transactions=transactions;this.flags=0;this.startState=view.state;this.changes=_ChangeSet.empty(this.startState.doc.length);var _iterator41=_createForOfIteratorHelper(transactions),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var tr=_step41.value;this.changes=this.changes.compose(tr.changes);}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}var changedRanges=[];this.changes.iterChangedRanges(function(fromA,toA,fromB,toB){return changedRanges.push(new _ChangedRange(fromA,toA,fromB,toB));});this.changedRanges=changedRanges;}return _createClass(ViewUpdate,[{key:"viewportChanged",get:function get(){return(this.flags&4)>0;}},{key:"viewportMoved",get:function get(){return(this.flags&8)>0;}},{key:"heightChanged",get:function get(){return(this.flags&2)>0;}},{key:"geometryChanged",get:function get(){return this.docChanged||(this.flags&(16|2))>0;}},{key:"focusChanged",get:function get(){return(this.flags&1)>0;}},{key:"docChanged",get:function get(){return!this.changes.empty;}},{key:"selectionSet",get:function get(){return this.transactions.some(function(tr){return tr.selection;});}},{key:"empty",get:function get(){return this.flags==0&&this.transactions.length==0;}}],[{key:"create",value:function create(view,state,transactions){return new _ViewUpdate(view,state,transactions);}}]);}();var DocView=/*#__PURE__*/function(_ContentView8){function DocView(view){var _this17;_classCallCheck(this,DocView);_this17=_callSuper(this,DocView);_this17.view=view;_this17.decorations=[];_this17.dynamicDecorationMap=[false];_this17.domChanged=null;_this17.hasComposition=null;_this17.markedForComposition=/* @__PURE__ */new Set();_this17.editContextFormatting=Decoration.none;_this17.lastCompositionAfterCursor=false;_this17.minWidth=0;_this17.minWidthFrom=0;_this17.minWidthTo=0;_this17.impreciseAnchor=null;_this17.impreciseHead=null;_this17.forceSelection=false;_this17.lastUpdate=Date.now();_this17.setDOM(view.contentDOM);_this17.children=[new _LineView()];_this17.children[0].setParent(_this17);_this17.updateDeco();_this17.updateInner([new _ChangedRange(0,0,0,view.state.doc.length)],0,null);return _this17;}_inherits(DocView,_ContentView8);return _createClass(DocView,[{key:"length",get:function get(){return this.view.state.doc.length;}},{key:"update",value:function update(_update2){var _this18=this;var _a2;var changedRanges=_update2.changedRanges;if(this.minWidth>0&&changedRanges.length){if(!changedRanges.every(function(_ref5){var fromA=_ref5.fromA,toA=_ref5.toA;return toA<_this18.minWidthFrom||fromA>_this18.minWidthTo;})){this.minWidth=this.minWidthFrom=this.minWidthTo=0;}else{this.minWidthFrom=_update2.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=_update2.changes.mapPos(this.minWidthTo,1);}}this.updateEditContextFormatting(_update2);var readCompositionAt=-1;if(this.view.inputState.composing>=0&&!this.view.observer.editContext){if((_a2=this.domChanged)===null||_a2===void 0?void 0:_a2.newSel)readCompositionAt=this.domChanged.newSel.head;else if(!touchesComposition(_update2.changes,this.hasComposition)&&!_update2.selectionSet)readCompositionAt=_update2.state.selection.main.head;}var composition=readCompositionAt>-1?findCompositionRange(this.view,_update2.changes,readCompositionAt):null;this.domChanged=null;if(this.hasComposition){this.markedForComposition.clear();var _this$hasComposition=this.hasComposition,from=_this$hasComposition.from,to=_this$hasComposition.to;changedRanges=new _ChangedRange(from,to,_update2.changes.mapPos(from,-1),_update2.changes.mapPos(to,1)).addToSet(changedRanges.slice());}this.hasComposition=composition?{from:composition.range.fromB,to:composition.range.toB}:null;if((browser.ie||browser.chrome)&&!composition&&_update2&&_update2.state.doc.lines!=_update2.startState.doc.lines)this.forceSelection=true;var prevDeco=this.decorations,deco=this.updateDeco();var decoDiff=findChangedDeco(prevDeco,deco,_update2.changes);changedRanges=_ChangedRange.extendWithRanges(changedRanges,decoDiff);if(!(this.flags&7)&&changedRanges.length==0){return false;}else{this.updateInner(changedRanges,_update2.startState.doc.length,composition);if(_update2.transactions.length)this.lastUpdate=Date.now();return true;}}},{key:"updateInner",value:function updateInner(changes,oldLength,composition){var _this19=this;this.view.viewState.mustMeasureContent=true;this.updateChildren(changes,oldLength,composition);var observer=this.view.observer;observer.ignore(function(){_this19.dom.style.height=_this19.view.viewState.contentHeight/_this19.view.scaleY+"px";_this19.dom.style.flexBasis=_this19.minWidth?_this19.minWidth+"px":"";var track=browser.chrome||browser.ios?{node:observer.selectionRange.focusNode,written:false}:void 0;_this19.sync(_this19.view,track);_this19.flags&=~7;if(track&&(track.written||observer.selectionRange.focusNode!=track.node))_this19.forceSelection=true;_this19.dom.style.height="";});this.markedForComposition.forEach(function(cView){return cView.flags&=~8;});var gaps=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var _iterator42=_createForOfIteratorHelper(this.children),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var child=_step42.value;if(child instanceof _BlockWidgetView&&child.widget instanceof BlockGapWidget)gaps.push(child.dom);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}}observer.updateGaps(gaps);}},{key:"updateChildren",value:function updateChildren(changes,oldLength,composition){var ranges=composition?composition.range.addToSet(changes.slice()):changes;var cursor2=this.childCursor(oldLength);for(var _i76=ranges.length-1;;_i76--){var next=_i76>=0?ranges[_i76]:null;if(!next)break;var fromA=next.fromA,toA=next.toA,fromB=next.fromB,toB=next.toB,content2=void 0,breakAtStart=void 0,openStart=void 0,openEnd=void 0;if(composition&&composition.range.fromB<toB&&composition.range.toB>fromB){var before=_ContentBuilder.build(this.view.state.doc,fromB,composition.range.fromB,this.decorations,this.dynamicDecorationMap);var after=_ContentBuilder.build(this.view.state.doc,composition.range.toB,toB,this.decorations,this.dynamicDecorationMap);breakAtStart=before.breakAtStart;openStart=before.openStart;openEnd=after.openEnd;var compLine=this.compositionView(composition);if(after.breakAtStart){compLine.breakAfter=1;}else if(after.content.length&&compLine.merge(compLine.length,compLine.length,after.content[0],false,after.openStart,0)){compLine.breakAfter=after.content[0].breakAfter;after.content.shift();}if(before.content.length&&compLine.merge(0,0,before.content[before.content.length-1],true,0,before.openEnd)){before.content.pop();}content2=before.content.concat(compLine).concat(after.content);}else{var _ContentBuilder$build=_ContentBuilder.build(this.view.state.doc,fromB,toB,this.decorations,this.dynamicDecorationMap);content2=_ContentBuilder$build.content;breakAtStart=_ContentBuilder$build.breakAtStart;openStart=_ContentBuilder$build.openStart;openEnd=_ContentBuilder$build.openEnd;}var _cursor2$findPos=cursor2.findPos(toA,1),toI=_cursor2$findPos.i,toOff=_cursor2$findPos.off;var _cursor2$findPos2=cursor2.findPos(fromA,-1),fromI=_cursor2$findPos2.i,fromOff=_cursor2$findPos2.off;replaceRange(this,fromI,fromOff,toI,toOff,content2,breakAtStart,openStart,openEnd);}if(composition)this.fixCompositionDOM(composition);}},{key:"updateEditContextFormatting",value:function updateEditContextFormatting(update){this.editContextFormatting=this.editContextFormatting.map(update.changes);var _iterator43=_createForOfIteratorHelper(update.transactions),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var tr=_step43.value;var _iterator44=_createForOfIteratorHelper(tr.effects),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var effect=_step44.value;if(effect.is(setEditContextFormatting)){this.editContextFormatting=effect.value;}}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}}},{key:"compositionView",value:function compositionView(composition){var cur2=new _TextView(composition.text.nodeValue);cur2.flags|=8;var _iterator45=_createForOfIteratorHelper(composition.marks),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var deco=_step45.value.deco;cur2=new _MarkView(deco,[cur2],cur2.length);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}var line=new _LineView();line.append(cur2,0);return line;}},{key:"fixCompositionDOM",value:function fixCompositionDOM(composition){var _this20=this;var fix=function fix(dom,cView2){cView2.flags|=8|(cView2.children.some(function(c){return c.flags&7;})?1:0);_this20.markedForComposition.add(cView2);var prev=_ContentView.get(dom);if(prev&&prev!=cView2)prev.dom=null;cView2.setDOM(dom);};var pos=this.childPos(composition.range.fromB,1);var cView=this.children[pos.i];fix(composition.line,cView);for(var _i77=composition.marks.length-1;_i77>=-1;_i77--){pos=cView.childPos(pos.off,1);cView=cView.children[pos.i];fix(_i77>=0?composition.marks[_i77].node:composition.text,cView);}}},{key:"updateSelection",value:function updateSelection(){var _this21=this;var mustRead=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var fromPointer=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(mustRead||!this.view.observer.selectionRange.focusNode)this.view.observer.readSelectionRange();var activeElt=this.view.root.activeElement,focused=activeElt==this.dom;var selectionNotFocus=!focused&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(activeElt&&this.dom.contains(activeElt));if(!(focused||fromPointer||selectionNotFocus))return;var force=this.forceSelection;this.forceSelection=false;var main=this.view.state.selection.main;var anchor=this.moveToLine(this.domAtPos(main.anchor));var head=main.empty?anchor:this.moveToLine(this.domAtPos(main.head));if(browser.gecko&&main.empty&&!this.hasComposition&&betweenUneditable(anchor)){var dummy=document.createTextNode("");this.view.observer.ignore(function(){return anchor.node.insertBefore(dummy,anchor.node.childNodes[anchor.offset]||null);});anchor=head=new _DOMPos(dummy,0);force=true;}var domSel=this.view.observer.selectionRange;if(force||!domSel.focusNode||(!isEquivalentPosition(anchor.node,anchor.offset,domSel.anchorNode,domSel.anchorOffset)||!isEquivalentPosition(head.node,head.offset,domSel.focusNode,domSel.focusOffset))&&!this.suppressWidgetCursorChange(domSel,main)){this.view.observer.ignore(function(){if(browser.android&&browser.chrome&&_this21.dom.contains(domSel.focusNode)&&inUneditable(domSel.focusNode,_this21.dom)){_this21.dom.blur();_this21.dom.focus({preventScroll:true});}var rawSel=getSelection(_this21.view.root);if(!rawSel);else if(main.empty){if(browser.gecko){var nextTo=nextToUneditable(anchor.node,anchor.offset);if(nextTo&&nextTo!=(1|2)){var text=(nextTo==1?textNodeBefore:textNodeAfter)(anchor.node,anchor.offset);if(text)anchor=new _DOMPos(text.node,text.offset);}}rawSel.collapse(anchor.node,anchor.offset);if(main.bidiLevel!=null&&rawSel.caretBidiLevel!==void 0)rawSel.caretBidiLevel=main.bidiLevel;}else if(rawSel.extend){rawSel.collapse(anchor.node,anchor.offset);try{rawSel.extend(head.node,head.offset);}catch(_){}}else{var range=document.createRange();if(main.anchor>main.head){var _ref6=[head,anchor];anchor=_ref6[0];head=_ref6[1];}range.setEnd(head.node,head.offset);range.setStart(anchor.node,anchor.offset);rawSel.removeAllRanges();rawSel.addRange(range);}if(selectionNotFocus&&_this21.view.root.activeElement==_this21.dom){_this21.dom.blur();if(activeElt)activeElt.focus();}});this.view.observer.setSelectionRange(anchor,head);}this.impreciseAnchor=anchor.precise?null:new _DOMPos(domSel.anchorNode,domSel.anchorOffset);this.impreciseHead=head.precise?null:new _DOMPos(domSel.focusNode,domSel.focusOffset);}},{key:"suppressWidgetCursorChange",value:function suppressWidgetCursorChange(sel,cursor2){return this.hasComposition&&cursor2.empty&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset)&&this.posFromDOM(sel.focusNode,sel.focusOffset)==cursor2.head;}},{key:"enforceCursorAssoc",value:function enforceCursorAssoc(){if(this.hasComposition)return;var view=this.view,cursor2=view.state.selection.main;var sel=getSelection(view.root);var _view$observer$select=view.observer.selectionRange,anchorNode=_view$observer$select.anchorNode,anchorOffset=_view$observer$select.anchorOffset;if(!sel||!cursor2.empty||!cursor2.assoc||!sel.modify)return;var line=_LineView.find(this,cursor2.head);if(!line)return;var lineStart=line.posAtStart;if(cursor2.head==lineStart||cursor2.head==lineStart+line.length)return;var before=this.coordsAt(cursor2.head,-1),after=this.coordsAt(cursor2.head,1);if(!before||!after||before.bottom>after.top)return;var dom=this.domAtPos(cursor2.head+cursor2.assoc);sel.collapse(dom.node,dom.offset);sel.modify("move",cursor2.assoc<0?"forward":"backward","lineboundary");view.observer.readSelectionRange();var newRange=view.observer.selectionRange;if(view.docView.posFromDOM(newRange.anchorNode,newRange.anchorOffset)!=cursor2.from)sel.collapse(anchorNode,anchorOffset);}},{key:"moveToLine",value:function moveToLine(pos){var dom=this.dom,newPos;if(pos.node!=dom)return pos;for(var _i78=pos.offset;!newPos&&_i78<dom.childNodes.length;_i78++){var view=_ContentView.get(dom.childNodes[_i78]);if(view instanceof _LineView)newPos=view.domAtPos(0);}for(var _i79=pos.offset-1;!newPos&&_i79>=0;_i79--){var _view2=_ContentView.get(dom.childNodes[_i79]);if(_view2 instanceof _LineView)newPos=_view2.domAtPos(_view2.length);}return newPos?new _DOMPos(newPos.node,newPos.offset,true):pos;}},{key:"nearest",value:function nearest(dom){for(var cur2=dom;cur2;){var domView=_ContentView.get(cur2);if(domView&&domView.rootView==this)return domView;cur2=cur2.parentNode;}return null;}},{key:"posFromDOM",value:function posFromDOM(node,offset){var view=this.nearest(node);if(!view)throw new RangeError("Trying to find position for a DOM position outside of the document");return view.localPosFromDOM(node,offset)+view.posAtStart;}},{key:"domAtPos",value:function domAtPos(pos){var _this$childCursor$fin=this.childCursor().findPos(pos,-1),i=_this$childCursor$fin.i,off=_this$childCursor$fin.off;for(;i<this.children.length-1;){var child=this.children[i];if(off<child.length||child instanceof _LineView)break;i++;off=0;}return this.children[i].domAtPos(off);}},{key:"coordsAt",value:function coordsAt(pos,side){var best=null,bestPos=0;for(var off=this.length,_i80=this.children.length-1;_i80>=0;_i80--){var child=this.children[_i80],end=off-child.breakAfter,start=end-child.length;if(end<pos)break;if(start<=pos&&(start<pos||child.covers(-1))&&(end>pos||child.covers(1))&&(!best||child instanceof _LineView&&!(best instanceof _LineView&&side>=0))){best=child;bestPos=start;}else if(best&&start==pos&&end==pos&&child instanceof _BlockWidgetView&&Math.abs(side)<2){if(child.deco.startSide<0)break;else if(_i80)best=null;}off=start;}return best?best.coordsAt(pos-bestPos,side):null;}},{key:"coordsForChar",value:function coordsForChar(pos){var _this$childPos2=this.childPos(pos,1),i=_this$childPos2.i,off=_this$childPos2.off,child=this.children[i];if(!(child instanceof _LineView))return null;while(child.children.length){var _child$childPos=child.childPos(off,1),i2=_child$childPos.i,childOff=_child$childPos.off;for(;;i2++){if(i2==child.children.length)return null;if((child=child.children[i2]).length)break;}off=childOff;}if(!(child instanceof _TextView))return null;var end=findClusterBreak2(child.text,off);if(end==off)return null;var rects=textRange(child.dom,off,end).getClientRects();for(var _i81=0;_i81<rects.length;_i81++){var rect=rects[_i81];if(_i81==rects.length-1||rect.top<rect.bottom&&rect.left<rect.right)return rect;}return null;}},{key:"measureVisibleLineHeights",value:function measureVisibleLineHeights(viewport){var result=[],from=viewport.from,to=viewport.to;var contentWidth=this.view.contentDOM.clientWidth;var isWider=contentWidth>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;var widest=-1,ltr=this.view.textDirection==Direction.LTR;for(var pos=0,_i82=0;_i82<this.children.length;_i82++){var child=this.children[_i82],end=pos+child.length;if(end>to)break;if(pos>=from){var childRect=child.dom.getBoundingClientRect();result.push(childRect.height);if(isWider){var last=child.dom.lastChild;var rects=last?clientRectsFor(last):[];if(rects.length){var rect=rects[rects.length-1];var width=ltr?rect.right-childRect.left:childRect.right-rect.left;if(width>widest){widest=width;this.minWidth=contentWidth;this.minWidthFrom=pos;this.minWidthTo=end;}}}}pos=end+child.breakAfter;}return result;}},{key:"textDirectionAt",value:function textDirectionAt(pos){var _this$childPos3=this.childPos(pos,1),i=_this$childPos3.i;return getComputedStyle(this.children[i].dom).direction=="rtl"?Direction.RTL:Direction.LTR;}},{key:"measureTextSize",value:function measureTextSize(){var _this22=this;var _iterator46=_createForOfIteratorHelper(this.children),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var child=_step46.value;if(child instanceof _LineView){var measure=child.measureTextSize();if(measure)return measure;}}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}var dummy=document.createElement("div"),lineHeight,charWidth,textHeight;dummy.className="cm-line";dummy.style.width="99999px";dummy.style.position="absolute";dummy.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){_this22.dom.appendChild(dummy);var rect=clientRectsFor(dummy.firstChild)[0];lineHeight=dummy.getBoundingClientRect().height;charWidth=rect?rect.width/27:7;textHeight=rect?rect.height:lineHeight;dummy.remove();});return{lineHeight:lineHeight,charWidth:charWidth,textHeight:textHeight};}},{key:"childCursor",value:function childCursor(){var pos=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.length;var i=this.children.length;if(i)pos-=this.children[--i].length;return new ChildCursor(this.children,pos,i);}},{key:"computeBlockGapDeco",value:function computeBlockGapDeco(){var deco=[],vs=this.view.viewState;for(var pos=0,_i83=0;;_i83++){var next=_i83==vs.viewports.length?null:vs.viewports[_i83];var end=next?next.from-1:this.length;if(end>pos){var height=(vs.lineBlockAt(end).bottom-vs.lineBlockAt(pos).top)/this.view.scaleY;deco.push(Decoration.replace({widget:new BlockGapWidget(height),block:true,inclusive:true,isBlockGap:true}).range(pos,end));}if(!next)break;pos=next.to+1;}return Decoration.set(deco);}},{key:"updateDeco",value:function updateDeco(){var _this23=this;var i=1;var allDeco=this.view.state.facet(decorations).map(function(d){var dynamic=_this23.dynamicDecorationMap[i++]=typeof d=="function";return dynamic?d(_this23.view):d;});var dynamicOuter=false,outerDeco=this.view.state.facet(outerDecorations).map(function(d,i2){var dynamic=typeof d=="function";if(dynamic)dynamicOuter=true;return dynamic?d(_this23.view):d;});if(outerDeco.length){this.dynamicDecorationMap[i++]=dynamicOuter;allDeco.push(_RangeSet.join(outerDeco));}this.decorations=[this.editContextFormatting].concat(_toConsumableArray(allDeco),[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]);while(i<this.decorations.length)this.dynamicDecorationMap[i++]=false;return this.decorations;}},{key:"scrollIntoView",value:function scrollIntoView(target){if(target.isSnapshot){var ref=this.view.viewState.lineBlockAt(target.range.head);this.view.scrollDOM.scrollTop=ref.top-target.yMargin;this.view.scrollDOM.scrollLeft=target.xMargin;return;}var _iterator47=_createForOfIteratorHelper(this.view.state.facet(scrollHandler)),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var handler=_step47.value;try{if(handler(this.view,target.range,target))return true;}catch(e){logException(this.view.state,e,"scroll handler");}}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}var range=target.range;var rect=this.coordsAt(range.head,range.empty?range.assoc:range.head>range.anchor?-1:1),other;if(!rect)return;if(!range.empty&&(other=this.coordsAt(range.anchor,range.anchor>range.head?-1:1)))rect={left:Math.min(rect.left,other.left),top:Math.min(rect.top,other.top),right:Math.max(rect.right,other.right),bottom:Math.max(rect.bottom,other.bottom)};var margins=getScrollMargins(this.view);var targetRect={left:rect.left-margins.left,top:rect.top-margins.top,right:rect.right+margins.right,bottom:rect.bottom+margins.bottom};var _this$view$scrollDOM=this.view.scrollDOM,offsetWidth=_this$view$scrollDOM.offsetWidth,offsetHeight=_this$view$scrollDOM.offsetHeight;scrollRectIntoView(this.view.scrollDOM,targetRect,range.head<range.anchor?-1:1,target.x,target.y,Math.max(Math.min(target.xMargin,offsetWidth),-offsetWidth),Math.max(Math.min(target.yMargin,offsetHeight),-offsetHeight),this.view.textDirection==Direction.LTR);}}]);}(_ContentView);function betweenUneditable(pos){return pos.node.nodeType==1&&pos.node.firstChild&&(pos.offset==0||pos.node.childNodes[pos.offset-1].contentEditable=="false")&&(pos.offset==pos.node.childNodes.length||pos.node.childNodes[pos.offset].contentEditable=="false");}function findCompositionNode(view,headPos){var sel=view.observer.selectionRange;if(!sel.focusNode)return null;var textBefore=textNodeBefore(sel.focusNode,sel.focusOffset);var textAfter=textNodeAfter(sel.focusNode,sel.focusOffset);var textNode=textBefore||textAfter;if(textAfter&&textBefore&&textAfter.node!=textBefore.node){var descAfter=_ContentView.get(textAfter.node);if(!descAfter||descAfter instanceof _TextView&&descAfter.text!=textAfter.node.nodeValue){textNode=textAfter;}else if(view.docView.lastCompositionAfterCursor){var descBefore=_ContentView.get(textBefore.node);if(!(!descBefore||descBefore instanceof _TextView&&descBefore.text!=textBefore.node.nodeValue))textNode=textAfter;}}view.docView.lastCompositionAfterCursor=textNode!=textBefore;if(!textNode)return null;var from=headPos-textNode.offset;return{from:from,to:from+textNode.node.nodeValue.length,node:textNode.node};}function findCompositionRange(view,changes,headPos){var found=findCompositionNode(view,headPos);if(!found)return null;var textNode=found.node,from=found.from,to=found.to,text=textNode.nodeValue;if(/[\n\r]/.test(text))return null;if(view.state.doc.sliceString(found.from,found.to)!=text)return null;var inv=changes.invertedDesc;var range=new _ChangedRange(inv.mapPos(from),inv.mapPos(to),from,to);var marks2=[];for(var parent=textNode.parentNode;;parent=parent.parentNode){var parentView=_ContentView.get(parent);if(parentView instanceof _MarkView)marks2.push({node:parent,deco:parentView.mark});else if(parentView instanceof _LineView||parent.nodeName=="DIV"&&parent.parentNode==view.contentDOM)return{range:range,text:textNode,marks:marks2,line:parent};else if(parent!=view.contentDOM)marks2.push({node:parent,deco:new _MarkDecoration({inclusive:true,attributes:getAttrs(parent),tagName:parent.tagName.toLowerCase()})});else return null;}}function nextToUneditable(node,offset){if(node.nodeType!=1)return 0;return(offset&&node.childNodes[offset-1].contentEditable=="false"?1:0)|(offset<node.childNodes.length&&node.childNodes[offset].contentEditable=="false"?2:0);}var DecorationComparator$1=/*#__PURE__*/function(){function DecorationComparator(){_classCallCheck(this,DecorationComparator);this.changes=[];}return _createClass(DecorationComparator,[{key:"compareRange",value:function compareRange(from,to){addRange(from,to,this.changes);}},{key:"comparePoint",value:function comparePoint(from,to){addRange(from,to,this.changes);}},{key:"boundChange",value:function boundChange(pos){addRange(pos,pos,this.changes);}}]);}();function findChangedDeco(a,b,diff){var comp=new DecorationComparator$1();_RangeSet.compare(a,b,diff,comp);return comp.changes;}function inUneditable(node,inside2){for(var cur2=node;cur2&&cur2!=inside2;cur2=cur2.assignedSlot||cur2.parentNode){if(cur2.nodeType==1&&cur2.contentEditable=="false"){return true;}}return false;}function touchesComposition(changes,composition){var touched=false;if(composition)changes.iterChangedRanges(function(from,to){if(from<composition.to&&to>composition.from)touched=true;});return touched;}function groupAt(state,pos){var bias=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var categorize=state.charCategorizer(pos);var line=state.doc.lineAt(pos),linePos=pos-line.from;if(line.length==0)return _EditorSelection.cursor(pos);if(linePos==0)bias=1;else if(linePos==line.length)bias=-1;var from=linePos,to=linePos;if(bias<0)from=findClusterBreak2(line.text,linePos,false);else to=findClusterBreak2(line.text,linePos);var cat=categorize(line.text.slice(from,to));while(from>0){var prev=findClusterBreak2(line.text,from,false);if(categorize(line.text.slice(prev,from))!=cat)break;from=prev;}while(to<line.length){var next=findClusterBreak2(line.text,to);if(categorize(line.text.slice(to,next))!=cat)break;to=next;}return _EditorSelection.range(from+line.from,to+line.from);}function getdx(x,rect){return rect.left>x?rect.left-x:Math.max(0,x-rect.right);}function getdy(y,rect){return rect.top>y?rect.top-y:Math.max(0,y-rect.bottom);}function yOverlap(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1;}function upTop(rect,top2){return top2<rect.top?{top:top2,left:rect.left,right:rect.right,bottom:rect.bottom}:rect;}function upBot(rect,bottom){return bottom>rect.bottom?{top:rect.top,left:rect.left,right:rect.right,bottom:bottom}:rect;}function domPosAtCoords(parent,x,y){var closest,closestRect,closestX,closestY,closestOverlap=false;var above,below,aboveRect,belowRect;for(var child=parent.firstChild;child;child=child.nextSibling){var rects=clientRectsFor(child);for(var _i84=0;_i84<rects.length;_i84++){var rect=rects[_i84];if(closestRect&&yOverlap(closestRect,rect))rect=upTop(upBot(rect,closestRect.bottom),closestRect.top);var dx=getdx(x,rect),dy=getdy(y,rect);if(dx==0&&dy==0)return child.nodeType==3?domPosInText(child,x,y):domPosAtCoords(child,x,y);if(!closest||closestY>dy||closestY==dy&&closestX>dx){closest=child;closestRect=rect;closestX=dx;closestY=dy;var side=dy?y<rect.top?-1:1:dx?x<rect.left?-1:1:0;closestOverlap=!side||(side>0?_i84<rects.length-1:_i84>0);}if(dx==0){if(y>rect.bottom&&(!aboveRect||aboveRect.bottom<rect.bottom)){above=child;aboveRect=rect;}else if(y<rect.top&&(!belowRect||belowRect.top>rect.top)){below=child;belowRect=rect;}}else if(aboveRect&&yOverlap(aboveRect,rect)){aboveRect=upBot(aboveRect,rect.bottom);}else if(belowRect&&yOverlap(belowRect,rect)){belowRect=upTop(belowRect,rect.top);}}}if(aboveRect&&aboveRect.bottom>=y){closest=above;closestRect=aboveRect;}else if(belowRect&&belowRect.top<=y){closest=below;closestRect=belowRect;}if(!closest)return{node:parent,offset:0};var clipX=Math.max(closestRect.left,Math.min(closestRect.right,x));if(closest.nodeType==3)return domPosInText(closest,clipX,y);if(closestOverlap&&closest.contentEditable!="false")return domPosAtCoords(closest,clipX,y);var offset=Array.prototype.indexOf.call(parent.childNodes,closest)+(x>=(closestRect.left+closestRect.right)/2?1:0);return{node:parent,offset:offset};}function domPosInText(node,x,y){var len=node.nodeValue.length;var closestOffset=-1,closestDY=1e9,generalSide=0;for(var _i85=0;_i85<len;_i85++){var rects=textRange(node,_i85,_i85+1).getClientRects();for(var j=0;j<rects.length;j++){var rect=rects[j];if(rect.top==rect.bottom)continue;if(!generalSide)generalSide=x-rect.left;var dy=(rect.top>y?rect.top-y:y-rect.bottom)-1;if(rect.left-1<=x&&rect.right+1>=x&&dy<closestDY){var right=x>=(rect.left+rect.right)/2,after=right;if(browser.chrome||browser.gecko){var rectBefore=textRange(node,_i85).getBoundingClientRect();if(rectBefore.left==rect.right)after=!right;}if(dy<=0)return{node:node,offset:_i85+(after?1:0)};closestOffset=_i85+(after?1:0);closestDY=dy;}}}return{node:node,offset:closestOffset>-1?closestOffset:generalSide>0?node.nodeValue.length:0};}function _posAtCoords(view,coords,precise){var bias=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;var _a2,_b;var content2=view.contentDOM.getBoundingClientRect(),docTop=content2.top+view.viewState.paddingTop;var block,docHeight=view.viewState.docHeight;var x=coords.x,y=coords.y,yOffset=y-docTop;if(yOffset<0)return 0;if(yOffset>docHeight)return view.state.doc.length;for(var halfLine=view.viewState.heightOracle.textHeight/2,bounced=false;;){block=view.elementAtHeight(yOffset);if(block.type==BlockType.Text)break;for(;;){yOffset=bias>0?block.bottom+halfLine:block.top-halfLine;if(yOffset>=0&&yOffset<=docHeight)break;if(bounced)return precise?null:0;bounced=true;bias=-bias;}}y=docTop+yOffset;var lineStart=block.from;if(lineStart<view.viewport.from)return view.viewport.from==0?0:precise?null:posAtCoordsImprecise(view,content2,block,x,y);if(lineStart>view.viewport.to)return view.viewport.to==view.state.doc.length?view.state.doc.length:precise?null:posAtCoordsImprecise(view,content2,block,x,y);var doc2=view.dom.ownerDocument;var root=view.root.elementFromPoint?view.root:doc2;var element=root.elementFromPoint(x,y);if(element&&!view.contentDOM.contains(element))element=null;if(!element){x=Math.max(content2.left+1,Math.min(content2.right-1,x));element=root.elementFromPoint(x,y);if(element&&!view.contentDOM.contains(element))element=null;}var node,offset=-1;if(element&&((_a2=view.docView.nearest(element))===null||_a2===void 0?void 0:_a2.isEditable)!=false){if(doc2.caretPositionFromPoint){var pos=doc2.caretPositionFromPoint(x,y);if(pos){node=pos.offsetNode;offset=pos.offset;}}else if(doc2.caretRangeFromPoint){var range=doc2.caretRangeFromPoint(x,y);if(range){node=range.startContainer;offset=range.startOffset;if(!view.contentDOM.contains(node)||browser.safari&&isSuspiciousSafariCaretResult(node,offset,x)||browser.chrome&&isSuspiciousChromeCaretResult(node,offset,x))node=void 0;}}if(node)offset=Math.min(maxOffset(node),offset);}if(!node||!view.docView.dom.contains(node)){var line=_LineView.find(view.docView,lineStart);if(!line)return yOffset>block.top+block.height/2?block.to:block.from;var _domPosAtCoords=domPosAtCoords(line.dom,x,y);node=_domPosAtCoords.node;offset=_domPosAtCoords.offset;}var nearest=view.docView.nearest(node);if(!nearest)return null;if(nearest.isWidget&&((_b=nearest.dom)===null||_b===void 0?void 0:_b.nodeType)==1){var rect=nearest.dom.getBoundingClientRect();return coords.y<rect.top||coords.y<=rect.bottom&&coords.x<=(rect.left+rect.right)/2?nearest.posAtStart:nearest.posAtEnd;}else{return nearest.localPosFromDOM(node,offset)+nearest.posAtStart;}}function posAtCoordsImprecise(view,contentRect,block,x,y){var into=Math.round((x-contentRect.left)*view.defaultCharacterWidth);if(view.lineWrapping&&block.height>view.defaultLineHeight*1.5){var textHeight=view.viewState.heightOracle.textHeight;var line=Math.floor((y-block.top-(view.defaultLineHeight-textHeight)*0.5)/textHeight);into+=line*view.viewState.heightOracle.lineLength;}var content2=view.state.sliceDoc(block.from,block.to);return block.from+findColumn(content2,into,view.state.tabSize);}function isSuspiciousSafariCaretResult(node,offset,x){var len;if(node.nodeType!=3||offset!=(len=node.nodeValue.length))return false;for(var next=node.nextSibling;next;next=next.nextSibling)if(next.nodeType!=1||next.nodeName!="BR")return false;return textRange(node,len-1,len).getBoundingClientRect().left>x;}function isSuspiciousChromeCaretResult(node,offset,x){if(offset!=0)return false;for(var cur2=node;;){var parent=cur2.parentNode;if(!parent||parent.nodeType!=1||parent.firstChild!=cur2)return false;if(parent.classList.contains("cm-line"))break;cur2=parent;}var rect=node.nodeType==1?node.getBoundingClientRect():textRange(node,0,Math.max(node.nodeValue.length,1)).getBoundingClientRect();return x-rect.left>5;}function blockAt(view,pos,side){var line=view.lineBlockAt(pos);if(Array.isArray(line.type)){var best;var _iterator48=_createForOfIteratorHelper(line.type),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var _l=_step48.value;if(_l.from>pos)break;if(_l.to<pos)continue;if(_l.from<pos&&_l.to>pos)return _l;if(!best||_l.type==BlockType.Text&&(best.type!=_l.type||(side<0?_l.from<pos:_l.to>pos)))best=_l;}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}return best||line;}return line;}function _moveToLineBoundary(view,start,forward,includeWrap){var line=blockAt(view,start.head,start.assoc||-1);var coords=!includeWrap||line.type!=BlockType.Text||!(view.lineWrapping||line.widgetLineBreaks)?null:view.coordsAtPos(start.assoc<0&&start.head>line.from?start.head-1:start.head);if(coords){var editorRect=view.dom.getBoundingClientRect();var direction=view.textDirectionAt(line.from);var pos=view.posAtCoords({x:forward==(direction==Direction.LTR)?editorRect.right-1:editorRect.left+1,y:(coords.top+coords.bottom)/2});if(pos!=null)return _EditorSelection.cursor(pos,forward?-1:1);}return _EditorSelection.cursor(forward?line.to:line.from,forward?-1:1);}function _moveByChar(view,start,forward,by){var line=view.state.doc.lineAt(start.head),spans=view.bidiSpans(line);var direction=view.textDirectionAt(line.from);for(var cur2=start,check=null;;){var next=moveVisually(line,spans,direction,cur2,forward),_char2=movedOver;if(!next){if(line.number==(forward?view.state.doc.lines:1))return cur2;_char2="\n";line=view.state.doc.line(line.number+(forward?1:-1));spans=view.bidiSpans(line);next=view.visualLineSide(line,!forward);}if(!check){if(!by)return next;check=by(_char2);}else if(!check(_char2)){return cur2;}cur2=next;}}function byGroup(view,pos,start){var categorize=view.state.charCategorizer(pos);var cat=categorize(start);return function(next){var nextCat=categorize(next);if(cat==CharCategory.Space)cat=nextCat;return cat==nextCat;};}function _moveVertically(view,start,forward,distance){var startPos=start.head,dir=forward?1:-1;if(startPos==(forward?view.state.doc.length:0))return _EditorSelection.cursor(startPos,start.assoc);var goal=start.goalColumn,startY;var rect=view.contentDOM.getBoundingClientRect();var startCoords=view.coordsAtPos(startPos,start.assoc||-1),docTop=view.documentTop;if(startCoords){if(goal==null)goal=startCoords.left-rect.left;startY=dir<0?startCoords.top:startCoords.bottom;}else{var line=view.viewState.lineBlockAt(startPos);if(goal==null)goal=Math.min(rect.right-rect.left,view.defaultCharacterWidth*(startPos-line.from));startY=(dir<0?line.top:line.bottom)+docTop;}var resolvedGoal=rect.left+goal;var dist2=distance!==null&&distance!==void 0?distance:view.viewState.heightOracle.textHeight>>1;for(var extra=0;;extra+=10){var curY=startY+(dist2+extra)*dir;var pos=_posAtCoords(view,{x:resolvedGoal,y:curY},false,dir);if(curY<rect.top||curY>rect.bottom||(dir<0?pos<startPos:pos>startPos)){var charRect=view.docView.coordsForChar(pos);var assoc=!charRect||curY<charRect.top?-1:1;return _EditorSelection.cursor(pos,assoc,void 0,goal);}}}function skipAtomicRanges(atoms,pos,bias){var _loop5=function _loop5(){var moved=0;var _iterator49=_createForOfIteratorHelper(atoms),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var set=_step49.value;set.between(pos-1,pos+1,function(from,to,value){if(pos>from&&pos<to){var side=moved||bias||(pos-from<to-pos?-1:1);pos=side<0?from:to;moved=side;}});}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}if(!moved)return{v:pos};},_ret;for(;;){_ret=_loop5();if(_ret)return _ret.v;}}function skipAtoms(view,oldPos,pos){var newPos=skipAtomicRanges(view.state.facet(atomicRanges).map(function(f){return f(view);}),pos.from,oldPos.head>pos.from?-1:1);return newPos==pos.from?pos:_EditorSelection.cursor(newPos,newPos<pos.from?1:-1);}var LineBreakPlaceholder="\uFFFF";var DOMReader=/*#__PURE__*/function(){function DOMReader(points,state){_classCallCheck(this,DOMReader);this.points=points;this.text="";this.lineSeparator=state.facet(_EditorState.lineSeparator);}return _createClass(DOMReader,[{key:"append",value:function append(text){this.text+=text;}},{key:"lineBreak",value:function lineBreak(){this.text+=LineBreakPlaceholder;}},{key:"readRange",value:function readRange(start,end){if(!start)return this;var parent=start.parentNode;for(var cur2=start;;){this.findPointBefore(parent,cur2);var oldLen=this.text.length;this.readNode(cur2);var next=cur2.nextSibling;if(next==end)break;var view=_ContentView.get(cur2),nextView=_ContentView.get(next);if(view&&nextView?view.breakAfter:(view?view.breakAfter:isBlockElement(cur2))||isBlockElement(next)&&(cur2.nodeName!="BR"||cur2.cmIgnore)&&this.text.length>oldLen)this.lineBreak();cur2=next;}this.findPointBefore(parent,end);return this;}},{key:"readTextNode",value:function readTextNode(node){var text=node.nodeValue;var _iterator50=_createForOfIteratorHelper(this.points),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var _point=_step50.value;if(_point.node==node)_point.pos=this.text.length+Math.min(_point.offset,text.length);}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}for(var off=0,re=this.lineSeparator?null:/\r\n?|\n/g;;){var nextBreak=-1,breakSize=1,m=void 0;if(this.lineSeparator){nextBreak=text.indexOf(this.lineSeparator,off);breakSize=this.lineSeparator.length;}else if(m=re.exec(text)){nextBreak=m.index;breakSize=m[0].length;}this.append(text.slice(off,nextBreak<0?text.length:nextBreak));if(nextBreak<0)break;this.lineBreak();if(breakSize>1){var _iterator51=_createForOfIteratorHelper(this.points),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var point=_step51.value;if(point.node==node&&point.pos>this.text.length)point.pos-=breakSize-1;}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}}off=nextBreak+breakSize;}}},{key:"readNode",value:function readNode(node){if(node.cmIgnore)return;var view=_ContentView.get(node);var fromView=view&&view.overrideDOMText;if(fromView!=null){this.findPointInside(node,fromView.length);for(var _i86=fromView.iter();!_i86.next().done;){if(_i86.lineBreak)this.lineBreak();else this.append(_i86.value);}}else if(node.nodeType==3){this.readTextNode(node);}else if(node.nodeName=="BR"){if(node.nextSibling)this.lineBreak();}else if(node.nodeType==1){this.readRange(node.firstChild,null);}}},{key:"findPointBefore",value:function findPointBefore(node,next){var _iterator52=_createForOfIteratorHelper(this.points),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var point=_step52.value;if(point.node==node&&node.childNodes[point.offset]==next)point.pos=this.text.length;}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}}},{key:"findPointInside",value:function findPointInside(node,length){var _iterator53=_createForOfIteratorHelper(this.points),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var point=_step53.value;if(node.nodeType==3?point.node==node:node.contains(point.node))point.pos=this.text.length+(isAtEnd(node,point.node,point.offset)?length:0);}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}}}]);}();function isAtEnd(parent,node,offset){for(;;){if(!node||offset<maxOffset(node))return false;if(node==parent)return true;offset=domIndex(node)+1;node=node.parentNode;}}var DOMPoint=/*#__PURE__*/_createClass(function DOMPoint(node,offset){_classCallCheck(this,DOMPoint);this.node=node;this.offset=offset;this.pos=-1;});var DOMChange=/*#__PURE__*/_createClass(function DOMChange(view,start,end,typeOver){_classCallCheck(this,DOMChange);this.typeOver=typeOver;this.bounds=null;this.text="";this.domChanged=start>-1;var _view$docView=view.docView,iHead=_view$docView.impreciseHead,iAnchor=_view$docView.impreciseAnchor;if(view.state.readOnly&&start>-1){this.newSel=null;}else if(start>-1&&(this.bounds=view.docView.domBoundsAround(start,end,0))){var selPoints=iHead||iAnchor?[]:selectionPoints(view);var reader=new DOMReader(selPoints,view.state);reader.readRange(this.bounds.startDOM,this.bounds.endDOM);this.text=reader.text;this.newSel=selectionFromPoints(selPoints,this.bounds.from);}else{var domSel=view.observer.selectionRange;var head=iHead&&iHead.node==domSel.focusNode&&iHead.offset==domSel.focusOffset||!contains(view.contentDOM,domSel.focusNode)?view.state.selection.main.head:view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset);var anchor=iAnchor&&iAnchor.node==domSel.anchorNode&&iAnchor.offset==domSel.anchorOffset||!contains(view.contentDOM,domSel.anchorNode)?view.state.selection.main.anchor:view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);var vp=view.viewport;if((browser.ios||browser.chrome)&&view.state.selection.main.empty&&head!=anchor&&(vp.from>0||vp.to<view.state.doc.length)){var from=Math.min(head,anchor),to=Math.max(head,anchor);var offFrom=vp.from-from,offTo=vp.to-to;if((offFrom==0||offFrom==1||from==0)&&(offTo==0||offTo==-1||to==view.state.doc.length)){head=0;anchor=view.state.doc.length;}}this.newSel=_EditorSelection.single(anchor,head);}});function applyDOMChange(view,domChange){var change;var newSel=domChange.newSel,sel=view.state.selection.main;var lastKey=view.inputState.lastKeyTime>Date.now()-100?view.inputState.lastKeyCode:-1;if(domChange.bounds){var _domChange$bounds=domChange.bounds,from=_domChange$bounds.from,to=_domChange$bounds.to;var preferredPos=sel.from,preferredSide=null;if(lastKey===8||browser.android&&domChange.text.length<to-from){preferredPos=sel.to;preferredSide="end";}var diff=findDiff(view.state.doc.sliceString(from,to,LineBreakPlaceholder),domChange.text,preferredPos-from,preferredSide);if(diff){if(browser.chrome&&lastKey==13&&diff.toB==diff.from+2&&domChange.text.slice(diff.from,diff.toB)==LineBreakPlaceholder+LineBreakPlaceholder)diff.toB--;change={from:from+diff.from,to:from+diff.toA,insert:_Text.of(domChange.text.slice(diff.from,diff.toB).split(LineBreakPlaceholder))};}}else if(newSel&&(!view.hasFocus&&view.state.facet(editable)||newSel.main.eq(sel))){newSel=null;}if(!change&&!newSel)return false;if(!change&&domChange.typeOver&&!sel.empty&&newSel&&newSel.main.empty){change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,sel.to)};}else if((browser.mac||browser.android)&&change&&change.from==change.to&&change.from==sel.head-1&&/^\. ?$/.test(change.insert.toString())&&view.contentDOM.getAttribute("autocorrect")=="off"){if(newSel&&change.insert.length==2)newSel=_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1);change={from:change.from,to:change.to,insert:_Text.of([change.insert.toString().replace("."," ")])};}else if(change&&change.from>=sel.from&&change.to<=sel.to&&(change.from!=sel.from||change.to!=sel.to)&&sel.to-sel.from-(change.to-change.from)<=4){change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,change.from).append(change.insert).append(view.state.doc.slice(change.to,sel.to))};}else if(browser.chrome&&change&&change.from==change.to&&change.from==sel.head&&change.insert.toString()=="\n "&&view.lineWrapping){if(newSel)newSel=_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1);change={from:sel.from,to:sel.to,insert:_Text.of([" "])};}if(change){return applyDOMChangeInner(view,change,newSel,lastKey);}else if(newSel&&!newSel.main.eq(sel)){var scrollIntoView3=false,userEvent="select";if(view.inputState.lastSelectionTime>Date.now()-50){if(view.inputState.lastSelectionOrigin=="select")scrollIntoView3=true;userEvent=view.inputState.lastSelectionOrigin;}view.dispatch({selection:newSel,scrollIntoView:scrollIntoView3,userEvent:userEvent});return true;}else{return false;}}function applyDOMChangeInner(view,change,newSel){var lastKey=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;if(browser.ios&&view.inputState.flushIOSKey(change))return true;var sel=view.state.selection.main;if(browser.android&&(change.to==sel.to&&(change.from==sel.from||change.from==sel.from-1&&view.state.sliceDoc(change.from,sel.from)==" ")&&change.insert.length==1&&change.insert.lines==2&&dispatchKey(view.contentDOM,"Enter",13)||(change.from==sel.from-1&&change.to==sel.to&&change.insert.length==0||lastKey==8&&change.insert.length<change.to-change.from&&change.to>sel.head)&&dispatchKey(view.contentDOM,"Backspace",8)||change.from==sel.from&&change.to==sel.to+1&&change.insert.length==0&&dispatchKey(view.contentDOM,"Delete",46)))return true;var text=change.insert.toString();if(view.inputState.composing>=0)view.inputState.composing++;var defaultTr;var defaultInsert=function defaultInsert(){return defaultTr||(defaultTr=applyDefaultInsert(view,change,newSel));};if(!view.state.facet(inputHandler).some(function(h){return h(view,change.from,change.to,text,defaultInsert);}))view.dispatch(defaultInsert());return true;}function applyDefaultInsert(view,change,newSel){var tr,startState=view.state,sel=startState.selection.main;if(change.from>=sel.from&&change.to<=sel.to&&change.to-change.from>=(sel.to-sel.from)/3&&(!newSel||newSel.main.empty&&newSel.main.from==change.from+change.insert.length)&&view.inputState.composing<0){var before=sel.from<change.from?startState.sliceDoc(sel.from,change.from):"";var after=sel.to>change.to?startState.sliceDoc(change.to,sel.to):"";tr=startState.replaceSelection(view.state.toText(before+change.insert.sliceString(0,void 0,view.state.lineBreak)+after));}else{var changes=startState.changes(change);var mainSel=newSel&&newSel.main.to<=changes.newLength?newSel.main:void 0;if(startState.selection.ranges.length>1&&view.inputState.composing>=0&&change.to<=sel.to&&change.to>=sel.to-10){var replaced=view.state.sliceDoc(change.from,change.to);var compositionRange,composition=newSel&&findCompositionNode(view,newSel.main.head);if(composition){var dLen=change.insert.length-(change.to-change.from);compositionRange={from:composition.from,to:composition.to-dLen};}else{compositionRange=view.state.doc.lineAt(sel.head);}var offset=sel.to-change.to,size=sel.to-sel.from;tr=startState.changeByRange(function(range){if(range.from==sel.from&&range.to==sel.to)return{changes:changes,range:mainSel||range.map(changes)};var to=range.to-offset,from=to-replaced.length;if(range.to-range.from!=size||view.state.sliceDoc(from,to)!=replaced||range.to>=compositionRange.from&&range.from<=compositionRange.to)return{range:range};var rangeChanges=startState.changes({from:from,to:to,insert:change.insert}),selOff=range.to-sel.to;return{changes:rangeChanges,range:!mainSel?range.map(rangeChanges):_EditorSelection.range(Math.max(0,mainSel.anchor+selOff),Math.max(0,mainSel.head+selOff))};});}else{tr={changes:changes,selection:mainSel&&startState.selection.replaceRange(mainSel)};}}var userEvent="input.type";if(view.composing||view.inputState.compositionPendingChange&&view.inputState.compositionEndedAt>Date.now()-50){view.inputState.compositionPendingChange=false;userEvent+=".compose";if(view.inputState.compositionFirstChange){userEvent+=".start";view.inputState.compositionFirstChange=false;}}return startState.update(tr,{userEvent:userEvent,scrollIntoView:true});}function findDiff(a,b,preferredPos,preferredSide){var minLen=Math.min(a.length,b.length);var from=0;while(from<minLen&&a.charCodeAt(from)==b.charCodeAt(from))from++;if(from==minLen&&a.length==b.length)return null;var toA=a.length,toB=b.length;while(toA>0&&toB>0&&a.charCodeAt(toA-1)==b.charCodeAt(toB-1)){toA--;toB--;}if(preferredSide=="end"){var adjust=Math.max(0,from-Math.min(toA,toB));preferredPos-=toA+adjust-from;}if(toA<from&&a.length<b.length){var move=preferredPos<=from&&preferredPos>=toA?from-preferredPos:0;from-=move;toB=from+(toB-toA);toA=from;}else if(toB<from){var _move=preferredPos<=from&&preferredPos>=toB?from-preferredPos:0;from-=_move;toA=from+(toA-toB);toB=from;}return{from:from,toA:toA,toB:toB};}function selectionPoints(view){var result=[];if(view.root.activeElement!=view.contentDOM)return result;var _view$observer$select2=view.observer.selectionRange,anchorNode=_view$observer$select2.anchorNode,anchorOffset=_view$observer$select2.anchorOffset,focusNode=_view$observer$select2.focusNode,focusOffset=_view$observer$select2.focusOffset;if(anchorNode){result.push(new DOMPoint(anchorNode,anchorOffset));if(focusNode!=anchorNode||focusOffset!=anchorOffset)result.push(new DOMPoint(focusNode,focusOffset));}return result;}function selectionFromPoints(points,base2){if(points.length==0)return null;var anchor=points[0].pos,head=points.length==2?points[1].pos:anchor;return anchor>-1&&head>-1?_EditorSelection.single(anchor+base2,head+base2):null;}var InputState=/*#__PURE__*/function(){function InputState(view){_classCallCheck(this,InputState);this.view=view;this.lastKeyCode=0;this.lastKeyTime=0;this.lastTouchTime=0;this.lastFocusTime=0;this.lastScrollTop=0;this.lastScrollLeft=0;this.pendingIOSKey=void 0;this.tabFocusMode=-1;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastContextMenu=0;this.scrollHandlers=[];this.handlers=/* @__PURE__ */Object.create(null);this.composing=-1;this.compositionFirstChange=null;this.compositionEndedAt=0;this.compositionPendingKey=false;this.compositionPendingChange=false;this.mouseSelection=null;this.draggedContent=null;this.handleEvent=this.handleEvent.bind(this);this.notifiedFocused=view.hasFocus;if(browser.safari)view.contentDOM.addEventListener("input",function(){return null;});if(browser.gecko)firefoxCopyCutHack(view.contentDOM.ownerDocument);}return _createClass(InputState,[{key:"setSelectionOrigin",value:function setSelectionOrigin(origin){this.lastSelectionOrigin=origin;this.lastSelectionTime=Date.now();}},{key:"handleEvent",value:function handleEvent(event){var _this24=this;if(!eventBelongsToEditor(this.view,event)||this.ignoreDuringComposition(event))return;if(event.type=="keydown"&&this.keydown(event))return;if(this.view.updateState!=0)Promise.resolve().then(function(){return _this24.runHandlers(event.type,event);});else this.runHandlers(event.type,event);}},{key:"runHandlers",value:function runHandlers(type,event){var handlers2=this.handlers[type];if(handlers2){var _iterator54=_createForOfIteratorHelper(handlers2.observers),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var observer=_step54.value;observer(this.view,event);}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}var _iterator55=_createForOfIteratorHelper(handlers2.handlers),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var handler=_step55.value;if(event.defaultPrevented)break;if(handler(this.view,event)){event.preventDefault();break;}}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}}}},{key:"ensureHandlers",value:function ensureHandlers(plugins){var handlers2=computeHandlers(plugins),prev=this.handlers,dom=this.view.contentDOM;for(var type in handlers2)if(type!="scroll"){var passive=!handlers2[type].handlers.length;var exists=prev[type];if(exists&&passive!=!exists.handlers.length){dom.removeEventListener(type,this.handleEvent);exists=null;}if(!exists)dom.addEventListener(type,this.handleEvent,{passive:passive});}for(var _type3 in prev)if(_type3!="scroll"&&!handlers2[_type3])dom.removeEventListener(_type3,this.handleEvent);this.handlers=handlers2;}},{key:"keydown",value:function keydown(event){var _this25=this;this.lastKeyCode=event.keyCode;this.lastKeyTime=Date.now();if(event.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return true;if(this.tabFocusMode>0&&event.keyCode!=27&&modifierCodes.indexOf(event.keyCode)<0)this.tabFocusMode=-1;if(browser.android&&browser.chrome&&!event.synthetic&&(event.keyCode==13||event.keyCode==8)){this.view.observer.delayAndroidKey(event.key,event.keyCode);return true;}var pending;if(browser.ios&&!event.synthetic&&!event.altKey&&!event.metaKey&&((pending=PendingKeys.find(function(key){return key.keyCode==event.keyCode;}))&&!event.ctrlKey||EmacsyPendingKeys.indexOf(event.key)>-1&&event.ctrlKey&&!event.shiftKey)){this.pendingIOSKey=pending||event;setTimeout(function(){return _this25.flushIOSKey();},250);return true;}if(event.keyCode!=229)this.view.observer.forceFlush();return false;}},{key:"flushIOSKey",value:function flushIOSKey(change){var key=this.pendingIOSKey;if(!key)return false;if(key.key=="Enter"&&change&&change.from<change.to&&/^\S+$/.test(change.insert.toString()))return false;this.pendingIOSKey=void 0;return dispatchKey(this.view.contentDOM,key.key,key.keyCode,key instanceof KeyboardEvent?key:void 0);}},{key:"ignoreDuringComposition",value:function ignoreDuringComposition(event){if(!/^key/.test(event.type))return false;if(this.composing>0)return true;if(browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100){this.compositionPendingKey=false;return true;}return false;}},{key:"startMouseSelection",value:function startMouseSelection(mouseSelection){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=mouseSelection;}},{key:"update",value:function update(_update3){this.view.observer.update(_update3);if(this.mouseSelection)this.mouseSelection.update(_update3);if(this.draggedContent&&_update3.docChanged)this.draggedContent=this.draggedContent.map(_update3.changes);if(_update3.transactions.length)this.lastKeyCode=this.lastSelectionTime=0;}},{key:"destroy",value:function destroy(){if(this.mouseSelection)this.mouseSelection.destroy();}}]);}();function bindHandler(plugin,handler){return function(view,event){try{return handler.call(plugin,event,view);}catch(e){logException(view.state,e);}};}function computeHandlers(plugins){var result=/* @__PURE__ */Object.create(null);function record(type){return result[type]||(result[type]={observers:[],handlers:[]});}var _iterator56=_createForOfIteratorHelper(plugins),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var plugin=_step56.value;var spec=plugin.spec;if(spec&&spec.domEventHandlers)for(var _type5 in spec.domEventHandlers){var f=spec.domEventHandlers[_type5];if(f)record(_type5).handlers.push(bindHandler(plugin.value,f));}if(spec&&spec.domEventObservers)for(var _type6 in spec.domEventObservers){var _f2=spec.domEventObservers[_type6];if(_f2)record(_type6).observers.push(bindHandler(plugin.value,_f2));}}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}for(var type in handlers)record(type).handlers.push(handlers[type]);for(var _type4 in observers)record(_type4).observers.push(observers[_type4]);return result;}var PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}];var EmacsyPendingKeys="dthko";var modifierCodes=[16,17,18,20,91,92,224,225];var dragScrollMargin=6;function dragScrollSpeed(dist2){return Math.max(0,dist2)*0.7+8;}function dist(a,b){return Math.max(Math.abs(a.clientX-b.clientX),Math.abs(a.clientY-b.clientY));}var MouseSelection=/*#__PURE__*/function(){function MouseSelection(view,startEvent,style,mustSelect){_classCallCheck(this,MouseSelection);this.view=view;this.startEvent=startEvent;this.style=style;this.mustSelect=mustSelect;this.scrollSpeed={x:0,y:0};this.scrolling=-1;this.lastEvent=startEvent;this.scrollParents=scrollableParents(view.contentDOM);this.atoms=view.state.facet(atomicRanges).map(function(f){return f(view);});var doc2=view.contentDOM.ownerDocument;doc2.addEventListener("mousemove",this.move=this.move.bind(this));doc2.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=startEvent.shiftKey;this.multiple=view.state.facet(_EditorState.allowMultipleSelections)&&addsSelectionRange(view,startEvent);this.dragging=isInPrimarySelection(view,startEvent)&&getClickType(startEvent)==1?null:false;}return _createClass(MouseSelection,[{key:"start",value:function start(event){if(this.dragging===false)this.select(event);}},{key:"move",value:function move(event){if(event.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,event)<10)return;this.select(this.lastEvent=event);var sx=0,sy=0;var left=0,top2=0,right=this.view.win.innerWidth,bottom=this.view.win.innerHeight;if(this.scrollParents.x){var _this$scrollParents$x=this.scrollParents.x.getBoundingClientRect();left=_this$scrollParents$x.left;right=_this$scrollParents$x.right;}if(this.scrollParents.y){var _this$scrollParents$y=this.scrollParents.y.getBoundingClientRect();top2=_this$scrollParents$y.top;bottom=_this$scrollParents$y.bottom;}var margins=getScrollMargins(this.view);if(event.clientX-margins.left<=left+dragScrollMargin)sx=-dragScrollSpeed(left-event.clientX);else if(event.clientX+margins.right>=right-dragScrollMargin)sx=dragScrollSpeed(event.clientX-right);if(event.clientY-margins.top<=top2+dragScrollMargin)sy=-dragScrollSpeed(top2-event.clientY);else if(event.clientY+margins.bottom>=bottom-dragScrollMargin)sy=dragScrollSpeed(event.clientY-bottom);this.setScrollSpeed(sx,sy);}},{key:"up",value:function up(event){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)event.preventDefault();this.destroy();}},{key:"destroy",value:function destroy(){this.setScrollSpeed(0,0);var doc2=this.view.contentDOM.ownerDocument;doc2.removeEventListener("mousemove",this.move);doc2.removeEventListener("mouseup",this.up);this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null;}},{key:"setScrollSpeed",value:function setScrollSpeed(sx,sy){var _this26=this;this.scrollSpeed={x:sx,y:sy};if(sx||sy){if(this.scrolling<0)this.scrolling=setInterval(function(){return _this26.scroll();},50);}else if(this.scrolling>-1){clearInterval(this.scrolling);this.scrolling=-1;}}},{key:"scroll",value:function scroll(){var _this$scrollSpeed=this.scrollSpeed,x=_this$scrollSpeed.x,y=_this$scrollSpeed.y;if(x&&this.scrollParents.x){this.scrollParents.x.scrollLeft+=x;x=0;}if(y&&this.scrollParents.y){this.scrollParents.y.scrollTop+=y;y=0;}if(x||y)this.view.win.scrollBy(x,y);if(this.dragging===false)this.select(this.lastEvent);}},{key:"skipAtoms",value:function skipAtoms(sel){var ranges=null;for(var _i87=0;_i87<sel.ranges.length;_i87++){var range=sel.ranges[_i87],updated=null;if(range.empty){var pos=skipAtomicRanges(this.atoms,range.from,0);if(pos!=range.from)updated=_EditorSelection.cursor(pos,-1);}else{var from=skipAtomicRanges(this.atoms,range.from,-1);var to=skipAtomicRanges(this.atoms,range.to,1);if(from!=range.from||to!=range.to)updated=_EditorSelection.range(range.from==range.anchor?from:to,range.from==range.head?from:to);}if(updated){if(!ranges)ranges=sel.ranges.slice();ranges[_i87]=updated;}}return ranges?_EditorSelection.create(ranges,sel.mainIndex):sel;}},{key:"select",value:function select(event){var view=this.view,selection2=this.skipAtoms(this.style.get(event,this.extend,this.multiple));if(this.mustSelect||!selection2.eq(view.state.selection,this.dragging===false))this.view.dispatch({selection:selection2,userEvent:"select.pointer"});this.mustSelect=false;}},{key:"update",value:function update(_update4){var _this27=this;if(_update4.transactions.some(function(tr){return tr.isUserEvent("input.type");}))this.destroy();else if(this.style.update(_update4))setTimeout(function(){return _this27.select(_this27.lastEvent);},20);}}]);}();function addsSelectionRange(view,event){var facet=view.state.facet(clickAddsSelectionRange);return facet.length?facet[0](event):browser.mac?event.metaKey:event.ctrlKey;}function dragMovesSelection(view,event){var facet=view.state.facet(dragMovesSelection$1);return facet.length?facet[0](event):browser.mac?!event.altKey:!event.ctrlKey;}function isInPrimarySelection(view,event){var main=view.state.selection.main;if(main.empty)return false;var sel=getSelection(view.root);if(!sel||sel.rangeCount==0)return true;var rects=sel.getRangeAt(0).getClientRects();for(var _i88=0;_i88<rects.length;_i88++){var rect=rects[_i88];if(rect.left<=event.clientX&&rect.right>=event.clientX&&rect.top<=event.clientY&&rect.bottom>=event.clientY)return true;}return false;}function eventBelongsToEditor(view,event){if(!event.bubbles)return true;if(event.defaultPrevented)return false;for(var node=event.target,cView;node!=view.contentDOM;node=node.parentNode)if(!node||node.nodeType==11||(cView=_ContentView.get(node))&&cView.ignoreEvent(event))return false;return true;}var handlers=/* @__PURE__ */Object.create(null);var observers=/* @__PURE__ */Object.create(null);var brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(view){var parent=view.dom.parentNode;if(!parent)return;var target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px";target.focus();setTimeout(function(){view.focus();target.remove();doPaste(view,target.value);},50);}function textFilter(state,facet,text){var _iterator57=_createForOfIteratorHelper(state.facet(facet)),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var filter=_step57.value;text=filter(text,state);}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}return text;}function doPaste(view,input){input=textFilter(view.state,clipboardInputFilter,input);var state=view.state,changes,i=1,text=state.toText(input);var byLine=text.lines==state.selection.ranges.length;var linewise=lastLinewiseCopy!=null&&state.selection.ranges.every(function(r){return r.empty;})&&lastLinewiseCopy==text.toString();if(linewise){var lastLine=-1;changes=state.changeByRange(function(range){var line=state.doc.lineAt(range.from);if(line.from==lastLine)return{range:range};lastLine=line.from;var insert2=state.toText((byLine?text.line(i++).text:input)+state.lineBreak);return{changes:{from:line.from,insert:insert2},range:_EditorSelection.cursor(range.from+insert2.length)};});}else if(byLine){changes=state.changeByRange(function(range){var line=text.line(i++);return{changes:{from:range.from,to:range.to,insert:line.text},range:_EditorSelection.cursor(range.from+line.length)};});}else{changes=state.replaceSelection(text);}view.dispatch(changes,{userEvent:"input.paste",scrollIntoView:true});}observers.scroll=function(view){view.inputState.lastScrollTop=view.scrollDOM.scrollTop;view.inputState.lastScrollLeft=view.scrollDOM.scrollLeft;};handlers.keydown=function(view,event){view.inputState.setSelectionOrigin("select");if(event.keyCode==27&&view.inputState.tabFocusMode!=0)view.inputState.tabFocusMode=Date.now()+2e3;return false;};observers.touchstart=function(view,e){view.inputState.lastTouchTime=Date.now();view.inputState.setSelectionOrigin("select.pointer");};observers.touchmove=function(view){view.inputState.setSelectionOrigin("select.pointer");};handlers.mousedown=function(view,event){view.observer.flush();if(view.inputState.lastTouchTime>Date.now()-2e3)return false;var style=null;var _iterator58=_createForOfIteratorHelper(view.state.facet(mouseSelectionStyle)),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var makeStyle=_step58.value;style=makeStyle(view,event);if(style)break;}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}if(!style&&event.button==0)style=basicMouseSelection(view,event);if(style){var mustFocus=!view.hasFocus;view.inputState.startMouseSelection(new MouseSelection(view,event,style,mustFocus));if(mustFocus)view.observer.ignore(function(){focusPreventScroll(view.contentDOM);var active=view.root.activeElement;if(active&&!active.contains(view.contentDOM))active.blur();});var mouseSel=view.inputState.mouseSelection;if(mouseSel){mouseSel.start(event);return mouseSel.dragging===false;}}return false;};function rangeForClick(view,pos,bias,type){if(type==1){return _EditorSelection.cursor(pos,bias);}else if(type==2){return groupAt(view.state,pos,bias);}else{var visual=_LineView.find(view.docView,pos),line=view.state.doc.lineAt(visual?visual.posAtEnd:pos);var from=visual?visual.posAtStart:line.from,to=visual?visual.posAtEnd:line.to;if(to<view.state.doc.length&&to==line.to)to++;return _EditorSelection.range(from,to);}}var inside=function inside(x,y,rect){return y>=rect.top&&y<=rect.bottom&&x>=rect.left&&x<=rect.right;};function findPositionSide(view,pos,x,y){var line=_LineView.find(view.docView,pos);if(!line)return 1;var off=pos-line.posAtStart;if(off==0)return 1;if(off==line.length)return-1;var before=line.coordsAt(off,-1);if(before&&inside(x,y,before))return-1;var after=line.coordsAt(off,1);if(after&&inside(x,y,after))return 1;return before&&before.bottom>=y?-1:1;}function queryPos(view,event){var pos=view.posAtCoords({x:event.clientX,y:event.clientY},false);return{pos:pos,bias:findPositionSide(view,pos,event.clientX,event.clientY)};}var BadMouseDetail=browser.ie&&browser.ie_version<=11;var lastMouseDown=null;var lastMouseDownCount=0;var lastMouseDownTime=0;function getClickType(event){if(!BadMouseDetail)return event.detail;var last=lastMouseDown,lastTime=lastMouseDownTime;lastMouseDown=event;lastMouseDownTime=Date.now();return lastMouseDownCount=!last||lastTime>Date.now()-400&&Math.abs(last.clientX-event.clientX)<2&&Math.abs(last.clientY-event.clientY)<2?(lastMouseDownCount+1)%3:1;}function basicMouseSelection(view,event){var start=queryPos(view,event),type=getClickType(event);var startSel=view.state.selection;return{update:function update(_update5){if(_update5.docChanged){start.pos=_update5.changes.mapPos(start.pos);startSel=startSel.map(_update5.changes);}},get:function get(event2,extend,multiple){var cur2=queryPos(view,event2),removed;var range=rangeForClick(view,cur2.pos,cur2.bias,type);if(start.pos!=cur2.pos&&!extend){var startRange=rangeForClick(view,start.pos,start.bias,type);var from=Math.min(startRange.from,range.from),to=Math.max(startRange.to,range.to);range=from<range.from?_EditorSelection.range(from,to):_EditorSelection.range(to,from);}if(extend)return startSel.replaceRange(startSel.main.extend(range.from,range.to));else if(multiple&&type==1&&startSel.ranges.length>1&&(removed=removeRangeAround(startSel,cur2.pos)))return removed;else if(multiple)return startSel.addRange(range);else return _EditorSelection.create([range]);}};}function removeRangeAround(sel,pos){for(var _i89=0;_i89<sel.ranges.length;_i89++){var _sel$ranges$_i=sel.ranges[_i89],from=_sel$ranges$_i.from,to=_sel$ranges$_i.to;if(from<=pos&&to>=pos)return _EditorSelection.create(sel.ranges.slice(0,_i89).concat(sel.ranges.slice(_i89+1)),sel.mainIndex==_i89?0:sel.mainIndex-(sel.mainIndex>_i89?1:0));}return null;}handlers.dragstart=function(view,event){var range=view.state.selection.main;if(event.target.draggable){var cView=view.docView.nearest(event.target);if(cView&&cView.isWidget){var from=cView.posAtStart,to=from+cView.length;if(from>=range.to||to<=range.from)range=_EditorSelection.range(from,to);}}var inputState=view.inputState;if(inputState.mouseSelection)inputState.mouseSelection.dragging=true;inputState.draggedContent=range;if(event.dataTransfer){event.dataTransfer.setData("Text",textFilter(view.state,clipboardOutputFilter,view.state.sliceDoc(range.from,range.to)));event.dataTransfer.effectAllowed="copyMove";}return false;};handlers.dragend=function(view){view.inputState.draggedContent=null;return false;};function dropText(view,event,text,direct){text=textFilter(view.state,clipboardInputFilter,text);if(!text)return;var dropPos=view.posAtCoords({x:event.clientX,y:event.clientY},false);var draggedContent=view.inputState.draggedContent;var del=direct&&draggedContent&&dragMovesSelection(view,event)?{from:draggedContent.from,to:draggedContent.to}:null;var ins={from:dropPos,insert:text};var changes=view.state.changes(del?[del,ins]:ins);view.focus();view.dispatch({changes:changes,selection:{anchor:changes.mapPos(dropPos,-1),head:changes.mapPos(dropPos,1)},userEvent:del?"move.drop":"input.drop"});view.inputState.draggedContent=null;}handlers.drop=function(view,event){if(!event.dataTransfer)return false;if(view.state.readOnly)return true;var files=event.dataTransfer.files;if(files&&files.length){var text=Array(files.length),read=0;var finishFile=function finishFile(){if(++read==files.length)dropText(view,event,text.filter(function(s){return s!=null;}).join(view.state.lineBreak),false);};var _loop6=function _loop6(_i90){var reader=new FileReader();reader.onerror=finishFile;reader.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(reader.result))text[_i90]=reader.result;finishFile();};reader.readAsText(files[_i90]);};for(var _i90=0;_i90<files.length;_i90++){_loop6(_i90);}return true;}else{var _text=event.dataTransfer.getData("Text");if(_text){dropText(view,event,_text,true);return true;}}return false;};handlers.paste=function(view,event){if(view.state.readOnly)return true;view.observer.flush();var data2=brokenClipboardAPI?null:event.clipboardData;if(data2){doPaste(view,data2.getData("text/plain")||data2.getData("text/uri-list"));return true;}else{capturePaste(view);return false;}};function captureCopy(view,text){var parent=view.dom.parentNode;if(!parent)return;var target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px";target.value=text;target.focus();target.selectionEnd=text.length;target.selectionStart=0;setTimeout(function(){target.remove();view.focus();},50);}function copiedRange(state){var content2=[],ranges=[],linewise=false;var _iterator59=_createForOfIteratorHelper(state.selection.ranges),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var range=_step59.value;if(!range.empty){content2.push(state.sliceDoc(range.from,range.to));ranges.push(range);}}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}if(!content2.length){var upto=-1;var _iterator60=_createForOfIteratorHelper(state.selection.ranges),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var from=_step60.value.from;var line=state.doc.lineAt(from);if(line.number>upto){content2.push(line.text);ranges.push({from:line.from,to:Math.min(state.doc.length,line.to+1)});}upto=line.number;}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}linewise=true;}return{text:textFilter(state,clipboardOutputFilter,content2.join(state.lineBreak)),ranges:ranges,linewise:linewise};}var lastLinewiseCopy=null;handlers.copy=handlers.cut=function(view,event){var _copiedRange=copiedRange(view.state),text=_copiedRange.text,ranges=_copiedRange.ranges,linewise=_copiedRange.linewise;if(!text&&!linewise)return false;lastLinewiseCopy=linewise?text:null;if(event.type=="cut"&&!view.state.readOnly)view.dispatch({changes:ranges,scrollIntoView:true,userEvent:"delete.cut"});var data2=brokenClipboardAPI?null:event.clipboardData;if(data2){data2.clearData();data2.setData("text/plain",text);return true;}else{captureCopy(view,text);return false;}};var isFocusChange=/* @__PURE__ */Annotation.define();function focusChangeTransaction(state,focus){var effects=[];var _iterator61=_createForOfIteratorHelper(state.facet(focusChangeEffect)),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var getEffect=_step61.value;var effect=getEffect(state,focus);if(effect)effects.push(effect);}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}return effects.length?state.update({effects:effects,annotations:isFocusChange.of(true)}):null;}function updateForFocusChange(view){setTimeout(function(){var focus=view.hasFocus;if(focus!=view.inputState.notifiedFocused){var tr=focusChangeTransaction(view.state,focus);if(tr)view.dispatch(tr);else view.update([]);}},10);}observers.focus=function(view){view.inputState.lastFocusTime=Date.now();if(!view.scrollDOM.scrollTop&&(view.inputState.lastScrollTop||view.inputState.lastScrollLeft)){view.scrollDOM.scrollTop=view.inputState.lastScrollTop;view.scrollDOM.scrollLeft=view.inputState.lastScrollLeft;}updateForFocusChange(view);};observers.blur=function(view){view.observer.clearSelectionRange();updateForFocusChange(view);};observers.compositionstart=observers.compositionupdate=function(view){if(view.observer.editContext)return;if(view.inputState.compositionFirstChange==null)view.inputState.compositionFirstChange=true;if(view.inputState.composing<0){view.inputState.composing=0;}};observers.compositionend=function(view){if(view.observer.editContext)return;view.inputState.composing=-1;view.inputState.compositionEndedAt=Date.now();view.inputState.compositionPendingKey=true;view.inputState.compositionPendingChange=view.observer.pendingRecords().length>0;view.inputState.compositionFirstChange=null;if(browser.chrome&&browser.android){view.observer.flushSoon();}else if(view.inputState.compositionPendingChange){Promise.resolve().then(function(){return view.observer.flush();});}else{setTimeout(function(){if(view.inputState.composing<0&&view.docView.hasComposition)view.update([]);},50);}};observers.contextmenu=function(view){view.inputState.lastContextMenu=Date.now();};handlers.beforeinput=function(view,event){var _a2,_b;if(event.inputType=="insertReplacementText"&&view.observer.editContext){var text=(_a2=event.dataTransfer)===null||_a2===void 0?void 0:_a2.getData("text/plain"),ranges=event.getTargetRanges();if(text&&ranges.length){var _r=ranges[0];var from=view.posAtDOM(_r.startContainer,_r.startOffset),to=view.posAtDOM(_r.endContainer,_r.endOffset);applyDOMChangeInner(view,{from:from,to:to,insert:view.state.toText(text)},null);return true;}}var pending;if(browser.chrome&&browser.android&&(pending=PendingKeys.find(function(key){return key.inputType==event.inputType;}))){view.observer.delayAndroidKey(pending.key,pending.keyCode);if(pending.key=="Backspace"||pending.key=="Delete"){var startViewHeight=((_b=window.visualViewport)===null||_b===void 0?void 0:_b.height)||0;setTimeout(function(){var _a3;if((((_a3=window.visualViewport)===null||_a3===void 0?void 0:_a3.height)||0)>startViewHeight+10&&view.hasFocus){view.contentDOM.blur();view.focus();}},100);}}if(browser.ios&&event.inputType=="deleteContentForward"){view.observer.flushSoon();}if(browser.safari&&event.inputType=="insertText"&&view.inputState.composing>=0){setTimeout(function(){return observers.compositionend(view,event);},20);}return false;};var appliedFirefoxHack=/* @__PURE__ */new Set();function firefoxCopyCutHack(doc2){if(!appliedFirefoxHack.has(doc2)){appliedFirefoxHack.add(doc2);doc2.addEventListener("copy",function(){});doc2.addEventListener("cut",function(){});}}var wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];var heightChangeFlag=false;function clearHeightChangeFlag(){heightChangeFlag=false;}var HeightOracle=/*#__PURE__*/function(){function HeightOracle(lineWrapping){_classCallCheck(this,HeightOracle);this.lineWrapping=lineWrapping;this.doc=_Text.empty;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.textHeight=14;this.lineLength=30;}return _createClass(HeightOracle,[{key:"heightForGap",value:function heightForGap(from,to){var lines=this.doc.lineAt(to).number-this.doc.lineAt(from).number+1;if(this.lineWrapping)lines+=Math.max(0,Math.ceil((to-from-lines*this.lineLength*0.5)/this.lineLength));return this.lineHeight*lines;}},{key:"heightForLine",value:function heightForLine(length){if(!this.lineWrapping)return this.lineHeight;var lines=1+Math.max(0,Math.ceil((length-this.lineLength)/(this.lineLength-5)));return lines*this.lineHeight;}},{key:"setDoc",value:function setDoc(doc2){this.doc=doc2;return this;}},{key:"mustRefreshForWrapping",value:function mustRefreshForWrapping(whiteSpace){return wrappingWhiteSpace.indexOf(whiteSpace)>-1!=this.lineWrapping;}},{key:"mustRefreshForHeights",value:function mustRefreshForHeights(lineHeights){var newHeight=false;for(var _i91=0;_i91<lineHeights.length;_i91++){var h=lineHeights[_i91];if(h<0){_i91++;}else if(!this.heightSamples[Math.floor(h*10)]){newHeight=true;this.heightSamples[Math.floor(h*10)]=true;}}return newHeight;}},{key:"refresh",value:function refresh(whiteSpace,lineHeight,charWidth,textHeight,lineLength,knownHeights){var lineWrapping=wrappingWhiteSpace.indexOf(whiteSpace)>-1;var changed=Math.round(lineHeight)!=Math.round(this.lineHeight)||this.lineWrapping!=lineWrapping;this.lineWrapping=lineWrapping;this.lineHeight=lineHeight;this.charWidth=charWidth;this.textHeight=textHeight;this.lineLength=lineLength;if(changed){this.heightSamples={};for(var _i92=0;_i92<knownHeights.length;_i92++){var h=knownHeights[_i92];if(h<0)_i92++;else this.heightSamples[Math.floor(h*10)]=true;}}return changed;}}]);}();var MeasuredHeights=/*#__PURE__*/function(){function MeasuredHeights(from,heights){_classCallCheck(this,MeasuredHeights);this.from=from;this.heights=heights;this.index=0;}return _createClass(MeasuredHeights,[{key:"more",get:function get(){return this.index<this.heights.length;}}]);}();var _BlockInfo=/*#__PURE__*/function(){function BlockInfo(from,length,top2,height,_content){_classCallCheck(this,BlockInfo);this.from=from;this.length=length;this.top=top2;this.height=height;this._content=_content;}return _createClass(BlockInfo,[{key:"type",get:function get(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type;}},{key:"to",get:function get(){return this.from+this.length;}},{key:"bottom",get:function get(){return this.top+this.height;}},{key:"widget",get:function get(){return this._content instanceof _PointDecoration?this._content.widget:null;}},{key:"widgetLineBreaks",get:function get(){return typeof this._content=="number"?this._content:0;}},{key:"join",value:function join(other){var content2=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(other._content)?other._content:[other]);return new _BlockInfo(this.from,this.length+other.length,this.top,this.height+other.height,content2);}}]);}();var QueryType=/* @__PURE__ */function(QueryType3){QueryType3[QueryType3["ByPos"]=0]="ByPos";QueryType3[QueryType3["ByHeight"]=1]="ByHeight";QueryType3[QueryType3["ByPosNoHeight"]=2]="ByPosNoHeight";return QueryType3;}(QueryType||(QueryType={}));var Epsilon=1e-3;var _HeightMap=/*#__PURE__*/function(){function HeightMap(length,height){var flags=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;_classCallCheck(this,HeightMap);this.length=length;this.height=height;this.flags=flags;}return _createClass(HeightMap,[{key:"outdated",get:function get(){return(this.flags&2)>0;},set:function set(value){this.flags=(value?2:0)|this.flags&~2;}},{key:"setHeight",value:function setHeight(height){if(this.height!=height){if(Math.abs(this.height-height)>Epsilon)heightChangeFlag=true;this.height=height;}}},{key:"replace",value:function replace(_from,_to,nodes){return _HeightMap.of(nodes);}},{key:"decomposeLeft",value:function decomposeLeft(_to,result){result.push(this);}},{key:"decomposeRight",value:function decomposeRight(_from,result){result.push(this);}},{key:"applyChanges",value:function applyChanges(decorations2,oldDoc,oracle,changes){var me=this,doc2=oracle.doc;for(var _i93=changes.length-1;_i93>=0;_i93--){var _changes$_i=changes[_i93],fromA=_changes$_i.fromA,toA=_changes$_i.toA,fromB=_changes$_i.fromB,toB=_changes$_i.toB;var start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle.setDoc(oldDoc),0,0);var end=start.to>=toA?start:me.lineAt(toA,QueryType.ByPosNoHeight,oracle,0,0);toB+=end.to-toA;toA=end.to;while(_i93>0&&start.from<=changes[_i93-1].toA){fromA=changes[_i93-1].fromA;fromB=changes[_i93-1].fromB;_i93--;if(fromA<start.from)start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle,0,0);}fromB+=start.from-fromA;fromA=start.from;var nodes=_NodeBuilder.build(oracle.setDoc(doc2),decorations2,fromB,toB);me=replace(me,me.replace(fromA,toA,nodes));}return me.updateHeight(oracle,0);}}],[{key:"empty",value:function empty(){return new _HeightMapText(0,0);}},{key:"of",value:function of(nodes){if(nodes.length==1)return nodes[0];var i=0,j=nodes.length,before=0,after=0;for(;;){if(i==j){if(before>after*2){var split=nodes[i-1];if(split["break"])nodes.splice(--i,1,split.left,null,split.right);else nodes.splice(--i,1,split.left,split.right);j+=1+split["break"];before-=split.size;}else if(after>before*2){var _split=nodes[j];if(_split["break"])nodes.splice(j,1,_split.left,null,_split.right);else nodes.splice(j,1,_split.left,_split.right);j+=2+_split["break"];after-=_split.size;}else{break;}}else if(before<after){var next=nodes[i++];if(next)before+=next.size;}else{var _next3=nodes[--j];if(_next3)after+=_next3.size;}}var brk=0;if(nodes[i-1]==null){brk=1;i--;}else if(nodes[i]==null){brk=1;j++;}return new HeightMapBranch(_HeightMap.of(nodes.slice(0,i)),brk,_HeightMap.of(nodes.slice(j)));}}]);}();function replace(old,val){if(old==val)return old;if(old.constructor!=val.constructor)heightChangeFlag=true;return val;}_HeightMap.prototype.size=1;var HeightMapBlock=/*#__PURE__*/function(_HeightMap2){function HeightMapBlock(length,height,deco){var _this28;_classCallCheck(this,HeightMapBlock);_this28=_callSuper(this,HeightMapBlock,[length,height]);_this28.deco=deco;return _this28;}_inherits(HeightMapBlock,_HeightMap2);return _createClass(HeightMapBlock,[{key:"blockAt",value:function blockAt(_height,_oracle,top2,offset){return new _BlockInfo(offset,this.length,top2,this.height,this.deco||0);}},{key:"lineAt",value:function lineAt(_value,_type,oracle,top2,offset){return this.blockAt(0,oracle,top2,offset);}},{key:"forEachLine",value:function forEachLine(from,to,oracle,top2,offset,f){if(from<=offset+this.length&&to>=offset)f(this.blockAt(0,oracle,top2,offset));}},{key:"updateHeight",value:function updateHeight(oracle){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var _force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var measured=arguments.length>3?arguments[3]:undefined;if(measured&&measured.from<=offset&&measured.more)this.setHeight(measured.heights[measured.index++]);this.outdated=false;return this;}},{key:"toString",value:function toString(){return"block(".concat(this.length,")");}}]);}(_HeightMap);var _HeightMapText=/*#__PURE__*/function(_HeightMapBlock){function HeightMapText(length,height){var _this29;_classCallCheck(this,HeightMapText);_this29=_callSuper(this,HeightMapText,[length,height,null]);_this29.collapsed=0;_this29.widgetHeight=0;_this29.breaks=0;return _this29;}_inherits(HeightMapText,_HeightMapBlock);return _createClass(HeightMapText,[{key:"blockAt",value:function blockAt(_height,_oracle,top2,offset){return new _BlockInfo(offset,this.length,top2,this.height,this.breaks);}},{key:"replace",value:function replace(_from,_to,nodes){var node=nodes[0];if(nodes.length==1&&(node instanceof _HeightMapText||node instanceof _HeightMapGap&&node.flags&4)&&Math.abs(this.length-node.length)<10){if(node instanceof _HeightMapGap)node=new _HeightMapText(node.length,this.height);else node.height=this.height;if(!this.outdated)node.outdated=false;return node;}else{return _HeightMap.of(nodes);}}},{key:"updateHeight",value:function updateHeight(oracle){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var measured=arguments.length>3?arguments[3]:undefined;if(measured&&measured.from<=offset&&measured.more)this.setHeight(measured.heights[measured.index++]);else if(force||this.outdated)this.setHeight(Math.max(this.widgetHeight,oracle.heightForLine(this.length-this.collapsed))+this.breaks*oracle.lineHeight);this.outdated=false;return this;}},{key:"toString",value:function toString(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")");}}]);}(HeightMapBlock);var _HeightMapGap=/*#__PURE__*/function(_HeightMap3){function HeightMapGap(length){_classCallCheck(this,HeightMapGap);return _callSuper(this,HeightMapGap,[length,0]);}_inherits(HeightMapGap,_HeightMap3);return _createClass(HeightMapGap,[{key:"heightMetrics",value:function heightMetrics(oracle,offset){var firstLine=oracle.doc.lineAt(offset).number,lastLine=oracle.doc.lineAt(offset+this.length).number;var lines=lastLine-firstLine+1;var perLine,perChar=0;if(oracle.lineWrapping){var totalPerLine=Math.min(this.height,oracle.lineHeight*lines);perLine=totalPerLine/lines;if(this.length>lines+1)perChar=(this.height-totalPerLine)/(this.length-lines-1);}else{perLine=this.height/lines;}return{firstLine:firstLine,lastLine:lastLine,perLine:perLine,perChar:perChar};}},{key:"blockAt",value:function blockAt(height,oracle,top2,offset){var _this$heightMetrics=this.heightMetrics(oracle,offset),firstLine=_this$heightMetrics.firstLine,lastLine=_this$heightMetrics.lastLine,perLine=_this$heightMetrics.perLine,perChar=_this$heightMetrics.perChar;if(oracle.lineWrapping){var guess=offset+(height<oracle.lineHeight?0:Math.round(Math.max(0,Math.min(1,(height-top2)/this.height))*this.length));var line=oracle.doc.lineAt(guess),lineHeight=perLine+line.length*perChar;var lineTop=Math.max(top2,height-lineHeight/2);return new _BlockInfo(line.from,line.length,lineTop,lineHeight,0);}else{var _line=Math.max(0,Math.min(lastLine-firstLine,Math.floor((height-top2)/perLine)));var _oracle$doc$line=oracle.doc.line(firstLine+_line),from=_oracle$doc$line.from,length=_oracle$doc$line.length;return new _BlockInfo(from,length,top2+perLine*_line,perLine,0);}}},{key:"lineAt",value:function lineAt(value,type,oracle,top2,offset){if(type==QueryType.ByHeight)return this.blockAt(value,oracle,top2,offset);if(type==QueryType.ByPosNoHeight){var _oracle$doc$lineAt=oracle.doc.lineAt(value),from=_oracle$doc$lineAt.from,to=_oracle$doc$lineAt.to;return new _BlockInfo(from,to-from,0,0,0);}var _this$heightMetrics2=this.heightMetrics(oracle,offset),firstLine=_this$heightMetrics2.firstLine,perLine=_this$heightMetrics2.perLine,perChar=_this$heightMetrics2.perChar;var line=oracle.doc.lineAt(value),lineHeight=perLine+line.length*perChar;var linesAbove=line.number-firstLine;var lineTop=top2+perLine*linesAbove+perChar*(line.from-offset-linesAbove);return new _BlockInfo(line.from,line.length,Math.max(top2,Math.min(lineTop,top2+this.height-lineHeight)),lineHeight,0);}},{key:"forEachLine",value:function forEachLine(from,to,oracle,top2,offset,f){from=Math.max(from,offset);to=Math.min(to,offset+this.length);var _this$heightMetrics3=this.heightMetrics(oracle,offset),firstLine=_this$heightMetrics3.firstLine,perLine=_this$heightMetrics3.perLine,perChar=_this$heightMetrics3.perChar;for(var pos=from,lineTop=top2;pos<=to;){var line=oracle.doc.lineAt(pos);if(pos==from){var linesAbove=line.number-firstLine;lineTop+=perLine*linesAbove+perChar*(from-offset-linesAbove);}var lineHeight=perLine+perChar*line.length;f(new _BlockInfo(line.from,line.length,lineTop,lineHeight,0));lineTop+=lineHeight;pos=line.to+1;}}},{key:"replace",value:function replace(from,to,nodes){var after=this.length-to;if(after>0){var last=nodes[nodes.length-1];if(last instanceof _HeightMapGap)nodes[nodes.length-1]=new _HeightMapGap(last.length+after);else nodes.push(null,new _HeightMapGap(after-1));}if(from>0){var first=nodes[0];if(first instanceof _HeightMapGap)nodes[0]=new _HeightMapGap(from+first.length);else nodes.unshift(new _HeightMapGap(from-1),null);}return _HeightMap.of(nodes);}},{key:"decomposeLeft",value:function decomposeLeft(to,result){result.push(new _HeightMapGap(to-1),null);}},{key:"decomposeRight",value:function decomposeRight(from,result){result.push(null,new _HeightMapGap(this.length-from-1));}},{key:"updateHeight",value:function updateHeight(oracle){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var measured=arguments.length>3?arguments[3]:undefined;var end=offset+this.length;if(measured&&measured.from<=offset+this.length&&measured.more){var nodes=[],pos=Math.max(offset,measured.from),singleHeight=-1;if(measured.from>offset)nodes.push(new _HeightMapGap(measured.from-offset-1).updateHeight(oracle,offset));while(pos<=end&&measured.more){var len=oracle.doc.lineAt(pos).length;if(nodes.length)nodes.push(null);var height=measured.heights[measured.index++];if(singleHeight==-1)singleHeight=height;else if(Math.abs(height-singleHeight)>=Epsilon)singleHeight=-2;var line=new _HeightMapText(len,height);line.outdated=false;nodes.push(line);pos+=len+1;}if(pos<=end)nodes.push(null,new _HeightMapGap(end-pos).updateHeight(oracle,pos));var result=_HeightMap.of(nodes);if(singleHeight<0||Math.abs(result.height-this.height)>=Epsilon||Math.abs(singleHeight-this.heightMetrics(oracle,offset).perLine)>=Epsilon)heightChangeFlag=true;return replace(this,result);}else if(force||this.outdated){this.setHeight(oracle.heightForGap(offset,offset+this.length));this.outdated=false;}return this;}},{key:"toString",value:function toString(){return"gap(".concat(this.length,")");}}]);}(_HeightMap);var HeightMapBranch=/*#__PURE__*/function(_HeightMap4){function HeightMapBranch(left,brk,right){var _this30;_classCallCheck(this,HeightMapBranch);_this30=_callSuper(this,HeightMapBranch,[left.length+brk+right.length,left.height+right.height,brk|(left.outdated||right.outdated?2:0)]);_this30.left=left;_this30.right=right;_this30.size=left.size+right.size;return _this30;}_inherits(HeightMapBranch,_HeightMap4);return _createClass(HeightMapBranch,[{key:"break",get:function get(){return this.flags&1;}},{key:"blockAt",value:function blockAt(height,oracle,top2,offset){var mid=top2+this.left.height;return height<mid?this.left.blockAt(height,oracle,top2,offset):this.right.blockAt(height,oracle,mid,offset+this.left.length+this["break"]);}},{key:"lineAt",value:function lineAt(value,type,oracle,top2,offset){var rightTop=top2+this.left.height,rightOffset=offset+this.left.length+this["break"];var left=type==QueryType.ByHeight?value<rightTop:value<rightOffset;var base2=left?this.left.lineAt(value,type,oracle,top2,offset):this.right.lineAt(value,type,oracle,rightTop,rightOffset);if(this["break"]||(left?base2.to<rightOffset:base2.from>rightOffset))return base2;var subQuery=type==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;if(left)return base2.join(this.right.lineAt(rightOffset,subQuery,oracle,rightTop,rightOffset));else return this.left.lineAt(rightOffset,subQuery,oracle,top2,offset).join(base2);}},{key:"forEachLine",value:function forEachLine(from,to,oracle,top2,offset,f){var rightTop=top2+this.left.height,rightOffset=offset+this.left.length+this["break"];if(this["break"]){if(from<rightOffset)this.left.forEachLine(from,to,oracle,top2,offset,f);if(to>=rightOffset)this.right.forEachLine(from,to,oracle,rightTop,rightOffset,f);}else{var mid=this.lineAt(rightOffset,QueryType.ByPos,oracle,top2,offset);if(from<mid.from)this.left.forEachLine(from,mid.from-1,oracle,top2,offset,f);if(mid.to>=from&&mid.from<=to)f(mid);if(to>mid.to)this.right.forEachLine(mid.to+1,to,oracle,rightTop,rightOffset,f);}}},{key:"replace",value:function replace(from,to,nodes){var rightStart=this.left.length+this["break"];if(to<rightStart)return this.balanced(this.left.replace(from,to,nodes),this.right);if(from>this.left.length)return this.balanced(this.left,this.right.replace(from-rightStart,to-rightStart,nodes));var result=[];if(from>0)this.decomposeLeft(from,result);var left=result.length;var _iterator62=_createForOfIteratorHelper(nodes),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var node=_step62.value;result.push(node);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}if(from>0)mergeGaps(result,left-1);if(to<this.length){var right=result.length;this.decomposeRight(to,result);mergeGaps(result,right);}return _HeightMap.of(result);}},{key:"decomposeLeft",value:function decomposeLeft(to,result){var left=this.left.length;if(to<=left)return this.left.decomposeLeft(to,result);result.push(this.left);if(this["break"]){left++;if(to>=left)result.push(null);}if(to>left)this.right.decomposeLeft(to-left,result);}},{key:"decomposeRight",value:function decomposeRight(from,result){var left=this.left.length,right=left+this["break"];if(from>=right)return this.right.decomposeRight(from-right,result);if(from<left)this.left.decomposeRight(from,result);if(this["break"]&&from<right)result.push(null);result.push(this.right);}},{key:"balanced",value:function balanced(left,right){if(left.size>2*right.size||right.size>2*left.size)return _HeightMap.of(this["break"]?[left,null,right]:[left,right]);this.left=replace(this.left,left);this.right=replace(this.right,right);this.setHeight(left.height+right.height);this.outdated=left.outdated||right.outdated;this.size=left.size+right.size;this.length=left.length+this["break"]+right.length;return this;}},{key:"updateHeight",value:function updateHeight(oracle){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var measured=arguments.length>3?arguments[3]:undefined;var left=this.left,right=this.right,rightStart=offset+left.length+this["break"],rebalance=null;if(measured&&measured.from<=offset+left.length&&measured.more)rebalance=left=left.updateHeight(oracle,offset,force,measured);else left.updateHeight(oracle,offset,force);if(measured&&measured.from<=rightStart+right.length&&measured.more)rebalance=right=right.updateHeight(oracle,rightStart,force,measured);else right.updateHeight(oracle,rightStart,force);if(rebalance)return this.balanced(left,right);this.height=this.left.height+this.right.height;this.outdated=false;return this;}},{key:"toString",value:function toString(){return this.left+(this["break"]?" ":"-")+this.right;}}]);}(_HeightMap);function mergeGaps(nodes,around){var before,after;if(nodes[around]==null&&(before=nodes[around-1])instanceof _HeightMapGap&&(after=nodes[around+1])instanceof _HeightMapGap)nodes.splice(around-1,3,new _HeightMapGap(before.length+1+after.length));}var relevantWidgetHeight=5;var _NodeBuilder=/*#__PURE__*/function(){function NodeBuilder(pos,oracle){_classCallCheck(this,NodeBuilder);this.pos=pos;this.oracle=oracle;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=pos;}return _createClass(NodeBuilder,[{key:"isCovered",get:function get(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering;}},{key:"span",value:function span(_from,to){if(this.lineStart>-1){var end=Math.min(to,this.lineEnd),last=this.nodes[this.nodes.length-1];if(last instanceof _HeightMapText)last.length+=end-this.pos;else if(end>this.pos||!this.isCovered)this.nodes.push(new _HeightMapText(end-this.pos,-1));this.writtenTo=end;if(to>end){this.nodes.push(null);this.writtenTo++;this.lineStart=-1;}}this.pos=to;}},{key:"point",value:function point(from,to,deco){if(from<to||deco.heightRelevant){var height=deco.widget?deco.widget.estimatedHeight:0;var breaks=deco.widget?deco.widget.lineBreaks:0;if(height<0)height=this.oracle.lineHeight;var len=to-from;if(deco.block){this.addBlock(new HeightMapBlock(len,height,deco));}else if(len||breaks||height>=relevantWidgetHeight){this.addLineDeco(height,breaks,len);}}else if(to>from){this.span(from,to);}if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to;}},{key:"enterLine",value:function enterLine(){if(this.lineStart>-1)return;var _this$oracle$doc$line=this.oracle.doc.lineAt(this.pos),from=_this$oracle$doc$line.from,to=_this$oracle$doc$line.to;this.lineStart=from;this.lineEnd=to;if(this.writtenTo<from){if(this.writtenTo<from-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,from-1));this.nodes.push(null);}if(this.pos>from)this.nodes.push(new _HeightMapText(this.pos-from,-1));this.writtenTo=this.pos;}},{key:"blankContent",value:function blankContent(from,to){var gap=new _HeightMapGap(to-from);if(this.oracle.doc.lineAt(from).to==to)gap.flags|=4;return gap;}},{key:"ensureLine",value:function ensureLine(){this.enterLine();var last=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(last instanceof _HeightMapText)return last;var line=new _HeightMapText(0,-1);this.nodes.push(line);return line;}},{key:"addBlock",value:function addBlock(block){this.enterLine();var deco=block.deco;if(deco&&deco.startSide>0&&!this.isCovered)this.ensureLine();this.nodes.push(block);this.writtenTo=this.pos=this.pos+block.length;if(deco&&deco.endSide>0)this.covering=block;}},{key:"addLineDeco",value:function addLineDeco(height,breaks,length){var line=this.ensureLine();line.length+=length;line.collapsed+=length;line.widgetHeight=Math.max(line.widgetHeight,height);line.breaks+=breaks;this.writtenTo=this.pos=this.pos+length;}},{key:"finish",value:function finish(from){var last=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(last instanceof _HeightMapText)&&!this.isCovered)this.nodes.push(new _HeightMapText(0,-1));else if(this.writtenTo<this.pos||last==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var pos=from;var _iterator63=_createForOfIteratorHelper(this.nodes),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var node=_step63.value;if(node instanceof _HeightMapText)node.updateHeight(this.oracle,pos);pos+=node?node.length:1;}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}return this.nodes;}}],[{key:"build",value:function build(oracle,decorations2,from,to){var builder=new _NodeBuilder(from,oracle);_RangeSet.spans(decorations2,from,to,builder,0);return builder.finish(from);}}]);}();function heightRelevantDecoChanges(a,b,diff){var comp=new DecorationComparator2();_RangeSet.compare(a,b,diff,comp,0);return comp.changes;}var DecorationComparator2=/*#__PURE__*/function(){function DecorationComparator2(){_classCallCheck(this,DecorationComparator2);this.changes=[];}return _createClass(DecorationComparator2,[{key:"compareRange",value:function compareRange(){}},{key:"comparePoint",value:function comparePoint(from,to,a,b){if(from<to||a&&a.heightRelevant||b&&b.heightRelevant)addRange(from,to,this.changes,5);}}]);}();function visiblePixelRange(dom,paddingTop){var rect=dom.getBoundingClientRect();var doc2=dom.ownerDocument,win=doc2.defaultView||window;var left=Math.max(0,rect.left),right=Math.min(win.innerWidth,rect.right);var top2=Math.max(0,rect.top),bottom=Math.min(win.innerHeight,rect.bottom);for(var parent=dom.parentNode;parent&&parent!=doc2.body;){if(parent.nodeType==1){var elt2=parent;var style=window.getComputedStyle(elt2);if((elt2.scrollHeight>elt2.clientHeight||elt2.scrollWidth>elt2.clientWidth)&&style.overflow!="visible"){var parentRect=elt2.getBoundingClientRect();left=Math.max(left,parentRect.left);right=Math.min(right,parentRect.right);top2=Math.max(top2,parentRect.top);bottom=Math.min(parent==dom.parentNode?win.innerHeight:bottom,parentRect.bottom);}parent=style.position=="absolute"||style.position=="fixed"?elt2.offsetParent:elt2.parentNode;}else if(parent.nodeType==11){parent=parent.host;}else{break;}}return{left:left-rect.left,right:Math.max(left,right)-rect.left,top:top2-(rect.top+paddingTop),bottom:Math.max(top2,bottom)-(rect.top+paddingTop)};}function inWindow(elt2){var rect=elt2.getBoundingClientRect(),win=elt2.ownerDocument.defaultView||window;return rect.left<win.innerWidth&&rect.right>0&&rect.top<win.innerHeight&&rect.bottom>0;}function fullPixelRange(dom,paddingTop){var rect=dom.getBoundingClientRect();return{left:0,right:rect.right-rect.left,top:paddingTop,bottom:rect.bottom-(rect.top+paddingTop)};}var LineGap=/*#__PURE__*/function(){function LineGap(from,to,size,displaySize){_classCallCheck(this,LineGap);this.from=from;this.to=to;this.size=size;this.displaySize=displaySize;}return _createClass(LineGap,[{key:"draw",value:function draw(viewState,wrapping){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(wrapping?viewState.scaleY:viewState.scaleX),wrapping)}).range(this.from,this.to);}}],[{key:"same",value:function same(a,b){if(a.length!=b.length)return false;for(var _i94=0;_i94<a.length;_i94++){var gA=a[_i94],gB=b[_i94];if(gA.from!=gB.from||gA.to!=gB.to||gA.size!=gB.size)return false;}return true;}}]);}();var LineGapWidget=/*#__PURE__*/function(_WidgetType3){function LineGapWidget(size,vertical){var _this31;_classCallCheck(this,LineGapWidget);_this31=_callSuper(this,LineGapWidget);_this31.size=size;_this31.vertical=vertical;return _this31;}_inherits(LineGapWidget,_WidgetType3);return _createClass(LineGapWidget,[{key:"eq",value:function eq(other){return other.size==this.size&&other.vertical==this.vertical;}},{key:"toDOM",value:function toDOM(){var elt2=document.createElement("div");if(this.vertical){elt2.style.height=this.size+"px";}else{elt2.style.width=this.size+"px";elt2.style.height="2px";elt2.style.display="inline-block";}return elt2;}},{key:"estimatedHeight",get:function get(){return this.vertical?this.size:-1;}}]);}(WidgetType);var ViewState=/*#__PURE__*/function(){function ViewState(state){var _this32=this;_classCallCheck(this,ViewState);this.state=state;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentDOMWidth=0;this.contentDOMHeight=0;this.editorHeight=0;this.editorWidth=0;this.scrollTop=0;this.scrolledToBottom=false;this.scaleX=1;this.scaleY=1;this.scrollAnchorPos=0;this.scrollAnchorHeight=-1;this.scaler=IdScaler;this.scrollTarget=null;this.printing=false;this.mustMeasureContent=true;this.defaultTextDirection=Direction.LTR;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;var guessWrapping=state.facet(contentAttributes).some(function(v){return typeof v!="function"&&v["class"]=="cm-lineWrapping";});this.heightOracle=new HeightOracle(guessWrapping);this.stateDeco=state.facet(decorations).filter(function(d){return typeof d!="function";});this.heightMap=_HeightMap.empty().applyChanges(this.stateDeco,_Text.empty,this.heightOracle.setDoc(state.doc),[new _ChangedRange(0,0,0,state.doc.length)]);for(var _i95=0;_i95<2;_i95++){this.viewport=this.getViewport(0,null);if(!this.updateForViewport())break;}this.updateViewportLines();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=Decoration.set(this.lineGaps.map(function(gap){return gap.draw(_this32,false);}));this.computeVisibleRanges();}return _createClass(ViewState,[{key:"updateForViewport",value:function updateForViewport(){var _this33=this;var viewports=[this.viewport],main=this.state.selection.main;var _loop7=function _loop7(){var pos=_i96?main.head:main.anchor;if(!viewports.some(function(_ref7){var from=_ref7.from,to=_ref7.to;return pos>=from&&pos<=to;})){var _this33$lineBlockAt=_this33.lineBlockAt(pos),from=_this33$lineBlockAt.from,to=_this33$lineBlockAt.to;viewports.push(new Viewport(from,to));}};for(var _i96=0;_i96<=1;_i96++){_loop7();}this.viewports=viewports.sort(function(a,b){return a.from-b.from;});return this.updateScaler();}},{key:"updateScaler",value:function updateScaler(){var scaler=this.scaler;this.scaler=this.heightMap.height<=7e6?IdScaler:new _BigScaler(this.heightOracle,this.heightMap,this.viewports);return scaler.eq(this.scaler)?0:2;}},{key:"updateViewportLines",value:function updateViewportLines(){var _this34=this;this.viewportLines=[];this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,function(block){_this34.viewportLines.push(scaleBlock(block,_this34.scaler));});}},{key:"update",value:function update(_update6){var scrollTarget=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.state=_update6.state;var prevDeco=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(function(d){return typeof d!="function";});var contentChanges=_update6.changedRanges;var heightChanges=_ChangedRange.extendWithRanges(contentChanges,heightRelevantDecoChanges(prevDeco,this.stateDeco,_update6?_update6.changes:_ChangeSet.empty(this.state.doc.length)));var prevHeight=this.heightMap.height;var scrollAnchor=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag();this.heightMap=this.heightMap.applyChanges(this.stateDeco,_update6.startState.doc,this.heightOracle.setDoc(this.state.doc),heightChanges);if(this.heightMap.height!=prevHeight||heightChangeFlag)_update6.flags|=2;if(scrollAnchor){this.scrollAnchorPos=_update6.changes.mapPos(scrollAnchor.from,-1);this.scrollAnchorHeight=scrollAnchor.top;}else{this.scrollAnchorPos=-1;this.scrollAnchorHeight=prevHeight;}var viewport=heightChanges.length?this.mapViewport(this.viewport,_update6.changes):this.viewport;if(scrollTarget&&(scrollTarget.range.head<viewport.from||scrollTarget.range.head>viewport.to)||!this.viewportIsAppropriate(viewport))viewport=this.getViewport(0,scrollTarget);var viewportChange=viewport.from!=this.viewport.from||viewport.to!=this.viewport.to;this.viewport=viewport;_update6.flags|=this.updateForViewport();if(viewportChange||!_update6.changes.empty||_update6.flags&2)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,_update6.changes)));_update6.flags|=this.computeVisibleRanges(_update6.changes);if(scrollTarget)this.scrollTarget=scrollTarget;if(!this.mustEnforceCursorAssoc&&_update6.selectionSet&&_update6.view.lineWrapping&&_update6.state.selection.main.empty&&_update6.state.selection.main.assoc&&!_update6.state.facet(nativeSelectionHidden))this.mustEnforceCursorAssoc=true;}},{key:"measure",value:function measure(view){var dom=view.contentDOM,style=window.getComputedStyle(dom);var oracle=this.heightOracle;var whiteSpace=style.whiteSpace;this.defaultTextDirection=style.direction=="rtl"?Direction.RTL:Direction.LTR;var refresh=this.heightOracle.mustRefreshForWrapping(whiteSpace);var domRect=dom.getBoundingClientRect();var measureContent=refresh||this.mustMeasureContent||this.contentDOMHeight!=domRect.height;this.contentDOMHeight=domRect.height;this.mustMeasureContent=false;var result=0,bias=0;if(domRect.width&&domRect.height){var _getScale2=getScale(dom,domRect),scaleX=_getScale2.scaleX,scaleY=_getScale2.scaleY;if(scaleX>5e-3&&Math.abs(this.scaleX-scaleX)>5e-3||scaleY>5e-3&&Math.abs(this.scaleY-scaleY)>5e-3){this.scaleX=scaleX;this.scaleY=scaleY;result|=16;refresh=measureContent=true;}}var paddingTop=(parseInt(style.paddingTop)||0)*this.scaleY;var paddingBottom=(parseInt(style.paddingBottom)||0)*this.scaleY;if(this.paddingTop!=paddingTop||this.paddingBottom!=paddingBottom){this.paddingTop=paddingTop;this.paddingBottom=paddingBottom;result|=16|2;}if(this.editorWidth!=view.scrollDOM.clientWidth){if(oracle.lineWrapping)measureContent=true;this.editorWidth=view.scrollDOM.clientWidth;result|=16;}var scrollTop=view.scrollDOM.scrollTop*this.scaleY;if(this.scrollTop!=scrollTop){this.scrollAnchorHeight=-1;this.scrollTop=scrollTop;}this.scrolledToBottom=isScrolledToBottom(view.scrollDOM);var pixelViewport=(this.printing?fullPixelRange:visiblePixelRange)(dom,this.paddingTop);var dTop=pixelViewport.top-this.pixelViewport.top,dBottom=pixelViewport.bottom-this.pixelViewport.bottom;this.pixelViewport=pixelViewport;var inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(inView!=this.inView){this.inView=inView;if(inView)measureContent=true;}if(!this.inView&&!this.scrollTarget&&!inWindow(view.dom))return 0;var contentWidth=domRect.width;if(this.contentDOMWidth!=contentWidth||this.editorHeight!=view.scrollDOM.clientHeight){this.contentDOMWidth=domRect.width;this.editorHeight=view.scrollDOM.clientHeight;result|=16;}if(measureContent){var lineHeights=view.docView.measureVisibleLineHeights(this.viewport);if(oracle.mustRefreshForHeights(lineHeights))refresh=true;if(refresh||oracle.lineWrapping&&Math.abs(contentWidth-this.contentDOMWidth)>oracle.charWidth){var _view$docView$measure=view.docView.measureTextSize(),lineHeight=_view$docView$measure.lineHeight,charWidth=_view$docView$measure.charWidth,textHeight=_view$docView$measure.textHeight;refresh=lineHeight>0&&oracle.refresh(whiteSpace,lineHeight,charWidth,textHeight,contentWidth/charWidth,lineHeights);if(refresh){view.docView.minWidth=0;result|=16;}}if(dTop>0&&dBottom>0)bias=Math.max(dTop,dBottom);else if(dTop<0&&dBottom<0)bias=Math.min(dTop,dBottom);clearHeightChangeFlag();var _iterator64=_createForOfIteratorHelper(this.viewports),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var vp=_step64.value;var heights=vp.from==this.viewport.from?lineHeights:view.docView.measureVisibleLineHeights(vp);this.heightMap=(refresh?_HeightMap.empty().applyChanges(this.stateDeco,_Text.empty,this.heightOracle,[new _ChangedRange(0,0,0,view.state.doc.length)]):this.heightMap).updateHeight(oracle,0,refresh,new MeasuredHeights(vp.from,heights));}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}if(heightChangeFlag)result|=2;}var viewportChange=!this.viewportIsAppropriate(this.viewport,bias)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);if(viewportChange){if(result&2)result|=this.updateScaler();this.viewport=this.getViewport(bias,this.scrollTarget);result|=this.updateForViewport();}if(result&2||viewportChange)this.updateViewportLines();if(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)this.updateLineGaps(this.ensureLineGaps(refresh?[]:this.lineGaps,view));result|=this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;view.docView.enforceCursorAssoc();}return result;}},{key:"visibleTop",get:function get(){return this.scaler.fromDOM(this.pixelViewport.top);}},{key:"visibleBottom",get:function get(){return this.scaler.fromDOM(this.pixelViewport.bottom);}},{key:"getViewport",value:function getViewport(bias,scrollTarget){var marginTop=0.5-Math.max(-0.5,Math.min(0.5,bias/1e3/2));var map=this.heightMap,oracle=this.heightOracle;var visibleTop=this.visibleTop,visibleBottom=this.visibleBottom;var viewport=new Viewport(map.lineAt(visibleTop-marginTop*1e3,QueryType.ByHeight,oracle,0,0).from,map.lineAt(visibleBottom+(1-marginTop)*1e3,QueryType.ByHeight,oracle,0,0).to);if(scrollTarget){var head=scrollTarget.range.head;if(head<viewport.from||head>viewport.to){var viewHeight=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top);var block=map.lineAt(head,QueryType.ByPos,oracle,0,0),topPos;if(scrollTarget.y=="center")topPos=(block.top+block.bottom)/2-viewHeight/2;else if(scrollTarget.y=="start"||scrollTarget.y=="nearest"&&head<viewport.from)topPos=block.top;else topPos=block.bottom-viewHeight;viewport=new Viewport(map.lineAt(topPos-1e3/2,QueryType.ByHeight,oracle,0,0).from,map.lineAt(topPos+viewHeight+1e3/2,QueryType.ByHeight,oracle,0,0).to);}}return viewport;}},{key:"mapViewport",value:function mapViewport(viewport,changes){var from=changes.mapPos(viewport.from,-1),to=changes.mapPos(viewport.to,1);return new Viewport(this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0).to);}},{key:"viewportIsAppropriate",value:function viewportIsAppropriate(_ref8){var from=_ref8.from,to=_ref8.to;var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!this.inView)return true;var _this$heightMap$lineA=this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0),top2=_this$heightMap$lineA.top;var _this$heightMap$lineA2=this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0),bottom=_this$heightMap$lineA2.bottom;var visibleTop=this.visibleTop,visibleBottom=this.visibleBottom;return(from==0||top2<=visibleTop-Math.max(10,Math.min(-bias,250)))&&(to==this.state.doc.length||bottom>=visibleBottom+Math.max(10,Math.min(bias,250)))&&top2>visibleTop-2*1e3&&bottom<visibleBottom+2*1e3;}},{key:"mapLineGaps",value:function mapLineGaps(gaps,changes){if(!gaps.length||changes.empty)return gaps;var mapped=[];var _iterator65=_createForOfIteratorHelper(gaps),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var gap=_step65.value;if(!changes.touchesRange(gap.from,gap.to))mapped.push(new LineGap(changes.mapPos(gap.from),changes.mapPos(gap.to),gap.size,gap.displaySize));}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}return mapped;}},{key:"ensureLineGaps",value:function ensureLineGaps(current,mayMeasure){var _this35=this;var wrapping=this.heightOracle.lineWrapping;var margin=wrapping?1e4:2e3,halfMargin=margin>>1,doubleMargin=margin<<1;if(this.defaultTextDirection!=Direction.LTR&&!wrapping)return[];var gaps=[];var _addGap=function addGap(from,to,line,structure){if(to-from<halfMargin)return;var sel=_this35.state.selection.main,avoid=[sel.from];if(!sel.empty)avoid.push(sel.to);for(var _i97=0,_avoid=avoid;_i97<_avoid.length;_i97++){var pos=_avoid[_i97];if(pos>from&&pos<to){_addGap(from,pos-10,line,structure);_addGap(pos+10,to,line,structure);return;}}var gap=find(current,function(gap2){return gap2.from>=line.from&&gap2.to<=line.to&&Math.abs(gap2.from-from)<halfMargin&&Math.abs(gap2.to-to)<halfMargin&&!avoid.some(function(pos){return gap2.from<pos&&gap2.to>pos;});});if(!gap){if(to<line.to&&mayMeasure&&wrapping&&mayMeasure.visibleRanges.some(function(r){return r.from<=to&&r.to>=to;})){var lineStart=mayMeasure.moveToLineBoundary(_EditorSelection.cursor(to),false,true).head;if(lineStart>from)to=lineStart;}var size=_this35.gapSize(line,from,to,structure);var displaySize=wrapping||size<2e6?size:2e6;gap=new LineGap(from,to,size,displaySize);}gaps.push(gap);};var checkLine=function checkLine(line){if(line.length<doubleMargin||line.type!=BlockType.Text)return;var structure=lineStructure(line.from,line.to,_this35.stateDeco);if(structure.total<doubleMargin)return;var target=_this35.scrollTarget?_this35.scrollTarget.range.head:null;var viewFrom,viewTo;if(wrapping){var marginHeight=margin/_this35.heightOracle.lineLength*_this35.heightOracle.lineHeight;var top2,bot;if(target!=null){var targetFrac=findFraction(structure,target);var spaceFrac=((_this35.visibleBottom-_this35.visibleTop)/2+marginHeight)/line.height;top2=targetFrac-spaceFrac;bot=targetFrac+spaceFrac;}else{top2=(_this35.visibleTop-line.top-marginHeight)/line.height;bot=(_this35.visibleBottom-line.top+marginHeight)/line.height;}viewFrom=findPosition(structure,top2);viewTo=findPosition(structure,bot);}else{var totalWidth=structure.total*_this35.heightOracle.charWidth;var marginWidth=margin*_this35.heightOracle.charWidth;var horizOffset=0;if(totalWidth>2e6){var _iterator66=_createForOfIteratorHelper(current),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var old=_step66.value;if(old.from>=line.from&&old.from<line.to&&old.size!=old.displaySize&&old.from*_this35.heightOracle.charWidth+horizOffset<_this35.pixelViewport.left)horizOffset=old.size-old.displaySize;}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}}var pxLeft=_this35.pixelViewport.left+horizOffset,pxRight=_this35.pixelViewport.right+horizOffset;var left,right;if(target!=null){var _targetFrac=findFraction(structure,target);var _spaceFrac=((pxRight-pxLeft)/2+marginWidth)/totalWidth;left=_targetFrac-_spaceFrac;right=_targetFrac+_spaceFrac;}else{left=(pxLeft-marginWidth)/totalWidth;right=(pxRight+marginWidth)/totalWidth;}viewFrom=findPosition(structure,left);viewTo=findPosition(structure,right);}if(viewFrom>line.from)_addGap(line.from,viewFrom,line,structure);if(viewTo<line.to)_addGap(viewTo,line.to,line,structure);};var _iterator67=_createForOfIteratorHelper(this.viewportLines),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var line=_step67.value;if(Array.isArray(line.type))line.type.forEach(checkLine);else checkLine(line);}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}return gaps;}},{key:"gapSize",value:function gapSize(line,from,to,structure){var fraction=findFraction(structure,to)-findFraction(structure,from);if(this.heightOracle.lineWrapping){return line.height*fraction;}else{return structure.total*this.heightOracle.charWidth*fraction;}}},{key:"updateLineGaps",value:function updateLineGaps(gaps){var _this36=this;if(!LineGap.same(gaps,this.lineGaps)){this.lineGaps=gaps;this.lineGapDeco=Decoration.set(gaps.map(function(gap){return gap.draw(_this36,_this36.heightOracle.lineWrapping);}));}}},{key:"computeVisibleRanges",value:function computeVisibleRanges(changes){var deco=this.stateDeco;if(this.lineGaps.length)deco=deco.concat(this.lineGapDeco);var ranges=[];_RangeSet.spans(deco,this.viewport.from,this.viewport.to,{span:function span(from,to){ranges.push({from:from,to:to});},point:function point(){}},20);var changed=0;if(ranges.length!=this.visibleRanges.length){changed=8|4;}else{for(var _i98=0;_i98<ranges.length&&!(changed&8);_i98++){var old=this.visibleRanges[_i98],nw=ranges[_i98];if(old.from!=nw.from||old.to!=nw.to){changed|=4;if(!(changes&&changes.mapPos(old.from,-1)==nw.from&&changes.mapPos(old.to,1)==nw.to))changed|=8;}}}this.visibleRanges=ranges;return changed;}},{key:"lineBlockAt",value:function lineBlockAt(pos){return pos>=this.viewport.from&&pos<=this.viewport.to&&this.viewportLines.find(function(b){return b.from<=pos&&b.to>=pos;})||scaleBlock(this.heightMap.lineAt(pos,QueryType.ByPos,this.heightOracle,0,0),this.scaler);}},{key:"lineBlockAtHeight",value:function lineBlockAtHeight(height){return height>=this.viewportLines[0].top&&height<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(function(l){return l.top<=height&&l.bottom>=height;})||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height),QueryType.ByHeight,this.heightOracle,0,0),this.scaler);}},{key:"scrollAnchorAt",value:function scrollAnchorAt(scrollTop){var block=this.lineBlockAtHeight(scrollTop+8);return block.from>=this.viewport.from||this.viewportLines[0].top-scrollTop>200?block:this.viewportLines[0];}},{key:"elementAtHeight",value:function elementAtHeight(height){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height),this.heightOracle,0,0),this.scaler);}},{key:"docHeight",get:function get(){return this.scaler.toDOM(this.heightMap.height);}},{key:"contentHeight",get:function get(){return this.docHeight+this.paddingTop+this.paddingBottom;}}]);}();var Viewport=/*#__PURE__*/_createClass(function Viewport(from,to){_classCallCheck(this,Viewport);this.from=from;this.to=to;});function lineStructure(from,to,stateDeco){var ranges=[],pos=from,total=0;_RangeSet.spans(stateDeco,from,to,{span:function span(){},point:function point(from2,to2){if(from2>pos){ranges.push({from:pos,to:from2});total+=from2-pos;}pos=to2;}},20);if(pos<to){ranges.push({from:pos,to:to});total+=to-pos;}return{total:total,ranges:ranges};}function findPosition(_ref9,ratio){var total=_ref9.total,ranges=_ref9.ranges;if(ratio<=0)return ranges[0].from;if(ratio>=1)return ranges[ranges.length-1].to;var dist2=Math.floor(total*ratio);for(var _i99=0;;_i99++){var _ranges$_i=ranges[_i99],from=_ranges$_i.from,to=_ranges$_i.to,size=to-from;if(dist2<=size)return from+dist2;dist2-=size;}}function findFraction(structure,pos){var counted=0;var _iterator68=_createForOfIteratorHelper(structure.ranges),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var _step68$value=_step68.value,from=_step68$value.from,to=_step68$value.to;if(pos<=to){counted+=pos-from;break;}counted+=to-from;}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}return counted/structure.total;}function find(array,f){var _iterator69=_createForOfIteratorHelper(array),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var val=_step69.value;if(f(val))return val;}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}return void 0;}var IdScaler={toDOM:function toDOM(n){return n;},fromDOM:function fromDOM(n){return n;},scale:1,eq:function eq(other){return other==this;}};var _BigScaler=/*#__PURE__*/function(){function BigScaler(oracle,heightMap,viewports){_classCallCheck(this,BigScaler);var vpHeight=0,base2=0,domBase=0;this.viewports=viewports.map(function(_ref0){var from=_ref0.from,to=_ref0.to;var top2=heightMap.lineAt(from,QueryType.ByPos,oracle,0,0).top;var bottom=heightMap.lineAt(to,QueryType.ByPos,oracle,0,0).bottom;vpHeight+=bottom-top2;return{from:from,to:to,top:top2,bottom:bottom,domTop:0,domBottom:0};});this.scale=(7e6-vpHeight)/(heightMap.height-vpHeight);var _iterator70=_createForOfIteratorHelper(this.viewports),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var obj=_step70.value;obj.domTop=domBase+(obj.top-base2)*this.scale;domBase=obj.domBottom=obj.domTop+(obj.bottom-obj.top);base2=obj.bottom;}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}}return _createClass(BigScaler,[{key:"toDOM",value:function toDOM(n){for(var _i100=0,base2=0,domBase=0;;_i100++){var vp=_i100<this.viewports.length?this.viewports[_i100]:null;if(!vp||n<vp.top)return domBase+(n-base2)*this.scale;if(n<=vp.bottom)return vp.domTop+(n-vp.top);base2=vp.bottom;domBase=vp.domBottom;}}},{key:"fromDOM",value:function fromDOM(n){for(var _i101=0,base2=0,domBase=0;;_i101++){var vp=_i101<this.viewports.length?this.viewports[_i101]:null;if(!vp||n<vp.domTop)return base2+(n-domBase)/this.scale;if(n<=vp.domBottom)return vp.top+(n-vp.domTop);base2=vp.bottom;domBase=vp.domBottom;}}},{key:"eq",value:function eq(other){if(!(other instanceof _BigScaler))return false;return this.scale==other.scale&&this.viewports.length==other.viewports.length&&this.viewports.every(function(vp,i){return vp.from==other.viewports[i].from&&vp.to==other.viewports[i].to;});}}]);}();function scaleBlock(block,scaler){if(scaler.scale==1)return block;var bTop=scaler.toDOM(block.top),bBottom=scaler.toDOM(block.bottom);return new _BlockInfo(block.from,block.length,bTop,bBottom-bTop,Array.isArray(block._content)?block._content.map(function(b){return scaleBlock(b,scaler);}):block._content);}var _theme=/* @__PURE__ */_Facet.define({combine:function combine(strs){return strs.join(" ");}});var darkTheme=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.indexOf(true)>-1;}});var baseThemeID=/* @__PURE__ */StyleModule.newName();var baseLightID=/* @__PURE__ */StyleModule.newName();var baseDarkID=/* @__PURE__ */StyleModule.newName();var lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(main,spec,scopes){return new StyleModule(spec,{finish:function finish(sel){return /&/.test(sel)?sel.replace(/&\w*/,function(m){if(m=="&")return main;if(!scopes||!scopes[m])throw new RangeError("Unsupported selector: ".concat(m));return scopes[m];}):main+" "+sel;}});}var baseTheme$1=/* @__PURE__ */buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:"url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"20\"><path stroke=\"%23888\" stroke-width=\"1\" fill=\"none\" d=\"M1 10H196L190 5M190 15L196 10M197 4L197 16\"/></svg>')",backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);var observeOptions={childList:true,characterData:true,subtree:true,attributes:true,characterDataOldValue:true};var useCharData=browser.ie&&browser.ie_version<=11;var DOMObserver=/*#__PURE__*/function(){function DOMObserver(view){var _this37=this;_classCallCheck(this,DOMObserver);this.view=view;this.active=false;this.editContext=null;this.selectionRange=new DOMSelectionState();this.selectionChanged=false;this.delayedFlush=-1;this.resizeTimeout=-1;this.queue=[];this.delayedAndroidKey=null;this.flushingAndroidKey=-1;this.lastChange=0;this.scrollTargets=[];this.intersection=null;this.resizeScroll=null;this.intersecting=false;this.gapIntersection=null;this.gaps=[];this.printQuery=null;this.parentCheck=-1;this.dom=view.contentDOM;this.observer=new MutationObserver(function(mutations){var _iterator71=_createForOfIteratorHelper(mutations),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var mut=_step71.value;_this37.queue.push(mut);}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}if((browser.ie&&browser.ie_version<=11||browser.ios&&view.composing)&&mutations.some(function(m){return m.type=="childList"&&m.removedNodes.length||m.type=="characterData"&&m.oldValue.length>m.target.nodeValue.length;}))_this37.flushSoon();else _this37.flush();});if(window.EditContext&&view.constructor.EDIT_CONTEXT!==false&&!(browser.chrome&&browser.chrome_version<126)){this.editContext=new EditContextManager(view);if(view.state.facet(editable))view.contentDOM.editContext=this.editContext.editContext;}if(useCharData)this.onCharData=function(event){_this37.queue.push({target:event.target,type:"characterData",oldValue:event.prevValue});_this37.flushSoon();};this.onSelectionChange=this.onSelectionChange.bind(this);this.onResize=this.onResize.bind(this);this.onPrint=this.onPrint.bind(this);this.onScroll=this.onScroll.bind(this);if(window.matchMedia)this.printQuery=window.matchMedia("print");if(typeof ResizeObserver=="function"){this.resizeScroll=new ResizeObserver(function(){var _a2;if(((_a2=_this37.view.docView)===null||_a2===void 0?void 0:_a2.lastUpdate)<Date.now()-75)_this37.onResize();});this.resizeScroll.observe(view.scrollDOM);}this.addWindowListeners(this.win=view.win);this.start();if(typeof IntersectionObserver=="function"){this.intersection=new IntersectionObserver(function(entries){if(_this37.parentCheck<0)_this37.parentCheck=setTimeout(_this37.listenForScroll.bind(_this37),1e3);if(entries.length>0&&entries[entries.length-1].intersectionRatio>0!=_this37.intersecting){_this37.intersecting=!_this37.intersecting;if(_this37.intersecting!=_this37.view.inView)_this37.onScrollChanged(document.createEvent("Event"));}},{threshold:[0,1e-3]});this.intersection.observe(this.dom);this.gapIntersection=new IntersectionObserver(function(entries){if(entries.length>0&&entries[entries.length-1].intersectionRatio>0)_this37.onScrollChanged(document.createEvent("Event"));},{});}this.listenForScroll();this.readSelectionRange();}return _createClass(DOMObserver,[{key:"onScrollChanged",value:function onScrollChanged(e){this.view.inputState.runHandlers("scroll",e);if(this.intersecting)this.view.measure();}},{key:"onScroll",value:function onScroll(e){if(this.intersecting)this.flush(false);if(this.editContext)this.view.requestMeasure(this.editContext.measureReq);this.onScrollChanged(e);}},{key:"onResize",value:function onResize(){var _this38=this;if(this.resizeTimeout<0)this.resizeTimeout=setTimeout(function(){_this38.resizeTimeout=-1;_this38.view.requestMeasure();},50);}},{key:"onPrint",value:function onPrint(event){var _this39=this;if((event.type=="change"||!event.type)&&!event.matches)return;this.view.viewState.printing=true;this.view.measure();setTimeout(function(){_this39.view.viewState.printing=false;_this39.view.requestMeasure();},500);}},{key:"updateGaps",value:function updateGaps(gaps){if(this.gapIntersection&&(gaps.length!=this.gaps.length||this.gaps.some(function(g,i){return g!=gaps[i];}))){this.gapIntersection.disconnect();var _iterator72=_createForOfIteratorHelper(gaps),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var gap=_step72.value;this.gapIntersection.observe(gap);}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}this.gaps=gaps;}}},{key:"onSelectionChange",value:function onSelectionChange(event){var wasChanged=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;var view=this.view,sel=this.selectionRange;if(view.state.facet(editable)?view.root.activeElement!=this.dom:!hasSelection(this.dom,sel))return;var context=sel.anchorNode&&view.docView.nearest(sel.anchorNode);if(context&&context.ignoreEvent(event)){if(!wasChanged)this.selectionChanged=false;return;}if((browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!view.state.selection.main.empty&&sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))this.flushSoon();else this.flush(false);}},{key:"readSelectionRange",value:function readSelectionRange(){var view=this.view;var selection2=getSelection(view.root);if(!selection2)return false;var range=browser.safari&&view.root.nodeType==11&&view.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,selection2)||selection2;if(!range||this.selectionRange.eq(range))return false;var local=hasSelection(this.dom,range);if(local&&!this.selectionChanged&&view.inputState.lastFocusTime>Date.now()-200&&view.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,range)){this.view.inputState.lastFocusTime=0;view.docView.updateSelection();return false;}this.selectionRange.setRange(range);if(local)this.selectionChanged=true;return true;}},{key:"setSelectionRange",value:function setSelectionRange(anchor,head){this.selectionRange.set(anchor.node,anchor.offset,head.node,head.offset);this.selectionChanged=false;}},{key:"clearSelectionRange",value:function clearSelectionRange(){this.selectionRange.set(null,0,null,0);}},{key:"listenForScroll",value:function listenForScroll(){this.parentCheck=-1;var i=0,changed=null;for(var dom=this.dom;dom;){if(dom.nodeType==1){if(!changed&&i<this.scrollTargets.length&&this.scrollTargets[i]==dom)i++;else if(!changed)changed=this.scrollTargets.slice(0,i);if(changed)changed.push(dom);dom=dom.assignedSlot||dom.parentNode;}else if(dom.nodeType==11){dom=dom.host;}else{break;}}if(i<this.scrollTargets.length&&!changed)changed=this.scrollTargets.slice(0,i);if(changed){var _iterator73=_createForOfIteratorHelper(this.scrollTargets),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _dom2=_step73.value;_dom2.removeEventListener("scroll",this.onScroll);}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}var _iterator74=_createForOfIteratorHelper(this.scrollTargets=changed),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var _dom3=_step74.value;_dom3.addEventListener("scroll",this.onScroll);}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}}}},{key:"ignore",value:function ignore(f){if(!this.active)return f();try{this.stop();return f();}finally{this.start();this.clear();}}},{key:"start",value:function start(){if(this.active)return;this.observer.observe(this.dom,observeOptions);if(useCharData)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true;}},{key:"stop",value:function stop(){if(!this.active)return;this.active=false;this.observer.disconnect();if(useCharData)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData);}},{key:"clear",value:function clear(){this.processRecords();this.queue.length=0;this.selectionChanged=false;}},{key:"delayAndroidKey",value:function delayAndroidKey(key,keyCode){var _this40=this;var _a2;if(!this.delayedAndroidKey){var flush=function flush(){var key2=_this40.delayedAndroidKey;if(key2){_this40.clearDelayedAndroidKey();_this40.view.inputState.lastKeyCode=key2.keyCode;_this40.view.inputState.lastKeyTime=Date.now();var flushed=_this40.flush();if(!flushed&&key2.force)dispatchKey(_this40.dom,key2.key,key2.keyCode);}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(flush);}if(!this.delayedAndroidKey||key=="Enter")this.delayedAndroidKey={key:key,keyCode:keyCode,force:this.lastChange<Date.now()-50||!!((_a2=this.delayedAndroidKey)===null||_a2===void 0?void 0:_a2.force)};}},{key:"clearDelayedAndroidKey",value:function clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey);this.delayedAndroidKey=null;this.flushingAndroidKey=-1;}},{key:"flushSoon",value:function flushSoon(){var _this41=this;if(this.delayedFlush<0)this.delayedFlush=this.view.win.requestAnimationFrame(function(){_this41.delayedFlush=-1;_this41.flush();});}},{key:"forceFlush",value:function forceFlush(){if(this.delayedFlush>=0){this.view.win.cancelAnimationFrame(this.delayedFlush);this.delayedFlush=-1;}this.flush();}},{key:"pendingRecords",value:function pendingRecords(){var _iterator75=_createForOfIteratorHelper(this.observer.takeRecords()),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var mut=_step75.value;this.queue.push(mut);}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}return this.queue;}},{key:"processRecords",value:function processRecords(){var records=this.pendingRecords();if(records.length)this.queue=[];var from=-1,to=-1,typeOver=false;var _iterator76=_createForOfIteratorHelper(records),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var record=_step76.value;var range=this.readMutation(record);if(!range)continue;if(range.typeOver)typeOver=true;if(from==-1){from=range.from;to=range.to;}else{from=Math.min(range.from,from);to=Math.max(range.to,to);}}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}return{from:from,to:to,typeOver:typeOver};}},{key:"readChange",value:function readChange(){var _this$processRecords=this.processRecords(),from=_this$processRecords.from,to=_this$processRecords.to,typeOver=_this$processRecords.typeOver;var newSel=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(from<0&&!newSel)return null;if(from>-1)this.lastChange=Date.now();this.view.inputState.lastFocusTime=0;this.selectionChanged=false;var change=new DOMChange(this.view,from,to,typeOver);this.view.docView.domChanged={newSel:change.newSel?change.newSel.main:null};return change;}},{key:"flush",value:function flush(){var readSelection=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.delayedFlush>=0||this.delayedAndroidKey)return false;if(readSelection)this.readSelectionRange();var domChange=this.readChange();if(!domChange){this.view.requestMeasure();return false;}var startState=this.view.state;var handled=applyDOMChange(this.view,domChange);if(this.view.state==startState&&(domChange.domChanged||domChange.newSel&&!domChange.newSel.main.eq(this.view.state.selection.main)))this.view.update([]);return handled;}},{key:"readMutation",value:function readMutation(rec){var cView=this.view.docView.nearest(rec.target);if(!cView||cView.ignoreMutation(rec))return null;cView.markDirty(rec.type=="attributes");if(rec.type=="attributes")cView.flags|=4;if(rec.type=="childList"){var childBefore=findChild(cView,rec.previousSibling||rec.target.previousSibling,-1);var childAfter=findChild(cView,rec.nextSibling||rec.target.nextSibling,1);return{from:childBefore?cView.posAfter(childBefore):cView.posAtStart,to:childAfter?cView.posBefore(childAfter):cView.posAtEnd,typeOver:false};}else if(rec.type=="characterData"){return{from:cView.posAtStart,to:cView.posAtEnd,typeOver:rec.target.nodeValue==rec.oldValue};}else{return null;}}},{key:"setWindow",value:function setWindow(win){if(win!=this.win){this.removeWindowListeners(this.win);this.win=win;this.addWindowListeners(this.win);}}},{key:"addWindowListeners",value:function addWindowListeners(win){win.addEventListener("resize",this.onResize);if(this.printQuery){if(this.printQuery.addEventListener)this.printQuery.addEventListener("change",this.onPrint);else this.printQuery.addListener(this.onPrint);}else win.addEventListener("beforeprint",this.onPrint);win.addEventListener("scroll",this.onScroll);win.document.addEventListener("selectionchange",this.onSelectionChange);}},{key:"removeWindowListeners",value:function removeWindowListeners(win){win.removeEventListener("scroll",this.onScroll);win.removeEventListener("resize",this.onResize);if(this.printQuery){if(this.printQuery.removeEventListener)this.printQuery.removeEventListener("change",this.onPrint);else this.printQuery.removeListener(this.onPrint);}else win.removeEventListener("beforeprint",this.onPrint);win.document.removeEventListener("selectionchange",this.onSelectionChange);}},{key:"update",value:function update(_update7){if(this.editContext){this.editContext.update(_update7);if(_update7.startState.facet(editable)!=_update7.state.facet(editable))_update7.view.contentDOM.editContext=_update7.state.facet(editable)?this.editContext.editContext:null;}}},{key:"destroy",value:function destroy(){var _a2,_b,_c;this.stop();(_a2=this.intersection)===null||_a2===void 0?void 0:_a2.disconnect();(_b=this.gapIntersection)===null||_b===void 0?void 0:_b.disconnect();(_c=this.resizeScroll)===null||_c===void 0?void 0:_c.disconnect();var _iterator77=_createForOfIteratorHelper(this.scrollTargets),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var dom=_step77.value;dom.removeEventListener("scroll",this.onScroll);}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}this.removeWindowListeners(this.win);clearTimeout(this.parentCheck);clearTimeout(this.resizeTimeout);this.win.cancelAnimationFrame(this.delayedFlush);this.win.cancelAnimationFrame(this.flushingAndroidKey);if(this.editContext){this.view.contentDOM.editContext=null;this.editContext.destroy();}}}]);}();function findChild(cView,dom,dir){while(dom){var curView=_ContentView.get(dom);if(curView&&curView.parent==cView)return curView;var parent=dom.parentNode;dom=parent!=cView.dom?parent:dir>0?dom.nextSibling:dom.previousSibling;}return null;}function buildSelectionRangeFromRange(view,range){var anchorNode=range.startContainer,anchorOffset=range.startOffset;var focusNode=range.endContainer,focusOffset=range.endOffset;var curAnchor=view.docView.domAtPos(view.state.selection.main.anchor);if(isEquivalentPosition(curAnchor.node,curAnchor.offset,focusNode,focusOffset)){var _ref1=[focusNode,focusOffset,anchorNode,anchorOffset];anchorNode=_ref1[0];anchorOffset=_ref1[1];focusNode=_ref1[2];focusOffset=_ref1[3];}return{anchorNode:anchorNode,anchorOffset:anchorOffset,focusNode:focusNode,focusOffset:focusOffset};}function safariSelectionRangeHack(view,selection2){if(selection2.getComposedRanges){var range=selection2.getComposedRanges(view.root)[0];if(range)return buildSelectionRangeFromRange(view,range);}var found=null;function read(event){event.preventDefault();event.stopImmediatePropagation();found=event.getTargetRanges()[0];}view.contentDOM.addEventListener("beforeinput",read,true);view.dom.ownerDocument.execCommand("indent");view.contentDOM.removeEventListener("beforeinput",read,true);return found?buildSelectionRangeFromRange(view,found):null;}var EditContextManager=/*#__PURE__*/function(){function EditContextManager(view){var _this42=this;_classCallCheck(this,EditContextManager);this.from=0;this.to=0;this.pendingContextChange=null;this.handlers=/* @__PURE__ */Object.create(null);this.composing=null;this.resetRange(view.state);var context=this.editContext=new window.EditContext({text:view.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,view.state.selection.main.anchor))),selectionEnd:this.toContextPos(view.state.selection.main.head)});this.handlers.textupdate=function(e){var main=view.state.selection.main,anchor=main.anchor,head=main.head;var from=_this42.toEditorPos(e.updateRangeStart),to=_this42.toEditorPos(e.updateRangeEnd);if(view.inputState.composing>=0&&!_this42.composing)_this42.composing={contextBase:e.updateRangeStart,editorBase:from,drifted:false};var change={from:from,to:to,insert:_Text.of(e.text.split("\n"))};if(change.from==_this42.from&&anchor<_this42.from)change.from=anchor;else if(change.to==_this42.to&&anchor>_this42.to)change.to=anchor;if(change.from==change.to&&!change.insert.length){var newSel=_EditorSelection.single(_this42.toEditorPos(e.selectionStart),_this42.toEditorPos(e.selectionEnd));if(!newSel.main.eq(main))view.dispatch({selection:newSel,userEvent:"select"});return;}if((browser.mac||browser.android)&&change.from==head-1&&/^\. ?$/.test(e.text)&&view.contentDOM.getAttribute("autocorrect")=="off")change={from:from,to:to,insert:_Text.of([e.text.replace("."," ")])};_this42.pendingContextChange=change;if(!view.state.readOnly){var newLen=_this42.to-_this42.from+(change.to-change.from+change.insert.length);applyDOMChangeInner(view,change,_EditorSelection.single(_this42.toEditorPos(e.selectionStart,newLen),_this42.toEditorPos(e.selectionEnd,newLen)));}if(_this42.pendingContextChange){_this42.revertPending(view.state);_this42.setSelection(view.state);}};this.handlers.characterboundsupdate=function(e){var rects=[],prev=null;for(var _i102=_this42.toEditorPos(e.rangeStart),end=_this42.toEditorPos(e.rangeEnd);_i102<end;_i102++){var rect=view.coordsForChar(_i102);prev=rect&&new DOMRect(rect.left,rect.top,rect.right-rect.left,rect.bottom-rect.top)||prev||new DOMRect();rects.push(prev);}context.updateCharacterBounds(e.rangeStart,rects);};this.handlers.textformatupdate=function(e){var deco=[];var _iterator78=_createForOfIteratorHelper(e.getTextFormats()),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var format=_step78.value;var lineStyle=format.underlineStyle,thickness=format.underlineThickness;if(lineStyle!="None"&&thickness!="None"){var from=_this42.toEditorPos(format.rangeStart),to=_this42.toEditorPos(format.rangeEnd);if(from<to){var style="text-decoration: underline ".concat(lineStyle=="Dashed"?"dashed ":lineStyle=="Squiggle"?"wavy ":"").concat(thickness=="Thin"?1:2,"px");deco.push(Decoration.mark({attributes:{style:style}}).range(from,to));}}}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}view.dispatch({effects:setEditContextFormatting.of(Decoration.set(deco))});};this.handlers.compositionstart=function(){if(view.inputState.composing<0){view.inputState.composing=0;view.inputState.compositionFirstChange=true;}};this.handlers.compositionend=function(){view.inputState.composing=-1;view.inputState.compositionFirstChange=null;if(_this42.composing){var drifted=_this42.composing.drifted;_this42.composing=null;if(drifted)_this42.reset(view.state);}};for(var event in this.handlers)context.addEventListener(event,this.handlers[event]);this.measureReq={read:function read(view2){_this42.editContext.updateControlBounds(view2.contentDOM.getBoundingClientRect());var sel=getSelection(view2.root);if(sel&&sel.rangeCount)_this42.editContext.updateSelectionBounds(sel.getRangeAt(0).getBoundingClientRect());}};}return _createClass(EditContextManager,[{key:"applyEdits",value:function applyEdits(update){var _this43=this;var off=0,abort=false,pending=this.pendingContextChange;update.changes.iterChanges(function(fromA,toA,_fromB,_toB,insert2){if(abort)return;var dLen=insert2.length-(toA-fromA);if(pending&&toA>=pending.to){if(pending.from==fromA&&pending.to==toA&&pending.insert.eq(insert2)){pending=_this43.pendingContextChange=null;off+=dLen;_this43.to+=dLen;return;}else{pending=null;_this43.revertPending(update.state);}}fromA+=off;toA+=off;if(toA<=_this43.from){_this43.from+=dLen;_this43.to+=dLen;}else if(fromA<_this43.to){if(fromA<_this43.from||toA>_this43.to||_this43.to-_this43.from+insert2.length>3e4){abort=true;return;}_this43.editContext.updateText(_this43.toContextPos(fromA),_this43.toContextPos(toA),insert2.toString());_this43.to+=dLen;}off+=dLen;});if(pending&&!abort)this.revertPending(update.state);return!abort;}},{key:"update",value:function update(_update8){var _this44=this;var reverted=this.pendingContextChange,startSel=_update8.startState.selection.main;if(this.composing&&(this.composing.drifted||!_update8.changes.touchesRange(startSel.from,startSel.to)&&_update8.transactions.some(function(tr){return!tr.isUserEvent("input.type")&&tr.changes.touchesRange(_this44.from,_this44.to);}))){this.composing.drifted=true;this.composing.editorBase=_update8.changes.mapPos(this.composing.editorBase);}else if(!this.applyEdits(_update8)||!this.rangeIsValid(_update8.state)){this.pendingContextChange=null;this.reset(_update8.state);}else if(_update8.docChanged||_update8.selectionSet||reverted){this.setSelection(_update8.state);}if(_update8.geometryChanged||_update8.docChanged||_update8.selectionSet)_update8.view.requestMeasure(this.measureReq);}},{key:"resetRange",value:function resetRange(state){var head=state.selection.main.head;this.from=Math.max(0,head-1e4);this.to=Math.min(state.doc.length,head+1e4);}},{key:"reset",value:function reset(state){this.resetRange(state);this.editContext.updateText(0,this.editContext.text.length,state.doc.sliceString(this.from,this.to));this.setSelection(state);}},{key:"revertPending",value:function revertPending(state){var pending=this.pendingContextChange;this.pendingContextChange=null;this.editContext.updateText(this.toContextPos(pending.from),this.toContextPos(pending.from+pending.insert.length),state.doc.sliceString(pending.from,pending.to));}},{key:"setSelection",value:function setSelection(state){var main=state.selection.main;var start=this.toContextPos(Math.max(this.from,Math.min(this.to,main.anchor)));var end=this.toContextPos(main.head);if(this.editContext.selectionStart!=start||this.editContext.selectionEnd!=end)this.editContext.updateSelection(start,end);}},{key:"rangeIsValid",value:function rangeIsValid(state){var head=state.selection.main.head;return!(this.from>0&&head-this.from<500||this.to<state.doc.length&&this.to-head<500||this.to-this.from>1e4*3);}},{key:"toEditorPos",value:function toEditorPos(contextPos){var clipLen=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.to-this.from;contextPos=Math.min(contextPos,clipLen);var c=this.composing;return c&&c.drifted?c.editorBase+(contextPos-c.contextBase):contextPos+this.from;}},{key:"toContextPos",value:function toContextPos(editorPos){var c=this.composing;return c&&c.drifted?c.contextBase+(editorPos-c.editorBase):editorPos-this.from;}},{key:"destroy",value:function destroy(){for(var event in this.handlers)this.editContext.removeEventListener(event,this.handlers[event]);}}]);}();var _EditorView=/*#__PURE__*/function(){function EditorView(){var _this45=this;var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,EditorView);var _a2;this.plugins=[];this.pluginMap=/* @__PURE__ */new Map();this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.destroyed=false;this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.className="cm-announced";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);if(config2.parent)config2.parent.appendChild(this.dom);var dispatch=config2.dispatch;this.dispatchTransactions=config2.dispatchTransactions||dispatch&&function(trs){return trs.forEach(function(tr){return dispatch(tr,_this45);});}||function(trs){return _this45.update(trs);};this.dispatch=this.dispatch.bind(this);this._root=config2.root||getRoot(config2.parent)||document;this.viewState=new ViewState(config2.state||_EditorState.create(config2));if(config2.scrollTo&&config2.scrollTo.is(_scrollIntoView))this.viewState.scrollTarget=config2.scrollTo.value.clip(this.viewState.state);this.plugins=this.state.facet(viewPlugin).map(function(spec){return new PluginInstance(spec);});var _iterator79=_createForOfIteratorHelper(this.plugins),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var plugin=_step79.value;plugin.update(this);}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}this.observer=new DOMObserver(this);this.inputState=new InputState(this);this.inputState.ensureHandlers(this.plugins);this.docView=new DocView(this);this.mountStyles();this.updateAttrs();this.updateState=0;this.requestMeasure();if((_a2=document.fonts)===null||_a2===void 0?void 0:_a2.ready)document.fonts.ready.then(function(){return _this45.requestMeasure();});}return _createClass(EditorView,[{key:"state",get:function get(){return this.viewState.state;}},{key:"viewport",get:function get(){return this.viewState.viewport;}},{key:"visibleRanges",get:function get(){return this.viewState.visibleRanges;}},{key:"inView",get:function get(){return this.viewState.inView;}},{key:"composing",get:function get(){return!!this.inputState&&this.inputState.composing>0;}},{key:"compositionStarted",get:function get(){return!!this.inputState&&this.inputState.composing>=0;}},{key:"root",get:function get(){return this._root;}},{key:"win",get:function get(){return this.dom.ownerDocument.defaultView||window;}},{key:"dispatch",value:function dispatch(){var _this$state;for(var _len6=arguments.length,input=new Array(_len6),_key4=0;_key4<_len6;_key4++){input[_key4]=arguments[_key4];}var trs=input.length==1&&input[0]instanceof _Transaction?input:input.length==1&&Array.isArray(input[0])?input[0]:[(_this$state=this.state).update.apply(_this$state,input)];this.dispatchTransactions(trs,this);}},{key:"update",value:function update(transactions){var _this46=this;if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");var redrawn=false,attrsChanged=false,update;var state=this.state;var _iterator80=_createForOfIteratorHelper(transactions),_step80;try{for(_iterator80.s();!(_step80=_iterator80.n()).done;){var _tr=_step80.value;if(_tr.startState!=state)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");state=_tr.state;}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}if(this.destroyed){this.viewState.state=state;return;}var focus=this.hasFocus,focusFlag=0,dispatchFocus=null;if(transactions.some(function(tr){return tr.annotation(isFocusChange);})){this.inputState.notifiedFocused=focus;focusFlag=1;}else if(focus!=this.inputState.notifiedFocused){this.inputState.notifiedFocused=focus;dispatchFocus=focusChangeTransaction(state,focus);if(!dispatchFocus)focusFlag=1;}var pendingKey=this.observer.delayedAndroidKey,domChange=null;if(pendingKey){this.observer.clearDelayedAndroidKey();domChange=this.observer.readChange();if(domChange&&!this.state.doc.eq(state.doc)||!this.state.selection.eq(state.selection))domChange=null;}else{this.observer.clear();}if(state.facet(_EditorState.phrases)!=this.state.facet(_EditorState.phrases))return this.setState(state);update=_ViewUpdate.create(this,state,transactions);update.flags|=focusFlag;var scrollTarget=this.viewState.scrollTarget;try{this.updateState=2;var _iterator81=_createForOfIteratorHelper(transactions),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var tr=_step81.value;if(scrollTarget)scrollTarget=scrollTarget.map(tr.changes);if(tr.scrollIntoView){var main=tr.state.selection.main;scrollTarget=new _ScrollTarget(main.empty?main:_EditorSelection.cursor(main.head,main.head>main.anchor?-1:1));}var _iterator82=_createForOfIteratorHelper(tr.effects),_step82;try{for(_iterator82.s();!(_step82=_iterator82.n()).done;){var e=_step82.value;if(e.is(_scrollIntoView))scrollTarget=e.value.clip(this.state);}}catch(err){_iterator82.e(err);}finally{_iterator82.f();}}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}this.viewState.update(update,scrollTarget);this.bidiCache=_CachedOrder.update(this.bidiCache,update.changes);if(!update.empty){this.updatePlugins(update);this.inputState.update(update);}redrawn=this.docView.update(update);if(this.state.facet(styleModule)!=this.styleModules)this.mountStyles();attrsChanged=this.updateAttrs();this.showAnnouncements(transactions);this.docView.updateSelection(redrawn,transactions.some(function(tr){return tr.isUserEvent("select.pointer");}));}finally{this.updateState=0;}if(update.startState.facet(_theme)!=update.state.facet(_theme))this.viewState.mustMeasureContent=true;if(redrawn||attrsChanged||scrollTarget||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)this.requestMeasure();if(redrawn)this.docViewUpdate();if(!update.empty){var _iterator83=_createForOfIteratorHelper(this.state.facet(updateListener)),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var listener=_step83.value;try{listener(update);}catch(e){logException(this.state,e,"update listener");}}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}}if(dispatchFocus||domChange)Promise.resolve().then(function(){if(dispatchFocus&&_this46.state==dispatchFocus.startState)_this46.dispatch(dispatchFocus);if(domChange){if(!applyDOMChange(_this46,domChange)&&pendingKey.force)dispatchKey(_this46.contentDOM,pendingKey.key,pendingKey.keyCode);}});}},{key:"setState",value:function setState(newState){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=newState;return;}this.updateState=2;var hadFocus=this.hasFocus;try{var _iterator84=_createForOfIteratorHelper(this.plugins),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var plugin=_step84.value;plugin.destroy(this);}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}this.viewState=new ViewState(newState);this.plugins=newState.facet(viewPlugin).map(function(spec){return new PluginInstance(spec);});this.pluginMap.clear();var _iterator85=_createForOfIteratorHelper(this.plugins),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var _plugin3=_step85.value;_plugin3.update(this);}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}this.docView.destroy();this.docView=new DocView(this);this.inputState.ensureHandlers(this.plugins);this.mountStyles();this.updateAttrs();this.bidiCache=[];}finally{this.updateState=0;}if(hadFocus)this.focus();this.requestMeasure();}},{key:"updatePlugins",value:function updatePlugins(update){var prevSpecs=update.startState.facet(viewPlugin),specs=update.state.facet(viewPlugin);if(prevSpecs!=specs){var newPlugins=[];var _iterator86=_createForOfIteratorHelper(specs),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var spec=_step86.value;var found=prevSpecs.indexOf(spec);if(found<0){newPlugins.push(new PluginInstance(spec));}else{var plugin=this.plugins[found];plugin.mustUpdate=update;newPlugins.push(plugin);}}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}var _iterator87=_createForOfIteratorHelper(this.plugins),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var _plugin4=_step87.value;if(_plugin4.mustUpdate!=update)_plugin4.destroy(this);}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}this.plugins=newPlugins;this.pluginMap.clear();}else{var _iterator88=_createForOfIteratorHelper(this.plugins),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var _p=_step88.value;_p.mustUpdate=update;}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}}for(var _i103=0;_i103<this.plugins.length;_i103++)this.plugins[_i103].update(this);if(prevSpecs!=specs)this.inputState.ensureHandlers(this.plugins);}},{key:"docViewUpdate",value:function docViewUpdate(){var _iterator89=_createForOfIteratorHelper(this.plugins),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var plugin=_step89.value;var val=plugin.value;if(val&&val.docViewUpdate){try{val.docViewUpdate(this);}catch(e){logException(this.state,e,"doc view update listener");}}}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}}},{key:"measure",value:function measure(){var _this47=this;var flush=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(this.destroyed)return;if(this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);if(this.observer.delayedAndroidKey){this.measureScheduled=-1;this.requestMeasure();return;}this.measureScheduled=0;if(flush)this.observer.forceFlush();var updated=null;var sDOM=this.scrollDOM,scrollTop=sDOM.scrollTop*this.scaleY;var _this$viewState=this.viewState,scrollAnchorPos=_this$viewState.scrollAnchorPos,scrollAnchorHeight=_this$viewState.scrollAnchorHeight;if(Math.abs(scrollTop-this.viewState.scrollTop)>1)scrollAnchorHeight=-1;this.viewState.scrollAnchorHeight=-1;try{for(var _i104=0;;_i104++){if(scrollAnchorHeight<0){if(isScrolledToBottom(sDOM)){scrollAnchorPos=-1;scrollAnchorHeight=this.viewState.heightMap.height;}else{var block=this.viewState.scrollAnchorAt(scrollTop);scrollAnchorPos=block.from;scrollAnchorHeight=block.top;}}this.updateState=1;var changed=this.viewState.measure(this);if(!changed&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(_i104>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break;}var measuring=[];if(!(changed&4)){var _ref10=[measuring,this.measureRequests];this.measureRequests=_ref10[0];measuring=_ref10[1];}var measured=measuring.map(function(m){try{return m.read(_this47);}catch(e){logException(_this47.state,e);return BadMeasure;}});var update=_ViewUpdate.create(this,this.state,[]),redrawn=false;update.flags|=changed;if(!updated)updated=update;else updated.flags|=changed;this.updateState=2;if(!update.empty){this.updatePlugins(update);this.inputState.update(update);this.updateAttrs();redrawn=this.docView.update(update);if(redrawn)this.docViewUpdate();}for(var i2=0;i2<measuring.length;i2++)if(measured[i2]!=BadMeasure){try{var m=measuring[i2];if(m.write)m.write(measured[i2],this);}catch(e){logException(this.state,e);}}if(redrawn)this.docView.updateSelection(true);if(!update.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget);this.viewState.scrollTarget=null;scrollAnchorHeight=-1;continue;}else{var newAnchorHeight=scrollAnchorPos<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(scrollAnchorPos).top;var diff=newAnchorHeight-scrollAnchorHeight;if(diff>1||diff<-1){scrollTop=scrollTop+diff;sDOM.scrollTop=scrollTop/this.scaleY;scrollAnchorHeight=-1;continue;}}}break;}}}finally{this.updateState=0;this.measureScheduled=-1;}if(updated&&!updated.empty){var _iterator90=_createForOfIteratorHelper(this.state.facet(updateListener)),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var listener=_step90.value;listener(updated);}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}}}},{key:"themeClasses",get:function get(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(_theme);}},{key:"updateAttrs",value:function updateAttrs(){var _this48=this;var editorAttrs=attrsFromFacet(this,editorAttributes,{"class":"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});var contentAttrs={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:!this.state.facet(editable)?"false":"true","class":"cm-content",style:"".concat(browser.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};if(this.state.readOnly)contentAttrs["aria-readonly"]="true";attrsFromFacet(this,contentAttributes,contentAttrs);var changed=this.observer.ignore(function(){var changedContent=_updateAttrs(_this48.contentDOM,_this48.contentAttrs,contentAttrs);var changedEditor=_updateAttrs(_this48.dom,_this48.editorAttrs,editorAttrs);return changedContent||changedEditor;});this.editorAttrs=editorAttrs;this.contentAttrs=contentAttrs;return changed;}},{key:"showAnnouncements",value:function showAnnouncements(trs){var first=true;var _iterator91=_createForOfIteratorHelper(trs),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var tr=_step91.value;var _iterator92=_createForOfIteratorHelper(tr.effects),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var effect=_step92.value;if(effect.is(_EditorView.announce)){if(first)this.announceDOM.textContent="";first=false;var div=this.announceDOM.appendChild(document.createElement("div"));div.textContent=effect.value;}}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}}},{key:"mountStyles",value:function mountStyles(){this.styleModules=this.state.facet(styleModule);var nonce=this.state.facet(_EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1).reverse(),nonce?{nonce:nonce}:void 0);}},{key:"readMeasured",value:function readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure(false);}},{key:"requestMeasure",value:function requestMeasure(request){var _this49=this;if(this.measureScheduled<0)this.measureScheduled=this.win.requestAnimationFrame(function(){return _this49.measure();});if(request){if(this.measureRequests.indexOf(request)>-1)return;if(request.key!=null)for(var _i105=0;_i105<this.measureRequests.length;_i105++){if(this.measureRequests[_i105].key===request.key){this.measureRequests[_i105]=request;return;}}this.measureRequests.push(request);}}},{key:"plugin",value:function plugin(_plugin2){var known=this.pluginMap.get(_plugin2);if(known===void 0||known&&known.spec!=_plugin2)this.pluginMap.set(_plugin2,known=this.plugins.find(function(p){return p.spec==_plugin2;})||null);return known&&known.update(this).value;}},{key:"documentTop",get:function get(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop;}},{key:"documentPadding",get:function get(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom};}},{key:"scaleX",get:function get(){return this.viewState.scaleX;}},{key:"scaleY",get:function get(){return this.viewState.scaleY;}},{key:"elementAtHeight",value:function elementAtHeight(height){this.readMeasured();return this.viewState.elementAtHeight(height);}},{key:"lineBlockAtHeight",value:function lineBlockAtHeight(height){this.readMeasured();return this.viewState.lineBlockAtHeight(height);}},{key:"viewportLineBlocks",get:function get(){return this.viewState.viewportLines;}},{key:"lineBlockAt",value:function lineBlockAt(pos){return this.viewState.lineBlockAt(pos);}},{key:"contentHeight",get:function get(){return this.viewState.contentHeight;}},{key:"moveByChar",value:function moveByChar(start,forward,by){return skipAtoms(this,start,_moveByChar(this,start,forward,by));}},{key:"moveByGroup",value:function moveByGroup(start,forward){var _this50=this;return skipAtoms(this,start,_moveByChar(this,start,forward,function(initial){return byGroup(_this50,start.head,initial);}));}},{key:"visualLineSide",value:function visualLineSide(line,end){var order=this.bidiSpans(line),dir=this.textDirectionAt(line.from);var span=order[end?order.length-1:0];return _EditorSelection.cursor(span.side(end,dir)+line.from,span.forward(!end,dir)?1:-1);}},{key:"moveToLineBoundary",value:function moveToLineBoundary(start,forward){var includeWrap=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return _moveToLineBoundary(this,start,forward,includeWrap);}},{key:"moveVertically",value:function moveVertically(start,forward,distance){return skipAtoms(this,start,_moveVertically(this,start,forward,distance));}},{key:"domAtPos",value:function domAtPos(pos){return this.docView.domAtPos(pos);}},{key:"posAtDOM",value:function posAtDOM(node){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return this.docView.posFromDOM(node,offset);}},{key:"posAtCoords",value:function posAtCoords(coords){var precise=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.readMeasured();return _posAtCoords(this,coords,precise);}},{key:"coordsAtPos",value:function coordsAtPos(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.readMeasured();var rect=this.docView.coordsAt(pos,side);if(!rect||rect.left==rect.right)return rect;var line=this.state.doc.lineAt(pos),order=this.bidiSpans(line);var span=order[BidiSpan.find(order,pos-line.from,-1,side)];return flattenRect(rect,span.dir==Direction.LTR==side>0);}},{key:"coordsForChar",value:function coordsForChar(pos){this.readMeasured();return this.docView.coordsForChar(pos);}},{key:"defaultCharacterWidth",get:function get(){return this.viewState.heightOracle.charWidth;}},{key:"defaultLineHeight",get:function get(){return this.viewState.heightOracle.lineHeight;}},{key:"textDirection",get:function get(){return this.viewState.defaultTextDirection;}},{key:"textDirectionAt",value:function textDirectionAt(pos){var perLine=this.state.facet(perLineTextDirection);if(!perLine||pos<this.viewport.from||pos>this.viewport.to)return this.textDirection;this.readMeasured();return this.docView.textDirectionAt(pos);}},{key:"lineWrapping",get:function get(){return this.viewState.heightOracle.lineWrapping;}},{key:"bidiSpans",value:function bidiSpans(line){if(line.length>MaxBidiLine)return trivialOrder(line.length);var dir=this.textDirectionAt(line.from),isolates;var _iterator93=_createForOfIteratorHelper(this.bidiCache),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var entry=_step93.value;if(entry.from==line.from&&entry.dir==dir&&(entry.fresh||isolatesEq(entry.isolates,isolates=getIsolatedRanges(this,line))))return entry.order;}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}if(!isolates)isolates=getIsolatedRanges(this,line);var order=computeOrder(line.text,dir,isolates);this.bidiCache.push(new _CachedOrder(line.from,line.to,dir,isolates,true,order));return order;}},{key:"hasFocus",get:function get(){var _a2;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((_a2=this.inputState)===null||_a2===void 0?void 0:_a2.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM;}},{key:"focus",value:function focus(){var _this51=this;this.observer.ignore(function(){focusPreventScroll(_this51.contentDOM);_this51.docView.updateSelection();});}},{key:"setRoot",value:function setRoot(root){if(this._root!=root){this._root=root;this.observer.setWindow((root.nodeType==9?root:root.ownerDocument).defaultView||window);this.mountStyles();}}},{key:"destroy",value:function destroy(){if(this.root.activeElement==this.contentDOM)this.contentDOM.blur();var _iterator94=_createForOfIteratorHelper(this.plugins),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var plugin=_step94.value;plugin.destroy(this);}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}this.plugins=[];this.inputState.destroy();this.docView.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)this.win.cancelAnimationFrame(this.measureScheduled);this.destroyed=true;}},{key:"scrollSnapshot",value:function scrollSnapshot(){var _this$scrollDOM=this.scrollDOM,scrollTop=_this$scrollDOM.scrollTop,scrollLeft=_this$scrollDOM.scrollLeft;var ref=this.viewState.scrollAnchorAt(scrollTop);return _scrollIntoView.of(new _ScrollTarget(_EditorSelection.cursor(ref.from),"start","start",ref.top-scrollTop,scrollLeft,true));}},{key:"setTabFocusMode",value:function setTabFocusMode(to){if(to==null)this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1;else if(typeof to=="boolean")this.inputState.tabFocusMode=to?0:-1;else if(this.inputState.tabFocusMode!=0)this.inputState.tabFocusMode=Date.now()+to;}}],[{key:"scrollIntoView",value:function scrollIntoView(pos){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _scrollIntoView.of(new _ScrollTarget(typeof pos=="number"?_EditorSelection.cursor(pos):pos,options.y,options.x,options.yMargin,options.xMargin));}},{key:"domEventHandlers",value:function domEventHandlers(handlers2){return _ViewPlugin.define(function(){return{};},{eventHandlers:handlers2});}},{key:"domEventObservers",value:function domEventObservers(observers2){return _ViewPlugin.define(function(){return{};},{eventObservers:observers2});}},{key:"theme",value:function theme(spec,options){var prefix=StyleModule.newName();var result=[_theme.of(prefix),styleModule.of(buildTheme(".".concat(prefix),spec))];if(options&&options.dark)result.push(darkTheme.of(true));return result;}},{key:"baseTheme",value:function baseTheme(spec){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,spec,lightDarkIDs)));}},{key:"findFromDOM",value:function findFromDOM(dom){var _a2;var content2=dom.querySelector(".cm-content");var cView=content2&&_ContentView.get(content2)||_ContentView.get(dom);return((_a2=cView===null||cView===void 0?void 0:cView.rootView)===null||_a2===void 0?void 0:_a2.view)||null;}}]);}();_EditorView.styleModule=styleModule;_EditorView.inputHandler=inputHandler;_EditorView.clipboardInputFilter=clipboardInputFilter;_EditorView.clipboardOutputFilter=clipboardOutputFilter;_EditorView.scrollHandler=scrollHandler;_EditorView.focusChangeEffect=focusChangeEffect;_EditorView.perLineTextDirection=perLineTextDirection;_EditorView.exceptionSink=exceptionSink;_EditorView.updateListener=updateListener;_EditorView.editable=editable;_EditorView.mouseSelectionStyle=mouseSelectionStyle;_EditorView.dragMovesSelection=dragMovesSelection$1;_EditorView.clickAddsSelectionRange=clickAddsSelectionRange;_EditorView.decorations=decorations;_EditorView.outerDecorations=outerDecorations;_EditorView.atomicRanges=atomicRanges;_EditorView.bidiIsolatedRanges=bidiIsolatedRanges;_EditorView.scrollMargins=scrollMargins;_EditorView.darkTheme=darkTheme;_EditorView.cspNonce=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?values2[0]:"";}});_EditorView.contentAttributes=contentAttributes;_EditorView.editorAttributes=editorAttributes;_EditorView.lineWrapping=/* @__PURE__ */_EditorView.contentAttributes.of({"class":"cm-lineWrapping"});_EditorView.announce=/* @__PURE__ */_StateEffect.define();var MaxBidiLine=4096;var BadMeasure={};var _CachedOrder=/*#__PURE__*/function(){function CachedOrder(from,to,dir,isolates,fresh,order){_classCallCheck(this,CachedOrder);this.from=from;this.to=to;this.dir=dir;this.isolates=isolates;this.fresh=fresh;this.order=order;}return _createClass(CachedOrder,null,[{key:"update",value:function update(cache2,changes){if(changes.empty&&!cache2.some(function(c){return c.fresh;}))return cache2;var result=[],lastDir=cache2.length?cache2[cache2.length-1].dir:Direction.LTR;for(var _i106=Math.max(0,cache2.length-10);_i106<cache2.length;_i106++){var entry=cache2[_i106];if(entry.dir==lastDir&&!changes.touchesRange(entry.from,entry.to))result.push(new _CachedOrder(changes.mapPos(entry.from,1),changes.mapPos(entry.to,-1),entry.dir,entry.isolates,false,entry.order));}return result;}}]);}();function attrsFromFacet(view,facet,base2){for(var sources=view.state.facet(facet),_i107=sources.length-1;_i107>=0;_i107--){var source=sources[_i107],value=typeof source=="function"?source(view):source;if(value)combineAttrs(value,base2);}return base2;}var currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(name2,platform){var parts=name2.split(/-(?!$)/);var result=parts[parts.length-1];if(result=="Space")result=" ";var alt,ctrl,shift2,meta2;for(var _i108=0;_i108<parts.length-1;++_i108){var mod=parts[_i108];if(/^(cmd|meta|m)$/i.test(mod))meta2=true;else if(/^a(lt)?$/i.test(mod))alt=true;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=true;else if(/^s(hift)?$/i.test(mod))shift2=true;else if(/^mod$/i.test(mod)){if(platform=="mac")meta2=true;else ctrl=true;}else throw new Error("Unrecognized modifier name: "+mod);}if(alt)result="Alt-"+result;if(ctrl)result="Ctrl-"+result;if(meta2)result="Meta-"+result;if(shift2)result="Shift-"+result;return result;}function modifiers(name2,event,shift2){if(event.altKey)name2="Alt-"+name2;if(event.ctrlKey)name2="Ctrl-"+name2;if(event.metaKey)name2="Meta-"+name2;if(shift2!==false&&event.shiftKey)name2="Shift-"+name2;return name2;}var handleKeyEvents=/* @__PURE__ */Prec["default"](/* @__PURE__ */_EditorView.domEventHandlers({keydown:function keydown(event,view){return runHandlers(getKeymap(view.state),event,view,"editor");}}));var keymap=/* @__PURE__ */_Facet.define({enables:handleKeyEvents});var Keymaps=/* @__PURE__ */new WeakMap();function getKeymap(state){var bindings=state.facet(keymap);var map=Keymaps.get(bindings);if(!map)Keymaps.set(bindings,map=buildKeymap(bindings.reduce(function(a,b){return a.concat(b);},[])));return map;}function runScopeHandlers(view,event,scope){return runHandlers(getKeymap(view.state),event,view,scope);}var storedPrefix=null;var PrefixTimeout=4e3;function buildKeymap(bindings){var platform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:currentPlatform;var bound=/* @__PURE__ */Object.create(null);var isPrefix=/* @__PURE__ */Object.create(null);var checkPrefix=function checkPrefix(name2,is){var current=isPrefix[name2];if(current==null)isPrefix[name2]=is;else if(current!=is)throw new Error("Key binding "+name2+" is used both as a regular binding and as a multi-stroke prefix");};var add2=function add2(scope,key,command2,preventDefault,stopPropagation){var _a2,_b;var scopeObj=bound[scope]||(bound[scope]=/* @__PURE__ */Object.create(null));var parts=key.split(/ (?!$)/).map(function(k){return normalizeKeyName(k,platform);});var _loop8=function _loop8(){var prefix=parts.slice(0,_i109).join(" ");checkPrefix(prefix,true);if(!scopeObj[prefix])scopeObj[prefix]={preventDefault:true,stopPropagation:false,run:[function(view){var ourObj=storedPrefix={view:view,prefix:prefix,scope:scope};setTimeout(function(){if(storedPrefix==ourObj)storedPrefix=null;},PrefixTimeout);return true;}]};};for(var _i109=1;_i109<parts.length;_i109++){_loop8();}var full=parts.join(" ");checkPrefix(full,false);var binding=scopeObj[full]||(scopeObj[full]={preventDefault:false,stopPropagation:false,run:((_b=(_a2=scopeObj._any)===null||_a2===void 0?void 0:_a2.run)===null||_b===void 0?void 0:_b.slice())||[]});if(command2)binding.run.push(command2);if(preventDefault)binding.preventDefault=true;if(stopPropagation)binding.stopPropagation=true;};var _iterator95=_createForOfIteratorHelper(bindings),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var b=_step95.value;var scopes=b.scope?b.scope.split(" "):["editor"];if(b.any){var _iterator96=_createForOfIteratorHelper(scopes),_step96;try{var _loop9=function _loop9(){var scope=_step96.value;var scopeObj=bound[scope]||(bound[scope]=/* @__PURE__ */Object.create(null));if(!scopeObj._any)scopeObj._any={preventDefault:false,stopPropagation:false,run:[]};var any=b.any;for(var key in scopeObj)scopeObj[key].run.push(function(view){return any(view,currentKeyEvent);});};for(_iterator96.s();!(_step96=_iterator96.n()).done;){_loop9();}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}}var name2=b[platform]||b.key;if(!name2)continue;var _iterator97=_createForOfIteratorHelper(scopes),_step97;try{for(_iterator97.s();!(_step97=_iterator97.n()).done;){var scope=_step97.value;add2(scope,name2,b.run,b.preventDefault,b.stopPropagation);if(b.shift)add2(scope,"Shift-"+name2,b.shift,b.preventDefault,b.stopPropagation);}}catch(err){_iterator97.e(err);}finally{_iterator97.f();}}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}return bound;}var currentKeyEvent=null;function runHandlers(map,event,view,scope){currentKeyEvent=event;var name2=keyName(event);var charCode=codePointAt2(name2,0),isChar=codePointSize2(charCode)==name2.length&&name2!=" ";var prefix="",handled=false,prevented=false,stopPropagation=false;if(storedPrefix&&storedPrefix.view==view&&storedPrefix.scope==scope){prefix=storedPrefix.prefix+" ";if(modifierCodes.indexOf(event.keyCode)<0){prevented=true;storedPrefix=null;}}var ran=/* @__PURE__ */new Set();var runFor=function runFor(binding){if(binding){var _iterator98=_createForOfIteratorHelper(binding.run),_step98;try{for(_iterator98.s();!(_step98=_iterator98.n()).done;){var cmd2=_step98.value;if(!ran.has(cmd2)){ran.add(cmd2);if(cmd2(view)){if(binding.stopPropagation)stopPropagation=true;return true;}}}}catch(err){_iterator98.e(err);}finally{_iterator98.f();}if(binding.preventDefault){if(binding.stopPropagation)stopPropagation=true;prevented=true;}}return false;};var scopeObj=map[scope],baseName,shiftName;if(scopeObj){if(runFor(scopeObj[prefix+modifiers(name2,event,!isChar)])){handled=true;}else if(isChar&&(event.altKey||event.metaKey||event.ctrlKey)&&!(browser.windows&&event.ctrlKey&&event.altKey)&&(baseName=base[event.keyCode])&&baseName!=name2){if(runFor(scopeObj[prefix+modifiers(baseName,event,true)])){handled=true;}else if(event.shiftKey&&(shiftName=shift[event.keyCode])!=name2&&shiftName!=baseName&&runFor(scopeObj[prefix+modifiers(shiftName,event,false)])){handled=true;}}else if(isChar&&event.shiftKey&&runFor(scopeObj[prefix+modifiers(name2,event,true)])){handled=true;}if(!handled&&runFor(scopeObj._any))handled=true;}if(prevented)handled=true;if(handled&&stopPropagation)event.stopPropagation();currentKeyEvent=null;return handled;}var _RectangleMarker=/*#__PURE__*/function(){function RectangleMarker(className,left,top2,width,height){_classCallCheck(this,RectangleMarker);this.className=className;this.left=left;this.top=top2;this.width=width;this.height=height;}return _createClass(RectangleMarker,[{key:"draw",value:function draw(){var elt2=document.createElement("div");elt2.className=this.className;this.adjust(elt2);return elt2;}},{key:"update",value:function update(elt2,prev){if(prev.className!=this.className)return false;this.adjust(elt2);return true;}},{key:"adjust",value:function adjust(elt2){elt2.style.left=this.left+"px";elt2.style.top=this.top+"px";if(this.width!=null)elt2.style.width=this.width+"px";elt2.style.height=this.height+"px";}},{key:"eq",value:function eq(p){return this.left==p.left&&this.top==p.top&&this.width==p.width&&this.height==p.height&&this.className==p.className;}}],[{key:"forRange",value:function forRange(view,className,range){if(range.empty){var pos=view.coordsAtPos(range.head,range.assoc||1);if(!pos)return[];var base2=getBase(view);return[new _RectangleMarker(className,pos.left-base2.left,pos.top-base2.top,null,pos.bottom-pos.top)];}else{return rectanglesForRange(view,className,range);}}}]);}();function getBase(view){var rect=view.scrollDOM.getBoundingClientRect();var left=view.textDirection==Direction.LTR?rect.left:rect.right-view.scrollDOM.clientWidth*view.scaleX;return{left:left-view.scrollDOM.scrollLeft*view.scaleX,top:rect.top-view.scrollDOM.scrollTop*view.scaleY};}function wrappedLine(view,pos,side,inside2){var coords=view.coordsAtPos(pos,side*2);if(!coords)return inside2;var editorRect=view.dom.getBoundingClientRect();var y=(coords.top+coords.bottom)/2;var left=view.posAtCoords({x:editorRect.left+1,y:y});var right=view.posAtCoords({x:editorRect.right-1,y:y});if(left==null||right==null)return inside2;return{from:Math.max(inside2.from,Math.min(left,right)),to:Math.min(inside2.to,Math.max(left,right))};}function rectanglesForRange(view,className,range){if(range.to<=view.viewport.from||range.from>=view.viewport.to)return[];var from=Math.max(range.from,view.viewport.from),to=Math.min(range.to,view.viewport.to);var ltr=view.textDirection==Direction.LTR;var content2=view.contentDOM,contentRect=content2.getBoundingClientRect(),base2=getBase(view);var lineElt=content2.querySelector(".cm-line"),lineStyle=lineElt&&window.getComputedStyle(lineElt);var leftSide=contentRect.left+(lineStyle?parseInt(lineStyle.paddingLeft)+Math.min(0,parseInt(lineStyle.textIndent)):0);var rightSide=contentRect.right-(lineStyle?parseInt(lineStyle.paddingRight):0);var startBlock=blockAt(view,from,1),endBlock=blockAt(view,to,-1);var visualStart=startBlock.type==BlockType.Text?startBlock:null;var visualEnd=endBlock.type==BlockType.Text?endBlock:null;if(visualStart&&(view.lineWrapping||startBlock.widgetLineBreaks))visualStart=wrappedLine(view,from,1,visualStart);if(visualEnd&&(view.lineWrapping||endBlock.widgetLineBreaks))visualEnd=wrappedLine(view,to,-1,visualEnd);if(visualStart&&visualEnd&&visualStart.from==visualEnd.from&&visualStart.to==visualEnd.to){return pieces(drawForLine(range.from,range.to,visualStart));}else{var top2=visualStart?drawForLine(range.from,null,visualStart):drawForWidget(startBlock,false);var bottom=visualEnd?drawForLine(null,range.to,visualEnd):drawForWidget(endBlock,true);var between=[];if((visualStart||startBlock).to<(visualEnd||endBlock).from-(visualStart&&visualEnd?1:0)||startBlock.widgetLineBreaks>1&&top2.bottom+view.defaultLineHeight/2<bottom.top)between.push(piece(leftSide,top2.bottom,rightSide,bottom.top));else if(top2.bottom<bottom.top&&view.elementAtHeight((top2.bottom+bottom.top)/2).type==BlockType.Text)top2.bottom=bottom.top=(top2.bottom+bottom.top)/2;return pieces(top2).concat(between).concat(pieces(bottom));}function piece(left,top2,right,bottom){return new _RectangleMarker(className,left-base2.left,top2-base2.top,right-left,bottom-top2);}function pieces(_ref11){var top2=_ref11.top,bottom=_ref11.bottom,horizontal=_ref11.horizontal;var pieces2=[];for(var _i110=0;_i110<horizontal.length;_i110+=2)pieces2.push(piece(horizontal[_i110],top2,horizontal[_i110+1],bottom));return pieces2;}function drawForLine(from2,to2,line){var top2=1e9,bottom=-1e9,horizontal=[];function addSpan(from3,fromOpen,to3,toOpen,dir){var fromCoords=view.coordsAtPos(from3,from3==line.to?-2:2);var toCoords=view.coordsAtPos(to3,to3==line.from?2:-2);if(!fromCoords||!toCoords)return;top2=Math.min(fromCoords.top,toCoords.top,top2);bottom=Math.max(fromCoords.bottom,toCoords.bottom,bottom);if(dir==Direction.LTR)horizontal.push(ltr&&fromOpen?leftSide:fromCoords.left,ltr&&toOpen?rightSide:toCoords.right);else horizontal.push(!ltr&&toOpen?leftSide:toCoords.left,!ltr&&fromOpen?rightSide:fromCoords.right);}var start=from2!==null&&from2!==void 0?from2:line.from,end=to2!==null&&to2!==void 0?to2:line.to;var _iterator99=_createForOfIteratorHelper(view.visibleRanges),_step99;try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){var _r2=_step99.value;if(_r2.to>start&&_r2.from<end){for(var pos=Math.max(_r2.from,start),endPos=Math.min(_r2.to,end);;){var docLine=view.state.doc.lineAt(pos);var _iterator100=_createForOfIteratorHelper(view.bidiSpans(docLine)),_step100;try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){var span=_step100.value;var spanFrom=span.from+docLine.from,spanTo=span.to+docLine.from;if(spanFrom>=endPos)break;if(spanTo>pos)addSpan(Math.max(spanFrom,pos),from2==null&&spanFrom<=start,Math.min(spanTo,endPos),to2==null&&spanTo>=end,span.dir);}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}pos=docLine.to+1;if(pos>=endPos)break;}}}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}if(horizontal.length==0)addSpan(start,from2==null,end,to2==null,view.textDirection);return{top:top2,bottom:bottom,horizontal:horizontal};}function drawForWidget(block,top2){var y=contentRect.top+(top2?block.top:block.bottom);return{top:y,bottom:y,horizontal:[]};}}function sameMarker(a,b){return a.constructor==b.constructor&&a.eq(b);}var LayerView=/*#__PURE__*/function(){function LayerView(view,layer2){_classCallCheck(this,LayerView);this.view=view;this.layer=layer2;this.drawn=[];this.scaleX=1;this.scaleY=1;this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)};this.dom=view.scrollDOM.appendChild(document.createElement("div"));this.dom.classList.add("cm-layer");if(layer2.above)this.dom.classList.add("cm-layer-above");if(layer2["class"])this.dom.classList.add(layer2["class"]);this.scale();this.dom.setAttribute("aria-hidden","true");this.setOrder(view.state);view.requestMeasure(this.measureReq);if(layer2.mount)layer2.mount(this.dom,view);}return _createClass(LayerView,[{key:"update",value:function update(_update9){if(_update9.startState.facet(layerOrder)!=_update9.state.facet(layerOrder))this.setOrder(_update9.state);if(this.layer.update(_update9,this.dom)||_update9.geometryChanged){this.scale();_update9.view.requestMeasure(this.measureReq);}}},{key:"docViewUpdate",value:function docViewUpdate(view){if(this.layer.updateOnDocViewUpdate!==false)view.requestMeasure(this.measureReq);}},{key:"setOrder",value:function setOrder(state){var pos=0,order=state.facet(layerOrder);while(pos<order.length&&order[pos]!=this.layer)pos++;this.dom.style.zIndex=String((this.layer.above?150:-1)-pos);}},{key:"measure",value:function measure(){return this.layer.markers(this.view);}},{key:"scale",value:function scale(){var _this$view=this.view,scaleX=_this$view.scaleX,scaleY=_this$view.scaleY;if(scaleX!=this.scaleX||scaleY!=this.scaleY){this.scaleX=scaleX;this.scaleY=scaleY;this.dom.style.transform="scale(".concat(1/scaleX,", ").concat(1/scaleY,")");}}},{key:"draw",value:function draw(markers){var _this52=this;if(markers.length!=this.drawn.length||markers.some(function(p,i){return!sameMarker(p,_this52.drawn[i]);})){var old=this.dom.firstChild,oldI=0;var _iterator101=_createForOfIteratorHelper(markers),_step101;try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){var marker=_step101.value;if(marker.update&&old&&marker.constructor&&this.drawn[oldI].constructor&&marker.update(old,this.drawn[oldI])){old=old.nextSibling;oldI++;}else{this.dom.insertBefore(marker.draw(),old);}}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}while(old){var next=old.nextSibling;old.remove();old=next;}this.drawn=markers;}}},{key:"destroy",value:function destroy(){if(this.layer.destroy)this.layer.destroy(this.dom,this.view);this.dom.remove();}}]);}();var layerOrder=/* @__PURE__ */_Facet.define();function layer(config2){return[_ViewPlugin.define(function(v){return new LayerView(v,config2);}),layerOrder.of(config2)];}var selectionConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{cursorBlinkRate:1200,drawRangeCursor:true},{cursorBlinkRate:function cursorBlinkRate(a,b){return Math.min(a,b);},drawRangeCursor:function drawRangeCursor(a,b){return a||b;}});}});function drawSelection(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[selectionConfig.of(config2),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(true)];}function configChanged(update){return update.startState.facet(selectionConfig)!=update.state.facet(selectionConfig);}var cursorLayer=/* @__PURE__ */layer({above:true,markers:function markers(view){var state=view.state,conf=state.facet(selectionConfig);var cursors=[];var _iterator102=_createForOfIteratorHelper(state.selection.ranges),_step102;try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){var _r3=_step102.value;var prim=_r3==state.selection.main;if(_r3.empty||conf.drawRangeCursor){var className=prim?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary";var cursor2=_r3.empty?_r3:_EditorSelection.cursor(_r3.head,_r3.head>_r3.anchor?-1:1);var _iterator103=_createForOfIteratorHelper(_RectangleMarker.forRange(view,className,cursor2)),_step103;try{for(_iterator103.s();!(_step103=_iterator103.n()).done;){var piece=_step103.value;cursors.push(piece);}}catch(err){_iterator103.e(err);}finally{_iterator103.f();}}}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}return cursors;},update:function update(_update0,dom){if(_update0.transactions.some(function(tr){return tr.selection;}))dom.style.animationName=dom.style.animationName=="cm-blink"?"cm-blink2":"cm-blink";var confChange=configChanged(_update0);if(confChange)setBlinkRate(_update0.state,dom);return _update0.docChanged||_update0.selectionSet||confChange;},mount:function mount(dom,view){setBlinkRate(view.state,dom);},"class":"cm-cursorLayer"});function setBlinkRate(state,dom){dom.style.animationDuration=state.facet(selectionConfig).cursorBlinkRate+"ms";}var selectionLayer=/* @__PURE__ */layer({above:false,markers:function markers(view){return view.state.selection.ranges.map(function(r){return r.empty?[]:_RectangleMarker.forRange(view,"cm-selectionBackground",r);}).reduce(function(a,b){return a.concat(b);});},update:function update(_update1,dom){return _update1.docChanged||_update1.selectionSet||_update1.viewportChanged||configChanged(_update1);},"class":"cm-selectionLayer"});var hideNativeSelection=/* @__PURE__ */Prec.highest(/* @__PURE__ */_EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));var setDropCursorPos=/* @__PURE__ */_StateEffect.define({map:function map(pos,mapping){return pos==null?null:mapping.mapPos(pos);}});var dropCursorPos=/* @__PURE__ */_StateField.define({create:function create(){return null;},update:function update(pos,tr){if(pos!=null)pos=tr.changes.mapPos(pos);return tr.effects.reduce(function(pos2,e){return e.is(setDropCursorPos)?e.value:pos2;},pos);}});var drawDropCursor=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class(view){_classCallCheck(this,_class);this.view=view;this.cursor=null;this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)};}return _createClass(_class,[{key:"update",value:function update(_update10){var _a2;var cursorPos=_update10.state.field(dropCursorPos);if(cursorPos==null){if(this.cursor!=null){(_a2=this.cursor)===null||_a2===void 0?void 0:_a2.remove();this.cursor=null;}}else{if(!this.cursor){this.cursor=this.view.scrollDOM.appendChild(document.createElement("div"));this.cursor.className="cm-dropCursor";}if(_update10.startState.field(dropCursorPos)!=cursorPos||_update10.docChanged||_update10.geometryChanged)this.view.requestMeasure(this.measureReq);}}},{key:"readPos",value:function readPos(){var view=this.view;var pos=view.state.field(dropCursorPos);var rect=pos!=null&&view.coordsAtPos(pos);if(!rect)return null;var outer=view.scrollDOM.getBoundingClientRect();return{left:rect.left-outer.left+view.scrollDOM.scrollLeft*view.scaleX,top:rect.top-outer.top+view.scrollDOM.scrollTop*view.scaleY,height:rect.bottom-rect.top};}},{key:"drawCursor",value:function drawCursor(pos){if(this.cursor){var _this$view2=this.view,scaleX=_this$view2.scaleX,scaleY=_this$view2.scaleY;if(pos){this.cursor.style.left=pos.left/scaleX+"px";this.cursor.style.top=pos.top/scaleY+"px";this.cursor.style.height=pos.height/scaleY+"px";}else{this.cursor.style.left="-100000px";}}}},{key:"destroy",value:function destroy(){if(this.cursor)this.cursor.remove();}},{key:"setDropPos",value:function setDropPos(pos){if(this.view.state.field(dropCursorPos)!=pos)this.view.dispatch({effects:setDropCursorPos.of(pos)});}}]);}(),{eventObservers:{dragover:function dragover(event){this.setDropPos(this.view.posAtCoords({x:event.clientX,y:event.clientY}));},dragleave:function dragleave(event){if(event.target==this.view.contentDOM||!this.view.contentDOM.contains(event.relatedTarget))this.setDropPos(null);},dragend:function dragend(){this.setDropPos(null);},drop:function drop(){this.setDropPos(null);}}});function dropCursor(){return[dropCursorPos,drawDropCursor];}function iterMatches(doc2,re,from,to,f){re.lastIndex=0;for(var cursor2=doc2.iterRange(from,to),pos=from,m;!cursor2.next().done;pos+=cursor2.value.length){if(!cursor2.lineBreak)while(m=re.exec(cursor2.value))f(pos+m.index,m);}}function matchRanges(view,maxLength){var visible=view.visibleRanges;if(visible.length==1&&visible[0].from==view.viewport.from&&visible[0].to==view.viewport.to)return visible;var result=[];var _iterator104=_createForOfIteratorHelper(visible),_step104;try{for(_iterator104.s();!(_step104=_iterator104.n()).done;){var _step104$value=_step104.value,from=_step104$value.from,to=_step104$value.to;from=Math.max(view.state.doc.lineAt(from).from,from-maxLength);to=Math.min(view.state.doc.lineAt(to).to,to+maxLength);if(result.length&&result[result.length-1].to>=from)result[result.length-1].to=to;else result.push({from:from,to:to});}}catch(err){_iterator104.e(err);}finally{_iterator104.f();}return result;}var MatchDecorator=/*#__PURE__*/function(){function MatchDecorator(config2){_classCallCheck(this,MatchDecorator);var regexp=config2.regexp,decoration=config2.decoration,decorate=config2.decorate,boundary=config2.boundary,_config2$maxLength=config2.maxLength,maxLength=_config2$maxLength===void 0?1e3:_config2$maxLength;if(!regexp.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=regexp;if(decorate){this.addMatch=function(match,view,from,add2){return decorate(add2,from,from+match[0].length,match,view);};}else if(typeof decoration=="function"){this.addMatch=function(match,view,from,add2){var deco=decoration(match,view,from);if(deco)add2(from,from+match[0].length,deco);};}else if(decoration){this.addMatch=function(match,_view,from,add2){return add2(from,from+match[0].length,decoration);};}else{throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");}this.boundary=boundary;this.maxLength=maxLength;}return _createClass(MatchDecorator,[{key:"createDeco",value:function createDeco(view){var _this53=this;var build=new _RangeSetBuilder(),add2=build.add.bind(build);var _iterator105=_createForOfIteratorHelper(matchRanges(view,this.maxLength)),_step105;try{for(_iterator105.s();!(_step105=_iterator105.n()).done;){var _step105$value=_step105.value,from=_step105$value.from,to=_step105$value.to;iterMatches(view.state.doc,this.regexp,from,to,function(from2,m){return _this53.addMatch(m,view,from2,add2);});}}catch(err){_iterator105.e(err);}finally{_iterator105.f();}return build.finish();}},{key:"updateDeco",value:function updateDeco(update,deco){var changeFrom=1e9,changeTo=-1;if(update.docChanged)update.changes.iterChanges(function(_f,_t,from,to){if(to>=update.view.viewport.from&&from<=update.view.viewport.to){changeFrom=Math.min(from,changeFrom);changeTo=Math.max(to,changeTo);}});if(update.viewportMoved||changeTo-changeFrom>1e3)return this.createDeco(update.view);if(changeTo>-1)return this.updateRange(update.view,deco.map(update.changes),changeFrom,changeTo);return deco;}},{key:"updateRange",value:function updateRange(view,deco,updateFrom,updateTo){var _this54=this;var _iterator106=_createForOfIteratorHelper(view.visibleRanges),_step106;try{var _loop0=function _loop0(){var r=_step106.value;var from=Math.max(r.from,updateFrom),to=Math.min(r.to,updateTo);if(to>from){var fromLine=view.state.doc.lineAt(from),toLine=fromLine.to<to?view.state.doc.lineAt(to):fromLine;var start=Math.max(r.from,fromLine.from),end=Math.min(r.to,toLine.to);if(_this54.boundary){for(;from>fromLine.from;from--)if(_this54.boundary.test(fromLine.text[from-1-fromLine.from])){start=from;break;}for(;to<toLine.to;to++)if(_this54.boundary.test(toLine.text[to-toLine.from])){end=to;break;}}var ranges=[],m;var add2=function add2(from2,to2,deco2){return ranges.push(deco2.range(from2,to2));};if(fromLine==toLine){_this54.regexp.lastIndex=start-fromLine.from;while((m=_this54.regexp.exec(fromLine.text))&&m.index<end-fromLine.from)_this54.addMatch(m,view,m.index+fromLine.from,add2);}else{iterMatches(view.state.doc,_this54.regexp,start,end,function(from2,m2){return _this54.addMatch(m2,view,from2,add2);});}deco=deco.update({filterFrom:start,filterTo:end,filter:function filter(from2,to2){return from2<start||to2>end;},add:ranges});}};for(_iterator106.s();!(_step106=_iterator106.n()).done;){_loop0();}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}return deco;}}]);}();var UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g";var Specials=/* @__PURE__ */new RegExp("[\0-\b\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]",UnicodeRegexpSupport);var Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};var _supportsTabSize=null;function supportsTabSize(){var _a2;if(_supportsTabSize==null&&typeof document!="undefined"&&document.body){var styles=document.body.style;_supportsTabSize=((_a2=styles.tabSize)!==null&&_a2!==void 0?_a2:styles.MozTabSize)!=null;}return _supportsTabSize||false;}var specialCharConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){var config2=combineConfig(configs,{render:null,specialChars:Specials,addSpecialChars:null});if(config2.replaceTabs=!supportsTabSize())config2.specialChars=new RegExp("	|"+config2.specialChars.source,UnicodeRegexpSupport);if(config2.addSpecialChars)config2.specialChars=new RegExp(config2.specialChars.source+"|"+config2.addSpecialChars.source,UnicodeRegexpSupport);return config2;}});function highlightSpecialChars(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[specialCharConfig.of(config2),specialCharPlugin()];}var _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class2(view){_classCallCheck(this,_class2);this.view=view;this.decorations=Decoration.none;this.decorationCache=/* @__PURE__ */Object.create(null);this.decorator=this.makeDecorator(view.state.facet(specialCharConfig));this.decorations=this.decorator.createDeco(view);}return _createClass(_class2,[{key:"makeDecorator",value:function makeDecorator(conf){var _this55=this;return new MatchDecorator({regexp:conf.specialChars,decoration:function decoration(m,view,pos){var doc2=view.state.doc;var code=codePointAt2(m[0],0);if(code==9){var line=doc2.lineAt(pos);var size=view.state.tabSize,col=_countColumn(line.text,size,pos-line.from);return Decoration.replace({widget:new TabWidget((size-col%size)*_this55.view.defaultCharacterWidth/_this55.view.scaleX)});}return _this55.decorationCache[code]||(_this55.decorationCache[code]=Decoration.replace({widget:new SpecialCharWidget(conf,code)}));},boundary:conf.replaceTabs?void 0:/[^]/});}},{key:"update",value:function update(_update11){var conf=_update11.state.facet(specialCharConfig);if(_update11.startState.facet(specialCharConfig)!=conf){this.decorator=this.makeDecorator(conf);this.decorations=this.decorator.createDeco(_update11.view);}else{this.decorations=this.decorator.updateDeco(_update11,this.decorations);}}}]);}(),{decorations:function decorations(v){return v.decorations;}}));}var DefaultPlaceholder="\u2022";function placeholder$1(code){if(code>=32)return DefaultPlaceholder;if(code==10)return"\u2424";return String.fromCharCode(9216+code);}var SpecialCharWidget=/*#__PURE__*/function(_WidgetType4){function SpecialCharWidget(options,code){var _this56;_classCallCheck(this,SpecialCharWidget);_this56=_callSuper(this,SpecialCharWidget);_this56.options=options;_this56.code=code;return _this56;}_inherits(SpecialCharWidget,_WidgetType4);return _createClass(SpecialCharWidget,[{key:"eq",value:function eq(other){return other.code==this.code;}},{key:"toDOM",value:function toDOM(view){var ph=placeholder$1(this.code);var desc=view.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16));var custom=this.options.render&&this.options.render(this.code,desc,ph);if(custom)return custom;var span=document.createElement("span");span.textContent=ph;span.title=desc;span.setAttribute("aria-label",desc);span.className="cm-specialChar";return span;}},{key:"ignoreEvent",value:function ignoreEvent(){return false;}}]);}(WidgetType);var TabWidget=/*#__PURE__*/function(_WidgetType5){function TabWidget(width){var _this57;_classCallCheck(this,TabWidget);_this57=_callSuper(this,TabWidget);_this57.width=width;return _this57;}_inherits(TabWidget,_WidgetType5);return _createClass(TabWidget,[{key:"eq",value:function eq(other){return other.width==this.width;}},{key:"toDOM",value:function toDOM(){var span=document.createElement("span");span.textContent="	";span.className="cm-tab";span.style.width=this.width+"px";return span;}},{key:"ignoreEvent",value:function ignoreEvent(){return false;}}]);}(WidgetType);function highlightActiveLine(){return activeLineHighlighter;}var lineDeco=/* @__PURE__ */Decoration.line({"class":"cm-activeLine"});var activeLineHighlighter=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class3(view){_classCallCheck(this,_class3);this.decorations=this.getDeco(view);}return _createClass(_class3,[{key:"update",value:function update(_update12){if(_update12.docChanged||_update12.selectionSet)this.decorations=this.getDeco(_update12.view);}},{key:"getDeco",value:function getDeco(view){var lastLineStart=-1,deco=[];var _iterator107=_createForOfIteratorHelper(view.state.selection.ranges),_step107;try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){var _r4=_step107.value;var line=view.lineBlockAt(_r4.head);if(line.from>lastLineStart){deco.push(lineDeco.range(line.from));lastLineStart=line.from;}}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}return Decoration.set(deco);}}]);}(),{decorations:function decorations(v){return v.decorations;}});var MaxOff=2e3;function rectangleFor(state,a,b){var startLine=Math.min(a.line,b.line),endLine=Math.max(a.line,b.line);var ranges=[];if(a.off>MaxOff||b.off>MaxOff||a.col<0||b.col<0){var startOff=Math.min(a.off,b.off),endOff=Math.max(a.off,b.off);for(var _i111=startLine;_i111<=endLine;_i111++){var line=state.doc.line(_i111);if(line.length<=endOff)ranges.push(_EditorSelection.range(line.from+startOff,line.to+endOff));}}else{var startCol=Math.min(a.col,b.col),endCol=Math.max(a.col,b.col);for(var _i112=startLine;_i112<=endLine;_i112++){var _line2=state.doc.line(_i112);var start=findColumn(_line2.text,startCol,state.tabSize,true);if(start<0){ranges.push(_EditorSelection.cursor(_line2.to));}else{var end=findColumn(_line2.text,endCol,state.tabSize);ranges.push(_EditorSelection.range(_line2.from+start,_line2.from+end));}}}return ranges;}function absoluteColumn(view,x){var ref=view.coordsAtPos(view.viewport.from);return ref?Math.round(Math.abs((ref.left-x)/view.defaultCharacterWidth)):-1;}function getPos(view,event){var offset=view.posAtCoords({x:event.clientX,y:event.clientY},false);var line=view.state.doc.lineAt(offset),off=offset-line.from;var col=off>MaxOff?-1:off==line.length?absoluteColumn(view,event.clientX):_countColumn(line.text,view.state.tabSize,offset-line.from);return{line:line.number,col:col,off:off};}function rectangleSelectionStyle(view,event){var start=getPos(view,event),startSel=view.state.selection;if(!start)return null;return{update:function update(_update13){if(_update13.docChanged){var newStart=_update13.changes.mapPos(_update13.startState.doc.line(start.line).from);var newLine=_update13.state.doc.lineAt(newStart);start={line:newLine.number,col:start.col,off:Math.min(start.off,newLine.length)};startSel=startSel.map(_update13.changes);}},get:function get(event2,_extend,multiple){var cur2=getPos(view,event2);if(!cur2)return startSel;var ranges=rectangleFor(view.state,start,cur2);if(!ranges.length)return startSel;if(multiple)return _EditorSelection.create(ranges.concat(startSel.ranges));else return _EditorSelection.create(ranges);}};}function rectangularSelection(options){var filter=(options===null||options===void 0?void 0:options.eventFilter)||function(e){return e.altKey&&e.button==0;};return _EditorView.mouseSelectionStyle.of(function(view,event){return filter(event)?rectangleSelectionStyle(view,event):null;});}var keys={Alt:[18,function(e){return!!e.altKey;}],Control:[17,function(e){return!!e.ctrlKey;}],Shift:[16,function(e){return!!e.shiftKey;}],Meta:[91,function(e){return!!e.metaKey;}]};var showCrosshair={style:"cursor: crosshair"};function crosshairCursor(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _keys=_slicedToArray(keys[options.key||"Alt"],2),code=_keys[0],getter=_keys[1];var plugin=_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class4(view){_classCallCheck(this,_class4);this.view=view;this.isDown=false;}return _createClass(_class4,[{key:"set",value:function set(isDown){if(this.isDown!=isDown){this.isDown=isDown;this.view.update([]);}}}]);}(),{eventObservers:{keydown:function keydown(e){this.set(e.keyCode==code||getter(e));},keyup:function keyup(e){if(e.keyCode==code||!getter(e))this.set(false);},mousemove:function mousemove(e){this.set(getter(e));}}});return[plugin,_EditorView.contentAttributes.of(function(view){var _a2;return((_a2=view.plugin(plugin))===null||_a2===void 0?void 0:_a2.isDown)?showCrosshair:null;})];}var Outside="-10000px";var TooltipViewManager=/*#__PURE__*/function(){function TooltipViewManager(view,facet,createTooltipView,removeTooltipView){_classCallCheck(this,TooltipViewManager);this.facet=facet;this.createTooltipView=createTooltipView;this.removeTooltipView=removeTooltipView;this.input=view.state.facet(facet);this.tooltips=this.input.filter(function(t2){return t2;});var prev=null;this.tooltipViews=this.tooltips.map(function(t2){return prev=createTooltipView(t2,prev);});}return _createClass(TooltipViewManager,[{key:"update",value:function update(_update14,above){var _a2;var input=_update14.state.facet(this.facet);var tooltips=input.filter(function(x){return x;});if(input===this.input){var _iterator108=_createForOfIteratorHelper(this.tooltipViews),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var t2=_step108.value;if(t2.update)t2.update(_update14);}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}return false;}var tooltipViews=[],newAbove=above?[]:null;for(var _i113=0;_i113<tooltips.length;_i113++){var tip=tooltips[_i113],known=-1;if(!tip)continue;for(var i2=0;i2<this.tooltips.length;i2++){var other=this.tooltips[i2];if(other&&other.create==tip.create)known=i2;}if(known<0){tooltipViews[_i113]=this.createTooltipView(tip,_i113?tooltipViews[_i113-1]:null);if(newAbove)newAbove[_i113]=!!tip.above;}else{var tooltipView=tooltipViews[_i113]=this.tooltipViews[known];if(newAbove)newAbove[_i113]=above[known];if(tooltipView.update)tooltipView.update(_update14);}}var _iterator109=_createForOfIteratorHelper(this.tooltipViews),_step109;try{for(_iterator109.s();!(_step109=_iterator109.n()).done;){var _t2=_step109.value;if(tooltipViews.indexOf(_t2)<0){this.removeTooltipView(_t2);(_a2=_t2.destroy)===null||_a2===void 0?void 0:_a2.call(_t2);}}}catch(err){_iterator109.e(err);}finally{_iterator109.f();}if(above){newAbove.forEach(function(val,i){return above[i]=val;});above.length=newAbove.length;}this.input=input;this.tooltips=tooltips;this.tooltipViews=tooltipViews;return true;}}]);}();function windowSpace(view){var docElt=view.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:docElt.clientHeight,right:docElt.clientWidth};}var tooltipConfig=/* @__PURE__ */_Facet.define({combine:function combine(values2){var _a2,_b,_c;return{position:browser.ios?"absolute":((_a2=values2.find(function(conf){return conf.position;}))===null||_a2===void 0?void 0:_a2.position)||"fixed",parent:((_b=values2.find(function(conf){return conf.parent;}))===null||_b===void 0?void 0:_b.parent)||null,tooltipSpace:((_c=values2.find(function(conf){return conf.tooltipSpace;}))===null||_c===void 0?void 0:_c.tooltipSpace)||windowSpace};}});var knownHeight=/* @__PURE__ */new WeakMap();var tooltipPlugin=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class5(view){var _this58=this;_classCallCheck(this,_class5);this.view=view;this.above=[];this.inView=true;this.madeAbsolute=false;this.lastTransaction=0;this.measureTimeout=-1;var config2=view.state.facet(tooltipConfig);this.position=config2.position;this.parent=config2.parent;this.classes=view.themeClasses;this.createContainer();this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this};this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(function(){return _this58.measureSoon();}):null;this.manager=new TooltipViewManager(view,showTooltip,function(t2,p){return _this58.createTooltip(t2,p);},function(t2){if(_this58.resizeObserver)_this58.resizeObserver.unobserve(t2.dom);t2.dom.remove();});this.above=this.manager.tooltips.map(function(t2){return!!t2.above;});this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(function(entries){if(Date.now()>_this58.lastTransaction-50&&entries.length>0&&entries[entries.length-1].intersectionRatio<1)_this58.measureSoon();},{threshold:[1]}):null;this.observeIntersection();view.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this));this.maybeMeasure();}return _createClass(_class5,[{key:"createContainer",value:function createContainer(){if(this.parent){this.container=document.createElement("div");this.container.style.position="relative";this.container.className=this.view.themeClasses;this.parent.appendChild(this.container);}else{this.container=this.view.dom;}}},{key:"observeIntersection",value:function observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();var _iterator110=_createForOfIteratorHelper(this.manager.tooltipViews),_step110;try{for(_iterator110.s();!(_step110=_iterator110.n()).done;){var tooltip=_step110.value;this.intersectionObserver.observe(tooltip.dom);}}catch(err){_iterator110.e(err);}finally{_iterator110.f();}}}},{key:"measureSoon",value:function measureSoon(){var _this59=this;if(this.measureTimeout<0)this.measureTimeout=setTimeout(function(){_this59.measureTimeout=-1;_this59.maybeMeasure();},50);}},{key:"update",value:function update(_update15){if(_update15.transactions.length)this.lastTransaction=Date.now();var updated=this.manager.update(_update15,this.above);if(updated)this.observeIntersection();var shouldMeasure=updated||_update15.geometryChanged;var newConfig=_update15.state.facet(tooltipConfig);if(newConfig.position!=this.position&&!this.madeAbsolute){this.position=newConfig.position;var _iterator111=_createForOfIteratorHelper(this.manager.tooltipViews),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var t2=_step111.value;t2.dom.style.position=this.position;}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}shouldMeasure=true;}if(newConfig.parent!=this.parent){if(this.parent)this.container.remove();this.parent=newConfig.parent;this.createContainer();var _iterator112=_createForOfIteratorHelper(this.manager.tooltipViews),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var _t3=_step112.value;this.container.appendChild(_t3.dom);}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}shouldMeasure=true;}else if(this.parent&&this.view.themeClasses!=this.classes){this.classes=this.container.className=this.view.themeClasses;}if(shouldMeasure)this.maybeMeasure();}},{key:"createTooltip",value:function createTooltip(tooltip,prev){var tooltipView=tooltip.create(this.view);var before=prev?prev.dom:null;tooltipView.dom.classList.add("cm-tooltip");if(tooltip.arrow&&!tooltipView.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){var arrow=document.createElement("div");arrow.className="cm-tooltip-arrow";tooltipView.dom.appendChild(arrow);}tooltipView.dom.style.position=this.position;tooltipView.dom.style.top=Outside;tooltipView.dom.style.left="0px";this.container.insertBefore(tooltipView.dom,before);if(tooltipView.mount)tooltipView.mount(this.view);if(this.resizeObserver)this.resizeObserver.observe(tooltipView.dom);return tooltipView;}},{key:"destroy",value:function destroy(){var _a2,_b,_c;this.view.win.removeEventListener("resize",this.measureSoon);var _iterator113=_createForOfIteratorHelper(this.manager.tooltipViews),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var tooltipView=_step113.value;tooltipView.dom.remove();(_a2=tooltipView.destroy)===null||_a2===void 0?void 0:_a2.call(tooltipView);}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}if(this.parent)this.container.remove();(_b=this.resizeObserver)===null||_b===void 0?void 0:_b.disconnect();(_c=this.intersectionObserver)===null||_c===void 0?void 0:_c.disconnect();clearTimeout(this.measureTimeout);}},{key:"readMeasure",value:function readMeasure(){var _this60=this;var scaleX=1,scaleY=1,makeAbsolute=false;if(this.position=="fixed"&&this.manager.tooltipViews.length){var dom=this.manager.tooltipViews[0].dom;if(browser.gecko){makeAbsolute=dom.offsetParent!=this.container.ownerDocument.body;}else if(dom.style.top==Outside&&dom.style.left=="0px"){var rect=dom.getBoundingClientRect();makeAbsolute=Math.abs(rect.top+1e4)>1||Math.abs(rect.left)>1;}}if(makeAbsolute||this.position=="absolute"){if(this.parent){var _rect=this.parent.getBoundingClientRect();if(_rect.width&&_rect.height){scaleX=_rect.width/this.parent.offsetWidth;scaleY=_rect.height/this.parent.offsetHeight;}}else{var _this$view$viewState=this.view.viewState;scaleX=_this$view$viewState.scaleX;scaleY=_this$view$viewState.scaleY;}}var visible=this.view.scrollDOM.getBoundingClientRect(),margins=getScrollMargins(this.view);return{visible:{left:visible.left+margins.left,top:visible.top+margins.top,right:visible.right-margins.right,bottom:visible.bottom-margins.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(function(t2,i){var tv=_this60.manager.tooltipViews[i];return tv.getCoords?tv.getCoords(t2.pos):_this60.view.coordsAtPos(t2.pos);}),size:this.manager.tooltipViews.map(function(_ref12){var dom=_ref12.dom;return dom.getBoundingClientRect();}),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:scaleX,scaleY:scaleY,makeAbsolute:makeAbsolute};}},{key:"writeMeasure",value:function writeMeasure(measured){var _a2;if(measured.makeAbsolute){this.madeAbsolute=true;this.position="absolute";var _iterator114=_createForOfIteratorHelper(this.manager.tooltipViews),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var t2=_step114.value;t2.dom.style.position="absolute";}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}}var visible=measured.visible,space4=measured.space,scaleX=measured.scaleX,scaleY=measured.scaleY;var others=[];for(var _i114=0;_i114<this.manager.tooltips.length;_i114++){var tooltip=this.manager.tooltips[_i114],tView=this.manager.tooltipViews[_i114],dom=tView.dom;var pos=measured.pos[_i114],size=measured.size[_i114];if(!pos||tooltip.clip!==false&&(pos.bottom<=Math.max(visible.top,space4.top)||pos.top>=Math.min(visible.bottom,space4.bottom)||pos.right<Math.max(visible.left,space4.left)-0.1||pos.left>Math.min(visible.right,space4.right)+0.1)){dom.style.top=Outside;continue;}var arrow=tooltip.arrow?tView.dom.querySelector(".cm-tooltip-arrow"):null;var arrowHeight=arrow?7:0;var width=size.right-size.left,height=(_a2=knownHeight.get(tView))!==null&&_a2!==void 0?_a2:size.bottom-size.top;var offset=tView.offset||noOffset,ltr=this.view.textDirection==Direction.LTR;var left=size.width>space4.right-space4.left?ltr?space4.left:space4.right-size.width:ltr?Math.max(space4.left,Math.min(pos.left-(arrow?14:0)+offset.x,space4.right-width)):Math.min(Math.max(space4.left,pos.left-width+(arrow?14:0)-offset.x),space4.right-width);var above=this.above[_i114];if(!tooltip.strictSide&&(above?pos.top-height-arrowHeight-offset.y<space4.top:pos.bottom+height+arrowHeight+offset.y>space4.bottom)&&above==space4.bottom-pos.bottom>pos.top-space4.top)above=this.above[_i114]=!above;var spaceVert=(above?pos.top-space4.top:space4.bottom-pos.bottom)-arrowHeight;if(spaceVert<height&&tView.resize!==false){if(spaceVert<this.view.defaultLineHeight){dom.style.top=Outside;continue;}knownHeight.set(tView,height);dom.style.height=(height=spaceVert)/scaleY+"px";}else if(dom.style.height){dom.style.height="";}var top2=above?pos.top-height-arrowHeight-offset.y:pos.bottom+arrowHeight+offset.y;var right=left+width;if(tView.overlap!==true){var _iterator115=_createForOfIteratorHelper(others),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var _r5=_step115.value;if(_r5.left<right&&_r5.right>left&&_r5.top<top2+height&&_r5.bottom>top2)top2=above?_r5.top-height-2-arrowHeight:_r5.bottom+arrowHeight+2;}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}}if(this.position=="absolute"){dom.style.top=(top2-measured.parent.top)/scaleY+"px";setLeftStyle(dom,(left-measured.parent.left)/scaleX);}else{dom.style.top=top2/scaleY+"px";setLeftStyle(dom,left/scaleX);}if(arrow){var arrowLeft=pos.left+(ltr?offset.x:-offset.x)-(left+14-7);arrow.style.left=arrowLeft/scaleX+"px";}if(tView.overlap!==true)others.push({left:left,top:top2,right:right,bottom:top2+height});dom.classList.toggle("cm-tooltip-above",above);dom.classList.toggle("cm-tooltip-below",!above);if(tView.positioned)tView.positioned(measured.space);}}},{key:"maybeMeasure",value:function maybeMeasure(){if(this.manager.tooltips.length){if(this.view.inView)this.view.requestMeasure(this.measureReq);if(this.inView!=this.view.inView){this.inView=this.view.inView;if(!this.inView){var _iterator116=_createForOfIteratorHelper(this.manager.tooltipViews),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var tv=_step116.value;tv.dom.style.top=Outside;}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}}}}}}]);}(),{eventObservers:{scroll:function scroll(){this.maybeMeasure();}}});function setLeftStyle(elt2,value){var current=parseInt(elt2.style.left,10);if(isNaN(current)||Math.abs(value-current)>1)elt2.style.left=value+"px";}var baseTheme=/* @__PURE__ */_EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(7*2,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}});var noOffset={x:0,y:0};var showTooltip=/* @__PURE__ */_Facet.define({enables:[tooltipPlugin,baseTheme]});var showHoverTooltip=/* @__PURE__ */_Facet.define({combine:function combine(inputs){return inputs.reduce(function(a,i){return a.concat(i);},[]);}});var _HoverTooltipHost=/*#__PURE__*/function(){function HoverTooltipHost(view){var _this61=this;_classCallCheck(this,HoverTooltipHost);this.view=view;this.mounted=false;this.dom=document.createElement("div");this.dom.classList.add("cm-tooltip-hover");this.manager=new TooltipViewManager(view,showHoverTooltip,function(t2,p){return _this61.createHostedView(t2,p);},function(t2){return t2.dom.remove();});}return _createClass(HoverTooltipHost,[{key:"createHostedView",value:function createHostedView(tooltip,prev){var hostedView=tooltip.create(this.view);hostedView.dom.classList.add("cm-tooltip-section");this.dom.insertBefore(hostedView.dom,prev?prev.dom.nextSibling:this.dom.firstChild);if(this.mounted&&hostedView.mount)hostedView.mount(this.view);return hostedView;}},{key:"mount",value:function mount(view){var _iterator117=_createForOfIteratorHelper(this.manager.tooltipViews),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var hostedView=_step117.value;if(hostedView.mount)hostedView.mount(view);}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}this.mounted=true;}},{key:"positioned",value:function positioned(space4){var _iterator118=_createForOfIteratorHelper(this.manager.tooltipViews),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var hostedView=_step118.value;if(hostedView.positioned)hostedView.positioned(space4);}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}}},{key:"update",value:function update(_update16){this.manager.update(_update16);}},{key:"destroy",value:function destroy(){var _a2;var _iterator119=_createForOfIteratorHelper(this.manager.tooltipViews),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var t2=_step119.value;(_a2=t2.destroy)===null||_a2===void 0?void 0:_a2.call(t2);}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}}},{key:"passProp",value:function passProp(name2){var value=void 0;var _iterator120=_createForOfIteratorHelper(this.manager.tooltipViews),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var view=_step120.value;var given=view[name2];if(given!==void 0){if(value===void 0)value=given;else if(value!==given)return void 0;}}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}return value;}},{key:"offset",get:function get(){return this.passProp("offset");}},{key:"getCoords",get:function get(){return this.passProp("getCoords");}},{key:"overlap",get:function get(){return this.passProp("overlap");}},{key:"resize",get:function get(){return this.passProp("resize");}}],[{key:"create",value:function create(view){return new _HoverTooltipHost(view);}}]);}();var showHoverTooltipHost=/* @__PURE__ */showTooltip.compute([showHoverTooltip],function(state){var tooltips=state.facet(showHoverTooltip);if(tooltips.length===0)return null;return{pos:Math.min.apply(Math,_toConsumableArray(tooltips.map(function(t2){return t2.pos;}))),end:Math.max.apply(Math,_toConsumableArray(tooltips.map(function(t2){var _a2;return(_a2=t2.end)!==null&&_a2!==void 0?_a2:t2.pos;}))),create:_HoverTooltipHost.create,above:tooltips[0].above,arrow:tooltips.some(function(t2){return t2.arrow;})};});var HoverPlugin=/*#__PURE__*/function(){function HoverPlugin(view,source,field,setHover,hoverTime){_classCallCheck(this,HoverPlugin);this.view=view;this.source=source;this.field=field;this.setHover=setHover;this.hoverTime=hoverTime;this.hoverTimeout=-1;this.restartTimeout=-1;this.pending=null;this.lastMove={x:0,y:0,target:view.dom,time:0};this.checkHover=this.checkHover.bind(this);view.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this));view.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this));}return _createClass(HoverPlugin,[{key:"update",value:function update(){var _this62=this;if(this.pending){this.pending=null;clearTimeout(this.restartTimeout);this.restartTimeout=setTimeout(function(){return _this62.startHover();},20);}}},{key:"active",get:function get(){return this.view.state.field(this.field);}},{key:"checkHover",value:function checkHover(){this.hoverTimeout=-1;if(this.active.length)return;var hovered=Date.now()-this.lastMove.time;if(hovered<this.hoverTime)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-hovered);else this.startHover();}},{key:"startHover",value:function startHover(){var _this63=this;clearTimeout(this.restartTimeout);var view=this.view,lastMove=this.lastMove;var desc=view.docView.nearest(lastMove.target);if(!desc)return;var pos,side=1;if(desc instanceof _WidgetView){pos=desc.posAtStart;}else{pos=view.posAtCoords(lastMove);if(pos==null)return;var posCoords=view.coordsAtPos(pos);if(!posCoords||lastMove.y<posCoords.top||lastMove.y>posCoords.bottom||lastMove.x<posCoords.left-view.defaultCharacterWidth||lastMove.x>posCoords.right+view.defaultCharacterWidth)return;var bidi=view.bidiSpans(view.state.doc.lineAt(pos)).find(function(s){return s.from<=pos&&s.to>=pos;});var rtl=bidi&&bidi.dir==Direction.RTL?-1:1;side=lastMove.x<posCoords.left?-rtl:rtl;}var open=this.source(view,pos,side);if(open===null||open===void 0?void 0:open.then){var pending=this.pending={pos:pos};open.then(function(result){if(_this63.pending==pending){_this63.pending=null;if(result&&!(Array.isArray(result)&&!result.length))view.dispatch({effects:_this63.setHover.of(Array.isArray(result)?result:[result])});}},function(e){return logException(view.state,e,"hover tooltip");});}else if(open&&!(Array.isArray(open)&&!open.length)){view.dispatch({effects:this.setHover.of(Array.isArray(open)?open:[open])});}}},{key:"tooltip",get:function get(){var plugin=this.view.plugin(tooltipPlugin);var index=plugin?plugin.manager.tooltips.findIndex(function(t2){return t2.create==_HoverTooltipHost.create;}):-1;return index>-1?plugin.manager.tooltipViews[index]:null;}},{key:"mousemove",value:function mousemove(event){var _a2,_b;this.lastMove={x:event.clientX,y:event.clientY,target:event.target,time:Date.now()};if(this.hoverTimeout<0)this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime);var active=this.active,tooltip=this.tooltip;if(active.length&&tooltip&&!isInTooltip(tooltip.dom,event)||this.pending){var _ref13=active[0]||this.pending,pos=_ref13.pos,end=(_b=(_a2=active[0])===null||_a2===void 0?void 0:_a2.end)!==null&&_b!==void 0?_b:pos;if(pos==end?this.view.posAtCoords(this.lastMove)!=pos:!isOverRange(this.view,pos,end,event.clientX,event.clientY)){this.view.dispatch({effects:this.setHover.of([])});this.pending=null;}}}},{key:"mouseleave",value:function mouseleave(event){clearTimeout(this.hoverTimeout);this.hoverTimeout=-1;var active=this.active;if(active.length){var tooltip=this.tooltip;var inTooltip=tooltip&&tooltip.dom.contains(event.relatedTarget);if(!inTooltip)this.view.dispatch({effects:this.setHover.of([])});else this.watchTooltipLeave(tooltip.dom);}}},{key:"watchTooltipLeave",value:function watchTooltipLeave(tooltip){var _this64=this;var _watch=function watch(event){tooltip.removeEventListener("mouseleave",_watch);if(_this64.active.length&&!_this64.view.dom.contains(event.relatedTarget))_this64.view.dispatch({effects:_this64.setHover.of([])});};tooltip.addEventListener("mouseleave",_watch);}},{key:"destroy",value:function destroy(){clearTimeout(this.hoverTimeout);this.view.dom.removeEventListener("mouseleave",this.mouseleave);this.view.dom.removeEventListener("mousemove",this.mousemove);}}]);}();var tooltipMargin=4;function isInTooltip(tooltip,event){var _tooltip$getBoundingC=tooltip.getBoundingClientRect(),left=_tooltip$getBoundingC.left,right=_tooltip$getBoundingC.right,top2=_tooltip$getBoundingC.top,bottom=_tooltip$getBoundingC.bottom,arrow;if(arrow=tooltip.querySelector(".cm-tooltip-arrow")){var arrowRect=arrow.getBoundingClientRect();top2=Math.min(arrowRect.top,top2);bottom=Math.max(arrowRect.bottom,bottom);}return event.clientX>=left-tooltipMargin&&event.clientX<=right+tooltipMargin&&event.clientY>=top2-tooltipMargin&&event.clientY<=bottom+tooltipMargin;}function isOverRange(view,from,to,x,y,margin){var rect=view.scrollDOM.getBoundingClientRect();var docBottom=view.documentTop+view.documentPadding.top+view.contentHeight;if(rect.left>x||rect.right<x||rect.top>y||Math.min(rect.bottom,docBottom)<y)return false;var pos=view.posAtCoords({x:x,y:y},false);return pos>=from&&pos<=to;}function hoverTooltip(source){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var setHover=_StateEffect.define();var hoverState=_StateField.define({create:function create(){return[];},update:function update(value,tr){if(value.length){if(options.hideOnChange&&(tr.docChanged||tr.selection))value=[];else if(options.hideOn)value=value.filter(function(v){return!options.hideOn(tr,v);});if(tr.docChanged){var mapped=[];var _iterator121=_createForOfIteratorHelper(value),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var tooltip=_step121.value;var newPos=tr.changes.mapPos(tooltip.pos,-1,MapMode.TrackDel);if(newPos!=null){var copy=Object.assign(/* @__PURE__ */Object.create(null),tooltip);copy.pos=newPos;if(copy.end!=null)copy.end=tr.changes.mapPos(copy.end);mapped.push(copy);}}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}value=mapped;}}var _iterator122=_createForOfIteratorHelper(tr.effects),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var effect=_step122.value;if(effect.is(setHover))value=effect.value;if(effect.is(closeHoverTooltipEffect))value=[];}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}return value;},provide:function provide(f){return showHoverTooltip.from(f);}});return{active:hoverState,extension:[hoverState,_ViewPlugin.define(function(view){return new HoverPlugin(view,source,hoverState,setHover,options.hoverTime||300);}),showHoverTooltipHost]};}function getTooltip(view,tooltip){var plugin=view.plugin(tooltipPlugin);if(!plugin)return null;var found=plugin.manager.tooltips.indexOf(tooltip);return found<0?null:plugin.manager.tooltipViews[found];}var closeHoverTooltipEffect=/* @__PURE__ */_StateEffect.define();var panelConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){var topContainer,bottomContainer;var _iterator123=_createForOfIteratorHelper(configs),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var c=_step123.value;topContainer=topContainer||c.topContainer;bottomContainer=bottomContainer||c.bottomContainer;}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}return{topContainer:topContainer,bottomContainer:bottomContainer};}});function getPanel(view,panel){var plugin=view.plugin(panelPlugin);var index=plugin?plugin.specs.indexOf(panel):-1;return index>-1?plugin.panels[index]:null;}var panelPlugin=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class6(view){_classCallCheck(this,_class6);this.input=view.state.facet(showPanel);this.specs=this.input.filter(function(s){return s;});this.panels=this.specs.map(function(spec){return spec(view);});var conf=view.state.facet(panelConfig);this.top=new PanelGroup(view,true,conf.topContainer);this.bottom=new PanelGroup(view,false,conf.bottomContainer);this.top.sync(this.panels.filter(function(p){return p.top;}));this.bottom.sync(this.panels.filter(function(p){return!p.top;}));var _iterator124=_createForOfIteratorHelper(this.panels),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _p2=_step124.value;_p2.dom.classList.add("cm-panel");if(_p2.mount)_p2.mount();}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}}return _createClass(_class6,[{key:"update",value:function update(_update17){var conf=_update17.state.facet(panelConfig);if(this.top.container!=conf.topContainer){this.top.sync([]);this.top=new PanelGroup(_update17.view,true,conf.topContainer);}if(this.bottom.container!=conf.bottomContainer){this.bottom.sync([]);this.bottom=new PanelGroup(_update17.view,false,conf.bottomContainer);}this.top.syncClasses();this.bottom.syncClasses();var input=_update17.state.facet(showPanel);if(input!=this.input){var specs=input.filter(function(x){return x;});var panels=[],top2=[],bottom=[],mount=[];var _iterator125=_createForOfIteratorHelper(specs),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var spec=_step125.value;var known=this.specs.indexOf(spec),panel=void 0;if(known<0){panel=spec(_update17.view);mount.push(panel);}else{panel=this.panels[known];if(panel.update)panel.update(_update17);}panels.push(panel);(panel.top?top2:bottom).push(panel);}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}this.specs=specs;this.panels=panels;this.top.sync(top2);this.bottom.sync(bottom);for(var _i115=0,_mount=mount;_i115<_mount.length;_i115++){var _p3=_mount[_i115];_p3.dom.classList.add("cm-panel");if(_p3.mount)_p3.mount();}}else{var _iterator126=_createForOfIteratorHelper(this.panels),_step126;try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){var _p4=_step126.value;if(_p4.update)_p4.update(_update17);}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}}}},{key:"destroy",value:function destroy(){this.top.sync([]);this.bottom.sync([]);}}]);}(),{provide:function provide(plugin){return _EditorView.scrollMargins.of(function(view){var value=view.plugin(plugin);return value&&{top:value.top.scrollMargin(),bottom:value.bottom.scrollMargin()};});}});var PanelGroup=/*#__PURE__*/function(){function PanelGroup(view,top2,container){_classCallCheck(this,PanelGroup);this.view=view;this.top=top2;this.container=container;this.dom=void 0;this.classes="";this.panels=[];this.syncClasses();}return _createClass(PanelGroup,[{key:"sync",value:function sync(panels){var _iterator127=_createForOfIteratorHelper(this.panels),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var _p5=_step127.value;if(_p5.destroy&&panels.indexOf(_p5)<0)_p5.destroy();}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}this.panels=panels;this.syncDOM();}},{key:"syncDOM",value:function syncDOM(){if(this.panels.length==0){if(this.dom){this.dom.remove();this.dom=void 0;}return;}if(!this.dom){this.dom=document.createElement("div");this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom";this.dom.style[this.top?"top":"bottom"]="0";var parent=this.container||this.view.dom;parent.insertBefore(this.dom,this.top?parent.firstChild:null);}var curDOM=this.dom.firstChild;var _iterator128=_createForOfIteratorHelper(this.panels),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var panel=_step128.value;if(panel.dom.parentNode==this.dom){while(curDOM!=panel.dom)curDOM=rm(curDOM);curDOM=curDOM.nextSibling;}else{this.dom.insertBefore(panel.dom,curDOM);}}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}while(curDOM)curDOM=rm(curDOM);}},{key:"scrollMargin",value:function scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top);}},{key:"syncClasses",value:function syncClasses(){if(!this.container||this.classes==this.view.themeClasses)return;var _iterator129=_createForOfIteratorHelper(this.classes.split(" ")),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var cls=_step129.value;if(cls)this.container.classList.remove(cls);}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}var _iterator130=_createForOfIteratorHelper((this.classes=this.view.themeClasses).split(" ")),_step130;try{for(_iterator130.s();!(_step130=_iterator130.n()).done;){var _cls=_step130.value;if(_cls)this.container.classList.add(_cls);}}catch(err){_iterator130.e(err);}finally{_iterator130.f();}}}]);}();function rm(node){var next=node.nextSibling;node.remove();return next;}var showPanel=/* @__PURE__ */_Facet.define({enables:panelPlugin});var GutterMarker=/*#__PURE__*/function(_RangeValue2){function GutterMarker(){_classCallCheck(this,GutterMarker);return _callSuper(this,GutterMarker,arguments);}_inherits(GutterMarker,_RangeValue2);return _createClass(GutterMarker,[{key:"compare",value:function compare(other){return this==other||this.constructor==other.constructor&&this.eq(other);}},{key:"eq",value:function eq(other){return false;}},{key:"destroy",value:function destroy(dom){}}]);}(RangeValue);GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=true;var gutterLineClass=/* @__PURE__ */_Facet.define();var gutterWidgetClass=/* @__PURE__ */_Facet.define();var defaults={"class":"",renderEmptyElements:false,elementStyle:"",markers:function markers(){return _RangeSet.empty;},lineMarker:function lineMarker(){return null;},widgetMarker:function widgetMarker(){return null;},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}};var activeGutters=/* @__PURE__ */_Facet.define();function gutter(config2){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults),config2))];}var unfixGutters=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.some(function(x){return x;});}});function gutters(config2){var result=[gutterView];if(config2&&config2.fixed===false)result.push(unfixGutters.of(true));return result;}var gutterView=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class7(view){_classCallCheck(this,_class7);this.view=view;this.prevViewport=view.viewport;this.dom=document.createElement("div");this.dom.className="cm-gutters";this.dom.setAttribute("aria-hidden","true");this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px";this.gutters=view.state.facet(activeGutters).map(function(conf){return new SingleGutterView(view,conf);});var _iterator131=_createForOfIteratorHelper(this.gutters),_step131;try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){var gutter2=_step131.value;this.dom.appendChild(gutter2.dom);}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}this.fixed=!view.state.facet(unfixGutters);if(this.fixed){this.dom.style.position="sticky";}this.syncGutters(false);view.scrollDOM.insertBefore(this.dom,view.contentDOM);}return _createClass(_class7,[{key:"update",value:function update(_update18){if(this.updateGutters(_update18)){var vpA=this.prevViewport,vpB=_update18.view.viewport;var vpOverlap=Math.min(vpA.to,vpB.to)-Math.max(vpA.from,vpB.from);this.syncGutters(vpOverlap<(vpB.to-vpB.from)*0.8);}if(_update18.geometryChanged){this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px";}if(this.view.state.facet(unfixGutters)!=!this.fixed){this.fixed=!this.fixed;this.dom.style.position=this.fixed?"sticky":"";}this.prevViewport=_update18.view.viewport;}},{key:"syncGutters",value:function syncGutters(detach){var _this65=this;var after=this.dom.nextSibling;if(detach)this.dom.remove();var lineClasses=_RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from);var classSet=[];var contexts=this.gutters.map(function(gutter2){return new UpdateContext(gutter2,_this65.view.viewport,-_this65.view.documentPadding.top);});var _iterator132=_createForOfIteratorHelper(this.view.viewportLineBlocks),_step132;try{for(_iterator132.s();!(_step132=_iterator132.n()).done;){var line=_step132.value;if(classSet.length)classSet=[];if(Array.isArray(line.type)){var first=true;var _iterator134=_createForOfIteratorHelper(line.type),_step134;try{for(_iterator134.s();!(_step134=_iterator134.n()).done;){var b=_step134.value;if(b.type==BlockType.Text&&first){advanceCursor(lineClasses,classSet,b.from);var _iterator135=_createForOfIteratorHelper(contexts),_step135;try{for(_iterator135.s();!(_step135=_iterator135.n()).done;){var cx=_step135.value;cx.line(this.view,b,classSet);}}catch(err){_iterator135.e(err);}finally{_iterator135.f();}first=false;}else if(b.widget){var _iterator136=_createForOfIteratorHelper(contexts),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var _cx2=_step136.value;_cx2.widget(this.view,b);}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}}}}catch(err){_iterator134.e(err);}finally{_iterator134.f();}}else if(line.type==BlockType.Text){advanceCursor(lineClasses,classSet,line.from);var _iterator137=_createForOfIteratorHelper(contexts),_step137;try{for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _cx3=_step137.value;_cx3.line(this.view,line,classSet);}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}}else if(line.widget){var _iterator138=_createForOfIteratorHelper(contexts),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var _cx4=_step138.value;_cx4.widget(this.view,line);}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}}}}catch(err){_iterator132.e(err);}finally{_iterator132.f();}var _iterator133=_createForOfIteratorHelper(contexts),_step133;try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){var _cx5=_step133.value;_cx5.finish();}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}if(detach)this.view.scrollDOM.insertBefore(this.dom,after);}},{key:"updateGutters",value:function updateGutters(update){var prev=update.startState.facet(activeGutters),cur2=update.state.facet(activeGutters);var change=update.docChanged||update.heightChanged||update.viewportChanged||!_RangeSet.eq(update.startState.facet(gutterLineClass),update.state.facet(gutterLineClass),update.view.viewport.from,update.view.viewport.to);if(prev==cur2){var _iterator139=_createForOfIteratorHelper(this.gutters),_step139;try{for(_iterator139.s();!(_step139=_iterator139.n()).done;){var gutter2=_step139.value;if(gutter2.update(update))change=true;}}catch(err){_iterator139.e(err);}finally{_iterator139.f();}}else{change=true;var gutters2=[];var _iterator140=_createForOfIteratorHelper(cur2),_step140;try{for(_iterator140.s();!(_step140=_iterator140.n()).done;){var conf=_step140.value;var known=prev.indexOf(conf);if(known<0){gutters2.push(new SingleGutterView(this.view,conf));}else{this.gutters[known].update(update);gutters2.push(this.gutters[known]);}}}catch(err){_iterator140.e(err);}finally{_iterator140.f();}var _iterator141=_createForOfIteratorHelper(this.gutters),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var _g=_step141.value;_g.dom.remove();if(gutters2.indexOf(_g)<0)_g.destroy();}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}for(var _i116=0,_gutters=gutters2;_i116<_gutters.length;_i116++){var g=_gutters[_i116];this.dom.appendChild(g.dom);}this.gutters=gutters2;}return change;}},{key:"destroy",value:function destroy(){var _iterator142=_createForOfIteratorHelper(this.gutters),_step142;try{for(_iterator142.s();!(_step142=_iterator142.n()).done;){var view=_step142.value;view.destroy();}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}this.dom.remove();}}]);}(),{provide:function provide(plugin){return _EditorView.scrollMargins.of(function(view){var value=view.plugin(plugin);if(!value||value.gutters.length==0||!value.fixed)return null;return view.textDirection==Direction.LTR?{left:value.dom.offsetWidth*view.scaleX}:{right:value.dom.offsetWidth*view.scaleX};});}});function asArray2(val){return Array.isArray(val)?val:[val];}function advanceCursor(cursor2,collect,pos){while(cursor2.value&&cursor2.from<=pos){if(cursor2.from==pos)collect.push(cursor2.value);cursor2.next();}}var UpdateContext=/*#__PURE__*/function(){function UpdateContext(gutter2,viewport,height){_classCallCheck(this,UpdateContext);this.gutter=gutter2;this.height=height;this.i=0;this.cursor=_RangeSet.iter(gutter2.markers,viewport.from);}return _createClass(UpdateContext,[{key:"addElement",value:function addElement(view,block,markers){var gutter2=this.gutter,above=(block.top-this.height)/view.scaleY,height=block.height/view.scaleY;if(this.i==gutter2.elements.length){var newElt=new GutterElement(view,height,above,markers);gutter2.elements.push(newElt);gutter2.dom.appendChild(newElt.dom);}else{gutter2.elements[this.i].update(view,height,above,markers);}this.height=block.bottom;this.i++;}},{key:"line",value:function line(view,_line3,extraMarkers){var localMarkers=[];advanceCursor(this.cursor,localMarkers,_line3.from);if(extraMarkers.length)localMarkers=localMarkers.concat(extraMarkers);var forLine=this.gutter.config.lineMarker(view,_line3,localMarkers);if(forLine)localMarkers.unshift(forLine);var gutter2=this.gutter;if(localMarkers.length==0&&!gutter2.config.renderEmptyElements)return;this.addElement(view,_line3,localMarkers);}},{key:"widget",value:function widget(view,block){var marker=this.gutter.config.widgetMarker(view,block.widget,block),markers=marker?[marker]:null;var _iterator143=_createForOfIteratorHelper(view.state.facet(gutterWidgetClass)),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var cls=_step143.value;var marker2=cls(view,block.widget,block);if(marker2)(markers||(markers=[])).push(marker2);}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}if(markers)this.addElement(view,block,markers);}},{key:"finish",value:function finish(){var gutter2=this.gutter;while(gutter2.elements.length>this.i){var last=gutter2.elements.pop();gutter2.dom.removeChild(last.dom);last.destroy();}}}]);}();var SingleGutterView=/*#__PURE__*/function(){function SingleGutterView(view,config2){var _this66=this;_classCallCheck(this,SingleGutterView);this.view=view;this.config=config2;this.elements=[];this.spacer=null;this.dom=document.createElement("div");this.dom.className="cm-gutter"+(this.config["class"]?" "+this.config["class"]:"");var _loop1=function _loop1(prop){_this66.dom.addEventListener(prop,function(event){var target=event.target,y;if(target!=_this66.dom&&_this66.dom.contains(target)){while(target.parentNode!=_this66.dom)target=target.parentNode;var rect=target.getBoundingClientRect();y=(rect.top+rect.bottom)/2;}else{y=event.clientY;}var line=view.lineBlockAtHeight(y-view.documentTop);if(config2.domEventHandlers[prop](view,line,event))event.preventDefault();});};for(var prop in config2.domEventHandlers){_loop1(prop);}this.markers=asArray2(config2.markers(view));if(config2.initialSpacer){this.spacer=new GutterElement(view,0,0,[config2.initialSpacer(view)]);this.dom.appendChild(this.spacer.dom);this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none";}}return _createClass(SingleGutterView,[{key:"update",value:function update(_update19){var prevMarkers=this.markers;this.markers=asArray2(this.config.markers(_update19.view));if(this.spacer&&this.config.updateSpacer){var updated=this.config.updateSpacer(this.spacer.markers[0],_update19);if(updated!=this.spacer.markers[0])this.spacer.update(_update19.view,0,0,[updated]);}var vp=_update19.view.viewport;return!_RangeSet.eq(this.markers,prevMarkers,vp.from,vp.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(_update19):false);}},{key:"destroy",value:function destroy(){var _iterator144=_createForOfIteratorHelper(this.elements),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var elt2=_step144.value;elt2.destroy();}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}}}]);}();var GutterElement=/*#__PURE__*/function(){function GutterElement(view,height,above,markers){_classCallCheck(this,GutterElement);this.height=-1;this.above=0;this.markers=[];this.dom=document.createElement("div");this.dom.className="cm-gutterElement";this.update(view,height,above,markers);}return _createClass(GutterElement,[{key:"update",value:function update(view,height,above,markers){if(this.height!=height){this.height=height;this.dom.style.height=height+"px";}if(this.above!=above)this.dom.style.marginTop=(this.above=above)?above+"px":"";if(!sameMarkers(this.markers,markers))this.setMarkers(view,markers);}},{key:"setMarkers",value:function setMarkers(view,markers){var cls="cm-gutterElement",domPos=this.dom.firstChild;for(var iNew=0,iOld=0;;){var skipTo=iOld,marker=iNew<markers.length?markers[iNew++]:null,matched=false;if(marker){var c=marker.elementClass;if(c)cls+=" "+c;for(var _i117=iOld;_i117<this.markers.length;_i117++)if(this.markers[_i117].compare(marker)){skipTo=_i117;matched=true;break;}}else{skipTo=this.markers.length;}while(iOld<skipTo){var next=this.markers[iOld++];if(next.toDOM){next.destroy(domPos);var after=domPos.nextSibling;domPos.remove();domPos=after;}}if(!marker)break;if(marker.toDOM){if(matched)domPos=domPos.nextSibling;else this.dom.insertBefore(marker.toDOM(view),domPos);}if(matched)iOld++;}this.dom.className=cls;this.markers=markers;}},{key:"destroy",value:function destroy(){this.setMarkers(null,[]);}}]);}();function sameMarkers(a,b){if(a.length!=b.length)return false;for(var _i118=0;_i118<a.length;_i118++)if(!a[_i118].compare(b[_i118]))return false;return true;}var lineNumberMarkers=/* @__PURE__ */_Facet.define();var lineNumberWidgetMarker=/* @__PURE__ */_Facet.define();var lineNumberConfig=/* @__PURE__ */_Facet.define({combine:function combine(values2){return combineConfig(values2,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function domEventHandlers(a,b){var result=Object.assign({},a);var _loop10=function _loop10(){var exists=result[event],add2=b[event];result[event]=exists?function(view,line,event2){return exists(view,line,event2)||add2(view,line,event2);}:add2;};for(var event in b){_loop10();}return result;}});}});var NumberMarker=/*#__PURE__*/function(_GutterMarker){function NumberMarker(number2){var _this67;_classCallCheck(this,NumberMarker);_this67=_callSuper(this,NumberMarker);_this67.number=number2;return _this67;}_inherits(NumberMarker,_GutterMarker);return _createClass(NumberMarker,[{key:"eq",value:function eq(other){return this.number==other.number;}},{key:"toDOM",value:function toDOM(){return document.createTextNode(this.number);}}]);}(GutterMarker);function formatNumber(view,number2){return view.state.facet(lineNumberConfig).formatNumber(number2,view.state);}var lineNumberGutter=/* @__PURE__ */activeGutters.compute([lineNumberConfig],function(state){return{"class":"cm-lineNumbers",renderEmptyElements:false,markers:function markers(view){return view.state.facet(lineNumberMarkers);},lineMarker:function lineMarker(view,line,others){if(others.some(function(m){return m.toDOM;}))return null;return new NumberMarker(formatNumber(view,view.state.doc.lineAt(line.from).number));},widgetMarker:function widgetMarker(view,widget,block){var _iterator145=_createForOfIteratorHelper(view.state.facet(lineNumberWidgetMarker)),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var m=_step145.value;var result=m(view,widget,block);if(result)return result;}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}return null;},lineMarkerChange:function lineMarkerChange(update){return update.startState.facet(lineNumberConfig)!=update.state.facet(lineNumberConfig);},initialSpacer:function initialSpacer(view){return new NumberMarker(formatNumber(view,maxLineNumber(view.state.doc.lines)));},updateSpacer:function updateSpacer(spacer,update){var max=formatNumber(update.view,maxLineNumber(update.view.state.doc.lines));return max==spacer.number?spacer:new NumberMarker(max);},domEventHandlers:state.facet(lineNumberConfig).domEventHandlers};});function lineNumbers(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[lineNumberConfig.of(config2),gutters(),lineNumberGutter];}function maxLineNumber(lines){var last=9;while(last<lines)last=last*10+9;return last;}var activeLineGutterMarker=/* @__PURE__ */new(/*#__PURE__*/function(_GutterMarker2){function _class8(){var _this68;_classCallCheck(this,_class8);_this68=_callSuper(this,_class8,arguments);_this68.elementClass="cm-activeLineGutter";return _this68;}_inherits(_class8,_GutterMarker2);return _createClass(_class8);}(GutterMarker))();var activeLineGutterHighlighter=/* @__PURE__ */gutterLineClass.compute(["selection"],function(state){var marks2=[],last=-1;var _iterator146=_createForOfIteratorHelper(state.selection.ranges),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var range=_step146.value;var linePos=state.doc.lineAt(range.head).from;if(linePos>last){last=linePos;marks2.push(activeLineGutterMarker.range(linePos));}}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}return _RangeSet.of(marks2);});function highlightActiveLineGutter(){return activeLineGutterHighlighter;}// ../node_modules/@codemirror/language/dist/index.js
var dist_exports={};__export(dist_exports,{DocInput:function DocInput(){return _DocInput;},HighlightStyle:function HighlightStyle(){return _HighlightStyle2;},IndentContext:function IndentContext(){return _IndentContext;},LRLanguage:function LRLanguage(){return _LRLanguage2;},Language:function Language(){return _Language;},LanguageDescription:function LanguageDescription(){return _LanguageDescription2;},LanguageSupport:function LanguageSupport(){return _LanguageSupport;},ParseContext:function ParseContext(){return _ParseContext2;},StreamLanguage:function StreamLanguage(){return _StreamLanguage2;},StringStream:function StringStream(){return _StringStream;},TreeIndentContext:function TreeIndentContext(){return _TreeIndentContext2;},bidiIsolates:function bidiIsolates(){return _bidiIsolates;},bracketMatching:function bracketMatching(){return _bracketMatching;},bracketMatchingHandle:function bracketMatchingHandle(){return _bracketMatchingHandle;},codeFolding:function codeFolding(){return _codeFolding;},continuedIndent:function continuedIndent(){return _continuedIndent;},defaultHighlightStyle:function defaultHighlightStyle(){return _defaultHighlightStyle;},defineLanguageFacet:function defineLanguageFacet(){return _defineLanguageFacet;},delimitedIndent:function delimitedIndent(){return _delimitedIndent;},ensureSyntaxTree:function ensureSyntaxTree(){return _ensureSyntaxTree;},flatIndent:function flatIndent(){return _flatIndent;},foldAll:function foldAll(){return _foldAll;},foldCode:function foldCode(){return _foldCode;},foldEffect:function foldEffect(){return _foldEffect;},foldGutter:function foldGutter(){return _foldGutter;},foldInside:function foldInside(){return _foldInside;},foldKeymap:function foldKeymap(){return _foldKeymap;},foldNodeProp:function foldNodeProp(){return _foldNodeProp;},foldService:function foldService(){return _foldService;},foldState:function foldState(){return _foldState;},foldable:function foldable(){return _foldable;},foldedRanges:function foldedRanges(){return _foldedRanges;},forceParsing:function forceParsing(){return _forceParsing;},getIndentUnit:function getIndentUnit(){return _getIndentUnit;},getIndentation:function getIndentation(){return _getIndentation;},highlightingFor:function highlightingFor(){return _highlightingFor;},indentNodeProp:function indentNodeProp(){return _indentNodeProp;},indentOnInput:function indentOnInput(){return _indentOnInput;},indentRange:function indentRange(){return _indentRange;},indentService:function indentService(){return _indentService;},indentString:function indentString(){return _indentString;},indentUnit:function indentUnit(){return _indentUnit;},language:function language(){return _language;},languageDataProp:function languageDataProp(){return _languageDataProp;},matchBrackets:function matchBrackets(){return _matchBrackets;},sublanguageProp:function sublanguageProp(){return _sublanguageProp;},syntaxHighlighting:function syntaxHighlighting(){return _syntaxHighlighting;},syntaxParserRunning:function syntaxParserRunning(){return _syntaxParserRunning;},syntaxTree:function syntaxTree(){return _syntaxTree;},syntaxTreeAvailable:function syntaxTreeAvailable(){return _syntaxTreeAvailable;},toggleFold:function toggleFold(){return _toggleFold;},unfoldAll:function unfoldAll(){return _unfoldAll;},unfoldCode:function unfoldCode(){return _unfoldCode;},unfoldEffect:function unfoldEffect(){return _unfoldEffect;}});// ../node_modules/@lezer/common/dist/index.js
var DefaultBufferLength=1024;var nextPropID=0;var Range2=/*#__PURE__*/_createClass(function Range2(from,to){_classCallCheck(this,Range2);this.from=from;this.to=to;});var NodeProp=/*#__PURE__*/function(){function NodeProp(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,NodeProp);this.id=nextPropID++;this.perNode=!!config2.perNode;this.deserialize=config2.deserialize||function(){throw new Error("This node type doesn't define a deserialize function");};}return _createClass(NodeProp,[{key:"add",value:function add(match){var _this69=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");if(typeof match!="function")match=_NodeType.match(match);return function(type){var result=match(type);return result===void 0?null:[_this69,result];};}}]);}();NodeProp.closedBy=new NodeProp({deserialize:function deserialize(str){return str.split(" ");}});NodeProp.openedBy=new NodeProp({deserialize:function deserialize(str){return str.split(" ");}});NodeProp.group=new NodeProp({deserialize:function deserialize(str){return str.split(" ");}});NodeProp.isolate=new NodeProp({deserialize:function deserialize(value){if(value&&value!="rtl"&&value!="ltr"&&value!="auto")throw new RangeError("Invalid value for isolate: "+value);return value||"auto";}});NodeProp.contextHash=new NodeProp({perNode:true});NodeProp.lookAhead=new NodeProp({perNode:true});NodeProp.mounted=new NodeProp({perNode:true});var MountedTree=/*#__PURE__*/function(){function MountedTree(tree,overlay,parser5){_classCallCheck(this,MountedTree);this.tree=tree;this.overlay=overlay;this.parser=parser5;}return _createClass(MountedTree,null,[{key:"get",value:function get(tree){return tree&&tree.props&&tree.props[NodeProp.mounted.id];}}]);}();var noProps=/* @__PURE__ */Object.create(null);var _NodeType=/*#__PURE__*/function(){function NodeType(name2,props,id2){var flags=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,NodeType);this.name=name2;this.props=props;this.id=id2;this.flags=flags;}return _createClass(NodeType,[{key:"prop",value:function prop(_prop){return this.props[_prop.id];}},{key:"isTop",get:function get(){return(this.flags&1)>0;}},{key:"isSkipped",get:function get(){return(this.flags&2)>0;}},{key:"isError",get:function get(){return(this.flags&4)>0;}},{key:"isAnonymous",get:function get(){return(this.flags&8)>0;}},{key:"is",value:function is(name2){if(typeof name2=="string"){if(this.name==name2)return true;var group=this.prop(NodeProp.group);return group?group.indexOf(name2)>-1:false;}return this.id==name2;}}],[{key:"define",value:function define(spec){var props=spec.props&&spec.props.length?/* @__PURE__ */Object.create(null):noProps;var flags=(spec.top?1:0)|(spec.skipped?2:0)|(spec.error?4:0)|(spec.name==null?8:0);var type=new _NodeType(spec.name||"",props,spec.id,flags);if(spec.props){var _iterator147=_createForOfIteratorHelper(spec.props),_step147;try{for(_iterator147.s();!(_step147=_iterator147.n()).done;){var src=_step147.value;if(!Array.isArray(src))src=src(type);if(src){if(src[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");props[src[0].id]=src[1];}}}catch(err){_iterator147.e(err);}finally{_iterator147.f();}}return type;}},{key:"match",value:function match(map){var direct=/* @__PURE__ */Object.create(null);for(var prop in map){var _iterator148=_createForOfIteratorHelper(prop.split(" ")),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var name2=_step148.value;direct[name2]=map[prop];}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}}return function(node){for(var groups=node.prop(NodeProp.group),_i119=-1;_i119<(groups?groups.length:0);_i119++){var found=direct[_i119<0?node.name:groups[_i119]];if(found)return found;}};}}]);}();_NodeType.none=new _NodeType("",/* @__PURE__ */Object.create(null),0,8);var _NodeSet=/*#__PURE__*/function(){function NodeSet(types2){_classCallCheck(this,NodeSet);this.types=types2;for(var _i120=0;_i120<types2.length;_i120++)if(types2[_i120].id!=_i120)throw new RangeError("Node type ids should correspond to array positions when creating a node set");}return _createClass(NodeSet,[{key:"extend",value:function extend(){var newTypes=[];for(var _len7=arguments.length,props=new Array(_len7),_key5=0;_key5<_len7;_key5++){props[_key5]=arguments[_key5];}var _iterator149=_createForOfIteratorHelper(this.types),_step149;try{for(_iterator149.s();!(_step149=_iterator149.n()).done;){var type=_step149.value;var newProps=null;var _iterator150=_createForOfIteratorHelper(props),_step150;try{for(_iterator150.s();!(_step150=_iterator150.n()).done;){var source=_step150.value;var add2=source(type);if(add2){if(!newProps)newProps=Object.assign({},type.props);newProps[add2[0].id]=add2[1];}}}catch(err){_iterator150.e(err);}finally{_iterator150.f();}newTypes.push(newProps?new _NodeType(type.name,newProps,type.id,type.flags):type);}}catch(err){_iterator149.e(err);}finally{_iterator149.f();}return new _NodeSet(newTypes);}}]);}();var CachedNode=/* @__PURE__ */new WeakMap();var CachedInnerNode=/* @__PURE__ */new WeakMap();var IterMode;(function(IterMode2){IterMode2[IterMode2["ExcludeBuffers"]=1]="ExcludeBuffers";IterMode2[IterMode2["IncludeAnonymous"]=2]="IncludeAnonymous";IterMode2[IterMode2["IgnoreMounts"]=4]="IgnoreMounts";IterMode2[IterMode2["IgnoreOverlays"]=8]="IgnoreOverlays";})(IterMode||(IterMode={}));var _Tree=/*#__PURE__*/function(){function Tree(type,children,positions,length,props){_classCallCheck(this,Tree);this.type=type;this.children=children;this.positions=positions;this.length=length;this.props=null;if(props&&props.length){this.props=/* @__PURE__ */Object.create(null);var _iterator151=_createForOfIteratorHelper(props),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var _step151$value=_slicedToArray(_step151.value,2),prop=_step151$value[0],value=_step151$value[1];this.props[typeof prop=="number"?prop:prop.id]=value;}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}}}return _createClass(Tree,[{key:"toString",value:function toString(){var mounted=MountedTree.get(this);if(mounted&&!mounted.overlay)return mounted.tree.toString();var children="";var _iterator152=_createForOfIteratorHelper(this.children),_step152;try{for(_iterator152.s();!(_step152=_iterator152.n()).done;){var ch=_step152.value;var str=ch.toString();if(str){if(children)children+=",";children+=str;}}}catch(err){_iterator152.e(err);}finally{_iterator152.f();}return!this.type.name?children:(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(children.length?"("+children+")":"");}},{key:"cursor",value:function cursor(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return new TreeCursor(this.topNode,mode);}},{key:"cursorAt",value:function cursorAt(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var scope=CachedNode.get(this)||this.topNode;var cursor2=new TreeCursor(scope);cursor2.moveTo(pos,side);CachedNode.set(this,cursor2._tree);return cursor2;}},{key:"topNode",get:function get(){return new _TreeNode(this,0,0,null);}},{key:"resolve",value:function resolve(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var node=resolveNode(CachedNode.get(this)||this.topNode,pos,side,false);CachedNode.set(this,node);return node;}},{key:"resolveInner",value:function resolveInner(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var node=resolveNode(CachedInnerNode.get(this)||this.topNode,pos,side,true);CachedInnerNode.set(this,node);return node;}},{key:"resolveStack",value:function resolveStack(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return stackIterator(this,pos,side);}},{key:"iterate",value:function iterate(spec){var enter=spec.enter,leave=spec.leave,_spec$from=spec.from,from=_spec$from===void 0?0:_spec$from,_spec$to2=spec.to,to=_spec$to2===void 0?this.length:_spec$to2;var mode=spec.mode||0,anon=(mode&IterMode.IncludeAnonymous)>0;for(var c=this.cursor(mode|IterMode.IncludeAnonymous);;){var entered=false;if(c.from<=to&&c.to>=from&&(!anon&&c.type.isAnonymous||enter(c)!==false)){if(c.firstChild())continue;entered=true;}for(;;){if(entered&&leave&&(anon||!c.type.isAnonymous))leave(c);if(c.nextSibling())break;if(!c.parent())return;entered=true;}}}},{key:"prop",value:function prop(_prop2){return!_prop2.perNode?this.type.prop(_prop2):this.props?this.props[_prop2.id]:void 0;}},{key:"propValues",get:function get(){var result=[];if(this.props)for(var id2 in this.props)result.push([+id2,this.props[id2]]);return result;}},{key:"balance",value:function balance(){var _this70=this;var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return this.children.length<=8?this:balanceRange(_NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,function(children,positions,length){return new _Tree(_this70.type,children,positions,length,_this70.propValues);},config2.makeTree||function(children,positions,length){return new _Tree(_NodeType.none,children,positions,length);});}}],[{key:"build",value:function build(data2){return buildTree(data2);}}]);}();_Tree.empty=new _Tree(_NodeType.none,[],[],0);var _FlatBufferCursor=/*#__PURE__*/function(){function FlatBufferCursor(buffer,index){_classCallCheck(this,FlatBufferCursor);this.buffer=buffer;this.index=index;}return _createClass(FlatBufferCursor,[{key:"id",get:function get(){return this.buffer[this.index-4];}},{key:"start",get:function get(){return this.buffer[this.index-3];}},{key:"end",get:function get(){return this.buffer[this.index-2];}},{key:"size",get:function get(){return this.buffer[this.index-1];}},{key:"pos",get:function get(){return this.index;}},{key:"next",value:function next(){this.index-=4;}},{key:"fork",value:function fork(){return new _FlatBufferCursor(this.buffer,this.index);}}]);}();var _TreeBuffer=/*#__PURE__*/function(){function TreeBuffer(buffer,length,set){_classCallCheck(this,TreeBuffer);this.buffer=buffer;this.length=length;this.set=set;}return _createClass(TreeBuffer,[{key:"type",get:function get(){return _NodeType.none;}},{key:"toString",value:function toString(){var result=[];for(var index=0;index<this.buffer.length;){result.push(this.childString(index));index=this.buffer[index+3];}return result.join(",");}},{key:"childString",value:function childString(index){var id2=this.buffer[index],endIndex=this.buffer[index+3];var type=this.set.types[id2],result=type.name;if(/\W/.test(result)&&!type.isError)result=JSON.stringify(result);index+=4;if(endIndex==index)return result;var children=[];while(index<endIndex){children.push(this.childString(index));index=this.buffer[index+3];}return result+"("+children.join(",")+")";}},{key:"findChild",value:function findChild(startIndex,endIndex,dir,pos,side){var buffer=this.buffer,pick=-1;for(var _i121=startIndex;_i121!=endIndex;_i121=buffer[_i121+3]){if(checkSide(side,pos,buffer[_i121+1],buffer[_i121+2])){pick=_i121;if(dir>0)break;}}return pick;}},{key:"slice",value:function slice(startI,endI,from){var b=this.buffer;var copy=new Uint16Array(endI-startI),len=0;for(var _i122=startI,j=0;_i122<endI;){copy[j++]=b[_i122++];copy[j++]=b[_i122++]-from;var to=copy[j++]=b[_i122++]-from;copy[j++]=b[_i122++]-startI;len=Math.max(len,to);}return new _TreeBuffer(copy,len,this.set);}}]);}();function checkSide(side,pos,from,to){switch(side){case-2:return from<pos;case-1:return to>=pos&&from<pos;case 0:return from<pos&&to>pos;case 1:return from<=pos&&to>pos;case 2:return to>pos;case 4:return true;}}function resolveNode(node,pos,side,overlays){var _a2;while(node.from==node.to||(side<1?node.from>=pos:node.from>pos)||(side>-1?node.to<=pos:node.to<pos)){var parent=!overlays&&node instanceof _TreeNode&&node.index<0?null:node.parent;if(!parent)return node;node=parent;}var mode=overlays?0:IterMode.IgnoreOverlays;if(overlays)for(var scan=node,_parent2=scan.parent;_parent2;scan=_parent2,_parent2=scan.parent){if(scan instanceof _TreeNode&&scan.index<0&&((_a2=_parent2.enter(pos,side,mode))===null||_a2===void 0?void 0:_a2.from)!=scan.from)node=_parent2;}for(;;){var inner=node.enter(pos,side,mode);if(!inner)return node;node=inner;}}var BaseNode=/*#__PURE__*/function(){function BaseNode(){_classCallCheck(this,BaseNode);}return _createClass(BaseNode,[{key:"cursor",value:function cursor(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return new TreeCursor(this,mode);}},{key:"getChild",value:function getChild(type){var before=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var after=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var r=_getChildren(this,type,before,after);return r.length?r[0]:null;}},{key:"getChildren",value:function getChildren(type){var before=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var after=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return _getChildren(this,type,before,after);}},{key:"resolve",value:function resolve(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return resolveNode(this,pos,side,false);}},{key:"resolveInner",value:function resolveInner(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return resolveNode(this,pos,side,true);}},{key:"matchContext",value:function matchContext(context){return matchNodeContext(this.parent,context);}},{key:"enterUnfinishedNodesBefore",value:function enterUnfinishedNodesBefore(pos){var scan=this.childBefore(pos),node=this;while(scan){var last=scan.lastChild;if(!last||last.to!=scan.to)break;if(last.type.isError&&last.from==last.to){node=scan;scan=last.prevSibling;}else{scan=last;}}return node;}},{key:"node",get:function get(){return this;}},{key:"next",get:function get(){return this.parent;}}]);}();var _TreeNode=/*#__PURE__*/function(_BaseNode){function TreeNode(_tree,from,index,_parent){var _this71;_classCallCheck(this,TreeNode);_this71=_callSuper(this,TreeNode);_this71._tree=_tree;_this71.from=from;_this71.index=index;_this71._parent=_parent;return _this71;}_inherits(TreeNode,_BaseNode);return _createClass(TreeNode,[{key:"type",get:function get(){return this._tree.type;}},{key:"name",get:function get(){return this._tree.type.name;}},{key:"to",get:function get(){return this.from+this._tree.length;}},{key:"nextChild",value:function nextChild(i,dir,pos,side){var mode=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;for(var parent=this;;){for(var _parent$_tree=parent._tree,children=_parent$_tree.children,positions=_parent$_tree.positions,e=dir>0?children.length:-1;i!=e;i+=dir){var next=children[i],start=positions[i]+parent.from;if(!checkSide(side,pos,start,start+next.length))continue;if(next instanceof _TreeBuffer){if(mode&IterMode.ExcludeBuffers)continue;var index=next.findChild(0,next.buffer.length,dir,pos-start,side);if(index>-1)return new _BufferNode(new BufferContext(parent,next,i,start),null,index);}else if(mode&IterMode.IncludeAnonymous||!next.type.isAnonymous||hasChild(next)){var mounted=void 0;if(!(mode&IterMode.IgnoreMounts)&&(mounted=MountedTree.get(next))&&!mounted.overlay)return new _TreeNode(mounted.tree,start,i,parent);var inner=new _TreeNode(next,start,i,parent);return mode&IterMode.IncludeAnonymous||!inner.type.isAnonymous?inner:inner.nextChild(dir<0?next.children.length-1:0,dir,pos,side);}}if(mode&IterMode.IncludeAnonymous||!parent.type.isAnonymous)return null;if(parent.index>=0)i=parent.index+dir;else i=dir<0?-1:parent._parent._tree.children.length;parent=parent._parent;if(!parent)return null;}}},{key:"firstChild",get:function get(){return this.nextChild(0,1,0,4);}},{key:"lastChild",get:function get(){return this.nextChild(this._tree.children.length-1,-1,0,4);}},{key:"childAfter",value:function childAfter(pos){return this.nextChild(0,1,pos,2);}},{key:"childBefore",value:function childBefore(pos){return this.nextChild(this._tree.children.length-1,-1,pos,-2);}},{key:"enter",value:function enter(pos,side){var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var mounted;if(!(mode&IterMode.IgnoreOverlays)&&(mounted=MountedTree.get(this._tree))&&mounted.overlay){var rPos=pos-this.from;var _iterator153=_createForOfIteratorHelper(mounted.overlay),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var _step153$value=_step153.value,from=_step153$value.from,to=_step153$value.to;if((side>0?from<=rPos:from<rPos)&&(side<0?to>=rPos:to>rPos))return new _TreeNode(mounted.tree,mounted.overlay[0].from+this.from,-1,this);}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}}return this.nextChild(0,1,pos,side,mode);}},{key:"nextSignificantParent",value:function nextSignificantParent(){var val=this;while(val.type.isAnonymous&&val._parent)val=val._parent;return val;}},{key:"parent",get:function get(){return this._parent?this._parent.nextSignificantParent():null;}},{key:"nextSibling",get:function get(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null;}},{key:"prevSibling",get:function get(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null;}},{key:"tree",get:function get(){return this._tree;}},{key:"toTree",value:function toTree(){return this._tree;}},{key:"toString",value:function toString(){return this._tree.toString();}}]);}(BaseNode);function _getChildren(node,type,before,after){var cur2=node.cursor(),result=[];if(!cur2.firstChild())return result;if(before!=null)for(var found=false;!found;){found=cur2.type.is(before);if(!cur2.nextSibling())return result;}for(;;){if(after!=null&&cur2.type.is(after))return result;if(cur2.type.is(type))result.push(cur2.node);if(!cur2.nextSibling())return after==null?result:[];}}function matchNodeContext(node,context){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:context.length-1;for(var _p6=node;i>=0;_p6=_p6.parent){if(!_p6)return false;if(!_p6.type.isAnonymous){if(context[i]&&context[i]!=_p6.name)return false;i--;}}return true;}var BufferContext=/*#__PURE__*/_createClass(function BufferContext(parent,buffer,index,start){_classCallCheck(this,BufferContext);this.parent=parent;this.buffer=buffer;this.index=index;this.start=start;});var _BufferNode=/*#__PURE__*/function(_BaseNode2){function BufferNode(context,_parent,index){var _this72;_classCallCheck(this,BufferNode);_this72=_callSuper(this,BufferNode);_this72.context=context;_this72._parent=_parent;_this72.index=index;_this72.type=context.buffer.set.types[context.buffer.buffer[index]];return _this72;}_inherits(BufferNode,_BaseNode2);return _createClass(BufferNode,[{key:"name",get:function get(){return this.type.name;}},{key:"from",get:function get(){return this.context.start+this.context.buffer.buffer[this.index+1];}},{key:"to",get:function get(){return this.context.start+this.context.buffer.buffer[this.index+2];}},{key:"child",value:function child(dir,pos,side){var buffer=this.context.buffer;var index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.context.start,side);return index<0?null:new _BufferNode(this.context,this,index);}},{key:"firstChild",get:function get(){return this.child(1,0,4);}},{key:"lastChild",get:function get(){return this.child(-1,0,4);}},{key:"childAfter",value:function childAfter(pos){return this.child(1,pos,2);}},{key:"childBefore",value:function childBefore(pos){return this.child(-1,pos,-2);}},{key:"enter",value:function enter(pos,side){var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(mode&IterMode.ExcludeBuffers)return null;var buffer=this.context.buffer;var index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],side>0?1:-1,pos-this.context.start,side);return index<0?null:new _BufferNode(this.context,this,index);}},{key:"parent",get:function get(){return this._parent||this.context.parent.nextSignificantParent();}},{key:"externalSibling",value:function externalSibling(dir){return this._parent?null:this.context.parent.nextChild(this.context.index+dir,dir,0,4);}},{key:"nextSibling",get:function get(){var buffer=this.context.buffer;var after=buffer.buffer[this.index+3];if(after<(this._parent?buffer.buffer[this._parent.index+3]:buffer.buffer.length))return new _BufferNode(this.context,this._parent,after);return this.externalSibling(1);}},{key:"prevSibling",get:function get(){var buffer=this.context.buffer;var parentStart=this._parent?this._parent.index+4:0;if(this.index==parentStart)return this.externalSibling(-1);return new _BufferNode(this.context,this._parent,buffer.findChild(parentStart,this.index,-1,0,4));}},{key:"tree",get:function get(){return null;}},{key:"toTree",value:function toTree(){var children=[],positions=[];var buffer=this.context.buffer;var startI=this.index+4,endI=buffer.buffer[this.index+3];if(endI>startI){var from=buffer.buffer[this.index+1];children.push(buffer.slice(startI,endI,from));positions.push(0);}return new _Tree(this.type,children,positions,this.to-this.from);}},{key:"toString",value:function toString(){return this.context.buffer.childString(this.index);}}]);}(BaseNode);function iterStack(heads){if(!heads.length)return null;var pick=0,picked=heads[0];for(var _i123=1;_i123<heads.length;_i123++){var node=heads[_i123];if(node.from>picked.from||node.to<picked.to){picked=node;pick=_i123;}}var next=picked instanceof _TreeNode&&picked.index<0?null:picked.parent;var newHeads=heads.slice();if(next)newHeads[pick]=next;else newHeads.splice(pick,1);return new StackIterator(newHeads,picked);}var StackIterator=/*#__PURE__*/function(){function StackIterator(heads,node){_classCallCheck(this,StackIterator);this.heads=heads;this.node=node;}return _createClass(StackIterator,[{key:"next",get:function get(){return iterStack(this.heads);}}]);}();function stackIterator(tree,pos,side){var inner=tree.resolveInner(pos,side),layers=null;for(var scan=inner instanceof _TreeNode?inner:inner.context.parent;scan;scan=scan.parent){if(scan.index<0){var parent=scan.parent;(layers||(layers=[inner])).push(parent.resolve(pos,side));scan=parent;}else{var mount=MountedTree.get(scan.tree);if(mount&&mount.overlay&&mount.overlay[0].from<=pos&&mount.overlay[mount.overlay.length-1].to>=pos){var root=new _TreeNode(mount.tree,mount.overlay[0].from+scan.from,-1,scan);(layers||(layers=[inner])).push(resolveNode(root,pos,side,false));}}}return layers?iterStack(layers):inner;}var TreeCursor=/*#__PURE__*/function(){function TreeCursor(node){var mode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,TreeCursor);this.mode=mode;this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(node instanceof _TreeNode){this.yieldNode(node);}else{this._tree=node.context.parent;this.buffer=node.context;for(var n=node._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=node;this.yieldBuf(node.index);}}return _createClass(TreeCursor,[{key:"name",get:function get(){return this.type.name;}},{key:"yieldNode",value:function yieldNode(node){if(!node)return false;this._tree=node;this.type=node.type;this.from=node.from;this.to=node.to;return true;}},{key:"yieldBuf",value:function yieldBuf(index,type){this.index=index;var _this$buffer=this.buffer,start=_this$buffer.start,buffer=_this$buffer.buffer;this.type=type||buffer.set.types[buffer.buffer[index]];this.from=start+buffer.buffer[index+1];this.to=start+buffer.buffer[index+2];return true;}},{key:"yield",value:function _yield(node){if(!node)return false;if(node instanceof _TreeNode){this.buffer=null;return this.yieldNode(node);}this.buffer=node.context;return this.yieldBuf(node.index,node.type);}},{key:"toString",value:function toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString();}},{key:"enterChild",value:function enterChild(dir,pos,side){if(!this.buffer)return this["yield"](this._tree.nextChild(dir<0?this._tree._tree.children.length-1:0,dir,pos,side,this.mode));var buffer=this.buffer.buffer;var index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.buffer.start,side);if(index<0)return false;this.stack.push(this.index);return this.yieldBuf(index);}},{key:"firstChild",value:function firstChild(){return this.enterChild(1,0,4);}},{key:"lastChild",value:function lastChild(){return this.enterChild(-1,0,4);}},{key:"childAfter",value:function childAfter(pos){return this.enterChild(1,pos,2);}},{key:"childBefore",value:function childBefore(pos){return this.enterChild(-1,pos,-2);}},{key:"enter",value:function enter(pos,side){var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.mode;if(!this.buffer)return this["yield"](this._tree.enter(pos,side,mode));return mode&IterMode.ExcludeBuffers?false:this.enterChild(1,pos,side);}},{key:"parent",value:function parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var parent=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();this.buffer=null;return this.yieldNode(parent);}},{key:"sibling",value:function sibling(dir){if(!this.buffer)return!this._tree._parent?false:this["yield"](this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+dir,dir,0,4,this.mode));var buffer=this.buffer.buffer,d=this.stack.length-1;if(dir<0){var parentStart=d<0?0:this.stack[d]+4;if(this.index!=parentStart)return this.yieldBuf(buffer.findChild(parentStart,this.index,-1,0,4));}else{var after=buffer.buffer[this.index+3];if(after<(d<0?buffer.buffer.length:buffer.buffer[this.stack[d]+3]))return this.yieldBuf(after);}return d<0?this["yield"](this.buffer.parent.nextChild(this.buffer.index+dir,dir,0,4,this.mode)):false;}},{key:"nextSibling",value:function nextSibling(){return this.sibling(1);}},{key:"prevSibling",value:function prevSibling(){return this.sibling(-1);}},{key:"atLastNode",value:function atLastNode(dir){var index,parent,buffer=this.buffer;if(buffer){if(dir>0){if(this.index<buffer.buffer.buffer.length)return false;}else{for(var _i124=0;_i124<this.index;_i124++)if(buffer.buffer.buffer[_i124+3]<this.index)return false;}index=buffer.index;parent=buffer.parent;}else{var _this$_tree=this._tree;index=_this$_tree.index;parent=_this$_tree._parent;}for(;parent;_parent3=parent,index=_parent3.index,parent=_parent3._parent,_parent3){var _parent3;if(index>-1)for(var _i125=index+dir,e=dir<0?-1:parent._tree.children.length;_i125!=e;_i125+=dir){var child=parent._tree.children[_i125];if(this.mode&IterMode.IncludeAnonymous||child instanceof _TreeBuffer||!child.type.isAnonymous||hasChild(child))return false;}}return true;}},{key:"move",value:function move(dir,enter){if(enter&&this.enterChild(dir,0,4))return true;for(;;){if(this.sibling(dir))return true;if(this.atLastNode(dir)||!this.parent())return false;}}},{key:"next",value:function next(){var enter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.move(1,enter);}},{key:"prev",value:function prev(){var enter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.move(-1,enter);}},{key:"moveTo",value:function moveTo(pos){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;while(this.from==this.to||(side<1?this.from>=pos:this.from>pos)||(side>-1?this.to<=pos:this.to<pos))if(!this.parent())break;while(this.enterChild(1,pos,side)){}return this;}},{key:"node",get:function get(){if(!this.buffer)return this._tree;var cache2=this.bufferNode,result=null,depth=0;if(cache2&&cache2.context==this.buffer){scan:for(var index=this.index,d=this.stack.length;d>=0;){for(var c=cache2;c;c=c._parent)if(c.index==index){if(index==this.index)return c;result=c;depth=d+1;break scan;}index=this.stack[--d];}}for(var _i126=depth;_i126<this.stack.length;_i126++)result=new _BufferNode(this.buffer,result,this.stack[_i126]);return this.bufferNode=new _BufferNode(this.buffer,result,this.index);}},{key:"tree",get:function get(){return this.buffer?null:this._tree._tree;}},{key:"iterate",value:function iterate(enter,leave){for(var depth=0;;){var mustLeave=false;if(this.type.isAnonymous||enter(this)!==false){if(this.firstChild()){depth++;continue;}if(!this.type.isAnonymous)mustLeave=true;}for(;;){if(mustLeave&&leave)leave(this);mustLeave=this.type.isAnonymous;if(!depth)return;if(this.nextSibling())break;this.parent();depth--;mustLeave=true;}}}},{key:"matchContext",value:function matchContext(context){if(!this.buffer)return matchNodeContext(this.node.parent,context);var buffer=this.buffer.buffer,types2=buffer.set.types;for(var _i127=context.length-1,d=this.stack.length-1;_i127>=0;d--){if(d<0)return matchNodeContext(this._tree,context,_i127);var type=types2[buffer.buffer[this.stack[d]]];if(!type.isAnonymous){if(context[_i127]&&context[_i127]!=type.name)return false;_i127--;}}return true;}}]);}();function hasChild(tree){return tree.children.some(function(ch){return ch instanceof _TreeBuffer||!ch.type.isAnonymous||hasChild(ch);});}function buildTree(data2){var _a2;var buffer=data2.buffer,nodeSet2=data2.nodeSet,_data2$maxBufferLengt=data2.maxBufferLength,maxBufferLength=_data2$maxBufferLengt===void 0?DefaultBufferLength:_data2$maxBufferLengt,_data2$reused=data2.reused,reused=_data2$reused===void 0?[]:_data2$reused,_data2$minRepeatType=data2.minRepeatType,minRepeatType=_data2$minRepeatType===void 0?nodeSet2.types.length:_data2$minRepeatType;var cursor2=Array.isArray(buffer)?new _FlatBufferCursor(buffer,buffer.length):buffer;var types2=nodeSet2.types;var contextHash=0,lookAhead=0;function takeNode(parentStart,minPos,children2,positions2,inRepeat,depth){var id2=cursor2.id,start=cursor2.start,end=cursor2.end,size=cursor2.size;var lookAheadAtStart=lookAhead,contextAtStart=contextHash;while(size<0){cursor2.next();if(size==-1){var node2=reused[id2];children2.push(node2);positions2.push(start-parentStart);return;}else if(size==-3){contextHash=id2;return;}else if(size==-4){lookAhead=id2;return;}else{throw new RangeError("Unrecognized record size: ".concat(size));}}var type=types2[id2],node,buffer2;var startPos=start-parentStart;if(end-start<=maxBufferLength&&(buffer2=findBufferSize(cursor2.pos-minPos,inRepeat))){var data3=new Uint16Array(buffer2.size-buffer2.skip);var endPos=cursor2.pos-buffer2.size,index=data3.length;while(cursor2.pos>endPos)index=copyToBuffer(buffer2.start,data3,index);node=new _TreeBuffer(data3,end-buffer2.start,nodeSet2);startPos=buffer2.start-parentStart;}else{var _endPos=cursor2.pos-size;cursor2.next();var localChildren=[],localPositions=[];var localInRepeat=id2>=minRepeatType?id2:-1;var lastGroup=0,lastEnd=end;while(cursor2.pos>_endPos){if(localInRepeat>=0&&cursor2.id==localInRepeat&&cursor2.size>=0){if(cursor2.end<=lastEnd-maxBufferLength){makeRepeatLeaf(localChildren,localPositions,start,lastGroup,cursor2.end,lastEnd,localInRepeat,lookAheadAtStart,contextAtStart);lastGroup=localChildren.length;lastEnd=cursor2.end;}cursor2.next();}else if(depth>2500){takeFlatNode(start,_endPos,localChildren,localPositions);}else{takeNode(start,_endPos,localChildren,localPositions,localInRepeat,depth+1);}}if(localInRepeat>=0&&lastGroup>0&&lastGroup<localChildren.length)makeRepeatLeaf(localChildren,localPositions,start,lastGroup,start,lastEnd,localInRepeat,lookAheadAtStart,contextAtStart);localChildren.reverse();localPositions.reverse();if(localInRepeat>-1&&lastGroup>0){var make=makeBalanced(type,contextAtStart);node=balanceRange(type,localChildren,localPositions,0,localChildren.length,0,end-start,make,make);}else{node=makeTree(type,localChildren,localPositions,end-start,lookAheadAtStart-end,contextAtStart);}}children2.push(node);positions2.push(startPos);}function takeFlatNode(parentStart,minPos,children2,positions2){var nodes=[];var nodeCount=0,stopAt=-1;while(cursor2.pos>minPos){var id2=cursor2.id,start=cursor2.start,end=cursor2.end,size=cursor2.size;if(size>4){cursor2.next();}else if(stopAt>-1&&start<stopAt){break;}else{if(stopAt<0)stopAt=end-maxBufferLength;nodes.push(id2,start,end);nodeCount++;cursor2.next();}}if(nodeCount){var buffer2=new Uint16Array(nodeCount*4);var _start3=nodes[nodes.length-2];for(var _i128=nodes.length-3,j=0;_i128>=0;_i128-=3){buffer2[j++]=nodes[_i128];buffer2[j++]=nodes[_i128+1]-_start3;buffer2[j++]=nodes[_i128+2]-_start3;buffer2[j++]=j;}children2.push(new _TreeBuffer(buffer2,nodes[2]-_start3,nodeSet2));positions2.push(_start3-parentStart);}}function makeBalanced(type,contextHash2){return function(children2,positions2,length2){var lookAhead2=0,lastI=children2.length-1,last,lookAheadProp;if(lastI>=0&&(last=children2[lastI])instanceof _Tree){if(!lastI&&last.type==type&&last.length==length2)return last;if(lookAheadProp=last.prop(NodeProp.lookAhead))lookAhead2=positions2[lastI]+last.length+lookAheadProp;}return makeTree(type,children2,positions2,length2,lookAhead2,contextHash2);};}function makeRepeatLeaf(children2,positions2,base2,i,from,to,type,lookAhead2,contextHash2){var localChildren=[],localPositions=[];while(children2.length>i){localChildren.push(children2.pop());localPositions.push(positions2.pop()+base2-from);}children2.push(makeTree(nodeSet2.types[type],localChildren,localPositions,to-from,lookAhead2-to,contextHash2));positions2.push(from-base2);}function makeTree(type,children2,positions2,length2,lookAhead2,contextHash2,props){if(contextHash2){var pair2=[NodeProp.contextHash,contextHash2];props=props?[pair2].concat(props):[pair2];}if(lookAhead2>25){var _pair=[NodeProp.lookAhead,lookAhead2];props=props?[_pair].concat(props):[_pair];}return new _Tree(type,children2,positions2,length2,props);}function findBufferSize(maxSize,inRepeat){var fork=cursor2.fork();var size=0,start=0,skip=0,minStart=fork.end-maxBufferLength;var result={size:0,start:0,skip:0};scan:for(var minPos=fork.pos-maxSize;fork.pos>minPos;){var nodeSize2=fork.size;if(fork.id==inRepeat&&nodeSize2>=0){result.size=size;result.start=start;result.skip=skip;skip+=4;size+=4;fork.next();continue;}var startPos=fork.pos-nodeSize2;if(nodeSize2<0||startPos<minPos||fork.start<minStart)break;var localSkipped=fork.id>=minRepeatType?4:0;var nodeStart2=fork.start;fork.next();while(fork.pos>startPos){if(fork.size<0){if(fork.size==-3)localSkipped+=4;else break scan;}else if(fork.id>=minRepeatType){localSkipped+=4;}fork.next();}start=nodeStart2;size+=nodeSize2;skip+=localSkipped;}if(inRepeat<0||size==maxSize){result.size=size;result.start=start;result.skip=skip;}return result.size>4?result:void 0;}function copyToBuffer(bufferStart,buffer2,index){var id2=cursor2.id,start=cursor2.start,end=cursor2.end,size=cursor2.size;cursor2.next();if(size>=0&&id2<minRepeatType){var startIndex=index;if(size>4){var endPos=cursor2.pos-(size-4);while(cursor2.pos>endPos)index=copyToBuffer(bufferStart,buffer2,index);}buffer2[--index]=startIndex;buffer2[--index]=end-bufferStart;buffer2[--index]=start-bufferStart;buffer2[--index]=id2;}else if(size==-3){contextHash=id2;}else if(size==-4){lookAhead=id2;}return index;}var children=[],positions=[];while(cursor2.pos>0)takeNode(data2.start||0,data2.bufferStart||0,children,positions,-1,0);var length=(_a2=data2.length)!==null&&_a2!==void 0?_a2:children.length?positions[0]+children[0].length:0;return new _Tree(types2[data2.topID],children.reverse(),positions.reverse(),length);}var nodeSizeCache=/* @__PURE__ */new WeakMap();function nodeSize(balanceType,node){if(!balanceType.isAnonymous||node instanceof _TreeBuffer||node.type!=balanceType)return 1;var size=nodeSizeCache.get(node);if(size==null){size=1;var _iterator154=_createForOfIteratorHelper(node.children),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var child=_step154.value;if(child.type!=balanceType||!(child instanceof _Tree)){size=1;break;}size+=nodeSize(balanceType,child);}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}nodeSizeCache.set(node,size);}return size;}function balanceRange(balanceType,children,positions,from,to,start,length,mkTop,mkTree){var total=0;for(var _i129=from;_i129<to;_i129++)total+=nodeSize(balanceType,children[_i129]);var maxChild=Math.ceil(total*1.5/8);var localChildren=[],localPositions=[];function divide(children2,positions2,from2,to2,offset){for(var _i130=from2;_i130<to2;){var groupFrom=_i130,groupStart=positions2[_i130],groupSize=nodeSize(balanceType,children2[_i130]);_i130++;for(;_i130<to2;_i130++){var nextSize=nodeSize(balanceType,children2[_i130]);if(groupSize+nextSize>=maxChild)break;groupSize+=nextSize;}if(_i130==groupFrom+1){if(groupSize>maxChild){var only=children2[groupFrom];divide(only.children,only.positions,0,only.children.length,positions2[groupFrom]+offset);continue;}localChildren.push(children2[groupFrom]);}else{var length2=positions2[_i130-1]+children2[_i130-1].length-groupStart;localChildren.push(balanceRange(balanceType,children2,positions2,groupFrom,_i130,groupStart,length2,null,mkTree));}localPositions.push(groupStart+offset-start);}}divide(children,positions,from,to,0);return(mkTop||mkTree)(localChildren,localPositions,length);}var NodeWeakMap=/*#__PURE__*/function(){function NodeWeakMap(){_classCallCheck(this,NodeWeakMap);this.map=/* @__PURE__ */new WeakMap();}return _createClass(NodeWeakMap,[{key:"setBuffer",value:function setBuffer(buffer,index,value){var inner=this.map.get(buffer);if(!inner)this.map.set(buffer,inner=/* @__PURE__ */new Map());inner.set(index,value);}},{key:"getBuffer",value:function getBuffer(buffer,index){var inner=this.map.get(buffer);return inner&&inner.get(index);}},{key:"set",value:function set(node,value){if(node instanceof _BufferNode)this.setBuffer(node.context.buffer,node.index,value);else if(node instanceof _TreeNode)this.map.set(node.tree,value);}},{key:"get",value:function get(node){return node instanceof _BufferNode?this.getBuffer(node.context.buffer,node.index):node instanceof _TreeNode?this.map.get(node.tree):void 0;}},{key:"cursorSet",value:function cursorSet(cursor2,value){if(cursor2.buffer)this.setBuffer(cursor2.buffer.buffer,cursor2.index,value);else this.map.set(cursor2.tree,value);}},{key:"cursorGet",value:function cursorGet(cursor2){return cursor2.buffer?this.getBuffer(cursor2.buffer.buffer,cursor2.index):this.map.get(cursor2.tree);}}]);}();var _TreeFragment=/*#__PURE__*/function(){function TreeFragment(from,to,tree,offset){var openStart=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var openEnd=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;_classCallCheck(this,TreeFragment);this.from=from;this.to=to;this.tree=tree;this.offset=offset;this.open=(openStart?1:0)|(openEnd?2:0);}return _createClass(TreeFragment,[{key:"openStart",get:function get(){return(this.open&1)>0;}},{key:"openEnd",get:function get(){return(this.open&2)>0;}}],[{key:"addTree",value:function addTree(tree){var fragments=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var partial=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var result=[new _TreeFragment(0,tree.length,tree,0,false,partial)];var _iterator155=_createForOfIteratorHelper(fragments),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var f=_step155.value;if(f.to>tree.length)result.push(f);}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}return result;}},{key:"applyChanges",value:function applyChanges(fragments,changes){var minGap=arguments.length>2&&arguments[2]!==undefined?arguments[2]:128;if(!changes.length)return fragments;var result=[];var fI=1,nextF=fragments.length?fragments[0]:null;for(var cI=0,pos=0,off=0;;cI++){var nextC=cI<changes.length?changes[cI]:null;var nextPos=nextC?nextC.fromA:1e9;if(nextPos-pos>=minGap)while(nextF&&nextF.from<nextPos){var cut=nextF;if(pos>=cut.from||nextPos<=cut.to||off){var fFrom=Math.max(cut.from,pos)-off,fTo=Math.min(cut.to,nextPos)-off;cut=fFrom>=fTo?null:new _TreeFragment(fFrom,fTo,cut.tree,cut.offset+off,cI>0,!!nextC);}if(cut)result.push(cut);if(nextF.to>nextPos)break;nextF=fI<fragments.length?fragments[fI++]:null;}if(!nextC)break;pos=nextC.toA;off=nextC.toA-nextC.toB;}return result;}}]);}();var Parser=/*#__PURE__*/function(){function Parser(){_classCallCheck(this,Parser);}return _createClass(Parser,[{key:"startParse",value:function startParse(input,fragments,ranges){if(typeof input=="string")input=new StringInput(input);ranges=!ranges?[new Range2(0,input.length)]:ranges.length?ranges.map(function(r){return new Range2(r.from,r.to);}):[new Range2(0,0)];return this.createParse(input,fragments||[],ranges);}},{key:"parse",value:function parse(input,fragments,ranges){var parse=this.startParse(input,fragments,ranges);for(;;){var done=parse.advance();if(done)return done;}}}]);}();var StringInput=/*#__PURE__*/function(){function StringInput(string2){_classCallCheck(this,StringInput);this.string=string2;}return _createClass(StringInput,[{key:"length",get:function get(){return this.string.length;}},{key:"chunk",value:function chunk(from){return this.string.slice(from);}},{key:"lineChunks",get:function get(){return false;}},{key:"read",value:function read(from,to){return this.string.slice(from,to);}}]);}();function parseMixed(nest){return function(parse,input,fragments,ranges){return new MixedParse(parse,nest,input,fragments,ranges);};}var InnerParse=/*#__PURE__*/_createClass(function InnerParse(parser5,parse,overlay,target,from){_classCallCheck(this,InnerParse);this.parser=parser5;this.parse=parse;this.overlay=overlay;this.target=target;this.from=from;});function checkRanges(ranges){if(!ranges.length||ranges.some(function(r){return r.from>=r.to;}))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(ranges));}var ActiveOverlay=/*#__PURE__*/_createClass(function ActiveOverlay(parser5,predicate,mounts,index,start,target,prev){_classCallCheck(this,ActiveOverlay);this.parser=parser5;this.predicate=predicate;this.mounts=mounts;this.index=index;this.start=start;this.target=target;this.prev=prev;this.depth=0;this.ranges=[];});var stoppedInner=new NodeProp({perNode:true});var MixedParse=/*#__PURE__*/function(){function MixedParse(base2,nest,input,fragments,ranges){_classCallCheck(this,MixedParse);this.nest=nest;this.input=input;this.fragments=fragments;this.ranges=ranges;this.inner=[];this.innerDone=0;this.baseTree=null;this.stoppedAt=null;this.baseParse=base2;}return _createClass(MixedParse,[{key:"advance",value:function advance(){if(this.baseParse){var done2=this.baseParse.advance();if(!done2)return null;this.baseParse=null;this.baseTree=done2;this.startInner();if(this.stoppedAt!=null){var _iterator156=_createForOfIteratorHelper(this.inner),_step156;try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){var inner2=_step156.value;inner2.parse.stopAt(this.stoppedAt);}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}}}if(this.innerDone==this.inner.length){var result=this.baseTree;if(this.stoppedAt!=null)result=new _Tree(result.type,result.children,result.positions,result.length,result.propValues.concat([[stoppedInner,this.stoppedAt]]));return result;}var inner=this.inner[this.innerDone],done=inner.parse.advance();if(done){this.innerDone++;var props=Object.assign(/* @__PURE__ */Object.create(null),inner.target.props);props[NodeProp.mounted.id]=new MountedTree(done,inner.overlay,inner.parser);inner.target.props=props;}return null;}},{key:"parsedPos",get:function get(){if(this.baseParse)return 0;var pos=this.input.length;for(var _i131=this.innerDone;_i131<this.inner.length;_i131++){if(this.inner[_i131].from<pos)pos=Math.min(pos,this.inner[_i131].parse.parsedPos);}return pos;}},{key:"stopAt",value:function stopAt(pos){this.stoppedAt=pos;if(this.baseParse)this.baseParse.stopAt(pos);else for(var _i132=this.innerDone;_i132<this.inner.length;_i132++)this.inner[_i132].parse.stopAt(pos);}},{key:"startInner",value:function startInner(){var fragmentCursor=new FragmentCursor(this.fragments);var overlay=null;var covered=null;var cursor2=new TreeCursor(new _TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);scan:for(var nest,isCovered;;){var enter=true,range=void 0;if(this.stoppedAt!=null&&cursor2.from>=this.stoppedAt){enter=false;}else if(fragmentCursor.hasNode(cursor2)){if(overlay){var match=overlay.mounts.find(function(m){return m.frag.from<=cursor2.from&&m.frag.to>=cursor2.to&&m.mount.overlay;});if(match){var _iterator157=_createForOfIteratorHelper(match.mount.overlay),_step157;try{var _loop11=function _loop11(){var r=_step157.value;var from=r.from+match.pos,to=r.to+match.pos;if(from>=cursor2.from&&to<=cursor2.to&&!overlay.ranges.some(function(r2){return r2.from<to&&r2.to>from;}))overlay.ranges.push({from:from,to:to});};for(_iterator157.s();!(_step157=_iterator157.n()).done;){_loop11();}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}}}enter=false;}else if(covered&&(isCovered=checkCover(covered.ranges,cursor2.from,cursor2.to))){enter=isCovered!=2;}else if(!cursor2.type.isAnonymous&&(nest=this.nest(cursor2,this.input))&&(cursor2.from<cursor2.to||!nest.overlay)){if(!cursor2.tree)materialize(cursor2);var oldMounts=fragmentCursor.findMounts(cursor2.from,nest.parser);if(typeof nest.overlay=="function"){overlay=new ActiveOverlay(nest.parser,nest.overlay,oldMounts,this.inner.length,cursor2.from,cursor2.tree,overlay);}else{var ranges=punchRanges(this.ranges,nest.overlay||(cursor2.from<cursor2.to?[new Range2(cursor2.from,cursor2.to)]:[]));if(ranges.length)checkRanges(ranges);if(ranges.length||!nest.overlay)this.inner.push(new InnerParse(nest.parser,ranges.length?nest.parser.startParse(this.input,enterFragments(oldMounts,ranges),ranges):nest.parser.startParse(""),nest.overlay?nest.overlay.map(function(r){return new Range2(r.from-cursor2.from,r.to-cursor2.from);}):null,cursor2.tree,ranges.length?ranges[0].from:cursor2.from));if(!nest.overlay)enter=false;else if(ranges.length)covered={ranges:ranges,depth:0,prev:covered};}}else if(overlay&&(range=overlay.predicate(cursor2))){if(range===true)range=new Range2(cursor2.from,cursor2.to);if(range.from<range.to){var last=overlay.ranges.length-1;if(last>=0&&overlay.ranges[last].to==range.from)overlay.ranges[last]={from:overlay.ranges[last].from,to:range.to};else overlay.ranges.push(range);}}if(enter&&cursor2.firstChild()){if(overlay)overlay.depth++;if(covered)covered.depth++;}else{for(;;){if(cursor2.nextSibling())break;if(!cursor2.parent())break scan;if(overlay&&! --overlay.depth){var _ranges=punchRanges(this.ranges,overlay.ranges);if(_ranges.length){checkRanges(_ranges);this.inner.splice(overlay.index,0,new InnerParse(overlay.parser,overlay.parser.startParse(this.input,enterFragments(overlay.mounts,_ranges),_ranges),overlay.ranges.map(function(r){return new Range2(r.from-overlay.start,r.to-overlay.start);}),overlay.target,_ranges[0].from));}overlay=overlay.prev;}if(covered&&! --covered.depth)covered=covered.prev;}}}}}]);}();function checkCover(covered,from,to){var _iterator158=_createForOfIteratorHelper(covered),_step158;try{for(_iterator158.s();!(_step158=_iterator158.n()).done;){var range=_step158.value;if(range.from>=to)break;if(range.to>from)return range.from<=from&&range.to>=to?2:1;}}catch(err){_iterator158.e(err);}finally{_iterator158.f();}return 0;}function sliceBuf(buf,startI,endI,nodes,positions,off){if(startI<endI){var from=buf.buffer[startI+1];nodes.push(buf.slice(startI,endI,from));positions.push(from-off);}}function materialize(cursor2){var node=cursor2.node,stack=[];var buffer=node.context.buffer;do{stack.push(cursor2.index);cursor2.parent();}while(!cursor2.tree);var base2=cursor2.tree,i=base2.children.indexOf(buffer);var buf=base2.children[i],b=buf.buffer,newStack=[i];function split(startI,endI,type,innerOffset,length,stackPos){var targetI=stack[stackPos];var children=[],positions=[];sliceBuf(buf,startI,targetI,children,positions,innerOffset);var from=b[targetI+1],to=b[targetI+2];newStack.push(children.length);var child=stackPos?split(targetI+4,b[targetI+3],buf.set.types[b[targetI]],from,to-from,stackPos-1):node.toTree();children.push(child);positions.push(from-innerOffset);sliceBuf(buf,b[targetI+3],endI,children,positions,innerOffset);return new _Tree(type,children,positions,length);}base2.children[i]=split(0,b.length,_NodeType.none,0,buf.length,stack.length-1);for(var _i133=0,_newStack=newStack;_i133<_newStack.length;_i133++){var index=_newStack[_i133];var tree=cursor2.tree.children[index],pos=cursor2.tree.positions[index];cursor2["yield"](new _TreeNode(tree,pos+cursor2.from,index,cursor2._tree));}}var StructureCursor=/*#__PURE__*/function(){function StructureCursor(root,offset){_classCallCheck(this,StructureCursor);this.offset=offset;this.done=false;this.cursor=root.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts);}return _createClass(StructureCursor,[{key:"moveTo",value:function moveTo(pos){var cursor2=this.cursor,p=pos-this.offset;while(!this.done&&cursor2.from<p){if(cursor2.to>=pos&&cursor2.enter(p,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers));else if(!cursor2.next(false))this.done=true;}}},{key:"hasNode",value:function hasNode(cursor2){this.moveTo(cursor2.from);if(!this.done&&this.cursor.from+this.offset==cursor2.from&&this.cursor.tree){for(var tree=this.cursor.tree;;){if(tree==cursor2.tree)return true;if(tree.children.length&&tree.positions[0]==0&&tree.children[0]instanceof _Tree)tree=tree.children[0];else break;}}return false;}}]);}();var FragmentCursor=/*#__PURE__*/function(){function FragmentCursor(fragments){_classCallCheck(this,FragmentCursor);var _a2;this.fragments=fragments;this.curTo=0;this.fragI=0;if(fragments.length){var first=this.curFrag=fragments[0];this.curTo=(_a2=first.tree.prop(stoppedInner))!==null&&_a2!==void 0?_a2:first.to;this.inner=new StructureCursor(first.tree,-first.offset);}else{this.curFrag=this.inner=null;}}return _createClass(FragmentCursor,[{key:"hasNode",value:function hasNode(node){while(this.curFrag&&node.from>=this.curTo)this.nextFrag();return this.curFrag&&this.curFrag.from<=node.from&&this.curTo>=node.to&&this.inner.hasNode(node);}},{key:"nextFrag",value:function nextFrag(){var _a2;this.fragI++;if(this.fragI==this.fragments.length){this.curFrag=this.inner=null;}else{var frag=this.curFrag=this.fragments[this.fragI];this.curTo=(_a2=frag.tree.prop(stoppedInner))!==null&&_a2!==void 0?_a2:frag.to;this.inner=new StructureCursor(frag.tree,-frag.offset);}}},{key:"findMounts",value:function findMounts(pos,parser5){var _a2;var result=[];if(this.inner){this.inner.cursor.moveTo(pos,1);for(var pos2=this.inner.cursor.node;pos2;pos2=pos2.parent){var mount=(_a2=pos2.tree)===null||_a2===void 0?void 0:_a2.prop(NodeProp.mounted);if(mount&&mount.parser==parser5){for(var _i134=this.fragI;_i134<this.fragments.length;_i134++){var frag=this.fragments[_i134];if(frag.from>=pos2.to)break;if(frag.tree==this.curFrag.tree)result.push({frag:frag,pos:pos2.from-frag.offset,mount:mount});}}}}return result;}}]);}();function punchRanges(outer,ranges){var copy=null,current=ranges;for(var _i135=1,j=0;_i135<outer.length;_i135++){var gapFrom=outer[_i135-1].to,gapTo=outer[_i135].from;for(;j<current.length;j++){var _r6=current[j];if(_r6.from>=gapTo)break;if(_r6.to<=gapFrom)continue;if(!copy)current=copy=ranges.slice();if(_r6.from<gapFrom){copy[j]=new Range2(_r6.from,gapFrom);if(_r6.to>gapTo)copy.splice(j+1,0,new Range2(gapTo,_r6.to));}else if(_r6.to>gapTo){copy[j--]=new Range2(gapTo,_r6.to);}else{copy.splice(j--,1);}}}return current;}function findCoverChanges(a,b,from,to){var iA=0,iB=0,inA=false,inB=false,pos=-1e9;var result=[];for(;;){var nextA=iA==a.length?1e9:inA?a[iA].to:a[iA].from;var nextB=iB==b.length?1e9:inB?b[iB].to:b[iB].from;if(inA!=inB){var start=Math.max(pos,from),end=Math.min(nextA,nextB,to);if(start<end)result.push(new Range2(start,end));}pos=Math.min(nextA,nextB);if(pos==1e9)break;if(nextA==pos){if(!inA)inA=true;else{inA=false;iA++;}}if(nextB==pos){if(!inB)inB=true;else{inB=false;iB++;}}}return result;}function enterFragments(mounts,ranges){var result=[];var _iterator159=_createForOfIteratorHelper(mounts),_step159;try{var _loop12=function _loop12(){var _step159$value=_step159.value,pos=_step159$value.pos,mount=_step159$value.mount,frag=_step159$value.frag;var startPos=pos+(mount.overlay?mount.overlay[0].from:0),endPos=startPos+mount.tree.length;var from=Math.max(frag.from,startPos),to=Math.min(frag.to,endPos);if(mount.overlay){var overlay=mount.overlay.map(function(r){return new Range2(r.from+pos,r.to+pos);});var changes=findCoverChanges(ranges,overlay,from,to);for(var _i136=0,pos2=from;;_i136++){var last=_i136==changes.length,end=last?to:changes[_i136].from;if(end>pos2)result.push(new _TreeFragment(pos2,end,mount.tree,-startPos,frag.from>=pos2||frag.openStart,frag.to<=end||frag.openEnd));if(last)break;pos2=changes[_i136].to;}}else{result.push(new _TreeFragment(from,to,mount.tree,-startPos,frag.from>=startPos||frag.openStart,frag.to<=endPos||frag.openEnd));}};for(_iterator159.s();!(_step159=_iterator159.n()).done;){_loop12();}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}return result;}// ../node_modules/@lezer/highlight/dist/index.js
var nextTagID=0;var _Tag=/*#__PURE__*/function(){function Tag(name2,set,base2,modified){_classCallCheck(this,Tag);this.name=name2;this.set=set;this.base=base2;this.modified=modified;this.id=nextTagID++;}return _createClass(Tag,[{key:"toString",value:function toString(){var name2=this.name;var _iterator160=_createForOfIteratorHelper(this.modified),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var mod=_step160.value;if(mod.name)name2="".concat(mod.name,"(").concat(name2,")");}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}return name2;}}],[{key:"define",value:function define(nameOrParent,parent){var name2=typeof nameOrParent=="string"?nameOrParent:"?";if(nameOrParent instanceof _Tag)parent=nameOrParent;if(parent===null||parent===void 0?void 0:parent.base)throw new Error("Can not derive from a modified tag");var tag=new _Tag(name2,[],null,[]);tag.set.push(tag);if(parent){var _iterator161=_createForOfIteratorHelper(parent.set),_step161;try{for(_iterator161.s();!(_step161=_iterator161.n()).done;){var t2=_step161.value;tag.set.push(t2);}}catch(err){_iterator161.e(err);}finally{_iterator161.f();}}return tag;}},{key:"defineModifier",value:function defineModifier(name2){var mod=new _Modifier(name2);return function(tag){if(tag.modified.indexOf(mod)>-1)return tag;return _Modifier.get(tag.base||tag,tag.modified.concat(mod).sort(function(a,b){return a.id-b.id;}));};}}]);}();var nextModifierID=0;var _Modifier=/*#__PURE__*/function(){function Modifier(name2){_classCallCheck(this,Modifier);this.name=name2;this.instances=[];this.id=nextModifierID++;}return _createClass(Modifier,null,[{key:"get",value:function get(base2,mods){if(!mods.length)return base2;var exists=mods[0].instances.find(function(t2){return t2.base==base2&&sameArray2(mods,t2.modified);});if(exists)return exists;var set=[],tag=new _Tag(base2.name,set,base2,mods);var _iterator162=_createForOfIteratorHelper(mods),_step162;try{for(_iterator162.s();!(_step162=_iterator162.n()).done;){var m=_step162.value;m.instances.push(tag);}}catch(err){_iterator162.e(err);}finally{_iterator162.f();}var configs=powerSet(mods);var _iterator163=_createForOfIteratorHelper(base2.set),_step163;try{for(_iterator163.s();!(_step163=_iterator163.n()).done;){var parent=_step163.value;if(!parent.modified.length){var _iterator164=_createForOfIteratorHelper(configs),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var config2=_step164.value;set.push(_Modifier.get(parent,config2));}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}}}}catch(err){_iterator163.e(err);}finally{_iterator163.f();}return tag;}}]);}();function sameArray2(a,b){return a.length==b.length&&a.every(function(x,i){return x==b[i];});}function powerSet(array){var sets=[[]];for(var _i137=0;_i137<array.length;_i137++){for(var j=0,e=sets.length;j<e;j++){sets.push(sets[j].concat(array[_i137]));}}return sets.sort(function(a,b){return b.length-a.length;});}function styleTags(spec){var byName=/* @__PURE__ */Object.create(null);for(var prop in spec){var tags3=spec[prop];if(!Array.isArray(tags3))tags3=[tags3];var _iterator165=_createForOfIteratorHelper(prop.split(" ")),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var part=_step165.value;if(part){var pieces=[],mode=2,rest=part;for(var pos=0;;){if(rest=="..."&&pos>0&&pos+3==part.length){mode=1;break;}var m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rest);if(!m)throw new RangeError("Invalid path: "+part);pieces.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]);pos+=m[0].length;if(pos==part.length)break;var next=part[pos++];if(pos==part.length&&next=="!"){mode=0;break;}if(next!="/")throw new RangeError("Invalid path: "+part);rest=part.slice(pos);}var last=pieces.length-1,inner=pieces[last];if(!inner)throw new RangeError("Invalid path: "+part);var rule=new Rule(tags3,mode,last>0?pieces.slice(0,last):null);byName[inner]=rule.sort(byName[inner]);}}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}}return ruleNodeProp.add(byName);}var ruleNodeProp=new NodeProp();var Rule=/*#__PURE__*/function(){function Rule(tags3,mode,context,next){_classCallCheck(this,Rule);this.tags=tags3;this.mode=mode;this.context=context;this.next=next;}return _createClass(Rule,[{key:"opaque",get:function get(){return this.mode==0;}},{key:"inherit",get:function get(){return this.mode==1;}},{key:"sort",value:function sort(other){if(!other||other.depth<this.depth){this.next=other;return this;}other.next=this.sort(other.next);return other;}},{key:"depth",get:function get(){return this.context?this.context.length:0;}}]);}();Rule.empty=new Rule([],2,null);function tagHighlighter(tags3,options){var map=/* @__PURE__ */Object.create(null);var _iterator166=_createForOfIteratorHelper(tags3),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var style=_step166.value;if(!Array.isArray(style.tag))map[style.tag.id]=style["class"];else{var _iterator169=_createForOfIteratorHelper(style.tag),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var tag=_step169.value;map[tag.id]=style["class"];}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}}}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}var _ref14=options||{},scope=_ref14.scope,_ref14$all=_ref14.all,all=_ref14$all===void 0?null:_ref14$all;return{style:function style(tags4){var cls=all;var _iterator167=_createForOfIteratorHelper(tags4),_step167;try{for(_iterator167.s();!(_step167=_iterator167.n()).done;){var tag=_step167.value;var _iterator168=_createForOfIteratorHelper(tag.set),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var sub=_step168.value;var tagClass=map[sub.id];if(tagClass){cls=cls?cls+" "+tagClass:tagClass;break;}}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}}}catch(err){_iterator167.e(err);}finally{_iterator167.f();}return cls;},scope:scope};}function highlightTags(highlighters,tags3){var result=null;var _iterator170=_createForOfIteratorHelper(highlighters),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var highlighter=_step170.value;var value=highlighter.style(tags3);if(value)result=result?result+" "+value:value;}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}return result;}function highlightTree(tree,highlighter,putStyle){var from=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var to=arguments.length>4&&arguments[4]!==undefined?arguments[4]:tree.length;var builder=new HighlightBuilder(from,Array.isArray(highlighter)?highlighter:[highlighter],putStyle);builder.highlightRange(tree.cursor(),from,to,"",builder.highlighters);builder.flush(to);}var HighlightBuilder=/*#__PURE__*/function(){function HighlightBuilder(at,highlighters,span){_classCallCheck(this,HighlightBuilder);this.at=at;this.highlighters=highlighters;this.span=span;this["class"]="";}return _createClass(HighlightBuilder,[{key:"startSpan",value:function startSpan(at,cls){if(cls!=this["class"]){this.flush(at);if(at>this.at)this.at=at;this["class"]=cls;}}},{key:"flush",value:function flush(to){if(to>this.at&&this["class"])this.span(this.at,to,this["class"]);}},{key:"highlightRange",value:function highlightRange(cursor2,from,to,inheritedClass,highlighters){var type=cursor2.type,start=cursor2.from,end=cursor2.to;if(start>=to||end<=from)return;if(type.isTop)highlighters=this.highlighters.filter(function(h){return!h.scope||h.scope(type);});var cls=inheritedClass;var rule=getStyleTags(cursor2)||Rule.empty;var tagCls=highlightTags(highlighters,rule.tags);if(tagCls){if(cls)cls+=" ";cls+=tagCls;if(rule.mode==1)inheritedClass+=(inheritedClass?" ":"")+tagCls;}this.startSpan(Math.max(from,start),cls);if(rule.opaque)return;var mounted=cursor2.tree&&cursor2.tree.prop(NodeProp.mounted);if(mounted&&mounted.overlay){var inner=cursor2.node.enter(mounted.overlay[0].from+start,1);var innerHighlighters=this.highlighters.filter(function(h){return!h.scope||h.scope(mounted.tree.type);});var hasChild2=cursor2.firstChild();for(var _i138=0,pos=start;;_i138++){var next=_i138<mounted.overlay.length?mounted.overlay[_i138]:null;var nextPos=next?next.from+start:end;var rangeFrom2=Math.max(from,pos),rangeTo2=Math.min(to,nextPos);if(rangeFrom2<rangeTo2&&hasChild2){while(cursor2.from<rangeTo2){this.highlightRange(cursor2,rangeFrom2,rangeTo2,inheritedClass,highlighters);this.startSpan(Math.min(rangeTo2,cursor2.to),cls);if(cursor2.to>=nextPos||!cursor2.nextSibling())break;}}if(!next||nextPos>to)break;pos=next.to+start;if(pos>from){this.highlightRange(inner.cursor(),Math.max(from,next.from+start),Math.min(to,pos),"",innerHighlighters);this.startSpan(Math.min(to,pos),cls);}}if(hasChild2)cursor2.parent();}else if(cursor2.firstChild()){if(mounted)inheritedClass="";do{if(cursor2.to<=from)continue;if(cursor2.from>=to)break;this.highlightRange(cursor2,from,to,inheritedClass,highlighters);this.startSpan(Math.min(to,cursor2.to),cls);}while(cursor2.nextSibling());cursor2.parent();}}}]);}();function getStyleTags(node){var rule=node.type.prop(ruleNodeProp);while(rule&&rule.context&&!node.matchContext(rule.context))rule=rule.next;return rule||null;}var t=_Tag.define;var comment=t();var name=t();var typeName=t(name);var propertyName=t(name);var literal=t();var string=t(literal);var number=t(literal);var content=t();var heading=t(content);var keyword=t();var operator=t();var punctuation=t();var bracket=t(punctuation);var meta=t();var tags={comment:comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name,variableName:t(name),typeName:typeName,tagName:t(typeName),propertyName:propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal:literal,string:string,docString:t(string),character:t(string),attributeValue:t(string),number:number,integer:t(number),"float":t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword:keyword,self:t(keyword),"null":t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator:operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation,separator:t(punctuation),bracket:bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content:content,heading:heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta:meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:_Tag.defineModifier("definition"),constant:_Tag.defineModifier("constant"),"function":_Tag.defineModifier("function"),standard:_Tag.defineModifier("standard"),local:_Tag.defineModifier("local"),special:_Tag.defineModifier("special")};for(var name2 in tags){var val=tags[name2];if(val instanceof _Tag)val.name=name2;}var classHighlighter=tagHighlighter([{tag:tags.link,"class":"tok-link"},{tag:tags.heading,"class":"tok-heading"},{tag:tags.emphasis,"class":"tok-emphasis"},{tag:tags.strong,"class":"tok-strong"},{tag:tags.keyword,"class":"tok-keyword"},{tag:tags.atom,"class":"tok-atom"},{tag:tags.bool,"class":"tok-bool"},{tag:tags.url,"class":"tok-url"},{tag:tags.labelName,"class":"tok-labelName"},{tag:tags.inserted,"class":"tok-inserted"},{tag:tags.deleted,"class":"tok-deleted"},{tag:tags.literal,"class":"tok-literal"},{tag:tags.string,"class":"tok-string"},{tag:tags.number,"class":"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],"class":"tok-string2"},{tag:tags.variableName,"class":"tok-variableName"},{tag:tags.local(tags.variableName),"class":"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),"class":"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),"class":"tok-variableName2"},{tag:tags.definition(tags.propertyName),"class":"tok-propertyName tok-definition"},{tag:tags.typeName,"class":"tok-typeName"},{tag:tags.namespace,"class":"tok-namespace"},{tag:tags.className,"class":"tok-className"},{tag:tags.macroName,"class":"tok-macroName"},{tag:tags.propertyName,"class":"tok-propertyName"},{tag:tags.operator,"class":"tok-operator"},{tag:tags.comment,"class":"tok-comment"},{tag:tags.meta,"class":"tok-meta"},{tag:tags.invalid,"class":"tok-invalid"},{tag:tags.punctuation,"class":"tok-punctuation"}]);// ../node_modules/@codemirror/language/dist/index.js
var _a;var _languageDataProp=/* @__PURE__ */new NodeProp();function _defineLanguageFacet(baseData){return _Facet.define({combine:baseData?function(values2){return values2.concat(baseData);}:void 0});}var _sublanguageProp=/* @__PURE__ */new NodeProp();var _Language=/*#__PURE__*/function(){function _Language(data2,parser5){var extraExtensions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var name2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,_Language);this.data=data2;this.name=name2;if(!_EditorState.prototype.hasOwnProperty("tree"))Object.defineProperty(_EditorState.prototype,"tree",{get:function get(){return _syntaxTree(this);}});this.parser=parser5;this.extension=[_language.of(this),_EditorState.languageData.of(function(state,pos,side){var top2=topNodeAt(state,pos,side),data3=top2.type.prop(_languageDataProp);if(!data3)return[];var base2=state.facet(data3),sub=top2.type.prop(_sublanguageProp);if(sub){var innerNode=top2.resolve(pos-top2.from,side);var _iterator171=_createForOfIteratorHelper(sub),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var sublang=_step171.value;if(sublang.test(innerNode,state)){var data4=state.facet(sublang.facet);return sublang.type=="replace"?data4:data4.concat(base2);}}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}}return base2;})].concat(extraExtensions);}return _createClass(_Language,[{key:"isActiveAt",value:function isActiveAt(state,pos){var side=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;return topNodeAt(state,pos,side).type.prop(_languageDataProp)==this.data;}},{key:"findRegions",value:function findRegions(state){var _this73=this;var lang=state.facet(_language);if((lang===null||lang===void 0?void 0:lang.data)==this.data)return[{from:0,to:state.doc.length}];if(!lang||!lang.allowsNesting)return[];var result=[];var _explore=function explore(tree,from){if(tree.prop(_languageDataProp)==_this73.data){result.push({from:from,to:from+tree.length});return;}var mount=tree.prop(NodeProp.mounted);if(mount){if(mount.tree.prop(_languageDataProp)==_this73.data){if(mount.overlay){var _iterator172=_createForOfIteratorHelper(mount.overlay),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var _r7=_step172.value;result.push({from:_r7.from+from,to:_r7.to+from});}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}}else result.push({from:from,to:from+tree.length});return;}else if(mount.overlay){var size=result.length;_explore(mount.tree,mount.overlay[0].from+from);if(result.length>size)return;}}for(var _i139=0;_i139<tree.children.length;_i139++){var ch=tree.children[_i139];if(ch instanceof _Tree)_explore(ch,tree.positions[_i139]+from);}};_explore(_syntaxTree(state),0);return result;}},{key:"allowsNesting",get:function get(){return true;}}]);}();_Language.setState=/* @__PURE__ */_StateEffect.define();function topNodeAt(state,pos,side){var topLang=state.facet(_language),tree=_syntaxTree(state).topNode;if(!topLang||topLang.allowsNesting){for(var node=tree;node;node=node.enter(pos,side,IterMode.ExcludeBuffers))if(node.type.isTop)tree=node;}return tree;}var _LRLanguage2=/*#__PURE__*/function(_Language2){function _LRLanguage(data2,parser5,name2){var _this74;_classCallCheck(this,_LRLanguage);_this74=_callSuper(this,_LRLanguage,[data2,parser5,[],name2]);_this74.parser=parser5;return _this74;}_inherits(_LRLanguage,_Language2);return _createClass(_LRLanguage,[{key:"configure",value:function configure(options,name2){return new _LRLanguage2(this.data,this.parser.configure(options),name2||this.name);}},{key:"allowsNesting",get:function get(){return this.parser.hasWrappers();}}],[{key:"define",value:function define(spec){var data2=_defineLanguageFacet(spec.languageData);return new _LRLanguage2(data2,spec.parser.configure({props:[_languageDataProp.add(function(type){return type.isTop?data2:void 0;})]}),spec.name);}}]);}(_Language);function _syntaxTree(state){var field=state.field(_Language.state,false);return field?field.tree:_Tree.empty;}function _ensureSyntaxTree(state,upto){var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:50;var _a2;var parse=(_a2=state.field(_Language.state,false))===null||_a2===void 0?void 0:_a2.context;if(!parse)return null;var oldVieport=parse.viewport;parse.updateViewport({from:0,to:upto});var result=parse.isDone(upto)||parse.work(timeout,upto)?parse.tree:null;parse.updateViewport(oldVieport);return result;}function _syntaxTreeAvailable(state){var upto=arguments.length>1&&arguments[1]!==undefined?arguments[1]:state.doc.length;var _a2;return((_a2=state.field(_Language.state,false))===null||_a2===void 0?void 0:_a2.context.isDone(upto))||false;}function _forceParsing(view){var upto=arguments.length>1&&arguments[1]!==undefined?arguments[1]:view.viewport.to;var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;var success=_ensureSyntaxTree(view.state,upto,timeout);if(success!=_syntaxTree(view.state))view.dispatch({});return!!success;}function _syntaxParserRunning(view){var _a2;return((_a2=view.plugin(parseWorker))===null||_a2===void 0?void 0:_a2.isWorking())||false;}var _DocInput=/*#__PURE__*/function(){function _DocInput(doc2){_classCallCheck(this,_DocInput);this.doc=doc2;this.cursorPos=0;this.string="";this.cursor=doc2.iter();}return _createClass(_DocInput,[{key:"length",get:function get(){return this.doc.length;}},{key:"syncTo",value:function syncTo(pos){this.string=this.cursor.next(pos-this.cursorPos).value;this.cursorPos=pos+this.string.length;return this.cursorPos-this.string.length;}},{key:"chunk",value:function chunk(pos){this.syncTo(pos);return this.string;}},{key:"lineChunks",get:function get(){return true;}},{key:"read",value:function read(from,to){var stringStart=this.cursorPos-this.string.length;if(from<stringStart||to>=this.cursorPos)return this.doc.sliceString(from,to);else return this.string.slice(from-stringStart,to-stringStart);}}]);}();var currentContext=null;var _ParseContext2=/*#__PURE__*/function(){function _ParseContext(parser5,state){var fragments=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var tree=arguments.length>3?arguments[3]:undefined;var treeLen=arguments.length>4?arguments[4]:undefined;var viewport=arguments.length>5?arguments[5]:undefined;var skipped=arguments.length>6?arguments[6]:undefined;var scheduleOn=arguments.length>7?arguments[7]:undefined;_classCallCheck(this,_ParseContext);this.parser=parser5;this.state=state;this.fragments=fragments;this.tree=tree;this.treeLen=treeLen;this.viewport=viewport;this.skipped=skipped;this.scheduleOn=scheduleOn;this.parse=null;this.tempSkipped=[];}return _createClass(_ParseContext,[{key:"startParse",value:function startParse(){return this.parser.startParse(new _DocInput(this.state.doc),this.fragments);}},{key:"work",value:function work(until,upto){var _this75=this;if(upto!=null&&upto>=this.state.doc.length)upto=void 0;if(this.tree!=_Tree.empty&&this.isDone(upto!==null&&upto!==void 0?upto:this.state.doc.length)){this.takeTree();return true;}return this.withContext(function(){var _a2;if(typeof until=="number"){var endTime=Date.now()+until;until=function until(){return Date.now()>endTime;};}if(!_this75.parse)_this75.parse=_this75.startParse();if(upto!=null&&(_this75.parse.stoppedAt==null||_this75.parse.stoppedAt>upto)&&upto<_this75.state.doc.length)_this75.parse.stopAt(upto);for(;;){var done=_this75.parse.advance();if(done){_this75.fragments=_this75.withoutTempSkipped(_TreeFragment.addTree(done,_this75.fragments,_this75.parse.stoppedAt!=null));_this75.treeLen=(_a2=_this75.parse.stoppedAt)!==null&&_a2!==void 0?_a2:_this75.state.doc.length;_this75.tree=done;_this75.parse=null;if(_this75.treeLen<(upto!==null&&upto!==void 0?upto:_this75.state.doc.length))_this75.parse=_this75.startParse();else return true;}if(until())return false;}});}},{key:"takeTree",value:function takeTree(){var _this76=this;var pos,tree;if(this.parse&&(pos=this.parse.parsedPos)>=this.treeLen){if(this.parse.stoppedAt==null||this.parse.stoppedAt>pos)this.parse.stopAt(pos);this.withContext(function(){while(!(tree=_this76.parse.advance())){}});this.treeLen=pos;this.tree=tree;this.fragments=this.withoutTempSkipped(_TreeFragment.addTree(this.tree,this.fragments,true));this.parse=null;}}},{key:"withContext",value:function withContext(f){var prev=currentContext;currentContext=this;try{return f();}finally{currentContext=prev;}}},{key:"withoutTempSkipped",value:function withoutTempSkipped(fragments){for(var _r8;_r8=this.tempSkipped.pop();)fragments=cutFragments(fragments,_r8.from,_r8.to);return fragments;}},{key:"changes",value:function changes(_changes,newState){var fragments=this.fragments,tree=this.tree,treeLen=this.treeLen,viewport=this.viewport,skipped=this.skipped;this.takeTree();if(!_changes.empty){var ranges=[];_changes.iterChangedRanges(function(fromA,toA,fromB,toB){return ranges.push({fromA:fromA,toA:toA,fromB:fromB,toB:toB});});fragments=_TreeFragment.applyChanges(fragments,ranges);tree=_Tree.empty;treeLen=0;viewport={from:_changes.mapPos(viewport.from,-1),to:_changes.mapPos(viewport.to,1)};if(this.skipped.length){skipped=[];var _iterator173=_createForOfIteratorHelper(this.skipped),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var _r9=_step173.value;var from=_changes.mapPos(_r9.from,1),to=_changes.mapPos(_r9.to,-1);if(from<to)skipped.push({from:from,to:to});}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}}}return new _ParseContext2(this.parser,newState,fragments,tree,treeLen,viewport,skipped,this.scheduleOn);}},{key:"updateViewport",value:function updateViewport(viewport){if(this.viewport.from==viewport.from&&this.viewport.to==viewport.to)return false;this.viewport=viewport;var startLen=this.skipped.length;for(var _i140=0;_i140<this.skipped.length;_i140++){var _this$skipped$_i=this.skipped[_i140],from=_this$skipped$_i.from,to=_this$skipped$_i.to;if(from<viewport.to&&to>viewport.from){this.fragments=cutFragments(this.fragments,from,to);this.skipped.splice(_i140--,1);}}if(this.skipped.length>=startLen)return false;this.reset();return true;}},{key:"reset",value:function reset(){if(this.parse){this.takeTree();this.parse=null;}}},{key:"skipUntilInView",value:function skipUntilInView(from,to){this.skipped.push({from:from,to:to});}},{key:"isDone",value:function isDone(upto){upto=Math.min(upto,this.state.doc.length);var frags=this.fragments;return this.treeLen>=upto&&frags.length&&frags[0].from==0&&frags[0].to>=upto;}}],[{key:"create",value:function create(parser5,state,viewport){return new _ParseContext2(parser5,state,[],_Tree.empty,0,viewport,[],null);}},{key:"getSkippingParser",value:function getSkippingParser(until){return new(/*#__PURE__*/function(_Parser){function _class9(){_classCallCheck(this,_class9);return _callSuper(this,_class9,arguments);}_inherits(_class9,_Parser);return _createClass(_class9,[{key:"createParse",value:function createParse(input,fragments,ranges){var from=ranges[0].from,to=ranges[ranges.length-1].to;var parser5={parsedPos:from,advance:function advance(){var cx=currentContext;if(cx){var _iterator174=_createForOfIteratorHelper(ranges),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var _r0=_step174.value;cx.tempSkipped.push(_r0);}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}if(until)cx.scheduleOn=cx.scheduleOn?Promise.all([cx.scheduleOn,until]):until;}this.parsedPos=to;return new _Tree(_NodeType.none,[],[],to-from);},stoppedAt:null,stopAt:function stopAt(){}};return parser5;}}]);}(Parser))();}},{key:"get",value:function get(){return currentContext;}}]);}();function cutFragments(fragments,from,to){return _TreeFragment.applyChanges(fragments,[{fromA:from,toA:to,fromB:from,toB:to}]);}var _LanguageState=/*#__PURE__*/function(){function LanguageState(context){_classCallCheck(this,LanguageState);this.context=context;this.tree=context.tree;}return _createClass(LanguageState,[{key:"apply",value:function apply(tr){if(!tr.docChanged&&this.tree==this.context.tree)return this;var newCx=this.context.changes(tr.changes,tr.state);var upto=this.context.treeLen==tr.startState.doc.length?void 0:Math.max(tr.changes.mapPos(this.context.treeLen),newCx.viewport.to);if(!newCx.work(20,upto))newCx.takeTree();return new _LanguageState(newCx);}}],[{key:"init",value:function init(state){var vpTo=Math.min(3e3,state.doc.length);var parseState=_ParseContext2.create(state.facet(_language).parser,state,{from:0,to:vpTo});if(!parseState.work(20,vpTo))parseState.takeTree();return new _LanguageState(parseState);}}]);}();_Language.state=/* @__PURE__ */_StateField.define({create:_LanguageState.init,update:function update(value,tr){var _iterator175=_createForOfIteratorHelper(tr.effects),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){var e=_step175.value;if(e.is(_Language.setState))return e.value;}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}if(tr.startState.facet(_language)!=tr.state.facet(_language))return _LanguageState.init(tr.state);return value.apply(tr);}});var requestIdle=function requestIdle(callback){var timeout=setTimeout(function(){return callback();},500);return function(){return clearTimeout(timeout);};};if(typeof requestIdleCallback!="undefined")requestIdle=function requestIdle(callback){var idle=-1,timeout=setTimeout(function(){idle=requestIdleCallback(callback,{timeout:500-100});},100);return function(){return idle<0?clearTimeout(timeout):cancelIdleCallback(idle);};};var isInputPending=typeof navigator!="undefined"&&((_a=navigator.scheduling)===null||_a===void 0?void 0:_a.isInputPending)?function(){return navigator.scheduling.isInputPending();}:null;var parseWorker=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function ParseWorker(view){_classCallCheck(this,ParseWorker);this.view=view;this.working=null;this.workScheduled=0;this.chunkEnd=-1;this.chunkBudget=-1;this.work=this.work.bind(this);this.scheduleWork();}return _createClass(ParseWorker,[{key:"update",value:function update(_update20){var cx=this.view.state.field(_Language.state).context;if(cx.updateViewport(_update20.view.viewport)||this.view.viewport.to>cx.treeLen)this.scheduleWork();if(_update20.docChanged||_update20.selectionSet){if(this.view.hasFocus)this.chunkBudget+=50;this.scheduleWork();}this.checkAsyncSchedule(cx);}},{key:"scheduleWork",value:function scheduleWork(){if(this.working)return;var state=this.view.state,field=state.field(_Language.state);if(field.tree!=field.context.tree||!field.context.isDone(state.doc.length))this.working=requestIdle(this.work);}},{key:"work",value:function work(deadline){this.working=null;var now=Date.now();if(this.chunkEnd<now&&(this.chunkEnd<0||this.view.hasFocus)){this.chunkEnd=now+3e4;this.chunkBudget=3e3;}if(this.chunkBudget<=0)return;var _this$view3=this.view,state=_this$view3.state,vpTo=_this$view3.viewport.to,field=state.field(_Language.state);if(field.tree==field.context.tree&&field.context.isDone(vpTo+1e5))return;var endTime=Date.now()+Math.min(this.chunkBudget,100,deadline&&!isInputPending?Math.max(25,deadline.timeRemaining()-5):1e9);var viewportFirst=field.context.treeLen<vpTo&&state.doc.length>vpTo+1e3;var done=field.context.work(function(){return isInputPending&&isInputPending()||Date.now()>endTime;},vpTo+(viewportFirst?0:1e5));this.chunkBudget-=Date.now()-now;if(done||this.chunkBudget<=0){field.context.takeTree();this.view.dispatch({effects:_Language.setState.of(new _LanguageState(field.context))});}if(this.chunkBudget>0&&!(done&&!viewportFirst))this.scheduleWork();this.checkAsyncSchedule(field.context);}},{key:"checkAsyncSchedule",value:function checkAsyncSchedule(cx){var _this77=this;if(cx.scheduleOn){this.workScheduled++;cx.scheduleOn.then(function(){return _this77.scheduleWork();})["catch"](function(err){return logException(_this77.view.state,err);}).then(function(){return _this77.workScheduled--;});cx.scheduleOn=null;}}},{key:"destroy",value:function destroy(){if(this.working)this.working();}},{key:"isWorking",value:function isWorking(){return!!(this.working||this.workScheduled>0);}}]);}(),{eventHandlers:{focus:function focus(){this.scheduleWork();}}});var _language=/* @__PURE__ */_Facet.define({combine:function combine(languages){return languages.length?languages[0]:null;},enables:function enables(language2){return[_Language.state,parseWorker,_EditorView.contentAttributes.compute([language2],function(state){var lang=state.facet(language2);return lang&&lang.name?{"data-language":lang.name}:{};})];}});var _LanguageSupport=/*#__PURE__*/_createClass(function _LanguageSupport(language2){var support=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,_LanguageSupport);this.language=language2;this.support=support;this.extension=[language2,support];});var _LanguageDescription2=/*#__PURE__*/function(){function _LanguageDescription(name2,alias,extensions,filename,loadFunc){var support=arguments.length>5&&arguments[5]!==undefined?arguments[5]:void 0;_classCallCheck(this,_LanguageDescription);this.name=name2;this.alias=alias;this.extensions=extensions;this.filename=filename;this.loadFunc=loadFunc;this.support=support;this.loading=null;}return _createClass(_LanguageDescription,[{key:"load",value:function load(){var _this78=this;return this.loading||(this.loading=this.loadFunc().then(function(support){return _this78.support=support;},function(err){_this78.loading=null;throw err;}));}}],[{key:"of",value:function of(spec){var load=spec.load,support=spec.support;if(!load){if(!support)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");load=function load(){return Promise.resolve(support);};}return new _LanguageDescription2(spec.name,(spec.alias||[]).concat(spec.name).map(function(s){return s.toLowerCase();}),spec.extensions||[],spec.filename,load,support);}},{key:"matchFilename",value:function matchFilename(descs,filename){var _iterator176=_createForOfIteratorHelper(descs),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var _d2=_step176.value;if(_d2.filename&&_d2.filename.test(filename))return _d2;}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}var ext=/\.([^.]+)$/.exec(filename);if(ext){var _iterator177=_createForOfIteratorHelper(descs),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var d=_step177.value;if(d.extensions.indexOf(ext[1])>-1)return d;}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}}return null;}},{key:"matchLanguageName",value:function matchLanguageName(descs,name2){var fuzzy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;name2=name2.toLowerCase();var _iterator178=_createForOfIteratorHelper(descs),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var _d3=_step178.value;if(_d3.alias.some(function(a){return a==name2;}))return _d3;}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}if(fuzzy){var _iterator179=_createForOfIteratorHelper(descs),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var d=_step179.value;var _iterator180=_createForOfIteratorHelper(d.alias),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var a=_step180.value;var found=name2.indexOf(a);if(found>-1&&(a.length>2||!/\w/.test(name2[found-1])&&!/\w/.test(name2[found+a.length])))return d;}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}return null;}}]);}();var _indentService=/* @__PURE__ */_Facet.define();var _indentUnit=/* @__PURE__ */_Facet.define({combine:function combine(values2){if(!values2.length)return"  ";var unit=values2[0];if(!unit||/\S/.test(unit)||Array.from(unit).some(function(e){return e!=unit[0];}))throw new Error("Invalid indent unit: "+JSON.stringify(values2[0]));return unit;}});function _getIndentUnit(state){var unit=state.facet(_indentUnit);return unit.charCodeAt(0)==9?state.tabSize*unit.length:unit.length;}function _indentString(state,cols){var result="",ts=state.tabSize,ch=state.facet(_indentUnit)[0];if(ch=="	"){while(cols>=ts){result+="	";cols-=ts;}ch=" ";}for(var _i141=0;_i141<cols;_i141++)result+=ch;return result;}function _getIndentation(context,pos){if(context instanceof _EditorState)context=new _IndentContext(context);var _iterator181=_createForOfIteratorHelper(context.state.facet(_indentService)),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var service=_step181.value;var result=service(context,pos);if(result!==void 0)return result;}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}var tree=_syntaxTree(context.state);return tree.length>=pos?syntaxIndentation(context,tree,pos):null;}function _indentRange(state,from,to){var updated=/* @__PURE__ */Object.create(null);var context=new _IndentContext(state,{overrideIndentation:function overrideIndentation(start){var _a2;return(_a2=updated[start])!==null&&_a2!==void 0?_a2:-1;}});var changes=[];for(var pos=from;pos<=to;){var line=state.doc.lineAt(pos);pos=line.to+1;var indent=_getIndentation(context,line.from);if(indent==null)continue;if(!/\S/.test(line.text))indent=0;var cur2=/^\s*/.exec(line.text)[0];var norm=_indentString(state,indent);if(cur2!=norm){updated[line.from]=indent;changes.push({from:line.from,to:line.from+cur2.length,insert:norm});}}return state.changes(changes);}var _IndentContext=/*#__PURE__*/function(){function _IndentContext(state){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,_IndentContext);this.state=state;this.options=options;this.unit=_getIndentUnit(state);}return _createClass(_IndentContext,[{key:"lineAt",value:function lineAt(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var line=this.state.doc.lineAt(pos);var _this$options=this.options,simulateBreak=_this$options.simulateBreak,simulateDoubleBreak=_this$options.simulateDoubleBreak;if(simulateBreak!=null&&simulateBreak>=line.from&&simulateBreak<=line.to){if(simulateDoubleBreak&&simulateBreak==pos)return{text:"",from:pos};else if(bias<0?simulateBreak<pos:simulateBreak<=pos)return{text:line.text.slice(simulateBreak-line.from),from:simulateBreak};else return{text:line.text.slice(0,simulateBreak-line.from),from:line.from};}return line;}},{key:"textAfterPos",value:function textAfterPos(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(this.options.simulateDoubleBreak&&pos==this.options.simulateBreak)return"";var _this$lineAt=this.lineAt(pos,bias),text=_this$lineAt.text,from=_this$lineAt.from;return text.slice(pos-from,Math.min(text.length,pos+100-from));}},{key:"column",value:function column(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var _this$lineAt2=this.lineAt(pos,bias),text=_this$lineAt2.text,from=_this$lineAt2.from;var result=this.countColumn(text,pos-from);var override=this.options.overrideIndentation?this.options.overrideIndentation(from):-1;if(override>-1)result+=override-this.countColumn(text,text.search(/\S|$/));return result;}},{key:"countColumn",value:function countColumn(line){var pos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:line.length;return _countColumn(line,this.state.tabSize,pos);}},{key:"lineIndent",value:function lineIndent(pos){var bias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var _this$lineAt3=this.lineAt(pos,bias),text=_this$lineAt3.text,from=_this$lineAt3.from;var override=this.options.overrideIndentation;if(override){var overriden=override(from);if(overriden>-1)return overriden;}return this.countColumn(text,text.search(/\S|$/));}},{key:"simulatedBreak",get:function get(){return this.options.simulateBreak||null;}}]);}();var _indentNodeProp=/* @__PURE__ */new NodeProp();function syntaxIndentation(cx,ast,pos){var stack=ast.resolveStack(pos);var inner=ast.resolveInner(pos,-1).resolve(pos,0).enterUnfinishedNodesBefore(pos);if(inner!=stack.node){var add2=[];for(var cur2=inner;cur2&&!(cur2.from==stack.node.from&&cur2.type==stack.node.type);cur2=cur2.parent)add2.push(cur2);for(var _i142=add2.length-1;_i142>=0;_i142--)stack={node:add2[_i142],next:stack};}return indentFor(stack,cx,pos);}function indentFor(stack,cx,pos){for(var cur2=stack;cur2;cur2=cur2.next){var strategy=indentStrategy(cur2.node);if(strategy)return strategy(_TreeIndentContext2.create(cx,pos,cur2));}return 0;}function ignoreClosed(cx){return cx.pos==cx.options.simulateBreak&&cx.options.simulateDoubleBreak;}function indentStrategy(tree){var strategy=tree.type.prop(_indentNodeProp);if(strategy)return strategy;var first=tree.firstChild,close;if(first&&(close=first.type.prop(NodeProp.closedBy))){var last=tree.lastChild,closed=last&&close.indexOf(last.name)>-1;return function(cx){return delimitedStrategy(cx,true,1,void 0,closed&&!ignoreClosed(cx)?last.from:void 0);};}return tree.parent==null?topIndent:null;}function topIndent(){return 0;}var _TreeIndentContext2=/*#__PURE__*/function(_IndentContext2){function _TreeIndentContext(base2,pos,context){var _this79;_classCallCheck(this,_TreeIndentContext);_this79=_callSuper(this,_TreeIndentContext,[base2.state,base2.options]);_this79.base=base2;_this79.pos=pos;_this79.context=context;return _this79;}_inherits(_TreeIndentContext,_IndentContext2);return _createClass(_TreeIndentContext,[{key:"node",get:function get(){return this.context.node;}},{key:"textAfter",get:function get(){return this.textAfterPos(this.pos);}},{key:"baseIndent",get:function get(){return this.baseIndentFor(this.node);}},{key:"baseIndentFor",value:function baseIndentFor(node){var line=this.state.doc.lineAt(node.from);for(;;){var atBreak=node.resolve(line.from);while(atBreak.parent&&atBreak.parent.from==atBreak.from)atBreak=atBreak.parent;if(isParent(atBreak,node))break;line=this.state.doc.lineAt(atBreak.from);}return this.lineIndent(line.from);}},{key:"continue",value:function _continue(){return indentFor(this.context.next,this.base,this.pos);}}],[{key:"create",value:function create(base2,pos,context){return new _TreeIndentContext2(base2,pos,context);}}]);}(_IndentContext);function isParent(parent,of){for(var cur2=of;cur2;cur2=cur2.parent)if(parent==cur2)return true;return false;}function bracketedAligned(context){var tree=context.node;var openToken=tree.childAfter(tree.from),last=tree.lastChild;if(!openToken)return null;var sim=context.options.simulateBreak;var openLine=context.state.doc.lineAt(openToken.from);var lineEnd2=sim==null||sim<=openLine.from?openLine.to:Math.min(openLine.to,sim);for(var pos=openToken.to;;){var next=tree.childAfter(pos);if(!next||next==last)return null;if(!next.type.isSkipped){if(next.from>=lineEnd2)return null;var space4=/^ */.exec(openLine.text.slice(openToken.to-openLine.from))[0].length;return{from:openToken.from,to:openToken.to+space4};}pos=next.to;}}function _delimitedIndent(_ref15){var closing2=_ref15.closing,_ref15$align=_ref15.align,align=_ref15$align===void 0?true:_ref15$align,_ref15$units=_ref15.units,units=_ref15$units===void 0?1:_ref15$units;return function(context){return delimitedStrategy(context,align,units,closing2);};}function delimitedStrategy(context,align,units,closing2,closedAt){var after=context.textAfter,space4=after.match(/^\s*/)[0].length;var closed=closing2&&after.slice(space4,space4+closing2.length)==closing2||closedAt==context.pos+space4;var aligned=align?bracketedAligned(context):null;if(aligned)return closed?context.column(aligned.from):context.column(aligned.to);return context.baseIndent+(closed?0:context.unit*units);}var _flatIndent=function _flatIndent(context){return context.baseIndent;};function _continuedIndent(){var _ref16=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},except=_ref16.except,_ref16$units=_ref16.units,units=_ref16$units===void 0?1:_ref16$units;return function(context){var matchExcept=except&&except.test(context.textAfter);return context.baseIndent+(matchExcept?0:units*context.unit);};}var DontIndentBeyond=200;function _indentOnInput(){return _EditorState.transactionFilter.of(function(tr){if(!tr.docChanged||!tr.isUserEvent("input.type")&&!tr.isUserEvent("input.complete"))return tr;var rules=tr.startState.languageDataAt("indentOnInput",tr.startState.selection.main.head);if(!rules.length)return tr;var doc2=tr.newDoc,head=tr.newSelection.main.head,line=doc2.lineAt(head);if(head>line.from+DontIndentBeyond)return tr;var lineStart=doc2.sliceString(line.from,head);if(!rules.some(function(r){return r.test(lineStart);}))return tr;var state=tr.state,last=-1,changes=[];var _iterator182=_createForOfIteratorHelper(state.selection.ranges),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var head2=_step182.value.head;var line2=state.doc.lineAt(head2);if(line2.from==last)continue;last=line2.from;var indent=_getIndentation(state,line2.from);if(indent==null)continue;var cur2=/^\s*/.exec(line2.text)[0];var norm=_indentString(state,indent);if(cur2!=norm)changes.push({from:line2.from,to:line2.from+cur2.length,insert:norm});}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}return changes.length?[tr,{changes:changes,sequential:true}]:tr;});}var _foldService=/* @__PURE__ */_Facet.define();var _foldNodeProp=/* @__PURE__ */new NodeProp();function _foldInside(node){var first=node.firstChild,last=node.lastChild;return first&&first.to<last.from?{from:first.to,to:last.type.isError?node.to:last.from}:null;}function syntaxFolding(state,start,end){var tree=_syntaxTree(state);if(tree.length<end)return null;var stack=tree.resolveStack(end,1);var found=null;for(var iter=stack;iter;iter=iter.next){var cur2=iter.node;if(cur2.to<=end||cur2.from>end)continue;if(found&&cur2.from<start)break;var prop=cur2.type.prop(_foldNodeProp);if(prop&&(cur2.to<tree.length-50||tree.length==state.doc.length||!isUnfinished(cur2))){var value=prop(cur2,state);if(value&&value.from<=end&&value.from>=start&&value.to>end)found=value;}}return found;}function isUnfinished(node){var ch=node.lastChild;return ch&&ch.to==node.to&&ch.type.isError;}function _foldable(state,lineStart,lineEnd2){var _iterator183=_createForOfIteratorHelper(state.facet(_foldService)),_step183;try{for(_iterator183.s();!(_step183=_iterator183.n()).done;){var service=_step183.value;var result=service(state,lineStart,lineEnd2);if(result)return result;}}catch(err){_iterator183.e(err);}finally{_iterator183.f();}return syntaxFolding(state,lineStart,lineEnd2);}function mapRange(range,mapping){var from=mapping.mapPos(range.from,1),to=mapping.mapPos(range.to,-1);return from>=to?void 0:{from:from,to:to};}var _foldEffect=/* @__PURE__ */_StateEffect.define({map:mapRange});var _unfoldEffect=/* @__PURE__ */_StateEffect.define({map:mapRange});function selectedLines(view){var lines=[];var _iterator184=_createForOfIteratorHelper(view.state.selection.ranges),_step184;try{var _loop13=function _loop13(){var head=_step184.value.head;if(lines.some(function(l){return l.from<=head&&l.to>=head;}))return 1;// continue
lines.push(view.lineBlockAt(head));};for(_iterator184.s();!(_step184=_iterator184.n()).done;){if(_loop13())continue;}}catch(err){_iterator184.e(err);}finally{_iterator184.f();}return lines;}var _foldState=/* @__PURE__ */_StateField.define({create:function create(){return Decoration.none;},update:function update(folded,tr){folded=folded.map(tr.changes);var _iterator185=_createForOfIteratorHelper(tr.effects),_step185;try{var _loop14=function _loop14(){var e=_step185.value;if(e.is(_foldEffect)&&!foldExists(folded,e.value.from,e.value.to)){var _tr$state$facet=tr.state.facet(foldConfig),preparePlaceholder=_tr$state$facet.preparePlaceholder;var widget=!preparePlaceholder?foldWidget:Decoration.replace({widget:new PreparedFoldWidget(preparePlaceholder(tr.state,e.value))});folded=folded.update({add:[widget.range(e.value.from,e.value.to)]});}else if(e.is(_unfoldEffect)){folded=folded.update({filter:function filter(from,to){return e.value.from!=from||e.value.to!=to;},filterFrom:e.value.from,filterTo:e.value.to});}};for(_iterator185.s();!(_step185=_iterator185.n()).done;){_loop14();}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}if(tr.selection){var onSelection=false,head=tr.selection.main.head;folded.between(head,head,function(a,b){if(a<head&&b>head)onSelection=true;});if(onSelection)folded=folded.update({filterFrom:head,filterTo:head,filter:function filter(a,b){return b<=head||a>=head;}});}return folded;},provide:function provide(f){return _EditorView.decorations.from(f);},toJSON:function toJSON(folded,state){var ranges=[];folded.between(0,state.doc.length,function(from,to){ranges.push(from,to);});return ranges;},fromJSON:function fromJSON(value){if(!Array.isArray(value)||value.length%2)throw new RangeError("Invalid JSON for fold state");var ranges=[];for(var _i143=0;_i143<value.length;){var from=value[_i143++],to=value[_i143++];if(typeof from!="number"||typeof to!="number")throw new RangeError("Invalid JSON for fold state");ranges.push(foldWidget.range(from,to));}return Decoration.set(ranges,true);}});function _foldedRanges(state){return state.field(_foldState,false)||_RangeSet.empty;}function findFold(state,from,to){var _a2;var found=null;(_a2=state.field(_foldState,false))===null||_a2===void 0?void 0:_a2.between(from,to,function(from2,to2){if(!found||found.from>from2)found={from:from2,to:to2};});return found;}function foldExists(folded,from,to){var found=false;folded.between(from,from,function(a,b){if(a==from&&b==to)found=true;});return found;}function maybeEnable(state,other){return state.field(_foldState,false)?other:other.concat(_StateEffect.appendConfig.of(_codeFolding()));}var _foldCode=function _foldCode(view){var _iterator186=_createForOfIteratorHelper(selectedLines(view)),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var line=_step186.value;var range=_foldable(view.state,line.from,line.to);if(range){view.dispatch({effects:maybeEnable(view.state,[_foldEffect.of(range),announceFold(view,range)])});return true;}}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}return false;};var _unfoldCode=function _unfoldCode(view){if(!view.state.field(_foldState,false))return false;var effects=[];var _iterator187=_createForOfIteratorHelper(selectedLines(view)),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var line=_step187.value;var folded=findFold(view.state,line.from,line.to);if(folded)effects.push(_unfoldEffect.of(folded),announceFold(view,folded,false));}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}if(effects.length)view.dispatch({effects:effects});return effects.length>0;};function announceFold(view,range){var fold=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var lineFrom=view.state.doc.lineAt(range.from).number,lineTo=view.state.doc.lineAt(range.to).number;return _EditorView.announce.of("".concat(view.state.phrase(fold?"Folded lines":"Unfolded lines")," ").concat(lineFrom," ").concat(view.state.phrase("to")," ").concat(lineTo,"."));}var _foldAll=function _foldAll(view){var state=view.state,effects=[];for(var pos=0;pos<state.doc.length;){var line=view.lineBlockAt(pos),range=_foldable(state,line.from,line.to);if(range)effects.push(_foldEffect.of(range));pos=(range?view.lineBlockAt(range.to):line).to+1;}if(effects.length)view.dispatch({effects:maybeEnable(view.state,effects)});return!!effects.length;};var _unfoldAll=function _unfoldAll(view){var field=view.state.field(_foldState,false);if(!field||!field.size)return false;var effects=[];field.between(0,view.state.doc.length,function(from,to){effects.push(_unfoldEffect.of({from:from,to:to}));});view.dispatch({effects:effects});return true;};function foldableContainer(view,lineBlock){for(var line=lineBlock;;){var foldableRegion=_foldable(view.state,line.from,line.to);if(foldableRegion&&foldableRegion.to>lineBlock.from)return foldableRegion;if(!line.from)return null;line=view.lineBlockAt(line.from-1);}}var _toggleFold=function _toggleFold(view){var effects=[];var _iterator188=_createForOfIteratorHelper(selectedLines(view)),_step188;try{for(_iterator188.s();!(_step188=_iterator188.n()).done;){var line=_step188.value;var folded=findFold(view.state,line.from,line.to);if(folded){effects.push(_unfoldEffect.of(folded),announceFold(view,folded,false));}else{var foldRange=foldableContainer(view,line);if(foldRange)effects.push(_foldEffect.of(foldRange),announceFold(view,foldRange));}}}catch(err){_iterator188.e(err);}finally{_iterator188.f();}if(effects.length>0)view.dispatch({effects:maybeEnable(view.state,effects)});return!!effects.length;};var _foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:_foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:_unfoldCode},{key:"Ctrl-Alt-[",run:_foldAll},{key:"Ctrl-Alt-]",run:_unfoldAll}];var defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"};var foldConfig=/* @__PURE__ */_Facet.define({combine:function combine(values2){return combineConfig(values2,defaultConfig);}});function _codeFolding(config2){var result=[_foldState,baseTheme$12];if(config2)result.push(foldConfig.of(config2));return result;}function widgetToDOM(view,prepared){var state=view.state,conf=state.facet(foldConfig);var onclick=function onclick(event){var line=view.lineBlockAt(view.posAtDOM(event.target));var folded=findFold(view.state,line.from,line.to);if(folded)view.dispatch({effects:_unfoldEffect.of(folded)});event.preventDefault();};if(conf.placeholderDOM)return conf.placeholderDOM(view,onclick,prepared);var element=document.createElement("span");element.textContent=conf.placeholderText;element.setAttribute("aria-label",state.phrase("folded code"));element.title=state.phrase("unfold");element.className="cm-foldPlaceholder";element.onclick=onclick;return element;}var foldWidget=/* @__PURE__ */Decoration.replace({widget:/* @__PURE__ */new(/*#__PURE__*/function(_WidgetType6){function _class0(){_classCallCheck(this,_class0);return _callSuper(this,_class0,arguments);}_inherits(_class0,_WidgetType6);return _createClass(_class0,[{key:"toDOM",value:function toDOM(view){return widgetToDOM(view,null);}}]);}(WidgetType))()});var PreparedFoldWidget=/*#__PURE__*/function(_WidgetType7){function PreparedFoldWidget(value){var _this80;_classCallCheck(this,PreparedFoldWidget);_this80=_callSuper(this,PreparedFoldWidget);_this80.value=value;return _this80;}_inherits(PreparedFoldWidget,_WidgetType7);return _createClass(PreparedFoldWidget,[{key:"eq",value:function eq(other){return this.value==other.value;}},{key:"toDOM",value:function toDOM(view){return widgetToDOM(view,this.value);}}]);}(WidgetType);var foldGutterDefaults={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:function foldingChanged(){return false;}};var FoldMarker=/*#__PURE__*/function(_GutterMarker3){function FoldMarker(config2,open){var _this81;_classCallCheck(this,FoldMarker);_this81=_callSuper(this,FoldMarker);_this81.config=config2;_this81.open=open;return _this81;}_inherits(FoldMarker,_GutterMarker3);return _createClass(FoldMarker,[{key:"eq",value:function eq(other){return this.config==other.config&&this.open==other.open;}},{key:"toDOM",value:function toDOM(view){if(this.config.markerDOM)return this.config.markerDOM(this.open);var span=document.createElement("span");span.textContent=this.open?this.config.openText:this.config.closedText;span.title=view.state.phrase(this.open?"Fold line":"Unfold line");return span;}}]);}(GutterMarker);function _foldGutter(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var fullConfig=Object.assign(Object.assign({},foldGutterDefaults),config2);var canFold=new FoldMarker(fullConfig,true),canUnfold=new FoldMarker(fullConfig,false);var _markers=_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class1(view){_classCallCheck(this,_class1);this.from=view.viewport.from;this.markers=this.buildMarkers(view);}return _createClass(_class1,[{key:"update",value:function update(_update21){if(_update21.docChanged||_update21.viewportChanged||_update21.startState.facet(_language)!=_update21.state.facet(_language)||_update21.startState.field(_foldState,false)!=_update21.state.field(_foldState,false)||_syntaxTree(_update21.startState)!=_syntaxTree(_update21.state)||fullConfig.foldingChanged(_update21))this.markers=this.buildMarkers(_update21.view);}},{key:"buildMarkers",value:function buildMarkers(view){var builder=new _RangeSetBuilder();var _iterator189=_createForOfIteratorHelper(view.viewportLineBlocks),_step189;try{for(_iterator189.s();!(_step189=_iterator189.n()).done;){var line=_step189.value;var mark=findFold(view.state,line.from,line.to)?canUnfold:_foldable(view.state,line.from,line.to)?canFold:null;if(mark)builder.add(line.from,line.from,mark);}}catch(err){_iterator189.e(err);}finally{_iterator189.f();}return builder.finish();}}]);}());var domEventHandlers=fullConfig.domEventHandlers;return[_markers,gutter({"class":"cm-foldGutter",markers:function markers(view){var _a2;return((_a2=view.plugin(_markers))===null||_a2===void 0?void 0:_a2.markers)||_RangeSet.empty;},initialSpacer:function initialSpacer(){return new FoldMarker(fullConfig,false);},domEventHandlers:Object.assign(Object.assign({},domEventHandlers),{click:function click(view,line,event){if(domEventHandlers.click&&domEventHandlers.click(view,line,event))return true;var folded=findFold(view.state,line.from,line.to);if(folded){view.dispatch({effects:_unfoldEffect.of(folded)});return true;}var range=_foldable(view.state,line.from,line.to);if(range){view.dispatch({effects:_foldEffect.of(range)});return true;}return false;}})}),_codeFolding()];}var baseTheme$12=/* @__PURE__ */_EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});var _HighlightStyle2=/*#__PURE__*/function(){function _HighlightStyle(specs,options){_classCallCheck(this,_HighlightStyle);this.specs=specs;var modSpec;function def(spec){var cls=StyleModule.newName();(modSpec||(modSpec=/* @__PURE__ */Object.create(null)))["."+cls]=spec;return cls;}var all=typeof options.all=="string"?options.all:options.all?def(options.all):void 0;var scopeOpt=options.scope;this.scope=scopeOpt instanceof _Language?function(type){return type.prop(_languageDataProp)==scopeOpt.data;}:scopeOpt?function(type){return type==scopeOpt;}:void 0;this.style=tagHighlighter(specs.map(function(style){return{tag:style.tag,"class":style["class"]||def(Object.assign({},style,{tag:null}))};}),{all:all}).style;this.module=modSpec?new StyleModule(modSpec):null;this.themeType=options.themeType;}return _createClass(_HighlightStyle,null,[{key:"define",value:function define(specs,options){return new _HighlightStyle2(specs,options||{});}}]);}();var highlighterFacet=/* @__PURE__ */_Facet.define();var fallbackHighlighter=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.length?[values2[0]]:null;}});function getHighlighters(state){var main=state.facet(highlighterFacet);return main.length?main:state.facet(fallbackHighlighter);}function _syntaxHighlighting(highlighter,options){var ext=[treeHighlighter],themeType;if(highlighter instanceof _HighlightStyle2){if(highlighter.module)ext.push(_EditorView.styleModule.of(highlighter.module));themeType=highlighter.themeType;}if(options===null||options===void 0?void 0:options.fallback)ext.push(fallbackHighlighter.of(highlighter));else if(themeType)ext.push(highlighterFacet.computeN([_EditorView.darkTheme],function(state){return state.facet(_EditorView.darkTheme)==(themeType=="dark")?[highlighter]:[];}));else ext.push(highlighterFacet.of(highlighter));return ext;}function _highlightingFor(state,tags3,scope){var highlighters=getHighlighters(state);var result=null;if(highlighters){var _iterator190=_createForOfIteratorHelper(highlighters),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var highlighter=_step190.value;if(!highlighter.scope||scope&&highlighter.scope(scope)){var cls=highlighter.style(tags3);if(cls)result=result?result+" "+cls:cls;}}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}}return result;}var TreeHighlighter=/*#__PURE__*/function(){function TreeHighlighter(view){_classCallCheck(this,TreeHighlighter);this.markCache=/* @__PURE__ */Object.create(null);this.tree=_syntaxTree(view.state);this.decorations=this.buildDeco(view,getHighlighters(view.state));this.decoratedTo=view.viewport.to;}return _createClass(TreeHighlighter,[{key:"update",value:function update(_update22){var tree=_syntaxTree(_update22.state),highlighters=getHighlighters(_update22.state);var styleChange=highlighters!=getHighlighters(_update22.startState);var viewport=_update22.view.viewport,decoratedToMapped=_update22.changes.mapPos(this.decoratedTo,1);if(tree.length<viewport.to&&!styleChange&&tree.type==this.tree.type&&decoratedToMapped>=viewport.to){this.decorations=this.decorations.map(_update22.changes);this.decoratedTo=decoratedToMapped;}else if(tree!=this.tree||_update22.viewportChanged||styleChange){this.tree=tree;this.decorations=this.buildDeco(_update22.view,highlighters);this.decoratedTo=viewport.to;}}},{key:"buildDeco",value:function buildDeco(view,highlighters){var _this82=this;if(!highlighters||!this.tree.length)return Decoration.none;var builder=new _RangeSetBuilder();var _iterator191=_createForOfIteratorHelper(view.visibleRanges),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var _step191$value=_step191.value,from=_step191$value.from,to=_step191$value.to;highlightTree(this.tree,highlighters,function(from2,to2,style){builder.add(from2,to2,_this82.markCache[style]||(_this82.markCache[style]=Decoration.mark({"class":style})));},from,to);}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}return builder.finish();}}]);}();var treeHighlighter=/* @__PURE__ */Prec.high(/* @__PURE__ */_ViewPlugin.fromClass(TreeHighlighter,{decorations:function decorations(v){return v.decorations;}}));var _defaultHighlightStyle=/* @__PURE__ */_HighlightStyle2.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,/* @__PURE__ */tags.special(tags.string)],color:"#e40"},{tag:/* @__PURE__ */tags.definition(tags.variableName),color:"#00f"},{tag:/* @__PURE__ */tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[/* @__PURE__ */tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:/* @__PURE__ */tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]);var baseTheme2=/* @__PURE__ */_EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}});var DefaultScanDist=1e4;var DefaultBrackets="()[]{}";var bracketMatchingConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{afterCursor:true,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch});}});var matchingMark=/* @__PURE__ */Decoration.mark({"class":"cm-matchingBracket"});var nonmatchingMark=/* @__PURE__ */Decoration.mark({"class":"cm-nonmatchingBracket"});function defaultRenderMatch(match){var decorations2=[];var mark=match.matched?matchingMark:nonmatchingMark;decorations2.push(mark.range(match.start.from,match.start.to));if(match.end)decorations2.push(mark.range(match.end.from,match.end.to));return decorations2;}var bracketMatchingState=/* @__PURE__ */_StateField.define({create:function create(){return Decoration.none;},update:function update(deco,tr){if(!tr.docChanged&&!tr.selection)return deco;var decorations2=[];var config2=tr.state.facet(bracketMatchingConfig);var _iterator192=_createForOfIteratorHelper(tr.state.selection.ranges),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var range=_step192.value;if(!range.empty)continue;var match=_matchBrackets(tr.state,range.head,-1,config2)||range.head>0&&_matchBrackets(tr.state,range.head-1,1,config2)||config2.afterCursor&&(_matchBrackets(tr.state,range.head,1,config2)||range.head<tr.state.doc.length&&_matchBrackets(tr.state,range.head+1,-1,config2));if(match)decorations2=decorations2.concat(config2.renderMatch(match,tr.state));}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}return Decoration.set(decorations2,true);},provide:function provide(f){return _EditorView.decorations.from(f);}});var bracketMatchingUnique=[bracketMatchingState,baseTheme2];function _bracketMatching(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[bracketMatchingConfig.of(config2),bracketMatchingUnique];}var _bracketMatchingHandle=/* @__PURE__ */new NodeProp();function matchingNodes(node,dir,brackets){var byProp=node.prop(dir<0?NodeProp.openedBy:NodeProp.closedBy);if(byProp)return byProp;if(node.name.length==1){var index=brackets.indexOf(node.name);if(index>-1&&index%2==(dir<0?1:0))return[brackets[index+dir]];}return null;}function findHandle(node){var hasHandle=node.type.prop(_bracketMatchingHandle);return hasHandle?hasHandle(node.node):node;}function _matchBrackets(state,pos,dir){var config2=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var maxScanDistance=config2.maxScanDistance||DefaultScanDist,brackets=config2.brackets||DefaultBrackets;var tree=_syntaxTree(state),node=tree.resolveInner(pos,dir);for(var cur2=node;cur2;cur2=cur2.parent){var matches=matchingNodes(cur2.type,dir,brackets);if(matches&&cur2.from<cur2.to){var handle=findHandle(cur2);if(handle&&(dir>0?pos>=handle.from&&pos<handle.to:pos>handle.from&&pos<=handle.to))return matchMarkedBrackets(state,pos,dir,cur2,handle,matches,brackets);}}return matchPlainBrackets(state,pos,dir,tree,node.type,maxScanDistance,brackets);}function matchMarkedBrackets(_state,_pos,dir,token,handle,matching,brackets){var parent=token.parent,firstToken={from:handle.from,to:handle.to};var depth=0,cursor2=parent===null||parent===void 0?void 0:parent.cursor();if(cursor2&&(dir<0?cursor2.childBefore(token.from):cursor2.childAfter(token.to)))do{if(dir<0?cursor2.to<=token.from:cursor2.from>=token.to){if(depth==0&&matching.indexOf(cursor2.type.name)>-1&&cursor2.from<cursor2.to){var endHandle=findHandle(cursor2);return{start:firstToken,end:endHandle?{from:endHandle.from,to:endHandle.to}:void 0,matched:true};}else if(matchingNodes(cursor2.type,dir,brackets)){depth++;}else if(matchingNodes(cursor2.type,-dir,brackets)){if(depth==0){var _endHandle=findHandle(cursor2);return{start:firstToken,end:_endHandle&&_endHandle.from<_endHandle.to?{from:_endHandle.from,to:_endHandle.to}:void 0,matched:false};}depth--;}}}while(dir<0?cursor2.prevSibling():cursor2.nextSibling());return{start:firstToken,matched:false};}function matchPlainBrackets(state,pos,dir,tree,tokenType,maxScanDistance,brackets){var startCh=dir<0?state.sliceDoc(pos-1,pos):state.sliceDoc(pos,pos+1);var bracket2=brackets.indexOf(startCh);if(bracket2<0||bracket2%2==0!=dir>0)return null;var startToken={from:dir<0?pos-1:pos,to:dir>0?pos+1:pos};var iter=state.doc.iterRange(pos,dir>0?state.doc.length:0),depth=0;for(var distance=0;!iter.next().done&&distance<=maxScanDistance;){var text=iter.value;if(dir<0)distance+=text.length;var basePos=pos+distance*dir;for(var pos2=dir>0?0:text.length-1,end=dir>0?text.length:-1;pos2!=end;pos2+=dir){var found=brackets.indexOf(text[pos2]);if(found<0||tree.resolveInner(basePos+pos2,1).type!=tokenType)continue;if(found%2==0==dir>0){depth++;}else if(depth==1){return{start:startToken,end:{from:basePos+pos2,to:basePos+pos2+1},matched:found>>1==bracket2>>1};}else{depth--;}}if(dir>0)distance+=text.length;}return iter.done?{start:startToken,matched:false}:null;}function countCol(string2,end,tabSize){var startIndex=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var startValue=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(end==null){end=string2.search(/[^\s\u00a0]/);if(end==-1)end=string2.length;}var n=startValue;for(var _i144=startIndex;_i144<end;_i144++){if(string2.charCodeAt(_i144)==9)n+=tabSize-n%tabSize;else n++;}return n;}var _StringStream=/*#__PURE__*/function(){function _StringStream(string2,tabSize,indentUnit2,overrideIndent){_classCallCheck(this,_StringStream);this.string=string2;this.tabSize=tabSize;this.indentUnit=indentUnit2;this.overrideIndent=overrideIndent;this.pos=0;this.start=0;this.lastColumnPos=0;this.lastColumnValue=0;}return _createClass(_StringStream,[{key:"eol",value:function eol(){return this.pos>=this.string.length;}},{key:"sol",value:function sol(){return this.pos==0;}},{key:"peek",value:function peek(){return this.string.charAt(this.pos)||void 0;}},{key:"next",value:function next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++);}},{key:"eat",value:function eat(match){var ch=this.string.charAt(this.pos);var ok;if(typeof match=="string")ok=ch==match;else ok=ch&&(match instanceof RegExp?match.test(ch):match(ch));if(ok){++this.pos;return ch;}}},{key:"eatWhile",value:function eatWhile(match){var start=this.pos;while(this.eat(match)){}return this.pos>start;}},{key:"eatSpace",value:function eatSpace(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>start;}},{key:"skipToEnd",value:function skipToEnd(){this.pos=this.string.length;}},{key:"skipTo",value:function skipTo(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true;}}},{key:"backUp",value:function backUp(n){this.pos-=n;}},{key:"column",value:function column(){if(this.lastColumnPos<this.start){this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start;}return this.lastColumnValue;}},{key:"indentation",value:function indentation(){var _a2;return(_a2=this.overrideIndent)!==null&&_a2!==void 0?_a2:countCol(this.string,null,this.tabSize);}},{key:"match",value:function match(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function cased(str){return caseInsensitive?str.toLowerCase():str;};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false)this.pos+=pattern.length;return true;}else return null;}else{var _match=this.string.slice(this.pos).match(pattern);if(_match&&_match.index>0)return null;if(_match&&consume!==false)this.pos+=_match[0].length;return _match;}}},{key:"current",value:function current(){return this.string.slice(this.start,this.pos);}}]);}();function fullParser(spec){return{name:spec.name||"",token:spec.token,blankLine:spec.blankLine||function(){},startState:spec.startState||function(){return true;},copyState:spec.copyState||defaultCopyState,indent:spec.indent||function(){return null;},languageData:spec.languageData||{},tokenTable:spec.tokenTable||noTokens,mergeTokens:spec.mergeTokens!==false};}function defaultCopyState(state){if(_typeof(state)!="object")return state;var newState={};for(var prop in state){var _val=state[prop];newState[prop]=_val instanceof Array?_val.slice():_val;}return newState;}var IndentedFrom=/* @__PURE__ */new WeakMap();var _StreamLanguage2=/*#__PURE__*/function(_Language3){function _StreamLanguage(parser5){var _this83;_classCallCheck(this,_StreamLanguage);var data2=_defineLanguageFacet(parser5.languageData);var p=fullParser(parser5),self;var impl=new(/*#__PURE__*/function(_Parser2){function _class10(){_classCallCheck(this,_class10);return _callSuper(this,_class10,arguments);}_inherits(_class10,_Parser2);return _createClass(_class10,[{key:"createParse",value:function createParse(input,fragments,ranges){return new Parse(self,input,fragments,ranges);}}]);}(Parser))();_this83=_callSuper(this,_StreamLanguage,[data2,impl,[],parser5.name]);_this83.topNode=docID(data2,_this83);self=_this83;_this83.streamParser=p;_this83.stateAfter=new NodeProp({perNode:true});_this83.tokenTable=parser5.tokenTable?new TokenTable(p.tokenTable):defaultTokenTable;return _this83;}_inherits(_StreamLanguage,_Language3);return _createClass(_StreamLanguage,[{key:"getIndent",value:function getIndent(cx){var from=void 0;var overrideIndentation=cx.options.overrideIndentation;if(overrideIndentation){from=IndentedFrom.get(cx.state);if(from!=null&&from<cx.pos-1e4)from=void 0;}var start=findState(this,cx.node.tree,cx.node.from,cx.node.from,from!==null&&from!==void 0?from:cx.pos),statePos,state;if(start){state=start.state;statePos=start.pos+1;}else{state=this.streamParser.startState(cx.unit);statePos=cx.node.from;}if(cx.pos-statePos>1e4)return null;while(statePos<cx.pos){var line2=cx.state.doc.lineAt(statePos),end=Math.min(cx.pos,line2.to);if(line2.length){var indentation=overrideIndentation?overrideIndentation(line2.from):-1;var stream=new _StringStream(line2.text,cx.state.tabSize,cx.unit,indentation<0?void 0:indentation);while(stream.pos<end-line2.from)readToken(this.streamParser.token,stream,state);}else{this.streamParser.blankLine(state,cx.unit);}if(end==cx.pos)break;statePos=line2.to+1;}var line=cx.lineAt(cx.pos);if(overrideIndentation&&from==null)IndentedFrom.set(cx.state,line.from);return this.streamParser.indent(state,/^\s*(.*)/.exec(line.text)[1],cx);}},{key:"allowsNesting",get:function get(){return false;}}],[{key:"define",value:function define(spec){return new _StreamLanguage2(spec);}}]);}(_Language);function findState(lang,tree,off,startPos,before){var state=off>=startPos&&off+tree.length<=before&&tree.prop(lang.stateAfter);if(state)return{state:lang.streamParser.copyState(state),pos:off+tree.length};for(var _i145=tree.children.length-1;_i145>=0;_i145--){var child=tree.children[_i145],pos=off+tree.positions[_i145];var found=child instanceof _Tree&&pos<before&&findState(lang,child,pos,startPos,before);if(found)return found;}return null;}function cutTree(lang,tree,from,to,inside2){if(inside2&&from<=0&&to>=tree.length)return tree;if(!inside2&&from==0&&tree.type==lang.topNode)inside2=true;for(var _i146=tree.children.length-1;_i146>=0;_i146--){var pos=tree.positions[_i146],child=tree.children[_i146],inner=void 0;if(pos<to&&child instanceof _Tree){if(!(inner=cutTree(lang,child,from-pos,to-pos,inside2)))break;return!inside2?inner:new _Tree(tree.type,tree.children.slice(0,_i146).concat(inner),tree.positions.slice(0,_i146+1),pos+inner.length);}}return null;}function findStartInFragments(lang,fragments,startPos,endPos,editorState){var _iterator193=_createForOfIteratorHelper(fragments),_step193;try{for(_iterator193.s();!(_step193=_iterator193.n()).done;){var f=_step193.value;var from=f.from+(f.openStart?25:0),to=f.to-(f.openEnd?25:0);var found=from<=startPos&&to>startPos&&findState(lang,f.tree,0-f.offset,startPos,to),tree=void 0;if(found&&found.pos<=endPos&&(tree=cutTree(lang,f.tree,startPos+f.offset,found.pos+f.offset,false)))return{state:found.state,tree:tree};}}catch(err){_iterator193.e(err);}finally{_iterator193.f();}return{state:lang.streamParser.startState(editorState?_getIndentUnit(editorState):4),tree:_Tree.empty};}var Parse=/*#__PURE__*/function(){function Parse(lang,input,fragments,ranges){_classCallCheck(this,Parse);this.lang=lang;this.input=input;this.fragments=fragments;this.ranges=ranges;this.stoppedAt=null;this.chunks=[];this.chunkPos=[];this.chunk=[];this.chunkReused=void 0;this.rangeIndex=0;this.to=ranges[ranges.length-1].to;var context=_ParseContext2.get(),from=ranges[0].from;var _findStartInFragments=findStartInFragments(lang,fragments,from,this.to,context===null||context===void 0?void 0:context.state),state=_findStartInFragments.state,tree=_findStartInFragments.tree;this.state=state;this.parsedPos=this.chunkStart=from+tree.length;for(var _i147=0;_i147<tree.children.length;_i147++){this.chunks.push(tree.children[_i147]);this.chunkPos.push(tree.positions[_i147]);}if(context&&this.parsedPos<context.viewport.from-1e5&&ranges.some(function(r){return r.from<=context.viewport.from&&r.to>=context.viewport.from;})){this.state=this.lang.streamParser.startState(_getIndentUnit(context.state));context.skipUntilInView(this.parsedPos,context.viewport.from);this.parsedPos=context.viewport.from;}this.moveRangeIndex();}return _createClass(Parse,[{key:"advance",value:function advance(){var context=_ParseContext2.get();var parseEnd=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt);var end=Math.min(parseEnd,this.chunkStart+2048);if(context)end=Math.min(end,context.viewport.to);while(this.parsedPos<end)this.parseLine(context);if(this.chunkStart<this.parsedPos)this.finishChunk();if(this.parsedPos>=parseEnd)return this.finish();if(context&&this.parsedPos>=context.viewport.to){context.skipUntilInView(this.parsedPos,parseEnd);return this.finish();}return null;}},{key:"stopAt",value:function stopAt(pos){this.stoppedAt=pos;}},{key:"lineAfter",value:function lineAfter(pos){var chunk=this.input.chunk(pos);if(!this.input.lineChunks){var eol=chunk.indexOf("\n");if(eol>-1)chunk=chunk.slice(0,eol);}else if(chunk=="\n"){chunk="";}return pos+chunk.length<=this.to?chunk:chunk.slice(0,this.to-pos);}},{key:"nextLine",value:function nextLine(){var from=this.parsedPos,line=this.lineAfter(from),end=from+line.length;for(var index=this.rangeIndex;;){var rangeEnd2=this.ranges[index].to;if(rangeEnd2>=end)break;line=line.slice(0,rangeEnd2-(end-line.length));index++;if(index==this.ranges.length)break;var rangeStart=this.ranges[index].from;var after=this.lineAfter(rangeStart);line+=after;end=rangeStart+after.length;}return{line:line,end:end};}},{key:"skipGapsTo",value:function skipGapsTo(pos,offset,side){for(;;){var end=this.ranges[this.rangeIndex].to,offPos=pos+offset;if(side>0?end>offPos:end>=offPos)break;var start=this.ranges[++this.rangeIndex].from;offset+=start-end;}return offset;}},{key:"moveRangeIndex",value:function moveRangeIndex(){while(this.ranges[this.rangeIndex].to<this.parsedPos)this.rangeIndex++;}},{key:"emitToken",value:function emitToken(id2,from,to,offset){var size=4;if(this.ranges.length>1){offset=this.skipGapsTo(from,offset,1);from+=offset;var len0=this.chunk.length;offset=this.skipGapsTo(to,offset,-1);to+=offset;size+=this.chunk.length-len0;}var last=this.chunk.length-4;if(this.lang.streamParser.mergeTokens&&size==4&&last>=0&&this.chunk[last]==id2&&this.chunk[last+2]==from)this.chunk[last+2]=to;else this.chunk.push(id2,from,to,size);return offset;}},{key:"parseLine",value:function parseLine(context){var _this$nextLine=this.nextLine(),line=_this$nextLine.line,end=_this$nextLine.end,offset=0,streamParser=this.lang.streamParser;var stream=new _StringStream(line,context?context.state.tabSize:4,context?_getIndentUnit(context.state):2);if(stream.eol()){streamParser.blankLine(this.state,stream.indentUnit);}else{while(!stream.eol()){var token=readToken(streamParser.token,stream,this.state);if(token)offset=this.emitToken(this.lang.tokenTable.resolve(token),this.parsedPos+stream.start,this.parsedPos+stream.pos,offset);if(stream.start>1e4)break;}}this.parsedPos=end;this.moveRangeIndex();if(this.parsedPos<this.to)this.parsedPos++;}},{key:"finishChunk",value:function finishChunk(){var tree=_Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:nodeSet,topID:0,maxBufferLength:2048,reused:this.chunkReused});tree=new _Tree(tree.type,tree.children,tree.positions,tree.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]);this.chunks.push(tree);this.chunkPos.push(this.chunkStart-this.ranges[0].from);this.chunk=[];this.chunkReused=void 0;this.chunkStart=this.parsedPos;}},{key:"finish",value:function finish(){return new _Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance();}}]);}();function readToken(token,stream,state){stream.start=stream.pos;for(var _i148=0;_i148<10;_i148++){var result=token(stream,state);if(stream.pos>stream.start)return result;}throw new Error("Stream parser failed to advance stream.");}var noTokens=/* @__PURE__ */Object.create(null);var typeArray=[_NodeType.none];var nodeSet=/* @__PURE__ */new _NodeSet(typeArray);var warned=[];var byTag=/* @__PURE__ */Object.create(null);var defaultTable=/* @__PURE__ */Object.create(null);for(var _i149=0,_arr2=[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]];_i149<_arr2.length;_i149++){var _arr2$_i=_slicedToArray(_arr2[_i149],2),legacyName=_arr2$_i[0],_name2=_arr2$_i[1];defaultTable[legacyName]=/* @__PURE__ */createTokenType(noTokens,_name2);}var TokenTable=/*#__PURE__*/function(){function TokenTable(extra){_classCallCheck(this,TokenTable);this.extra=extra;this.table=Object.assign(/* @__PURE__ */Object.create(null),defaultTable);}return _createClass(TokenTable,[{key:"resolve",value:function resolve(tag){return!tag?0:this.table[tag]||(this.table[tag]=createTokenType(this.extra,tag));}}]);}();var defaultTokenTable=/* @__PURE__ */new TokenTable(noTokens);function warnForPart(part,msg){if(warned.indexOf(part)>-1)return;warned.push(part);console.warn(msg);}function createTokenType(extra,tagStr){var tags$1=[];var _iterator194=_createForOfIteratorHelper(tagStr.split(" ")),_step194;try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){var name3=_step194.value;var found=[];var _iterator195=_createForOfIteratorHelper(name3.split(".")),_step195;try{for(_iterator195.s();!(_step195=_iterator195.n()).done;){var part=_step195.value;var value=extra[part]||tags[part];if(!value){warnForPart(part,"Unknown highlighting tag ".concat(part));}else if(typeof value=="function"){if(!found.length)warnForPart(part,"Modifier ".concat(part," used at start of tag"));else found=found.map(value);}else{if(found.length)warnForPart(part,"Tag ".concat(part," used as modifier"));else found=Array.isArray(value)?value:[value];}}}catch(err){_iterator195.e(err);}finally{_iterator195.f();}var _iterator196=_createForOfIteratorHelper(found),_step196;try{for(_iterator196.s();!(_step196=_iterator196.n()).done;){var tag=_step196.value;tags$1.push(tag);}}catch(err){_iterator196.e(err);}finally{_iterator196.f();}}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}if(!tags$1.length)return 0;var name2=tagStr.replace(/ /g,"_"),key=name2+" "+tags$1.map(function(t2){return t2.id;});var known=byTag[key];if(known)return known.id;var type=byTag[key]=_NodeType.define({id:typeArray.length,name:name2,props:[styleTags(_defineProperty({},name2,tags$1))]});typeArray.push(type);return type.id;}function docID(data2,lang){var type=_NodeType.define({id:typeArray.length,name:"Document",props:[_languageDataProp.add(function(){return data2;}),_indentNodeProp.add(function(){return function(cx){return lang.getIndent(cx);};})],top:true});typeArray.push(type);return type;}function buildForLine(line){return line.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(line);}function textHasRTL(text){for(var _i150=text.iter();!_i150.next().done;)if(buildForLine(_i150.value))return true;return false;}function changeAddsRTL(change){var added=false;change.iterChanges(function(fA,tA,fB,tB,ins){if(!added&&textHasRTL(ins))added=true;});return added;}var alwaysIsolate=/* @__PURE__ */_Facet.define({combine:function combine(values2){return values2.some(function(x){return x;});}});function _bidiIsolates(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var extensions=[isolateMarks];if(options.alwaysIsolate)extensions.push(alwaysIsolate.of(true));return extensions;}var isolateMarks=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class11(view){_classCallCheck(this,_class11);this.always=view.state.facet(alwaysIsolate)||view.textDirection!=Direction.LTR||view.state.facet(_EditorView.perLineTextDirection);this.hasRTL=!this.always&&textHasRTL(view.state.doc);this.tree=_syntaxTree(view.state);this.decorations=this.always||this.hasRTL?buildDeco(view,this.tree,this.always):Decoration.none;}return _createClass(_class11,[{key:"update",value:function update(_update23){var always=_update23.state.facet(alwaysIsolate)||_update23.view.textDirection!=Direction.LTR||_update23.state.facet(_EditorView.perLineTextDirection);if(!always&&!this.hasRTL&&changeAddsRTL(_update23.changes))this.hasRTL=true;if(!always&&!this.hasRTL)return;var tree=_syntaxTree(_update23.state);if(always!=this.always||tree!=this.tree||_update23.docChanged||_update23.viewportChanged){this.tree=tree;this.always=always;this.decorations=buildDeco(_update23.view,tree,always);}}}]);}(),{provide:function provide(plugin){function access(view){var _a2,_b;return(_b=(_a2=view.plugin(plugin))===null||_a2===void 0?void 0:_a2.decorations)!==null&&_b!==void 0?_b:Decoration.none;}return[_EditorView.outerDecorations.of(access),Prec.lowest(_EditorView.bidiIsolatedRanges.of(access))];}});function buildDeco(view,tree,always){var deco=new _RangeSetBuilder();var ranges=view.visibleRanges;if(!always)ranges=clipRTLLines(ranges,view.state.doc);var _iterator197=_createForOfIteratorHelper(ranges),_step197;try{for(_iterator197.s();!(_step197=_iterator197.n()).done;){var _step197$value=_step197.value,from=_step197$value.from,to=_step197$value.to;tree.iterate({enter:function enter(node){var iso=node.type.prop(NodeProp.isolate);if(iso)deco.add(node.from,node.to,marks[iso]);},from:from,to:to});}}catch(err){_iterator197.e(err);}finally{_iterator197.f();}return deco.finish();}function clipRTLLines(ranges,doc2){var cur2=doc2.iter(),pos=0,result=[],last=null;var _iterator198=_createForOfIteratorHelper(ranges),_step198;try{for(_iterator198.s();!(_step198=_iterator198.n()).done;){var _step198$value=_step198.value,from=_step198$value.from,to=_step198$value.to;if(last&&last.to>from){from=last.to;if(from>=to)continue;}if(pos+cur2.value.length<from){cur2.next(from-(pos+cur2.value.length));pos=from;}for(;;){var start=pos,end=pos+cur2.value.length;if(!cur2.lineBreak&&buildForLine(cur2.value)){if(last&&last.to>start-10)last.to=Math.min(to,end);else result.push(last={from:start,to:Math.min(to,end)});}if(end>=to)break;pos=end;cur2.next();}}}catch(err){_iterator198.e(err);}finally{_iterator198.f();}return result;}var marks={rtl:/* @__PURE__ */Decoration.mark({"class":"cm-iso",inclusive:true,attributes:{dir:"rtl"},bidiIsolate:Direction.RTL}),ltr:/* @__PURE__ */Decoration.mark({"class":"cm-iso",inclusive:true,attributes:{dir:"ltr"},bidiIsolate:Direction.LTR}),auto:/* @__PURE__ */Decoration.mark({"class":"cm-iso",inclusive:true,attributes:{dir:"auto"},bidiIsolate:null})};// ../node_modules/@codemirror/commands/dist/index.js
var toggleComment=function toggleComment(target){var state=target.state,line=state.doc.lineAt(state.selection.main.from),config2=getConfig(target.state,line.from);return config2.line?toggleLineComment(target):config2.block?toggleBlockCommentByLine(target):false;};function command(f,option){return function(_ref17){var state=_ref17.state,dispatch=_ref17.dispatch;if(state.readOnly)return false;var tr=f(option,state);if(!tr)return false;dispatch(state.update(tr));return true;};}var toggleLineComment=/* @__PURE__ */command(changeLineComment,0);var toggleBlockComment=/* @__PURE__ */command(changeBlockComment,0);var toggleBlockCommentByLine=/* @__PURE__ */command(function(o,s){return changeBlockComment(o,s,selectedLineRanges(s));},0);function getConfig(state,pos){var data2=state.languageDataAt("commentTokens",pos,1);return data2.length?data2[0]:{};}var SearchMargin=50;function findBlockComment(state,_ref18,from,to){var open=_ref18.open,close=_ref18.close;var textBefore=state.sliceDoc(from-SearchMargin,from);var textAfter=state.sliceDoc(to,to+SearchMargin);var spaceBefore=/\s*$/.exec(textBefore)[0].length,spaceAfter=/^\s*/.exec(textAfter)[0].length;var beforeOff=textBefore.length-spaceBefore;if(textBefore.slice(beforeOff-open.length,beforeOff)==open&&textAfter.slice(spaceAfter,spaceAfter+close.length)==close){return{open:{pos:from-spaceBefore,margin:spaceBefore&&1},close:{pos:to+spaceAfter,margin:spaceAfter&&1}};}var startText,endText;if(to-from<=2*SearchMargin){startText=endText=state.sliceDoc(from,to);}else{startText=state.sliceDoc(from,from+SearchMargin);endText=state.sliceDoc(to-SearchMargin,to);}var startSpace=/^\s*/.exec(startText)[0].length,endSpace=/\s*$/.exec(endText)[0].length;var endOff=endText.length-endSpace-close.length;if(startText.slice(startSpace,startSpace+open.length)==open&&endText.slice(endOff,endOff+close.length)==close){return{open:{pos:from+startSpace+open.length,margin:/\s/.test(startText.charAt(startSpace+open.length))?1:0},close:{pos:to-endSpace-close.length,margin:/\s/.test(endText.charAt(endOff-1))?1:0}};}return null;}function selectedLineRanges(state){var ranges=[];var _iterator199=_createForOfIteratorHelper(state.selection.ranges),_step199;try{for(_iterator199.s();!(_step199=_iterator199.n()).done;){var _r1=_step199.value;var fromLine=state.doc.lineAt(_r1.from);var toLine=_r1.to<=fromLine.to?fromLine:state.doc.lineAt(_r1.to);if(toLine.from>fromLine.from&&toLine.from==_r1.to)toLine=_r1.to==fromLine.to+1?fromLine:state.doc.lineAt(_r1.to-1);var last=ranges.length-1;if(last>=0&&ranges[last].to>fromLine.from)ranges[last].to=toLine.to;else ranges.push({from:fromLine.from+/^\s*/.exec(fromLine.text)[0].length,to:toLine.to});}}catch(err){_iterator199.e(err);}finally{_iterator199.f();}return ranges;}function changeBlockComment(option,state){var ranges=arguments.length>2&&arguments[2]!==undefined?arguments[2]:state.selection.ranges;var tokens=ranges.map(function(r){return getConfig(state,r.from).block;});if(!tokens.every(function(c){return c;}))return null;var comments=ranges.map(function(r,i){return findBlockComment(state,tokens[i],r.from,r.to);});if(option!=2&&!comments.every(function(c){return c;})){return{changes:state.changes(ranges.map(function(range,i){if(comments[i])return[];return[{from:range.from,insert:tokens[i].open+" "},{from:range.to,insert:" "+tokens[i].close}];}))};}else if(option!=1&&comments.some(function(c){return c;})){var changes=[];for(var _i151=0,comment2;_i151<comments.length;_i151++)if(comment2=comments[_i151]){var token=tokens[_i151],_comment=comment2,open=_comment.open,close=_comment.close;changes.push({from:open.pos-token.open.length,to:open.pos+open.margin},{from:close.pos-close.margin,to:close.pos+token.close.length});}return{changes:changes};}return null;}function changeLineComment(option,state){var ranges=arguments.length>2&&arguments[2]!==undefined?arguments[2]:state.selection.ranges;var lines=[];var prevLine=-1;var _iterator200=_createForOfIteratorHelper(ranges),_step200;try{for(_iterator200.s();!(_step200=_iterator200.n()).done;){var _step200$value=_step200.value,_from2=_step200$value.from,_to2=_step200$value.to;var startI=lines.length,minIndent=1e9;var _token2=getConfig(state,_from2).line;if(!_token2)continue;for(var pos=_from2;pos<=_to2;){var _line5=state.doc.lineAt(pos);if(_line5.from>prevLine&&(_from2==_to2||_to2>_line5.from)){prevLine=_line5.from;var _indent=/^\s*/.exec(_line5.text)[0].length;var _empty=_indent==_line5.length;var _comment2=_line5.text.slice(_indent,_indent+_token2.length)==_token2?_indent:-1;if(_indent<_line5.text.length&&_indent<minIndent)minIndent=_indent;lines.push({line:_line5,comment:_comment2,token:_token2,indent:_indent,empty:_empty,single:false});}pos=_line5.to+1;}if(minIndent<1e9){for(var _i152=startI;_i152<lines.length;_i152++)if(lines[_i152].indent<lines[_i152].line.text.length)lines[_i152].indent=minIndent;}if(lines.length==startI+1)lines[startI].single=true;}}catch(err){_iterator200.e(err);}finally{_iterator200.f();}if(option!=2&&lines.some(function(l){return l.comment<0&&(!l.empty||l.single);})){var changes=[];var _iterator201=_createForOfIteratorHelper(lines),_step201;try{for(_iterator201.s();!(_step201=_iterator201.n()).done;){var _step201$value=_step201.value,line=_step201$value.line,token=_step201$value.token,indent=_step201$value.indent,empty2=_step201$value.empty,single=_step201$value.single;if(single||!empty2)changes.push({from:line.from+indent,insert:token+" "});}}catch(err){_iterator201.e(err);}finally{_iterator201.f();}var changeSet=state.changes(changes);return{changes:changeSet,selection:state.selection.map(changeSet,1)};}else if(option!=1&&lines.some(function(l){return l.comment>=0;})){var _changes2=[];var _iterator202=_createForOfIteratorHelper(lines),_step202;try{for(_iterator202.s();!(_step202=_iterator202.n()).done;){var _step202$value=_step202.value,_line4=_step202$value.line,comment2=_step202$value.comment,_token=_step202$value.token;if(comment2>=0){var from=_line4.from+comment2,to=from+_token.length;if(_line4.text[to-_line4.from]==" ")to++;_changes2.push({from:from,to:to});}}}catch(err){_iterator202.e(err);}finally{_iterator202.f();}return{changes:_changes2};}return null;}var fromHistory=/* @__PURE__ */Annotation.define();var isolateHistory=/* @__PURE__ */Annotation.define();var invertedEffects=/* @__PURE__ */_Facet.define();var historyConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{minDepth:100,newGroupDelay:500,joinToEvent:function joinToEvent(_t,isAdjacent2){return isAdjacent2;}},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:function joinToEvent(a,b){return function(tr,adj){return a(tr,adj)||b(tr,adj);};}});}});var historyField_=/* @__PURE__ */_StateField.define({create:function create(){return _HistoryState.empty;},update:function update(state,tr){var config2=tr.state.facet(historyConfig);var fromHist=tr.annotation(fromHistory);if(fromHist){var item=_HistEvent.fromTransaction(tr,fromHist.selection),from=fromHist.side;var other=from==0?state.undone:state.done;if(item)other=updateBranch(other,other.length,config2.minDepth,item);else other=_addSelection(other,tr.startState.selection);return new _HistoryState(from==0?fromHist.rest:other,from==0?other:fromHist.rest);}var isolate=tr.annotation(isolateHistory);if(isolate=="full"||isolate=="before")state=state.isolate();if(tr.annotation(_Transaction.addToHistory)===false)return!tr.changes.empty?state.addMapping(tr.changes.desc):state;var event=_HistEvent.fromTransaction(tr);var time=tr.annotation(_Transaction.time),userEvent=tr.annotation(_Transaction.userEvent);if(event)state=state.addChanges(event,time,userEvent,config2,tr);else if(tr.selection)state=state.addSelection(tr.startState.selection,time,userEvent,config2.newGroupDelay);if(isolate=="full"||isolate=="after")state=state.isolate();return state;},toJSON:function toJSON(value){return{done:value.done.map(function(e){return e.toJSON();}),undone:value.undone.map(function(e){return e.toJSON();})};},fromJSON:function fromJSON(json){return new _HistoryState(json.done.map(_HistEvent.fromJSON),json.undone.map(_HistEvent.fromJSON));}});function history(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[historyField_,historyConfig.of(config2),_EditorView.domEventHandlers({beforeinput:function beforeinput(e,view){var command2=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;if(!command2)return false;e.preventDefault();return command2(view);}})];}function cmd(side,selection2){return function(_ref19){var state=_ref19.state,dispatch=_ref19.dispatch;if(!selection2&&state.readOnly)return false;var historyState=state.field(historyField_,false);if(!historyState)return false;var tr=historyState.pop(side,state,selection2);if(!tr)return false;dispatch(tr);return true;};}var undo=/* @__PURE__ */cmd(0,false);var redo=/* @__PURE__ */cmd(1,false);var undoSelection=/* @__PURE__ */cmd(0,true);var redoSelection=/* @__PURE__ */cmd(1,true);var _HistEvent=/*#__PURE__*/function(){function HistEvent(changes,effects,mapped,startSelection,selectionsAfter){_classCallCheck(this,HistEvent);this.changes=changes;this.effects=effects;this.mapped=mapped;this.startSelection=startSelection;this.selectionsAfter=selectionsAfter;}return _createClass(HistEvent,[{key:"setSelAfter",value:function setSelAfter(after){return new _HistEvent(this.changes,this.effects,this.mapped,this.startSelection,after);}},{key:"toJSON",value:function toJSON(){var _a2,_b,_c;return{changes:(_a2=this.changes)===null||_a2===void 0?void 0:_a2.toJSON(),mapped:(_b=this.mapped)===null||_b===void 0?void 0:_b.toJSON(),startSelection:(_c=this.startSelection)===null||_c===void 0?void 0:_c.toJSON(),selectionsAfter:this.selectionsAfter.map(function(s){return s.toJSON();})};}}],[{key:"fromJSON",value:function fromJSON(json){return new _HistEvent(json.changes&&_ChangeSet.fromJSON(json.changes),[],json.mapped&&_ChangeDesc.fromJSON(json.mapped),json.startSelection&&_EditorSelection.fromJSON(json.startSelection),json.selectionsAfter.map(_EditorSelection.fromJSON));}},{key:"fromTransaction",value:function fromTransaction(tr,selection2){var effects=none2;var _iterator203=_createForOfIteratorHelper(tr.startState.facet(invertedEffects)),_step203;try{for(_iterator203.s();!(_step203=_iterator203.n()).done;){var invert=_step203.value;var result=invert(tr);if(result.length)effects=effects.concat(result);}}catch(err){_iterator203.e(err);}finally{_iterator203.f();}if(!effects.length&&tr.changes.empty)return null;return new _HistEvent(tr.changes.invert(tr.startState.doc),effects,void 0,selection2||tr.startState.selection,none2);}},{key:"selection",value:function selection(selections){return new _HistEvent(void 0,none2,void 0,void 0,selections);}}]);}();function updateBranch(branch,to,maxLen,newEvent){var start=to+1>maxLen+20?to-maxLen-1:0;var newBranch=branch.slice(start,to);newBranch.push(newEvent);return newBranch;}function isAdjacent(a,b){var ranges=[],isAdjacent2=false;a.iterChangedRanges(function(f,t2){return ranges.push(f,t2);});b.iterChangedRanges(function(_f,_t,f,t2){for(var _i153=0;_i153<ranges.length;){var from=ranges[_i153++],to=ranges[_i153++];if(t2>=from&&f<=to)isAdjacent2=true;}});return isAdjacent2;}function eqSelectionShape(a,b){return a.ranges.length==b.ranges.length&&a.ranges.filter(function(r,i){return r.empty!=b.ranges[i].empty;}).length===0;}function conc(a,b){return!a.length?b:!b.length?a:a.concat(b);}var none2=[];var MaxSelectionsPerEvent=200;function _addSelection(branch,selection2){if(!branch.length){return[_HistEvent.selection([selection2])];}else{var lastEvent=branch[branch.length-1];var sels=lastEvent.selectionsAfter.slice(Math.max(0,lastEvent.selectionsAfter.length-MaxSelectionsPerEvent));if(sels.length&&sels[sels.length-1].eq(selection2))return branch;sels.push(selection2);return updateBranch(branch,branch.length-1,1e9,lastEvent.setSelAfter(sels));}}function popSelection(branch){var last=branch[branch.length-1];var newBranch=branch.slice();newBranch[branch.length-1]=last.setSelAfter(last.selectionsAfter.slice(0,last.selectionsAfter.length-1));return newBranch;}function addMappingToBranch(branch,mapping){if(!branch.length)return branch;var length=branch.length,selections=none2;while(length){var event=mapEvent(branch[length-1],mapping,selections);if(event.changes&&!event.changes.empty||event.effects.length){var result=branch.slice(0,length);result[length-1]=event;return result;}else{mapping=event.mapped;length--;selections=event.selectionsAfter;}}return selections.length?[_HistEvent.selection(selections)]:none2;}function mapEvent(event,mapping,extraSelections){var selections=conc(event.selectionsAfter.length?event.selectionsAfter.map(function(s){return s.map(mapping);}):none2,extraSelections);if(!event.changes)return _HistEvent.selection(selections);var mappedChanges=event.changes.map(mapping),before=mapping.mapDesc(event.changes,true);var fullMapping=event.mapped?event.mapped.composeDesc(before):before;return new _HistEvent(mappedChanges,_StateEffect.mapEffects(event.effects,mapping),fullMapping,event.startSelection.map(before),selections);}var joinableUserEvent=/^(input\.type|delete)($|\.)/;var _HistoryState=/*#__PURE__*/function(){function HistoryState(done,undone){var prevTime=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var prevUserEvent=arguments.length>3&&arguments[3]!==undefined?arguments[3]:void 0;_classCallCheck(this,HistoryState);this.done=done;this.undone=undone;this.prevTime=prevTime;this.prevUserEvent=prevUserEvent;}return _createClass(HistoryState,[{key:"isolate",value:function isolate(){return this.prevTime?new _HistoryState(this.done,this.undone):this;}},{key:"addChanges",value:function addChanges(event,time,userEvent,config2,tr){var done=this.done,lastEvent=done[done.length-1];if(lastEvent&&lastEvent.changes&&!lastEvent.changes.empty&&event.changes&&(!userEvent||joinableUserEvent.test(userEvent))&&(!lastEvent.selectionsAfter.length&&time-this.prevTime<config2.newGroupDelay&&config2.joinToEvent(tr,isAdjacent(lastEvent.changes,event.changes))||userEvent=="input.type.compose")){done=updateBranch(done,done.length-1,config2.minDepth,new _HistEvent(event.changes.compose(lastEvent.changes),conc(_StateEffect.mapEffects(event.effects,lastEvent.changes),lastEvent.effects),lastEvent.mapped,lastEvent.startSelection,none2));}else{done=updateBranch(done,done.length,config2.minDepth,event);}return new _HistoryState(done,none2,time,userEvent);}},{key:"addSelection",value:function addSelection(selection2,time,userEvent,newGroupDelay){var last=this.done.length?this.done[this.done.length-1].selectionsAfter:none2;if(last.length>0&&time-this.prevTime<newGroupDelay&&userEvent==this.prevUserEvent&&userEvent&&/^select($|\.)/.test(userEvent)&&eqSelectionShape(last[last.length-1],selection2))return this;return new _HistoryState(_addSelection(this.done,selection2),this.undone,time,userEvent);}},{key:"addMapping",value:function addMapping(mapping){return new _HistoryState(addMappingToBranch(this.done,mapping),addMappingToBranch(this.undone,mapping),this.prevTime,this.prevUserEvent);}},{key:"pop",value:function pop(side,state,onlySelection){var branch=side==0?this.done:this.undone;if(branch.length==0)return null;var event=branch[branch.length-1],selection2=event.selectionsAfter[0]||state.selection;if(onlySelection&&event.selectionsAfter.length){return state.update({selection:event.selectionsAfter[event.selectionsAfter.length-1],annotations:fromHistory.of({side:side,rest:popSelection(branch),selection:selection2}),userEvent:side==0?"select.undo":"select.redo",scrollIntoView:true});}else if(!event.changes){return null;}else{var rest=branch.length==1?none2:branch.slice(0,branch.length-1);if(event.mapped)rest=addMappingToBranch(rest,event.mapped);return state.update({changes:event.changes,selection:event.startSelection,effects:event.effects,annotations:fromHistory.of({side:side,rest:rest,selection:selection2}),filter:false,userEvent:side==0?"undo":"redo",scrollIntoView:true});}}}]);}();_HistoryState.empty=/* @__PURE__ */new _HistoryState(none2,none2);var historyKeymap=[{key:"Mod-z",run:undo,preventDefault:true},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:true},{linux:"Ctrl-Shift-z",run:redo,preventDefault:true},{key:"Mod-u",run:undoSelection,preventDefault:true},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:true}];function updateSel(sel,by){return _EditorSelection.create(sel.ranges.map(by),sel.mainIndex);}function setSel(state,selection2){return state.update({selection:selection2,scrollIntoView:true,userEvent:"select"});}function moveSel(_ref20,how){var state=_ref20.state,dispatch=_ref20.dispatch;var selection2=updateSel(state.selection,how);if(selection2.eq(state.selection,true))return false;dispatch(setSel(state,selection2));return true;}function rangeEnd(range,forward){return _EditorSelection.cursor(forward?range.to:range.from);}function cursorByChar(view,forward){return moveSel(view,function(range){return range.empty?view.moveByChar(range,forward):rangeEnd(range,forward);});}function ltrAtCursor(view){return view.textDirectionAt(view.state.selection.main.head)==Direction.LTR;}var cursorCharLeft=function cursorCharLeft(view){return cursorByChar(view,!ltrAtCursor(view));};var cursorCharRight=function cursorCharRight(view){return cursorByChar(view,ltrAtCursor(view));};function cursorByGroup(view,forward){return moveSel(view,function(range){return range.empty?view.moveByGroup(range,forward):rangeEnd(range,forward);});}var cursorGroupLeft=function cursorGroupLeft(view){return cursorByGroup(view,!ltrAtCursor(view));};var cursorGroupRight=function cursorGroupRight(view){return cursorByGroup(view,ltrAtCursor(view));};var segmenter=typeof Intl!="undefined"&&Intl.Segmenter?/* @__PURE__ */new Intl.Segmenter(void 0,{granularity:"word"}):null;function interestingNode(state,node,bracketProp){if(node.type.prop(bracketProp))return true;var len=node.to-node.from;return len&&(len>2||/[^\s,.;:]/.test(state.sliceDoc(node.from,node.to)))||node.firstChild;}function moveBySyntax(state,start,forward){var pos=_syntaxTree(state).resolveInner(start.head);var bracketProp=forward?NodeProp.closedBy:NodeProp.openedBy;for(var at=start.head;;){var next=forward?pos.childAfter(at):pos.childBefore(at);if(!next)break;if(interestingNode(state,next,bracketProp))pos=next;else at=forward?next.to:next.from;}var bracket2=pos.type.prop(bracketProp),match,newPos;if(bracket2&&(match=forward?_matchBrackets(state,pos.from,1):_matchBrackets(state,pos.to,-1))&&match.matched)newPos=forward?match.end.to:match.end.from;else newPos=forward?pos.to:pos.from;return _EditorSelection.cursor(newPos,forward?-1:1);}var cursorSyntaxLeft=function cursorSyntaxLeft(view){return moveSel(view,function(range){return moveBySyntax(view.state,range,!ltrAtCursor(view));});};var cursorSyntaxRight=function cursorSyntaxRight(view){return moveSel(view,function(range){return moveBySyntax(view.state,range,ltrAtCursor(view));});};function cursorByLine(view,forward){return moveSel(view,function(range){if(!range.empty)return rangeEnd(range,forward);var moved=view.moveVertically(range,forward);return moved.head!=range.head?moved:view.moveToLineBoundary(range,forward);});}var cursorLineUp=function cursorLineUp(view){return cursorByLine(view,false);};var cursorLineDown=function cursorLineDown(view){return cursorByLine(view,true);};function pageInfo(view){var selfScroll=view.scrollDOM.clientHeight<view.scrollDOM.scrollHeight-2;var marginTop=0,marginBottom=0,height;if(selfScroll){var _iterator204=_createForOfIteratorHelper(view.state.facet(_EditorView.scrollMargins)),_step204;try{for(_iterator204.s();!(_step204=_iterator204.n()).done;){var source=_step204.value;var margins=source(view);if(margins===null||margins===void 0?void 0:margins.top)marginTop=Math.max(margins===null||margins===void 0?void 0:margins.top,marginTop);if(margins===null||margins===void 0?void 0:margins.bottom)marginBottom=Math.max(margins===null||margins===void 0?void 0:margins.bottom,marginBottom);}}catch(err){_iterator204.e(err);}finally{_iterator204.f();}height=view.scrollDOM.clientHeight-marginTop-marginBottom;}else{height=(view.dom.ownerDocument.defaultView||window).innerHeight;}return{marginTop:marginTop,marginBottom:marginBottom,selfScroll:selfScroll,height:Math.max(view.defaultLineHeight,height-5)};}function cursorByPage(view,forward){var page=pageInfo(view);var state=view.state,selection2=updateSel(state.selection,function(range){return range.empty?view.moveVertically(range,forward,page.height):rangeEnd(range,forward);});if(selection2.eq(state.selection))return false;var effect;if(page.selfScroll){var startPos=view.coordsAtPos(state.selection.main.head);var scrollRect=view.scrollDOM.getBoundingClientRect();var scrollTop=scrollRect.top+page.marginTop,scrollBottom=scrollRect.bottom-page.marginBottom;if(startPos&&startPos.top>scrollTop&&startPos.bottom<scrollBottom)effect=_EditorView.scrollIntoView(selection2.main.head,{y:"start",yMargin:startPos.top-scrollTop});}view.dispatch(setSel(state,selection2),{effects:effect});return true;}var cursorPageUp=function cursorPageUp(view){return cursorByPage(view,false);};var cursorPageDown=function cursorPageDown(view){return cursorByPage(view,true);};function moveByLineBoundary(view,start,forward){var line=view.lineBlockAt(start.head),moved=view.moveToLineBoundary(start,forward);if(moved.head==start.head&&moved.head!=(forward?line.to:line.from))moved=view.moveToLineBoundary(start,forward,false);if(!forward&&moved.head==line.from&&line.length){var space4=/^\s*/.exec(view.state.sliceDoc(line.from,Math.min(line.from+100,line.to)))[0].length;if(space4&&start.head!=line.from+space4)moved=_EditorSelection.cursor(line.from+space4);}return moved;}var cursorLineBoundaryForward=function cursorLineBoundaryForward(view){return moveSel(view,function(range){return moveByLineBoundary(view,range,true);});};var cursorLineBoundaryBackward=function cursorLineBoundaryBackward(view){return moveSel(view,function(range){return moveByLineBoundary(view,range,false);});};var cursorLineBoundaryLeft=function cursorLineBoundaryLeft(view){return moveSel(view,function(range){return moveByLineBoundary(view,range,!ltrAtCursor(view));});};var cursorLineBoundaryRight=function cursorLineBoundaryRight(view){return moveSel(view,function(range){return moveByLineBoundary(view,range,ltrAtCursor(view));});};var cursorLineStart=function cursorLineStart(view){return moveSel(view,function(range){return _EditorSelection.cursor(view.lineBlockAt(range.head).from,1);});};var cursorLineEnd=function cursorLineEnd(view){return moveSel(view,function(range){return _EditorSelection.cursor(view.lineBlockAt(range.head).to,-1);});};function toMatchingBracket(state,dispatch,extend){var found=false,selection2=updateSel(state.selection,function(range){var matching=_matchBrackets(state,range.head,-1)||_matchBrackets(state,range.head,1)||range.head>0&&_matchBrackets(state,range.head-1,1)||range.head<state.doc.length&&_matchBrackets(state,range.head+1,-1);if(!matching||!matching.end)return range;found=true;var head=matching.start.from==range.head?matching.end.to:matching.end.from;return extend?_EditorSelection.range(range.anchor,head):_EditorSelection.cursor(head);});if(!found)return false;dispatch(setSel(state,selection2));return true;}var cursorMatchingBracket=function cursorMatchingBracket(_ref21){var state=_ref21.state,dispatch=_ref21.dispatch;return toMatchingBracket(state,dispatch,false);};function extendSel(target,how){var selection2=updateSel(target.state.selection,function(range){var head=how(range);return _EditorSelection.range(range.anchor,head.head,head.goalColumn,head.bidiLevel||void 0);});if(selection2.eq(target.state.selection))return false;target.dispatch(setSel(target.state,selection2));return true;}function selectByChar(view,forward){return extendSel(view,function(range){return view.moveByChar(range,forward);});}var selectCharLeft=function selectCharLeft(view){return selectByChar(view,!ltrAtCursor(view));};var selectCharRight=function selectCharRight(view){return selectByChar(view,ltrAtCursor(view));};function selectByGroup(view,forward){return extendSel(view,function(range){return view.moveByGroup(range,forward);});}var selectGroupLeft=function selectGroupLeft(view){return selectByGroup(view,!ltrAtCursor(view));};var selectGroupRight=function selectGroupRight(view){return selectByGroup(view,ltrAtCursor(view));};var selectSyntaxLeft=function selectSyntaxLeft(view){return extendSel(view,function(range){return moveBySyntax(view.state,range,!ltrAtCursor(view));});};var selectSyntaxRight=function selectSyntaxRight(view){return extendSel(view,function(range){return moveBySyntax(view.state,range,ltrAtCursor(view));});};function selectByLine(view,forward){return extendSel(view,function(range){return view.moveVertically(range,forward);});}var selectLineUp=function selectLineUp(view){return selectByLine(view,false);};var selectLineDown=function selectLineDown(view){return selectByLine(view,true);};function selectByPage(view,forward){return extendSel(view,function(range){return view.moveVertically(range,forward,pageInfo(view).height);});}var selectPageUp=function selectPageUp(view){return selectByPage(view,false);};var selectPageDown=function selectPageDown(view){return selectByPage(view,true);};var selectLineBoundaryForward=function selectLineBoundaryForward(view){return extendSel(view,function(range){return moveByLineBoundary(view,range,true);});};var selectLineBoundaryBackward=function selectLineBoundaryBackward(view){return extendSel(view,function(range){return moveByLineBoundary(view,range,false);});};var selectLineBoundaryLeft=function selectLineBoundaryLeft(view){return extendSel(view,function(range){return moveByLineBoundary(view,range,!ltrAtCursor(view));});};var selectLineBoundaryRight=function selectLineBoundaryRight(view){return extendSel(view,function(range){return moveByLineBoundary(view,range,ltrAtCursor(view));});};var selectLineStart=function selectLineStart(view){return extendSel(view,function(range){return _EditorSelection.cursor(view.lineBlockAt(range.head).from);});};var selectLineEnd=function selectLineEnd(view){return extendSel(view,function(range){return _EditorSelection.cursor(view.lineBlockAt(range.head).to);});};var cursorDocStart=function cursorDocStart(_ref22){var state=_ref22.state,dispatch=_ref22.dispatch;dispatch(setSel(state,{anchor:0}));return true;};var cursorDocEnd=function cursorDocEnd(_ref23){var state=_ref23.state,dispatch=_ref23.dispatch;dispatch(setSel(state,{anchor:state.doc.length}));return true;};var selectDocStart=function selectDocStart(_ref24){var state=_ref24.state,dispatch=_ref24.dispatch;dispatch(setSel(state,{anchor:state.selection.main.anchor,head:0}));return true;};var selectDocEnd=function selectDocEnd(_ref25){var state=_ref25.state,dispatch=_ref25.dispatch;dispatch(setSel(state,{anchor:state.selection.main.anchor,head:state.doc.length}));return true;};var selectAll=function selectAll(_ref26){var state=_ref26.state,dispatch=_ref26.dispatch;dispatch(state.update({selection:{anchor:0,head:state.doc.length},userEvent:"select"}));return true;};var selectLine=function selectLine(_ref27){var state=_ref27.state,dispatch=_ref27.dispatch;var ranges=selectedLineBlocks(state).map(function(_ref28){var from=_ref28.from,to=_ref28.to;return _EditorSelection.range(from,Math.min(to+1,state.doc.length));});dispatch(state.update({selection:_EditorSelection.create(ranges),userEvent:"select"}));return true;};var selectParentSyntax=function selectParentSyntax(_ref29){var state=_ref29.state,dispatch=_ref29.dispatch;var selection2=updateSel(state.selection,function(range){var tree=_syntaxTree(state),stack=tree.resolveStack(range.from,1);if(range.empty){var stackBefore=tree.resolveStack(range.from,-1);if(stackBefore.node.from>=stack.node.from&&stackBefore.node.to<=stack.node.to)stack=stackBefore;}for(var cur2=stack;cur2;cur2=cur2.next){var _cur=cur2,node=_cur.node;if((node.from<range.from&&node.to>=range.to||node.to>range.to&&node.from<=range.from)&&cur2.next)return _EditorSelection.range(node.to,node.from);}return range;});if(selection2.eq(state.selection))return false;dispatch(setSel(state,selection2));return true;};var simplifySelection=function simplifySelection(_ref30){var state=_ref30.state,dispatch=_ref30.dispatch;var cur2=state.selection,selection2=null;if(cur2.ranges.length>1)selection2=_EditorSelection.create([cur2.main]);else if(!cur2.main.empty)selection2=_EditorSelection.create([_EditorSelection.cursor(cur2.main.head)]);if(!selection2)return false;dispatch(setSel(state,selection2));return true;};function deleteBy(target,by){if(target.state.readOnly)return false;var event="delete.selection",state=target.state;var changes=state.changeByRange(function(range){var from=range.from,to=range.to;if(from==to){var towards=by(range);if(towards<from){event="delete.backward";towards=skipAtomic(target,towards,false);}else if(towards>from){event="delete.forward";towards=skipAtomic(target,towards,true);}from=Math.min(from,towards);to=Math.max(to,towards);}else{from=skipAtomic(target,from,false);to=skipAtomic(target,to,true);}return from==to?{range:range}:{changes:{from:from,to:to},range:_EditorSelection.cursor(from,from<range.head?-1:1)};});if(changes.changes.empty)return false;target.dispatch(state.update(changes,{scrollIntoView:true,userEvent:event,effects:event=="delete.selection"?_EditorView.announce.of(state.phrase("Selection deleted")):void 0}));return true;}function skipAtomic(target,pos,forward){if(target instanceof _EditorView){var _iterator205=_createForOfIteratorHelper(target.state.facet(_EditorView.atomicRanges).map(function(f){return f(target);})),_step205;try{for(_iterator205.s();!(_step205=_iterator205.n()).done;){var ranges=_step205.value;ranges.between(pos,pos,function(from,to){if(from<pos&&to>pos)pos=forward?to:from;});}}catch(err){_iterator205.e(err);}finally{_iterator205.f();}}return pos;}var deleteByChar=function deleteByChar(target,forward,byIndentUnit){return deleteBy(target,function(range){var pos=range.from,state=target.state,line=state.doc.lineAt(pos),before,targetPos;if(byIndentUnit&&!forward&&pos>line.from&&pos<line.from+200&&!/[^ \t]/.test(before=line.text.slice(0,pos-line.from))){if(before[before.length-1]=="	")return pos-1;var col=_countColumn(before,state.tabSize),drop=col%_getIndentUnit(state)||_getIndentUnit(state);for(var _i154=0;_i154<drop&&before[before.length-1-_i154]==" ";_i154++)pos--;targetPos=pos;}else{targetPos=findClusterBreak2(line.text,pos-line.from,forward,forward)+line.from;if(targetPos==pos&&line.number!=(forward?state.doc.lines:1))targetPos+=forward?1:-1;else if(!forward&&/[\ufe00-\ufe0f]/.test(line.text.slice(targetPos-line.from,pos-line.from)))targetPos=findClusterBreak2(line.text,targetPos-line.from,false,false)+line.from;}return targetPos;});};var deleteCharBackward=function deleteCharBackward(view){return deleteByChar(view,false,true);};var deleteCharForward=function deleteCharForward(view){return deleteByChar(view,true,false);};var deleteByGroup=function deleteByGroup(target,forward){return deleteBy(target,function(range){var pos=range.head,state=target.state,line=state.doc.lineAt(pos);var categorize=state.charCategorizer(pos);for(var cat=null;;){if(pos==(forward?line.to:line.from)){if(pos==range.head&&line.number!=(forward?state.doc.lines:1))pos+=forward?1:-1;break;}var next=findClusterBreak2(line.text,pos-line.from,forward)+line.from;var nextChar2=line.text.slice(Math.min(pos,next)-line.from,Math.max(pos,next)-line.from);var nextCat=categorize(nextChar2);if(cat!=null&&nextCat!=cat)break;if(nextChar2!=" "||pos!=range.head)cat=nextCat;pos=next;}return pos;});};var deleteGroupBackward=function deleteGroupBackward(target){return deleteByGroup(target,false);};var deleteGroupForward=function deleteGroupForward(target){return deleteByGroup(target,true);};var deleteToLineEnd=function deleteToLineEnd(view){return deleteBy(view,function(range){var lineEnd2=view.lineBlockAt(range.head).to;return range.head<lineEnd2?lineEnd2:Math.min(view.state.doc.length,range.head+1);});};var deleteLineBoundaryBackward=function deleteLineBoundaryBackward(view){return deleteBy(view,function(range){var lineStart=view.moveToLineBoundary(range,false).head;return range.head>lineStart?lineStart:Math.max(0,range.head-1);});};var deleteLineBoundaryForward=function deleteLineBoundaryForward(view){return deleteBy(view,function(range){var lineStart=view.moveToLineBoundary(range,true).head;return range.head<lineStart?lineStart:Math.min(view.state.doc.length,range.head+1);});};var splitLine=function splitLine(_ref31){var state=_ref31.state,dispatch=_ref31.dispatch;if(state.readOnly)return false;var changes=state.changeByRange(function(range){return{changes:{from:range.from,to:range.to,insert:_Text.of(["",""])},range:_EditorSelection.cursor(range.from)};});dispatch(state.update(changes,{scrollIntoView:true,userEvent:"input"}));return true;};var transposeChars=function transposeChars(_ref32){var state=_ref32.state,dispatch=_ref32.dispatch;if(state.readOnly)return false;var changes=state.changeByRange(function(range){if(!range.empty||range.from==0||range.from==state.doc.length)return{range:range};var pos=range.from,line=state.doc.lineAt(pos);var from=pos==line.from?pos-1:findClusterBreak2(line.text,pos-line.from,false)+line.from;var to=pos==line.to?pos+1:findClusterBreak2(line.text,pos-line.from,true)+line.from;return{changes:{from:from,to:to,insert:state.doc.slice(pos,to).append(state.doc.slice(from,pos))},range:_EditorSelection.cursor(to)};});if(changes.changes.empty)return false;dispatch(state.update(changes,{scrollIntoView:true,userEvent:"move.character"}));return true;};function selectedLineBlocks(state){var blocks=[],upto=-1;var _iterator206=_createForOfIteratorHelper(state.selection.ranges),_step206;try{for(_iterator206.s();!(_step206=_iterator206.n()).done;){var range=_step206.value;var startLine=state.doc.lineAt(range.from),endLine=state.doc.lineAt(range.to);if(!range.empty&&range.to==endLine.from)endLine=state.doc.lineAt(range.to-1);if(upto>=startLine.number){var prev=blocks[blocks.length-1];prev.to=endLine.to;prev.ranges.push(range);}else{blocks.push({from:startLine.from,to:endLine.to,ranges:[range]});}upto=endLine.number+1;}}catch(err){_iterator206.e(err);}finally{_iterator206.f();}return blocks;}function moveLine(state,dispatch,forward){if(state.readOnly)return false;var changes=[],ranges=[];var _iterator207=_createForOfIteratorHelper(selectedLineBlocks(state)),_step207;try{for(_iterator207.s();!(_step207=_iterator207.n()).done;){var block=_step207.value;if(forward?block.to==state.doc.length:block.from==0)continue;var nextLine=state.doc.lineAt(forward?block.to+1:block.from-1);var size=nextLine.length+1;if(forward){changes.push({from:block.to,to:nextLine.to},{from:block.from,insert:nextLine.text+state.lineBreak});var _iterator208=_createForOfIteratorHelper(block.ranges),_step208;try{for(_iterator208.s();!(_step208=_iterator208.n()).done;){var _r10=_step208.value;ranges.push(_EditorSelection.range(Math.min(state.doc.length,_r10.anchor+size),Math.min(state.doc.length,_r10.head+size)));}}catch(err){_iterator208.e(err);}finally{_iterator208.f();}}else{changes.push({from:nextLine.from,to:block.from},{from:block.to,insert:state.lineBreak+nextLine.text});var _iterator209=_createForOfIteratorHelper(block.ranges),_step209;try{for(_iterator209.s();!(_step209=_iterator209.n()).done;){var _r11=_step209.value;ranges.push(_EditorSelection.range(_r11.anchor-size,_r11.head-size));}}catch(err){_iterator209.e(err);}finally{_iterator209.f();}}}}catch(err){_iterator207.e(err);}finally{_iterator207.f();}if(!changes.length)return false;dispatch(state.update({changes:changes,scrollIntoView:true,selection:_EditorSelection.create(ranges,state.selection.mainIndex),userEvent:"move.line"}));return true;}var moveLineUp=function moveLineUp(_ref33){var state=_ref33.state,dispatch=_ref33.dispatch;return moveLine(state,dispatch,false);};var moveLineDown=function moveLineDown(_ref34){var state=_ref34.state,dispatch=_ref34.dispatch;return moveLine(state,dispatch,true);};function copyLine(state,dispatch,forward){if(state.readOnly)return false;var changes=[];var _iterator210=_createForOfIteratorHelper(selectedLineBlocks(state)),_step210;try{for(_iterator210.s();!(_step210=_iterator210.n()).done;){var block=_step210.value;if(forward)changes.push({from:block.from,insert:state.doc.slice(block.from,block.to)+state.lineBreak});else changes.push({from:block.to,insert:state.lineBreak+state.doc.slice(block.from,block.to)});}}catch(err){_iterator210.e(err);}finally{_iterator210.f();}dispatch(state.update({changes:changes,scrollIntoView:true,userEvent:"input.copyline"}));return true;}var copyLineUp=function copyLineUp(_ref35){var state=_ref35.state,dispatch=_ref35.dispatch;return copyLine(state,dispatch,false);};var copyLineDown=function copyLineDown(_ref36){var state=_ref36.state,dispatch=_ref36.dispatch;return copyLine(state,dispatch,true);};var deleteLine=function deleteLine(view){if(view.state.readOnly)return false;var state=view.state,changes=state.changes(selectedLineBlocks(state).map(function(_ref37){var from=_ref37.from,to=_ref37.to;if(from>0)from--;else if(to<state.doc.length)to++;return{from:from,to:to};}));var selection2=updateSel(state.selection,function(range){var dist2=void 0;if(view.lineWrapping){var block=view.lineBlockAt(range.head),pos=view.coordsAtPos(range.head,range.assoc||1);if(pos)dist2=block.bottom+view.documentTop-pos.bottom+view.defaultLineHeight/2;}return view.moveVertically(range,true,dist2);}).map(changes);view.dispatch({changes:changes,selection:selection2,scrollIntoView:true,userEvent:"delete.line"});return true;};function isBetweenBrackets(state,pos){if(/\(\)|\[\]|\{\}/.test(state.sliceDoc(pos-1,pos+1)))return{from:pos,to:pos};var context=_syntaxTree(state).resolveInner(pos);var before=context.childBefore(pos),after=context.childAfter(pos),closedBy;if(before&&after&&before.to<=pos&&after.from>=pos&&(closedBy=before.type.prop(NodeProp.closedBy))&&closedBy.indexOf(after.name)>-1&&state.doc.lineAt(before.to).from==state.doc.lineAt(after.from).from&&!/\S/.test(state.sliceDoc(before.to,after.from)))return{from:before.to,to:after.from};return null;}var insertNewlineAndIndent=/* @__PURE__ */newlineAndIndent(false);var insertBlankLine=/* @__PURE__ */newlineAndIndent(true);function newlineAndIndent(atEof){return function(_ref38){var state=_ref38.state,dispatch=_ref38.dispatch;if(state.readOnly)return false;var changes=state.changeByRange(function(range){var from=range.from,to=range.to,line=state.doc.lineAt(from);var explode=!atEof&&from==to&&isBetweenBrackets(state,from);if(atEof)from=to=(to<=line.to?line:state.doc.lineAt(to)).to;var cx=new _IndentContext(state,{simulateBreak:from,simulateDoubleBreak:!!explode});var indent=_getIndentation(cx,from);if(indent==null)indent=_countColumn(/^\s*/.exec(state.doc.lineAt(from).text)[0],state.tabSize);while(to<line.to&&/\s/.test(line.text[to-line.from]))to++;if(explode){from=explode.from;to=explode.to;}else if(from>line.from&&from<line.from+100&&!/\S/.test(line.text.slice(0,from)))from=line.from;var insert2=["",_indentString(state,indent)];if(explode)insert2.push(_indentString(state,cx.lineIndent(line.from,-1)));return{changes:{from:from,to:to,insert:_Text.of(insert2)},range:_EditorSelection.cursor(from+1+insert2[1].length)};});dispatch(state.update(changes,{scrollIntoView:true,userEvent:"input"}));return true;};}function changeBySelectedLine(state,f){var atLine=-1;return state.changeByRange(function(range){var changes=[];for(var pos=range.from;pos<=range.to;){var line=state.doc.lineAt(pos);if(line.number>atLine&&(range.empty||range.to>line.from)){f(line,changes,range);atLine=line.number;}pos=line.to+1;}var changeSet=state.changes(changes);return{changes:changes,range:_EditorSelection.range(changeSet.mapPos(range.anchor,1),changeSet.mapPos(range.head,1))};});}var indentSelection=function indentSelection(_ref39){var state=_ref39.state,dispatch=_ref39.dispatch;if(state.readOnly)return false;var updated=/* @__PURE__ */Object.create(null);var context=new _IndentContext(state,{overrideIndentation:function overrideIndentation(start){var found=updated[start];return found==null?-1:found;}});var changes=changeBySelectedLine(state,function(line,changes2,range){var indent=_getIndentation(context,line.from);if(indent==null)return;if(!/\S/.test(line.text))indent=0;var cur2=/^\s*/.exec(line.text)[0];var norm=_indentString(state,indent);if(cur2!=norm||range.from<line.from+cur2.length){updated[line.from]=indent;changes2.push({from:line.from,to:line.from+cur2.length,insert:norm});}});if(!changes.changes.empty)dispatch(state.update(changes,{userEvent:"indent"}));return true;};var indentMore=function indentMore(_ref40){var state=_ref40.state,dispatch=_ref40.dispatch;if(state.readOnly)return false;dispatch(state.update(changeBySelectedLine(state,function(line,changes){changes.push({from:line.from,insert:state.facet(_indentUnit)});}),{userEvent:"input.indent"}));return true;};var indentLess=function indentLess(_ref41){var state=_ref41.state,dispatch=_ref41.dispatch;if(state.readOnly)return false;dispatch(state.update(changeBySelectedLine(state,function(line,changes){var space4=/^\s*/.exec(line.text)[0];if(!space4)return;var col=_countColumn(space4,state.tabSize),keep=0;var insert2=_indentString(state,Math.max(0,col-_getIndentUnit(state)));while(keep<space4.length&&keep<insert2.length&&space4.charCodeAt(keep)==insert2.charCodeAt(keep))keep++;changes.push({from:line.from+keep,to:line.from+space4.length,insert:insert2.slice(keep)});}),{userEvent:"delete.dedent"}));return true;};var toggleTabFocusMode=function toggleTabFocusMode(view){view.setTabFocusMode();return true;};var emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:true},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}];var standardKeymap=/* @__PURE__ */[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:true},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:true},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:true},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:true},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:true},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:true},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:true},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:true},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:true},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:true},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(/* @__PURE__ */emacsStyleKeymap.map(function(b){return{mac:b.key,run:b.run,shift:b.shift};}));var defaultKeymap=/* @__PURE__ */[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:true},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap);// ../node_modules/crelt/index.js
function crelt(){var elt2=arguments[0];if(typeof elt2=="string")elt2=document.createElement(elt2);var i=1,next=arguments[1];if(next&&_typeof(next)=="object"&&next.nodeType==null&&!Array.isArray(next)){for(var name2 in next)if(Object.prototype.hasOwnProperty.call(next,name2)){var value=next[name2];if(typeof value=="string")elt2.setAttribute(name2,value);else if(value!=null)elt2[name2]=value;}i++;}for(;i<arguments.length;i++)add(elt2,arguments[i]);return elt2;}function add(elt2,child){if(typeof child=="string"){elt2.appendChild(document.createTextNode(child));}else if(child==null){}else if(child.nodeType!=null){elt2.appendChild(child);}else if(Array.isArray(child)){for(var i=0;i<child.length;i++)add(elt2,child[i]);}else{throw new RangeError("Unsupported child node: "+child);}}// ../node_modules/@codemirror/search/dist/index.js
var basicNormalize=typeof String.prototype.normalize=="function"?function(x){return x.normalize("NFKD");}:function(x){return x;};var SearchCursor=/*#__PURE__*/function(){function SearchCursor(text,query){var from=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var to=arguments.length>3&&arguments[3]!==undefined?arguments[3]:text.length;var normalize=arguments.length>4?arguments[4]:undefined;var test=arguments.length>5?arguments[5]:undefined;_classCallCheck(this,SearchCursor);this.test=test;this.value={from:0,to:0};this.done=false;this.matches=[];this.buffer="";this.bufferPos=0;this.iter=text.iterRange(from,to);this.bufferStart=from;this.normalize=normalize?function(x){return normalize(basicNormalize(x));}:basicNormalize;this.query=this.normalize(query);}return _createClass(SearchCursor,[{key:"peek",value:function peek(){if(this.bufferPos==this.buffer.length){this.bufferStart+=this.buffer.length;this.iter.next();if(this.iter.done)return-1;this.bufferPos=0;this.buffer=this.iter.value;}return codePointAt2(this.buffer,this.bufferPos);}},{key:"next",value:function next(){while(this.matches.length)this.matches.pop();return this.nextOverlapping();}},{key:"nextOverlapping",value:function nextOverlapping(){for(;;){var next=this.peek();if(next<0){this.done=true;return this;}var str=fromCodePoint(next),start=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize2(next);var norm=this.normalize(str);if(norm.length)for(var _i155=0,pos=start;;_i155++){var _code=norm.charCodeAt(_i155);var match=this.match(_code,pos,this.bufferPos+this.bufferStart);if(_i155==norm.length-1){if(match){this.value=match;return this;}break;}if(pos==start&&_i155<str.length&&str.charCodeAt(_i155)==_code)pos++;}}}},{key:"match",value:function match(code,pos,end){var match=null;for(var _i156=0;_i156<this.matches.length;_i156+=2){var index=this.matches[_i156],keep=false;if(this.query.charCodeAt(index)==code){if(index==this.query.length-1){match={from:this.matches[_i156+1],to:end};}else{this.matches[_i156]++;keep=true;}}if(!keep){this.matches.splice(_i156,2);_i156-=2;}}if(this.query.charCodeAt(0)==code){if(this.query.length==1)match={from:pos,to:end};else this.matches.push(1,pos);}if(match&&this.test&&!this.test(match.from,match.to,this.buffer,this.bufferStart))match=null;return match;}}]);}();if(typeof Symbol!="undefined")SearchCursor.prototype[Symbol.iterator]=function(){return this;};var empty={from:-1,to:-1,match:/* @__PURE__ *//.*/.exec("")};var baseFlags="gm"+(/x/.unicode==null?"":"u");var RegExpCursor=/*#__PURE__*/function(){function RegExpCursor(text,query,options){var from=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var to=arguments.length>4&&arguments[4]!==undefined?arguments[4]:text.length;_classCallCheck(this,RegExpCursor);this.text=text;this.to=to;this.curLine="";this.done=false;this.value=empty;if(/\\[sWDnr]|\n|\r|\[\^/.test(query))return new MultilineRegExpCursor(text,query,options,from,to);this.re=new RegExp(query,baseFlags+((options===null||options===void 0?void 0:options.ignoreCase)?"i":""));this.test=options===null||options===void 0?void 0:options.test;this.iter=text.iter();var startLine=text.lineAt(from);this.curLineStart=startLine.from;this.matchPos=toCharEnd(text,from);this.getLine(this.curLineStart);}return _createClass(RegExpCursor,[{key:"getLine",value:function getLine(skip){this.iter.next(skip);if(this.iter.lineBreak){this.curLine="";}else{this.curLine=this.iter.value;if(this.curLineStart+this.curLine.length>this.to)this.curLine=this.curLine.slice(0,this.to-this.curLineStart);this.iter.next();}}},{key:"nextLine",value:function nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1;if(this.curLineStart>this.to)this.curLine="";else this.getLine(0);}},{key:"next",value:function next(){for(var off=this.matchPos-this.curLineStart;;){this.re.lastIndex=off;var match=this.matchPos<=this.to&&this.re.exec(this.curLine);if(match){var from=this.curLineStart+match.index,to=from+match[0].length;this.matchPos=toCharEnd(this.text,to+(from==to?1:0));if(from==this.curLineStart+this.curLine.length)this.nextLine();if((from<to||from>this.value.to)&&(!this.test||this.test(from,to,match))){this.value={from:from,to:to,match:match};return this;}off=this.matchPos-this.curLineStart;}else if(this.curLineStart+this.curLine.length<this.to){this.nextLine();off=0;}else{this.done=true;return this;}}}}]);}();var flattened=/* @__PURE__ */new WeakMap();var _FlattenedDoc=/*#__PURE__*/function(){function FlattenedDoc(from,text){_classCallCheck(this,FlattenedDoc);this.from=from;this.text=text;}return _createClass(FlattenedDoc,[{key:"to",get:function get(){return this.from+this.text.length;}}],[{key:"get",value:function get(doc2,from,to){var cached=flattened.get(doc2);if(!cached||cached.from>=to||cached.to<=from){var flat=new _FlattenedDoc(from,doc2.sliceString(from,to));flattened.set(doc2,flat);return flat;}if(cached.from==from&&cached.to==to)return cached;var text=cached.text,cachedFrom=cached.from;if(cachedFrom>from){text=doc2.sliceString(from,cachedFrom)+text;cachedFrom=from;}if(cached.to<to)text+=doc2.sliceString(cached.to,to);flattened.set(doc2,new _FlattenedDoc(cachedFrom,text));return new _FlattenedDoc(from,text.slice(from-cachedFrom,to-cachedFrom));}}]);}();var MultilineRegExpCursor=/*#__PURE__*/function(){function MultilineRegExpCursor(text,query,options,from,to){_classCallCheck(this,MultilineRegExpCursor);this.text=text;this.to=to;this.done=false;this.value=empty;this.matchPos=toCharEnd(text,from);this.re=new RegExp(query,baseFlags+((options===null||options===void 0?void 0:options.ignoreCase)?"i":""));this.test=options===null||options===void 0?void 0:options.test;this.flat=_FlattenedDoc.get(text,from,this.chunkEnd(from+5e3));}return _createClass(MultilineRegExpCursor,[{key:"chunkEnd",value:function chunkEnd(pos){return pos>=this.to?this.to:this.text.lineAt(pos).to;}},{key:"next",value:function next(){for(;;){var off=this.re.lastIndex=this.matchPos-this.flat.from;var match=this.re.exec(this.flat.text);if(match&&!match[0]&&match.index==off){this.re.lastIndex=off+1;match=this.re.exec(this.flat.text);}if(match){var from=this.flat.from+match.index,to=from+match[0].length;if((this.flat.to>=this.to||match.index+match[0].length<=this.flat.text.length-10)&&(!this.test||this.test(from,to,match))){this.value={from:from,to:to,match:match};this.matchPos=toCharEnd(this.text,to+(from==to?1:0));return this;}}if(this.flat.to==this.to){this.done=true;return this;}this.flat=_FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2));}}}]);}();if(typeof Symbol!="undefined"){RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this;};}function validRegExp(source){try{new RegExp(source,baseFlags);return true;}catch(_a2){return false;}}function toCharEnd(text,pos){if(pos>=text.length)return pos;var line=text.lineAt(pos),next;while(pos<line.to&&(next=line.text.charCodeAt(pos-line.from))>=56320&&next<57344)pos++;return pos;}function createLineDialog(view){var line=String(view.state.doc.lineAt(view.state.selection.main.head).number);var input=crelt("input",{"class":"cm-textfield",name:"line",value:line});var dom=crelt("form",{"class":"cm-gotoLine",onkeydown:function onkeydown(event){if(event.keyCode==27){event.preventDefault();view.dispatch({effects:dialogEffect.of(false)});view.focus();}else if(event.keyCode==13){event.preventDefault();go();}},onsubmit:function onsubmit(event){event.preventDefault();go();}},crelt("label",view.state.phrase("Go to line"),": ",input)," ",crelt("button",{"class":"cm-button",type:"submit"},view.state.phrase("go")),crelt("button",{name:"close",onclick:function onclick(){view.dispatch({effects:dialogEffect.of(false)});view.focus();},"aria-label":view.state.phrase("close"),type:"button"},["\xD7"]));function go(){var match=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(input.value);if(!match)return;var state=view.state,startLine=state.doc.lineAt(state.selection.main.head);var _match2=_slicedToArray(match,5),sign=_match2[1],ln=_match2[2],cl=_match2[3],percent2=_match2[4];var col=cl?+cl.slice(1):0;var line2=ln?+ln:startLine.number;if(ln&&percent2){var pc=line2/100;if(sign)pc=pc*(sign=="-"?-1:1)+startLine.number/state.doc.lines;line2=Math.round(state.doc.lines*pc);}else if(ln&&sign){line2=line2*(sign=="-"?-1:1)+startLine.number;}var docLine=state.doc.line(Math.max(1,Math.min(state.doc.lines,line2)));var selection2=_EditorSelection.cursor(docLine.from+Math.max(0,Math.min(col,docLine.length)));view.dispatch({effects:[dialogEffect.of(false),_EditorView.scrollIntoView(selection2.from,{y:"center"})],selection:selection2});view.focus();}return{dom:dom};}var dialogEffect=/* @__PURE__ */_StateEffect.define();var dialogField=/* @__PURE__ */_StateField.define({create:function create(){return true;},update:function update(value,tr){var _iterator211=_createForOfIteratorHelper(tr.effects),_step211;try{for(_iterator211.s();!(_step211=_iterator211.n()).done;){var e=_step211.value;if(e.is(dialogEffect))value=e.value;}}catch(err){_iterator211.e(err);}finally{_iterator211.f();}return value;},provide:function provide(f){return showPanel.from(f,function(val){return val?createLineDialog:null;});}});var gotoLine=function gotoLine(view){var panel=getPanel(view,createLineDialog);if(!panel){var effects=[dialogEffect.of(true)];if(view.state.field(dialogField,false)==null)effects.push(_StateEffect.appendConfig.of([dialogField,baseTheme$13]));view.dispatch({effects:effects});panel=getPanel(view,createLineDialog);}if(panel)panel.dom.querySelector("input").select();return true;};var baseTheme$13=/* @__PURE__ */_EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}});var defaultHighlightOptions={highlightWordAroundCursor:false,minSelectionLength:1,maxMatches:100,wholeWords:false};var highlightConfig=/* @__PURE__ */_Facet.define({combine:function combine(options){return combineConfig(options,defaultHighlightOptions,{highlightWordAroundCursor:function highlightWordAroundCursor(a,b){return a||b;},minSelectionLength:Math.min,maxMatches:Math.min});}});function highlightSelectionMatches(options){var ext=[defaultTheme,matchHighlighter];if(options)ext.push(highlightConfig.of(options));return ext;}var matchDeco=/* @__PURE__ */Decoration.mark({"class":"cm-selectionMatch"});var mainMatchDeco=/* @__PURE__ */Decoration.mark({"class":"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(check,state,from,to){return(from==0||check(state.sliceDoc(from-1,from))!=CharCategory.Word)&&(to==state.doc.length||check(state.sliceDoc(to,to+1))!=CharCategory.Word);}function insideWord(check,state,from,to){return check(state.sliceDoc(from,from+1))==CharCategory.Word&&check(state.sliceDoc(to-1,to))==CharCategory.Word;}var matchHighlighter=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class12(view){_classCallCheck(this,_class12);this.decorations=this.getDeco(view);}return _createClass(_class12,[{key:"update",value:function update(_update24){if(_update24.selectionSet||_update24.docChanged||_update24.viewportChanged)this.decorations=this.getDeco(_update24.view);}},{key:"getDeco",value:function getDeco(view){var conf=view.state.facet(highlightConfig);var state=view.state,sel=state.selection;if(sel.ranges.length>1)return Decoration.none;var range=sel.main,query,check=null;if(range.empty){if(!conf.highlightWordAroundCursor)return Decoration.none;var word=state.wordAt(range.head);if(!word)return Decoration.none;check=state.charCategorizer(range.head);query=state.sliceDoc(word.from,word.to);}else{var len=range.to-range.from;if(len<conf.minSelectionLength||len>200)return Decoration.none;if(conf.wholeWords){query=state.sliceDoc(range.from,range.to);check=state.charCategorizer(range.head);if(!(insideWordBoundaries(check,state,range.from,range.to)&&insideWord(check,state,range.from,range.to)))return Decoration.none;}else{query=state.sliceDoc(range.from,range.to);if(!query)return Decoration.none;}}var deco=[];var _iterator212=_createForOfIteratorHelper(view.visibleRanges),_step212;try{for(_iterator212.s();!(_step212=_iterator212.n()).done;){var part=_step212.value;var cursor2=new SearchCursor(state.doc,query,part.from,part.to);while(!cursor2.next().done){var _cursor2$value=cursor2.value,from=_cursor2$value.from,to=_cursor2$value.to;if(!check||insideWordBoundaries(check,state,from,to)){if(range.empty&&from<=range.from&&to>=range.to)deco.push(mainMatchDeco.range(from,to));else if(from>=range.to||to<=range.from)deco.push(matchDeco.range(from,to));if(deco.length>conf.maxMatches)return Decoration.none;}}}}catch(err){_iterator212.e(err);}finally{_iterator212.f();}return Decoration.set(deco);}}]);}(),{decorations:function decorations(v){return v.decorations;}});var defaultTheme=/* @__PURE__ */_EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var selectWord=function selectWord(_ref42){var state=_ref42.state,dispatch=_ref42.dispatch;var selection2=state.selection;var newSel=_EditorSelection.create(selection2.ranges.map(function(range){return state.wordAt(range.head)||_EditorSelection.cursor(range.head);}),selection2.mainIndex);if(newSel.eq(selection2))return false;dispatch(state.update({selection:newSel}));return true;};function findNextOccurrence(state,query){var _state$selection=state.selection,main=_state$selection.main,ranges=_state$selection.ranges;var word=state.wordAt(main.head),fullWord=word&&word.from==main.from&&word.to==main.to;var _loop15=function _loop15(_cycled,_cursor){_cursor.next();if(_cursor.done){if(_cycled)return{v:null};_cursor=new SearchCursor(state.doc,query,0,Math.max(0,ranges[ranges.length-1].from-1));_cycled=true;}else{if(_cycled&&ranges.some(function(r){return r.from==_cursor.value.from;})){cycled=_cycled,cursor2=_cursor;return 0;}// continue
if(fullWord){var word2=state.wordAt(_cursor.value.from);if(!word2||word2.from!=_cursor.value.from||word2.to!=_cursor.value.to){cycled=_cycled,cursor2=_cursor;return 0;}// continue
}return{v:_cursor.value};}cycled=_cycled,cursor2=_cursor;},_ret2;for(var cycled=false,cursor2=new SearchCursor(state.doc,query,ranges[ranges.length-1].to);;){_ret2=_loop15(cycled,cursor2);if(_ret2===0)continue;if(_ret2)return _ret2.v;}}var selectNextOccurrence=function selectNextOccurrence(_ref43){var state=_ref43.state,dispatch=_ref43.dispatch;var ranges=state.selection.ranges;if(ranges.some(function(sel){return sel.from===sel.to;}))return selectWord({state:state,dispatch:dispatch});var searchedText=state.sliceDoc(ranges[0].from,ranges[0].to);if(state.selection.ranges.some(function(r){return state.sliceDoc(r.from,r.to)!=searchedText;}))return false;var range=findNextOccurrence(state,searchedText);if(!range)return false;dispatch(state.update({selection:state.selection.addRange(_EditorSelection.range(range.from,range.to),false),effects:_EditorView.scrollIntoView(range.to)}));return true;};var searchConfigFacet=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{top:false,caseSensitive:false,literal:false,regexp:false,wholeWord:false,createPanel:function createPanel(view){return new SearchPanel(view);},scrollToMatch:function scrollToMatch(range){return _EditorView.scrollIntoView(range);}});}});var SearchQuery=/*#__PURE__*/function(){function SearchQuery(config2){_classCallCheck(this,SearchQuery);this.search=config2.search;this.caseSensitive=!!config2.caseSensitive;this.literal=!!config2.literal;this.regexp=!!config2.regexp;this.replace=config2.replace||"";this.valid=!!this.search&&(!this.regexp||validRegExp(this.search));this.unquoted=this.unquote(this.search);this.wholeWord=!!config2.wholeWord;}return _createClass(SearchQuery,[{key:"unquote",value:function unquote(text){return this.literal?text:text.replace(/\\([nrt\\])/g,function(_,ch){return ch=="n"?"\n":ch=="r"?"\r":ch=="t"?"	":"\\";});}},{key:"eq",value:function eq(other){return this.search==other.search&&this.replace==other.replace&&this.caseSensitive==other.caseSensitive&&this.regexp==other.regexp&&this.wholeWord==other.wholeWord;}},{key:"create",value:function create(){return this.regexp?new RegExpQuery(this):new StringQuery(this);}},{key:"getCursor",value:function getCursor(state){var from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var to=arguments.length>2?arguments[2]:undefined;var st=state.doc?state:_EditorState.create({doc:state});if(to==null)to=st.doc.length;return this.regexp?regexpCursor(this,st,from,to):stringCursor(this,st,from,to);}}]);}();var QueryType2=/*#__PURE__*/_createClass(function QueryType2(spec){_classCallCheck(this,QueryType2);this.spec=spec;});function stringCursor(spec,state,from,to){return new SearchCursor(state.doc,spec.unquoted,from,to,spec.caseSensitive?void 0:function(x){return x.toLowerCase();},spec.wholeWord?stringWordTest(state.doc,state.charCategorizer(state.selection.main.head)):void 0);}function stringWordTest(doc2,categorizer){return function(from,to,buf,bufPos){if(bufPos>from||bufPos+buf.length<to){bufPos=Math.max(0,from-2);buf=doc2.sliceString(bufPos,Math.min(doc2.length,to+2));}return(categorizer(charBefore(buf,from-bufPos))!=CharCategory.Word||categorizer(charAfter(buf,from-bufPos))!=CharCategory.Word)&&(categorizer(charAfter(buf,to-bufPos))!=CharCategory.Word||categorizer(charBefore(buf,to-bufPos))!=CharCategory.Word);};}var StringQuery=/*#__PURE__*/function(_QueryType){function StringQuery(spec){_classCallCheck(this,StringQuery);return _callSuper(this,StringQuery,[spec]);}_inherits(StringQuery,_QueryType);return _createClass(StringQuery,[{key:"nextMatch",value:function nextMatch(state,curFrom,curTo){var cursor2=stringCursor(this.spec,state,curTo,state.doc.length).nextOverlapping();if(cursor2.done){var end=Math.min(state.doc.length,curFrom+this.spec.unquoted.length);cursor2=stringCursor(this.spec,state,0,end).nextOverlapping();}return cursor2.done||cursor2.value.from==curFrom&&cursor2.value.to==curTo?null:cursor2.value;}},{key:"prevMatchInRange",value:function prevMatchInRange(state,from,to){for(var pos=to;;){var start=Math.max(from,pos-1e4-this.spec.unquoted.length);var cursor2=stringCursor(this.spec,state,start,pos),range=null;while(!cursor2.nextOverlapping().done)range=cursor2.value;if(range)return range;if(start==from)return null;pos-=1e4;}}},{key:"prevMatch",value:function prevMatch(state,curFrom,curTo){var found=this.prevMatchInRange(state,0,curFrom);if(!found)found=this.prevMatchInRange(state,Math.max(0,curTo-this.spec.unquoted.length),state.doc.length);return found&&(found.from!=curFrom||found.to!=curTo)?found:null;}},{key:"getReplacement",value:function getReplacement(_result){return this.spec.unquote(this.spec.replace);}},{key:"matchAll",value:function matchAll(state,limit){var cursor2=stringCursor(this.spec,state,0,state.doc.length),ranges=[];while(!cursor2.next().done){if(ranges.length>=limit)return null;ranges.push(cursor2.value);}return ranges;}},{key:"highlight",value:function highlight(state,from,to,add2){var cursor2=stringCursor(this.spec,state,Math.max(0,from-this.spec.unquoted.length),Math.min(to+this.spec.unquoted.length,state.doc.length));while(!cursor2.next().done)add2(cursor2.value.from,cursor2.value.to);}}]);}(QueryType2);function regexpCursor(spec,state,from,to){return new RegExpCursor(state.doc,spec.search,{ignoreCase:!spec.caseSensitive,test:spec.wholeWord?regexpWordTest(state.charCategorizer(state.selection.main.head)):void 0},from,to);}function charBefore(str,index){return str.slice(findClusterBreak2(str,index,false),index);}function charAfter(str,index){return str.slice(index,findClusterBreak2(str,index));}function regexpWordTest(categorizer){return function(_from,_to,match){return!match[0].length||(categorizer(charBefore(match.input,match.index))!=CharCategory.Word||categorizer(charAfter(match.input,match.index))!=CharCategory.Word)&&(categorizer(charAfter(match.input,match.index+match[0].length))!=CharCategory.Word||categorizer(charBefore(match.input,match.index+match[0].length))!=CharCategory.Word);};}var RegExpQuery=/*#__PURE__*/function(_QueryType2){function RegExpQuery(){_classCallCheck(this,RegExpQuery);return _callSuper(this,RegExpQuery,arguments);}_inherits(RegExpQuery,_QueryType2);return _createClass(RegExpQuery,[{key:"nextMatch",value:function nextMatch(state,curFrom,curTo){var cursor2=regexpCursor(this.spec,state,curTo,state.doc.length).next();if(cursor2.done)cursor2=regexpCursor(this.spec,state,0,curFrom).next();return cursor2.done?null:cursor2.value;}},{key:"prevMatchInRange",value:function prevMatchInRange(state,from,to){for(var size=1;;size++){var start=Math.max(from,to-size*1e4);var cursor2=regexpCursor(this.spec,state,start,to),range=null;while(!cursor2.next().done)range=cursor2.value;if(range&&(start==from||range.from>start+10))return range;if(start==from)return null;}}},{key:"prevMatch",value:function prevMatch(state,curFrom,curTo){return this.prevMatchInRange(state,0,curFrom)||this.prevMatchInRange(state,curTo,state.doc.length);}},{key:"getReplacement",value:function getReplacement(result){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,function(m,i){if(i=="&")return result.match[0];if(i=="$")return"$";for(var _l2=i.length;_l2>0;_l2--){var n=+i.slice(0,_l2);if(n>0&&n<result.match.length)return result.match[n]+i.slice(_l2);}return m;});}},{key:"matchAll",value:function matchAll(state,limit){var cursor2=regexpCursor(this.spec,state,0,state.doc.length),ranges=[];while(!cursor2.next().done){if(ranges.length>=limit)return null;ranges.push(cursor2.value);}return ranges;}},{key:"highlight",value:function highlight(state,from,to,add2){var cursor2=regexpCursor(this.spec,state,Math.max(0,from-250),Math.min(to+250,state.doc.length));while(!cursor2.next().done)add2(cursor2.value.from,cursor2.value.to);}}]);}(QueryType2);var setSearchQuery=/* @__PURE__ */_StateEffect.define();var togglePanel=/* @__PURE__ */_StateEffect.define();var searchState=/* @__PURE__ */_StateField.define({create:function create(state){return new SearchState(defaultQuery(state).create(),null);},update:function update(value,tr){var _iterator213=_createForOfIteratorHelper(tr.effects),_step213;try{for(_iterator213.s();!(_step213=_iterator213.n()).done;){var effect=_step213.value;if(effect.is(setSearchQuery))value=new SearchState(effect.value.create(),value.panel);else if(effect.is(togglePanel))value=new SearchState(value.query,effect.value?createSearchPanel:null);}}catch(err){_iterator213.e(err);}finally{_iterator213.f();}return value;},provide:function provide(f){return showPanel.from(f,function(val){return val.panel;});}});var SearchState=/*#__PURE__*/_createClass(function SearchState(query,panel){_classCallCheck(this,SearchState);this.query=query;this.panel=panel;});var matchMark=/* @__PURE__ */Decoration.mark({"class":"cm-searchMatch"});var selectedMatchMark=/* @__PURE__ */Decoration.mark({"class":"cm-searchMatch cm-searchMatch-selected"});var searchHighlighter=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class13(view){_classCallCheck(this,_class13);this.view=view;this.decorations=this.highlight(view.state.field(searchState));}return _createClass(_class13,[{key:"update",value:function update(_update25){var state=_update25.state.field(searchState);if(state!=_update25.startState.field(searchState)||_update25.docChanged||_update25.selectionSet||_update25.viewportChanged)this.decorations=this.highlight(state);}},{key:"highlight",value:function highlight(_ref44){var query=_ref44.query,panel=_ref44.panel;if(!panel||!query.spec.valid)return Decoration.none;var view=this.view;var builder=new _RangeSetBuilder();for(var _i157=0,ranges=view.visibleRanges,_l3=ranges.length;_i157<_l3;_i157++){var _ranges$_i2=ranges[_i157],from=_ranges$_i2.from,to=_ranges$_i2.to;while(_i157<_l3-1&&to>ranges[_i157+1].from-2*250)to=ranges[++_i157].to;query.highlight(view.state,from,to,function(from2,to2){var selected=view.state.selection.ranges.some(function(r){return r.from==from2&&r.to==to2;});builder.add(from2,to2,selected?selectedMatchMark:matchMark);});}return builder.finish();}}]);}(),{decorations:function decorations(v){return v.decorations;}});function searchCommand(f){return function(view){var state=view.state.field(searchState,false);return state&&state.query.spec.valid?f(view,state):openSearchPanel(view);};}var findNext=/* @__PURE__ */searchCommand(function(view,_ref45){var query=_ref45.query;var to=view.state.selection.main.to;var next=query.nextMatch(view.state,to,to);if(!next)return false;var selection2=_EditorSelection.single(next.from,next.to);var config2=view.state.facet(searchConfigFacet);view.dispatch({selection:selection2,effects:[announceMatch(view,next),config2.scrollToMatch(selection2.main,view)],userEvent:"select.search"});selectSearchInput(view);return true;});var findPrevious=/* @__PURE__ */searchCommand(function(view,_ref46){var query=_ref46.query;var state=view.state,from=state.selection.main.from;var prev=query.prevMatch(state,from,from);if(!prev)return false;var selection2=_EditorSelection.single(prev.from,prev.to);var config2=view.state.facet(searchConfigFacet);view.dispatch({selection:selection2,effects:[announceMatch(view,prev),config2.scrollToMatch(selection2.main,view)],userEvent:"select.search"});selectSearchInput(view);return true;});var selectMatches=/* @__PURE__ */searchCommand(function(view,_ref47){var query=_ref47.query;var ranges=query.matchAll(view.state,1e3);if(!ranges||!ranges.length)return false;view.dispatch({selection:_EditorSelection.create(ranges.map(function(r){return _EditorSelection.range(r.from,r.to);})),userEvent:"select.search.matches"});return true;});var selectSelectionMatches=function selectSelectionMatches(_ref48){var state=_ref48.state,dispatch=_ref48.dispatch;var sel=state.selection;if(sel.ranges.length>1||sel.main.empty)return false;var _sel$main=sel.main,from=_sel$main.from,to=_sel$main.to;var ranges=[],main=0;for(var cur2=new SearchCursor(state.doc,state.sliceDoc(from,to));!cur2.next().done;){if(ranges.length>1e3)return false;if(cur2.value.from==from)main=ranges.length;ranges.push(_EditorSelection.range(cur2.value.from,cur2.value.to));}dispatch(state.update({selection:_EditorSelection.create(ranges,main),userEvent:"select.search.matches"}));return true;};var replaceNext=/* @__PURE__ */searchCommand(function(view,_ref49){var query=_ref49.query;var state=view.state,_state$selection$main=state.selection.main,from=_state$selection$main.from,to=_state$selection$main.to;if(state.readOnly)return false;var match=query.nextMatch(state,from,from);if(!match)return false;var next=match;var changes=[],selection2,replacement;var effects=[];if(next.from==from&&next.to==to){replacement=state.toText(query.getReplacement(next));changes.push({from:next.from,to:next.to,insert:replacement});next=query.nextMatch(state,next.from,next.to);effects.push(_EditorView.announce.of(state.phrase("replaced match on line $",state.doc.lineAt(from).number)+"."));}if(next){var off=changes.length==0||changes[0].from>=match.to?0:match.to-match.from-replacement.length;selection2=_EditorSelection.single(next.from-off,next.to-off);effects.push(announceMatch(view,next));effects.push(state.facet(searchConfigFacet).scrollToMatch(selection2.main,view));}view.dispatch({changes:changes,selection:selection2,effects:effects,userEvent:"input.replace"});return true;});var replaceAll=/* @__PURE__ */searchCommand(function(view,_ref50){var query=_ref50.query;if(view.state.readOnly)return false;var changes=query.matchAll(view.state,1e9).map(function(match){var from=match.from,to=match.to;return{from:from,to:to,insert:query.getReplacement(match)};});if(!changes.length)return false;var announceText=view.state.phrase("replaced $ matches",changes.length)+".";view.dispatch({changes:changes,effects:_EditorView.announce.of(announceText),userEvent:"input.replace.all"});return true;});function createSearchPanel(view){return view.state.facet(searchConfigFacet).createPanel(view);}function defaultQuery(state,fallback){var _a2,_b,_c,_d,_e;var sel=state.selection.main;var selText=sel.empty||sel.to>sel.from+100?"":state.sliceDoc(sel.from,sel.to);if(fallback&&!selText)return fallback;var config2=state.facet(searchConfigFacet);return new SearchQuery({search:((_a2=fallback===null||fallback===void 0?void 0:fallback.literal)!==null&&_a2!==void 0?_a2:config2.literal)?selText:selText.replace(/\n/g,"\\n"),caseSensitive:(_b=fallback===null||fallback===void 0?void 0:fallback.caseSensitive)!==null&&_b!==void 0?_b:config2.caseSensitive,literal:(_c=fallback===null||fallback===void 0?void 0:fallback.literal)!==null&&_c!==void 0?_c:config2.literal,regexp:(_d=fallback===null||fallback===void 0?void 0:fallback.regexp)!==null&&_d!==void 0?_d:config2.regexp,wholeWord:(_e=fallback===null||fallback===void 0?void 0:fallback.wholeWord)!==null&&_e!==void 0?_e:config2.wholeWord});}function getSearchInput(view){var panel=getPanel(view,createSearchPanel);return panel&&panel.dom.querySelector("[main-field]");}function selectSearchInput(view){var input=getSearchInput(view);if(input&&input==view.root.activeElement)input.select();}var openSearchPanel=function openSearchPanel(view){var state=view.state.field(searchState,false);if(state&&state.panel){var searchInput=getSearchInput(view);if(searchInput&&searchInput!=view.root.activeElement){var query=defaultQuery(view.state,state.query.spec);if(query.valid)view.dispatch({effects:setSearchQuery.of(query)});searchInput.focus();searchInput.select();}}else{view.dispatch({effects:[togglePanel.of(true),state?setSearchQuery.of(defaultQuery(view.state,state.query.spec)):_StateEffect.appendConfig.of(searchExtensions)]});}return true;};var closeSearchPanel=function closeSearchPanel(view){var state=view.state.field(searchState,false);if(!state||!state.panel)return false;var panel=getPanel(view,createSearchPanel);if(panel&&panel.dom.contains(view.root.activeElement))view.focus();view.dispatch({effects:togglePanel.of(false)});return true;};var searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:true},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:true}];var SearchPanel=/*#__PURE__*/function(){function SearchPanel(view){var _this84=this;_classCallCheck(this,SearchPanel);this.view=view;var query=this.query=view.state.field(searchState).query.spec;this.commit=this.commit.bind(this);this.searchField=crelt("input",{value:query.search,placeholder:phrase(view,"Find"),"aria-label":phrase(view,"Find"),"class":"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit});this.replaceField=crelt("input",{value:query.replace,placeholder:phrase(view,"Replace"),"aria-label":phrase(view,"Replace"),"class":"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit});this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:query.caseSensitive,onchange:this.commit});this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:query.regexp,onchange:this.commit});this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:query.wholeWord,onchange:this.commit});function button(name2,onclick,content2){return crelt("button",{"class":"cm-button",name:name2,onclick:onclick,type:"button"},content2);}this.dom=crelt("div",{onkeydown:function onkeydown(e){return _this84.keydown(e);},"class":"cm-search"},[this.searchField,button("next",function(){return findNext(view);},[phrase(view,"next")]),button("prev",function(){return findPrevious(view);},[phrase(view,"previous")]),button("select",function(){return selectMatches(view);},[phrase(view,"all")]),crelt("label",null,[this.caseField,phrase(view,"match case")]),crelt("label",null,[this.reField,phrase(view,"regexp")]),crelt("label",null,[this.wordField,phrase(view,"by word")])].concat(_toConsumableArray(view.state.readOnly?[]:[crelt("br"),this.replaceField,button("replace",function(){return replaceNext(view);},[phrase(view,"replace")]),button("replaceAll",function(){return replaceAll(view);},[phrase(view,"replace all")])]),[crelt("button",{name:"close",onclick:function onclick(){return closeSearchPanel(view);},"aria-label":phrase(view,"close"),type:"button"},["\xD7"])]));}return _createClass(SearchPanel,[{key:"commit",value:function commit(){var query=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});if(!query.eq(this.query)){this.query=query;this.view.dispatch({effects:setSearchQuery.of(query)});}}},{key:"keydown",value:function keydown(e){if(runScopeHandlers(this.view,e,"search-panel")){e.preventDefault();}else if(e.keyCode==13&&e.target==this.searchField){e.preventDefault();(e.shiftKey?findPrevious:findNext)(this.view);}else if(e.keyCode==13&&e.target==this.replaceField){e.preventDefault();replaceNext(this.view);}}},{key:"update",value:function update(_update26){var _iterator214=_createForOfIteratorHelper(_update26.transactions),_step214;try{for(_iterator214.s();!(_step214=_iterator214.n()).done;){var tr=_step214.value;var _iterator215=_createForOfIteratorHelper(tr.effects),_step215;try{for(_iterator215.s();!(_step215=_iterator215.n()).done;){var effect=_step215.value;if(effect.is(setSearchQuery)&&!effect.value.eq(this.query))this.setQuery(effect.value);}}catch(err){_iterator215.e(err);}finally{_iterator215.f();}}}catch(err){_iterator214.e(err);}finally{_iterator214.f();}}},{key:"setQuery",value:function setQuery(query){this.query=query;this.searchField.value=query.search;this.replaceField.value=query.replace;this.caseField.checked=query.caseSensitive;this.reField.checked=query.regexp;this.wordField.checked=query.wholeWord;}},{key:"mount",value:function mount(){this.searchField.select();}},{key:"pos",get:function get(){return 80;}},{key:"top",get:function get(){return this.view.state.facet(searchConfigFacet).top;}}]);}();function phrase(view,phrase2){return view.state.phrase(phrase2);}var AnnounceMargin=30;var Break=/[\s\.,:;?!]/;function announceMatch(view,_ref51){var from=_ref51.from,to=_ref51.to;var line=view.state.doc.lineAt(from),lineEnd2=view.state.doc.lineAt(to).to;var start=Math.max(line.from,from-AnnounceMargin),end=Math.min(lineEnd2,to+AnnounceMargin);var text=view.state.sliceDoc(start,end);if(start!=line.from){for(var _i158=0;_i158<AnnounceMargin;_i158++)if(!Break.test(text[_i158+1])&&Break.test(text[_i158])){text=text.slice(_i158);break;}}if(end!=lineEnd2){for(var _i159=text.length-1;_i159>text.length-AnnounceMargin;_i159--)if(!Break.test(text[_i159-1])&&Break.test(text[_i159])){text=text.slice(0,_i159);break;}}return _EditorView.announce.of("".concat(view.state.phrase("current match"),". ").concat(text," ").concat(view.state.phrase("on line")," ").concat(line.number,"."));}var baseTheme3=/* @__PURE__ */_EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}});var searchExtensions=[searchState,/* @__PURE__ */Prec.low(searchHighlighter),baseTheme3];// ../node_modules/@codemirror/autocomplete/dist/index.js
var dist_exports2={};__export(dist_exports2,{CompletionContext:function CompletionContext(){return _CompletionContext;},acceptCompletion:function acceptCompletion(){return _acceptCompletion;},autocompletion:function autocompletion(){return _autocompletion;},clearSnippet:function clearSnippet(){return _clearSnippet;},closeBrackets:function closeBrackets(){return _closeBrackets;},closeBracketsKeymap:function closeBracketsKeymap(){return _closeBracketsKeymap;},closeCompletion:function closeCompletion(){return _closeCompletion;},completeAnyWord:function completeAnyWord(){return _completeAnyWord;},completeFromList:function completeFromList(){return _completeFromList;},completionKeymap:function completionKeymap(){return _completionKeymap;},completionStatus:function completionStatus(){return _completionStatus;},currentCompletions:function currentCompletions(){return _currentCompletions;},deleteBracketPair:function deleteBracketPair(){return _deleteBracketPair;},hasNextSnippetField:function hasNextSnippetField(){return _hasNextSnippetField;},hasPrevSnippetField:function hasPrevSnippetField(){return _hasPrevSnippetField;},ifIn:function ifIn(){return _ifIn;},ifNotIn:function ifNotIn(){return _ifNotIn;},insertBracket:function insertBracket(){return _insertBracket;},insertCompletionText:function insertCompletionText(){return _insertCompletionText;},moveCompletionSelection:function moveCompletionSelection(){return _moveCompletionSelection;},nextSnippetField:function nextSnippetField(){return _nextSnippetField;},pickedCompletion:function pickedCompletion(){return _pickedCompletion;},prevSnippetField:function prevSnippetField(){return _prevSnippetField;},selectedCompletion:function selectedCompletion(){return _selectedCompletion;},selectedCompletionIndex:function selectedCompletionIndex(){return _selectedCompletionIndex;},setSelectedCompletion:function setSelectedCompletion(){return _setSelectedCompletion;},snippet:function snippet(){return _snippet;},snippetCompletion:function snippetCompletion(){return _snippetCompletion;},snippetKeymap:function snippetKeymap(){return _snippetKeymap;},startCompletion:function startCompletion(){return _startCompletion;}});var _CompletionContext=/*#__PURE__*/function(){function _CompletionContext(state,pos,explicit,view){_classCallCheck(this,_CompletionContext);this.state=state;this.pos=pos;this.explicit=explicit;this.view=view;this.abortListeners=[];this.abortOnDocChange=false;}return _createClass(_CompletionContext,[{key:"tokenBefore",value:function tokenBefore(types2){var token=_syntaxTree(this.state).resolveInner(this.pos,-1);while(token&&types2.indexOf(token.name)<0)token=token.parent;return token?{from:token.from,to:this.pos,text:this.state.sliceDoc(token.from,this.pos),type:token.type}:null;}},{key:"matchBefore",value:function matchBefore(expr){var line=this.state.doc.lineAt(this.pos);var start=Math.max(line.from,this.pos-250);var str=line.text.slice(start-line.from,this.pos-line.from);var found=str.search(ensureAnchor(expr,false));return found<0?null:{from:start+found,to:this.pos,text:str.slice(found)};}},{key:"aborted",get:function get(){return this.abortListeners==null;}},{key:"addEventListener",value:function addEventListener(type,listener,options){if(type=="abort"&&this.abortListeners){this.abortListeners.push(listener);if(options&&options.onDocChange)this.abortOnDocChange=true;}}}]);}();function toSet(chars){var flat=Object.keys(chars).join("");var words=/\w/.test(flat);if(words)flat=flat.replace(/\w/g,"");return"[".concat(words?"\\w":"").concat(flat.replace(/[^\w\s]/g,"\\$&"),"]");}function prefixMatch(options){var first=/* @__PURE__ */Object.create(null),rest=/* @__PURE__ */Object.create(null);var _iterator216=_createForOfIteratorHelper(options),_step216;try{for(_iterator216.s();!(_step216=_iterator216.n()).done;){var label=_step216.value.label;first[label[0]]=true;for(var _i160=1;_i160<label.length;_i160++)rest[label[_i160]]=true;}}catch(err){_iterator216.e(err);}finally{_iterator216.f();}var source=toSet(first)+toSet(rest)+"*$";return[new RegExp("^"+source),new RegExp(source)];}function _completeFromList(list){var options=list.map(function(o){return typeof o=="string"?{label:o}:o;});var _ref52=options.every(function(o){return /^\w+$/.test(o.label);})?[/\w*$/,/\w+$/]:prefixMatch(options),_ref53=_slicedToArray(_ref52,2),validFor=_ref53[0],match=_ref53[1];return function(context){var token=context.matchBefore(match);return token||context.explicit?{from:token?token.from:context.pos,options:options,validFor:validFor}:null;};}function _ifIn(nodes,source){return function(context){for(var pos=_syntaxTree(context.state).resolveInner(context.pos,-1);pos;pos=pos.parent){if(nodes.indexOf(pos.name)>-1)return source(context);if(pos.type.isTop)break;}return null;};}function _ifNotIn(nodes,source){return function(context){for(var pos=_syntaxTree(context.state).resolveInner(context.pos,-1);pos;pos=pos.parent){if(nodes.indexOf(pos.name)>-1)return null;if(pos.type.isTop)break;}return source(context);};}var Option=/*#__PURE__*/_createClass(function Option(completion,source,match,score2){_classCallCheck(this,Option);this.completion=completion;this.source=source;this.match=match;this.score=score2;});function cur(state){return state.selection.main.from;}function ensureAnchor(expr,start){var _a2;var source=expr.source;var addStart=start&&source[0]!="^",addEnd=source[source.length-1]!="$";if(!addStart&&!addEnd)return expr;return new RegExp("".concat(addStart?"^":"","(?:").concat(source,")").concat(addEnd?"$":""),(_a2=expr.flags)!==null&&_a2!==void 0?_a2:expr.ignoreCase?"i":"");}var _pickedCompletion=/* @__PURE__ */Annotation.define();function _insertCompletionText(state,text,from,to){var main=state.selection.main,fromOff=from-main.from,toOff=to-main.from;return Object.assign(Object.assign({},state.changeByRange(function(range){if(range!=main&&from!=to&&state.sliceDoc(range.from+fromOff,range.from+toOff)!=state.sliceDoc(from,to))return{range:range};var lines=state.toText(text);return{changes:{from:range.from+fromOff,to:to==main.from?range.to:range.from+toOff,insert:lines},range:_EditorSelection.cursor(range.from+fromOff+lines.length)};})),{scrollIntoView:true,userEvent:"input.complete"});}var SourceCache=/* @__PURE__ */new WeakMap();function asSource(source){if(!Array.isArray(source))return source;var known=SourceCache.get(source);if(!known)SourceCache.set(source,known=_completeFromList(source));return known;}var startCompletionEffect=/* @__PURE__ */_StateEffect.define();var closeCompletionEffect=/* @__PURE__ */_StateEffect.define();var FuzzyMatcher=/*#__PURE__*/function(){function FuzzyMatcher(pattern){_classCallCheck(this,FuzzyMatcher);this.pattern=pattern;this.chars=[];this.folded=[];this.any=[];this.precise=[];this.byWord=[];this.score=0;this.matched=[];for(var _p7=0;_p7<pattern.length;){var _char3=codePointAt2(pattern,_p7),size=codePointSize2(_char3);this.chars.push(_char3);var part=pattern.slice(_p7,_p7+size),upper=part.toUpperCase();this.folded.push(codePointAt2(upper==part?part.toLowerCase():upper,0));_p7+=size;}this.astral=pattern.length!=this.chars.length;}return _createClass(FuzzyMatcher,[{key:"ret",value:function ret(score2,matched){this.score=score2;this.matched=matched;return this;}},{key:"match",value:function match(word){if(this.pattern.length==0)return this.ret(-100,[]);if(word.length<this.pattern.length)return null;var chars=this.chars,folded=this.folded,any=this.any,precise=this.precise,byWord=this.byWord;if(chars.length==1){var first=codePointAt2(word,0),firstSize=codePointSize2(first);var score2=firstSize==word.length?0:-100;if(first==chars[0]);else if(first==folded[0])score2+=-200;else return null;return this.ret(score2,[0,firstSize]);}var direct=word.indexOf(this.pattern);if(direct==0)return this.ret(word.length==this.pattern.length?0:-100,[0,this.pattern.length]);var len=chars.length,anyTo=0;if(direct<0){for(var _i161=0,e=Math.min(word.length,200);_i161<e&&anyTo<len;){var next=codePointAt2(word,_i161);if(next==chars[anyTo]||next==folded[anyTo])any[anyTo++]=_i161;_i161+=codePointSize2(next);}if(anyTo<len)return null;}var preciseTo=0;var byWordTo=0,byWordFolded=false;var adjacentTo=0,adjacentStart=-1,adjacentEnd=-1;var hasLower=/[a-z]/.test(word),wordAdjacent=true;for(var _i162=0,_e2=Math.min(word.length,200),prevType=0;_i162<_e2&&byWordTo<len;){var _next4=codePointAt2(word,_i162);if(direct<0){if(preciseTo<len&&_next4==chars[preciseTo])precise[preciseTo++]=_i162;if(adjacentTo<len){if(_next4==chars[adjacentTo]||_next4==folded[adjacentTo]){if(adjacentTo==0)adjacentStart=_i162;adjacentEnd=_i162+1;adjacentTo++;}else{adjacentTo=0;}}}var ch=void 0,type=_next4<255?_next4>=48&&_next4<=57||_next4>=97&&_next4<=122?2:_next4>=65&&_next4<=90?1:0:(ch=fromCodePoint(_next4))!=ch.toLowerCase()?1:ch!=ch.toUpperCase()?2:0;if(!_i162||type==1&&hasLower||prevType==0&&type!=0){if(chars[byWordTo]==_next4||folded[byWordTo]==_next4&&(byWordFolded=true))byWord[byWordTo++]=_i162;else if(byWord.length)wordAdjacent=false;}prevType=type;_i162+=codePointSize2(_next4);}if(byWordTo==len&&byWord[0]==0&&wordAdjacent)return this.result(-100+(byWordFolded?-200:0),byWord,word);if(adjacentTo==len&&adjacentStart==0)return this.ret(-200-word.length+(adjacentEnd==word.length?0:-100),[0,adjacentEnd]);if(direct>-1)return this.ret(-700-word.length,[direct,direct+this.pattern.length]);if(adjacentTo==len)return this.ret(-200+-700-word.length,[adjacentStart,adjacentEnd]);if(byWordTo==len)return this.result(-100+(byWordFolded?-200:0)+-700+(wordAdjacent?0:-1100),byWord,word);return chars.length==2?null:this.result((any[0]?-700:0)+-200+-1100,any,word);}},{key:"result",value:function result(score2,positions,word){var result=[],i=0;var _iterator217=_createForOfIteratorHelper(positions),_step217;try{for(_iterator217.s();!(_step217=_iterator217.n()).done;){var pos=_step217.value;var to=pos+(this.astral?codePointSize2(codePointAt2(word,pos)):1);if(i&&result[i-1]==pos)result[i-1]=to;else{result[i++]=pos;result[i++]=to;}}}catch(err){_iterator217.e(err);}finally{_iterator217.f();}return this.ret(score2-word.length,result);}}]);}();var StrictMatcher=/*#__PURE__*/function(){function StrictMatcher(pattern){_classCallCheck(this,StrictMatcher);this.pattern=pattern;this.matched=[];this.score=0;this.folded=pattern.toLowerCase();}return _createClass(StrictMatcher,[{key:"match",value:function match(word){if(word.length<this.pattern.length)return null;var start=word.slice(0,this.pattern.length);var match=start==this.pattern?0:start.toLowerCase()==this.folded?-200:null;if(match==null)return null;this.matched=[0,start.length];this.score=match+(word.length==this.pattern.length?0:-100);return this;}}]);}();var completionConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{activateOnTyping:true,activateOnCompletion:function activateOnCompletion(){return false;},activateOnTypingDelay:100,selectOnOpen:true,override:null,closeOnBlur:true,maxRenderedOptions:100,defaultKeymap:true,tooltipClass:function tooltipClass(){return"";},optionClass:function optionClass(){return"";},aboveCursor:false,icons:true,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:false,compareCompletions:function compareCompletions(a,b){return a.label.localeCompare(b.label);},interactionDelay:75,updateSyncTime:100},{defaultKeymap:function defaultKeymap(a,b){return a&&b;},closeOnBlur:function closeOnBlur(a,b){return a&&b;},icons:function icons(a,b){return a&&b;},tooltipClass:function tooltipClass(a,b){return function(c){return joinClass(a(c),b(c));};},optionClass:function optionClass(a,b){return function(c){return joinClass(a(c),b(c));};},addToOptions:function addToOptions(a,b){return a.concat(b);},filterStrict:function filterStrict(a,b){return a||b;}});}});function joinClass(a,b){return a?b?a+" "+b:a:b;}function defaultPositionInfo(view,list,option,info,space4,tooltip){var rtl=view.textDirection==Direction.RTL,left=rtl,narrow=false;var side="top",offset,maxWidth;var spaceLeft=list.left-space4.left,spaceRight=space4.right-list.right;var infoWidth=info.right-info.left,infoHeight=info.bottom-info.top;if(left&&spaceLeft<Math.min(infoWidth,spaceRight))left=false;else if(!left&&spaceRight<Math.min(infoWidth,spaceLeft))left=true;if(infoWidth<=(left?spaceLeft:spaceRight)){offset=Math.max(space4.top,Math.min(option.top,space4.bottom-infoHeight))-list.top;maxWidth=Math.min(400,left?spaceLeft:spaceRight);}else{narrow=true;maxWidth=Math.min(400,(rtl?list.right:space4.right-list.left)-30);var spaceBelow=space4.bottom-list.bottom;if(spaceBelow>=infoHeight||spaceBelow>list.top){offset=option.bottom-list.top;}else{side="bottom";offset=list.bottom-option.top;}}var scaleY=(list.bottom-list.top)/tooltip.offsetHeight;var scaleX=(list.right-list.left)/tooltip.offsetWidth;return{style:"".concat(side,": ").concat(offset/scaleY,"px; max-width: ").concat(maxWidth/scaleX,"px"),"class":"cm-completionInfo-"+(narrow?rtl?"left-narrow":"right-narrow":left?"left":"right")};}function optionContent(config2){var content2=config2.addToOptions.slice();if(config2.icons)content2.push({render:function render(completion){var _icon$classList;var icon=document.createElement("div");icon.classList.add("cm-completionIcon");if(completion.type)(_icon$classList=icon.classList).add.apply(_icon$classList,_toConsumableArray(completion.type.split(/\s+/g).map(function(cls){return"cm-completionIcon-"+cls;})));icon.setAttribute("aria-hidden","true");return icon;},position:20});content2.push({render:function render(completion,_s,_v,match){var labelElt=document.createElement("span");labelElt.className="cm-completionLabel";var label=completion.displayLabel||completion.label,off=0;for(var j=0;j<match.length;){var from=match[j++],to=match[j++];if(from>off)labelElt.appendChild(document.createTextNode(label.slice(off,from)));var span=labelElt.appendChild(document.createElement("span"));span.appendChild(document.createTextNode(label.slice(from,to)));span.className="cm-completionMatchedText";off=to;}if(off<label.length)labelElt.appendChild(document.createTextNode(label.slice(off)));return labelElt;},position:50},{render:function render(completion){if(!completion.detail)return null;var detailElt=document.createElement("span");detailElt.className="cm-completionDetail";detailElt.textContent=completion.detail;return detailElt;},position:80});return content2.sort(function(a,b){return a.position-b.position;}).map(function(a){return a.render;});}function rangeAroundSelected(total,selected,max){if(total<=max)return{from:0,to:total};if(selected<0)selected=0;if(selected<=total>>1){var off2=Math.floor(selected/max);return{from:off2*max,to:(off2+1)*max};}var off=Math.floor((total-selected)/max);return{from:total-(off+1)*max,to:total-off*max};}var CompletionTooltip=/*#__PURE__*/function(){function CompletionTooltip(view,stateField,applyCompletion2){var _this85=this;_classCallCheck(this,CompletionTooltip);this.view=view;this.stateField=stateField;this.applyCompletion=applyCompletion2;this.info=null;this.infoDestroy=null;this.placeInfoReq={read:function read(){return _this85.measureInfo();},write:function write(pos){return _this85.placeInfo(pos);},key:this};this.space=null;this.currentClass="";var cState=view.state.field(stateField);var _cState$open=cState.open,options=_cState$open.options,selected=_cState$open.selected;var config2=view.state.facet(completionConfig);this.optionContent=optionContent(config2);this.optionClass=config2.optionClass;this.tooltipClass=config2.tooltipClass;this.range=rangeAroundSelected(options.length,selected,config2.maxRenderedOptions);this.dom=document.createElement("div");this.dom.className="cm-tooltip-autocomplete";this.updateTooltipClass(view.state);this.dom.addEventListener("mousedown",function(e){var options2=view.state.field(stateField).open.options;for(var dom=e.target,match;dom&&dom!=_this85.dom;dom=dom.parentNode){if(dom.nodeName=="LI"&&(match=/-(\d+)$/.exec(dom.id))&&+match[1]<options2.length){_this85.applyCompletion(view,options2[+match[1]]);e.preventDefault();return;}}});this.dom.addEventListener("focusout",function(e){var state=view.state.field(_this85.stateField,false);if(state&&state.tooltip&&view.state.facet(completionConfig).closeOnBlur&&e.relatedTarget!=view.contentDOM)view.dispatch({effects:closeCompletionEffect.of(null)});});this.showOptions(options,cState.id);}return _createClass(CompletionTooltip,[{key:"mount",value:function mount(){this.updateSel();}},{key:"showOptions",value:function showOptions(options,id2){var _this86=this;if(this.list)this.list.remove();this.list=this.dom.appendChild(this.createListBox(options,id2,this.range));this.list.addEventListener("scroll",function(){if(_this86.info)_this86.view.requestMeasure(_this86.placeInfoReq);});}},{key:"update",value:function update(_update27){var _a2;var cState=_update27.state.field(this.stateField);var prevState=_update27.startState.field(this.stateField);this.updateTooltipClass(_update27.state);if(cState!=prevState){var _cState$open2=cState.open,options=_cState$open2.options,selected=_cState$open2.selected,disabled=_cState$open2.disabled;if(!prevState.open||prevState.open.options!=options){this.range=rangeAroundSelected(options.length,selected,_update27.state.facet(completionConfig).maxRenderedOptions);this.showOptions(options,cState.id);}this.updateSel();if(disabled!=((_a2=prevState.open)===null||_a2===void 0?void 0:_a2.disabled))this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!disabled);}}},{key:"updateTooltipClass",value:function updateTooltipClass(state){var cls=this.tooltipClass(state);if(cls!=this.currentClass){var _iterator218=_createForOfIteratorHelper(this.currentClass.split(" ")),_step218;try{for(_iterator218.s();!(_step218=_iterator218.n()).done;){var c=_step218.value;if(c)this.dom.classList.remove(c);}}catch(err){_iterator218.e(err);}finally{_iterator218.f();}var _iterator219=_createForOfIteratorHelper(cls.split(" ")),_step219;try{for(_iterator219.s();!(_step219=_iterator219.n()).done;){var _c2=_step219.value;if(_c2)this.dom.classList.add(_c2);}}catch(err){_iterator219.e(err);}finally{_iterator219.f();}this.currentClass=cls;}}},{key:"positioned",value:function positioned(space4){this.space=space4;if(this.info)this.view.requestMeasure(this.placeInfoReq);}},{key:"updateSel",value:function updateSel(){var _this87=this;var cState=this.view.state.field(this.stateField),open=cState.open;if(open.selected>-1&&open.selected<this.range.from||open.selected>=this.range.to){this.range=rangeAroundSelected(open.options.length,open.selected,this.view.state.facet(completionConfig).maxRenderedOptions);this.showOptions(open.options,cState.id);}if(this.updateSelectedOption(open.selected)){this.destroyInfo();var completion=open.options[open.selected].completion;var info=completion.info;if(!info)return;var infoResult=typeof info==="string"?document.createTextNode(info):info(completion);if(!infoResult)return;if("then"in infoResult){infoResult.then(function(obj){if(obj&&_this87.view.state.field(_this87.stateField,false)==cState)_this87.addInfoPane(obj,completion);})["catch"](function(e){return logException(_this87.view.state,e,"completion info");});}else{this.addInfoPane(infoResult,completion);}}}},{key:"addInfoPane",value:function addInfoPane(content2,completion){this.destroyInfo();var wrap=this.info=document.createElement("div");wrap.className="cm-tooltip cm-completionInfo";if(content2.nodeType!=null){wrap.appendChild(content2);this.infoDestroy=null;}else{var dom=content2.dom,destroy=content2.destroy;wrap.appendChild(dom);this.infoDestroy=destroy||null;}this.dom.appendChild(wrap);this.view.requestMeasure(this.placeInfoReq);}},{key:"updateSelectedOption",value:function updateSelectedOption(selected){var set=null;for(var opt=this.list.firstChild,_i163=this.range.from;opt;opt=opt.nextSibling,_i163++){if(opt.nodeName!="LI"||!opt.id){_i163--;}else if(_i163==selected){if(!opt.hasAttribute("aria-selected")){opt.setAttribute("aria-selected","true");set=opt;}}else{if(opt.hasAttribute("aria-selected"))opt.removeAttribute("aria-selected");}}if(set)scrollIntoView2(this.list,set);return set;}},{key:"measureInfo",value:function measureInfo(){var sel=this.dom.querySelector("[aria-selected]");if(!sel||!this.info)return null;var listRect=this.dom.getBoundingClientRect();var infoRect=this.info.getBoundingClientRect();var selRect=sel.getBoundingClientRect();var space4=this.space;if(!space4){var docElt=this.dom.ownerDocument.documentElement;space4={left:0,top:0,right:docElt.clientWidth,bottom:docElt.clientHeight};}if(selRect.top>Math.min(space4.bottom,listRect.bottom)-10||selRect.bottom<Math.max(space4.top,listRect.top)+10)return null;return this.view.state.facet(completionConfig).positionInfo(this.view,listRect,selRect,infoRect,space4,this.dom);}},{key:"placeInfo",value:function placeInfo(pos){if(this.info){if(pos){if(pos.style)this.info.style.cssText=pos.style;this.info.className="cm-tooltip cm-completionInfo "+(pos["class"]||"");}else{this.info.style.cssText="top: -1e6px";}}}},{key:"createListBox",value:function createListBox(options,id2,range){var ul=document.createElement("ul");ul.id=id2;ul.setAttribute("role","listbox");ul.setAttribute("aria-expanded","true");ul.setAttribute("aria-label",this.view.state.phrase("Completions"));ul.addEventListener("mousedown",function(e){if(e.target==ul)e.preventDefault();});var curSection=null;for(var _i164=range.from;_i164<range.to;_i164++){var _options$_i=options[_i164],completion=_options$_i.completion,match=_options$_i.match,section=completion.section;if(section){var _name3=typeof section=="string"?section:section.name;if(_name3!=curSection&&(_i164>range.from||range.from==0)){curSection=_name3;if(typeof section!="string"&&section.header){ul.appendChild(section.header(section));}else{var header=ul.appendChild(document.createElement("completion-section"));header.textContent=_name3;}}}var li=ul.appendChild(document.createElement("li"));li.id=id2+"-"+_i164;li.setAttribute("role","option");var cls=this.optionClass(completion);if(cls)li.className=cls;var _iterator220=_createForOfIteratorHelper(this.optionContent),_step220;try{for(_iterator220.s();!(_step220=_iterator220.n()).done;){var source=_step220.value;var node=source(completion,this.view.state,this.view,match);if(node)li.appendChild(node);}}catch(err){_iterator220.e(err);}finally{_iterator220.f();}}if(range.from)ul.classList.add("cm-completionListIncompleteTop");if(range.to<options.length)ul.classList.add("cm-completionListIncompleteBottom");return ul;}},{key:"destroyInfo",value:function destroyInfo(){if(this.info){if(this.infoDestroy)this.infoDestroy();this.info.remove();this.info=null;}}},{key:"destroy",value:function destroy(){this.destroyInfo();}}]);}();function completionTooltip(stateField,applyCompletion2){return function(view){return new CompletionTooltip(view,stateField,applyCompletion2);};}function scrollIntoView2(container,element){var parent=container.getBoundingClientRect();var self=element.getBoundingClientRect();var scaleY=parent.height/container.offsetHeight;if(self.top<parent.top)container.scrollTop-=(parent.top-self.top)/scaleY;else if(self.bottom>parent.bottom)container.scrollTop+=(self.bottom-parent.bottom)/scaleY;}function score(option){return(option.boost||0)*100+(option.apply?10:0)+(option.info?5:0)+(option.type?1:0);}function sortOptions(active,state){var options=[];var sections=null;var addOption=function addOption(option){options.push(option);var section=option.completion.section;if(section){if(!sections)sections=[];var _name4=typeof section=="string"?section:section.name;if(!sections.some(function(s){return s.name==_name4;}))sections.push(typeof section=="string"?{name:_name4}:section);}};var conf=state.facet(completionConfig);var _iterator221=_createForOfIteratorHelper(active),_step221;try{for(_iterator221.s();!(_step221=_iterator221.n()).done;){var a=_step221.value;if(a.hasResult()){var getMatch=a.result.getMatch;if(a.result.filter===false){var _iterator225=_createForOfIteratorHelper(a.result.options),_step225;try{for(_iterator225.s();!(_step225=_iterator225.n()).done;){var _option=_step225.value;addOption(new Option(_option,a.source,getMatch?getMatch(_option):[],1e9-options.length));}}catch(err){_iterator225.e(err);}finally{_iterator225.f();}}else{var pattern=state.sliceDoc(a.from,a.to),match=void 0;var matcher=conf.filterStrict?new StrictMatcher(pattern):new FuzzyMatcher(pattern);var _iterator226=_createForOfIteratorHelper(a.result.options),_step226;try{for(_iterator226.s();!(_step226=_iterator226.n()).done;){var _option2=_step226.value;if(match=matcher.match(_option2.label)){var matched=!_option2.displayLabel?match.matched:getMatch?getMatch(_option2,match.matched):[];addOption(new Option(_option2,a.source,matched,match.score+(_option2.boost||0)));}}}catch(err){_iterator226.e(err);}finally{_iterator226.f();}}}}}catch(err){_iterator221.e(err);}finally{_iterator221.f();}if(sections){var sectionOrder=/* @__PURE__ */Object.create(null),pos=0;var cmp=function cmp(a,b){var _a2,_b;return((_a2=a.rank)!==null&&_a2!==void 0?_a2:1e9)-((_b=b.rank)!==null&&_b!==void 0?_b:1e9)||(a.name<b.name?-1:1);};var _iterator222=_createForOfIteratorHelper(sections.sort(cmp)),_step222;try{for(_iterator222.s();!(_step222=_iterator222.n()).done;){var s=_step222.value;pos-=1e5;sectionOrder[s.name]=pos;}}catch(err){_iterator222.e(err);}finally{_iterator222.f();}var _iterator223=_createForOfIteratorHelper(options),_step223;try{for(_iterator223.s();!(_step223=_iterator223.n()).done;){var option=_step223.value;var section=option.completion.section;if(section)option.score+=sectionOrder[typeof section=="string"?section:section.name];}}catch(err){_iterator223.e(err);}finally{_iterator223.f();}}var result=[],prev=null;var compare2=conf.compareCompletions;var _iterator224=_createForOfIteratorHelper(options.sort(function(a,b){return b.score-a.score||compare2(a.completion,b.completion);})),_step224;try{for(_iterator224.s();!(_step224=_iterator224.n()).done;){var opt=_step224.value;var cur2=opt.completion;if(!prev||prev.label!=cur2.label||prev.detail!=cur2.detail||prev.type!=null&&cur2.type!=null&&prev.type!=cur2.type||prev.apply!=cur2.apply||prev.boost!=cur2.boost)result.push(opt);else if(score(opt.completion)>score(prev))result[result.length-1]=opt;prev=opt.completion;}}catch(err){_iterator224.e(err);}finally{_iterator224.f();}return result;}var _CompletionDialog=/*#__PURE__*/function(){function CompletionDialog(options,attrs,tooltip,timestamp,selected,disabled){_classCallCheck(this,CompletionDialog);this.options=options;this.attrs=attrs;this.tooltip=tooltip;this.timestamp=timestamp;this.selected=selected;this.disabled=disabled;}return _createClass(CompletionDialog,[{key:"setSelected",value:function setSelected(selected,id2){return selected==this.selected||selected>=this.options.length?this:new _CompletionDialog(this.options,makeAttrs(id2,selected),this.tooltip,this.timestamp,selected,this.disabled);}},{key:"map",value:function map(changes){return new _CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:changes.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled);}},{key:"setDisabled",value:function setDisabled(){return new _CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,true);}}],[{key:"build",value:function build(active,state,id2,prev,conf,didSetActive){if(prev&&!didSetActive&&active.some(function(s){return s.isPending;}))return prev.setDisabled();var options=sortOptions(active,state);if(!options.length)return prev&&active.some(function(a){return a.isPending;})?prev.setDisabled():null;var selected=state.facet(completionConfig).selectOnOpen?0:-1;if(prev&&prev.selected!=selected&&prev.selected!=-1){var selectedValue=prev.options[prev.selected].completion;for(var _i165=0;_i165<options.length;_i165++)if(options[_i165].completion==selectedValue){selected=_i165;break;}}return new _CompletionDialog(options,makeAttrs(id2,selected),{pos:active.reduce(function(a,b){return b.hasResult()?Math.min(a,b.from):a;},1e8),create:createTooltip,above:conf.aboveCursor},prev?prev.timestamp:Date.now(),selected,false);}}]);}();var _CompletionState=/*#__PURE__*/function(){function CompletionState(active,id2,open){_classCallCheck(this,CompletionState);this.active=active;this.id=id2;this.open=open;}return _createClass(CompletionState,[{key:"update",value:function update(tr){var _this88=this;var state=tr.state,conf=state.facet(completionConfig);var sources=conf.override||state.languageDataAt("autocomplete",cur(state)).map(asSource);var active=sources.map(function(source){var value=_this88.active.find(function(s){return s.source==source;})||new _ActiveSource(source,_this88.active.some(function(a){return a.state!=0;})?1:0);return value.update(tr,conf);});if(active.length==this.active.length&&active.every(function(a,i){return a==_this88.active[i];}))active=this.active;var open=this.open,didSet=tr.effects.some(function(e){return e.is(setActiveEffect);});if(open&&tr.docChanged)open=open.map(tr.changes);if(tr.selection||active.some(function(a){return a.hasResult()&&tr.changes.touchesRange(a.from,a.to);})||!sameResults(active,this.active)||didSet)open=_CompletionDialog.build(active,state,this.id,open,conf,didSet);else if(open&&open.disabled&&!active.some(function(a){return a.isPending;}))open=null;if(!open&&active.every(function(a){return!a.isPending;})&&active.some(function(a){return a.hasResult();}))active=active.map(function(a){return a.hasResult()?new _ActiveSource(a.source,0):a;});var _iterator227=_createForOfIteratorHelper(tr.effects),_step227;try{for(_iterator227.s();!(_step227=_iterator227.n()).done;){var effect=_step227.value;if(effect.is(setSelectedEffect))open=open&&open.setSelected(effect.value,this.id);}}catch(err){_iterator227.e(err);}finally{_iterator227.f();}return active==this.active&&open==this.open?this:new _CompletionState(active,this.id,open);}},{key:"tooltip",get:function get(){return this.open?this.open.tooltip:null;}},{key:"attrs",get:function get(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs2;}}],[{key:"start",value:function start(){return new _CompletionState(none3,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null);}}]);}();function sameResults(a,b){if(a==b)return true;for(var iA=0,iB=0;;){while(iA<a.length&&!a[iA].hasResult())iA++;while(iB<b.length&&!b[iB].hasResult())iB++;var endA=iA==a.length,endB=iB==b.length;if(endA||endB)return endA==endB;if(a[iA++].result!=b[iB++].result)return false;}}var baseAttrs={"aria-autocomplete":"list"};var noAttrs2={};function makeAttrs(id2,selected){var result={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":id2};if(selected>-1)result["aria-activedescendant"]=id2+"-"+selected;return result;}var none3=[];function getUpdateType(tr,conf){if(tr.isUserEvent("input.complete")){var completion=tr.annotation(_pickedCompletion);if(completion&&conf.activateOnCompletion(completion))return 4|8;}var typing=tr.isUserEvent("input.type");return typing&&conf.activateOnTyping?4|1:typing?1:tr.isUserEvent("delete.backward")?2:tr.selection?8:tr.docChanged?16:0;}var _ActiveSource=/*#__PURE__*/function(){function ActiveSource(source,state){var explicit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,ActiveSource);this.source=source;this.state=state;this.explicit=explicit;}return _createClass(ActiveSource,[{key:"hasResult",value:function hasResult(){return false;}},{key:"isPending",get:function get(){return this.state==1;}},{key:"update",value:function update(tr,conf){var type=getUpdateType(tr,conf),value=this;if(type&8||type&16&&this.touches(tr))value=new _ActiveSource(value.source,0);if(type&4&&value.state==0)value=new _ActiveSource(this.source,1);value=value.updateFor(tr,type);var _iterator228=_createForOfIteratorHelper(tr.effects),_step228;try{for(_iterator228.s();!(_step228=_iterator228.n()).done;){var effect=_step228.value;if(effect.is(startCompletionEffect))value=new _ActiveSource(value.source,1,effect.value);else if(effect.is(closeCompletionEffect))value=new _ActiveSource(value.source,0);else if(effect.is(setActiveEffect)){var _iterator229=_createForOfIteratorHelper(effect.value),_step229;try{for(_iterator229.s();!(_step229=_iterator229.n()).done;){var active=_step229.value;if(active.source==value.source)value=active;}}catch(err){_iterator229.e(err);}finally{_iterator229.f();}}}}catch(err){_iterator228.e(err);}finally{_iterator228.f();}return value;}},{key:"updateFor",value:function updateFor(tr,type){return this.map(tr.changes);}},{key:"map",value:function map(changes){return this;}},{key:"touches",value:function touches(tr){return tr.changes.touchesRange(cur(tr.state));}}]);}();var _ActiveResult=/*#__PURE__*/function(_ActiveSource2){function ActiveResult(source,explicit,limit,result,from,to){var _this89;_classCallCheck(this,ActiveResult);_this89=_callSuper(this,ActiveResult,[source,3,explicit]);_this89.limit=limit;_this89.result=result;_this89.from=from;_this89.to=to;return _this89;}_inherits(ActiveResult,_ActiveSource2);return _createClass(ActiveResult,[{key:"hasResult",value:function hasResult(){return true;}},{key:"updateFor",value:function updateFor(tr,type){var _a2;if(!(type&3))return this.map(tr.changes);var result=this.result;if(result.map&&!tr.changes.empty)result=result.map(result,tr.changes);var from=tr.changes.mapPos(this.from),to=tr.changes.mapPos(this.to,1);var pos=cur(tr.state);if(pos>to||!result||type&2&&(cur(tr.startState)==this.from||pos<this.limit))return new _ActiveSource(this.source,type&4?1:0);var limit=tr.changes.mapPos(this.limit);if(checkValid(result.validFor,tr.state,from,to))return new _ActiveResult(this.source,this.explicit,limit,result,from,to);if(result.update&&(result=result.update(result,from,to,new _CompletionContext(tr.state,pos,false))))return new _ActiveResult(this.source,this.explicit,limit,result,result.from,(_a2=result.to)!==null&&_a2!==void 0?_a2:cur(tr.state));return new _ActiveSource(this.source,1,this.explicit);}},{key:"map",value:function map(mapping){if(mapping.empty)return this;var result=this.result.map?this.result.map(this.result,mapping):this.result;if(!result)return new _ActiveSource(this.source,0);return new _ActiveResult(this.source,this.explicit,mapping.mapPos(this.limit),this.result,mapping.mapPos(this.from),mapping.mapPos(this.to,1));}},{key:"touches",value:function touches(tr){return tr.changes.touchesRange(this.from,this.to);}}]);}(_ActiveSource);function checkValid(validFor,state,from,to){if(!validFor)return false;var text=state.sliceDoc(from,to);return typeof validFor=="function"?validFor(text,from,to,state):ensureAnchor(validFor,true).test(text);}var setActiveEffect=/* @__PURE__ */_StateEffect.define({map:function map(sources,mapping){return sources.map(function(s){return s.map(mapping);});}});var setSelectedEffect=/* @__PURE__ */_StateEffect.define();var completionState=/* @__PURE__ */_StateField.define({create:function create(){return _CompletionState.start();},update:function update(value,tr){return value.update(tr);},provide:function provide(f){return[showTooltip.from(f,function(val){return val.tooltip;}),_EditorView.contentAttributes.from(f,function(state){return state.attrs;})];}});function applyCompletion(view,option){var apply=option.completion.apply||option.completion.label;var result=view.state.field(completionState).active.find(function(a){return a.source==option.source;});if(!(result instanceof _ActiveResult))return false;if(typeof apply=="string")view.dispatch(Object.assign(Object.assign({},_insertCompletionText(view.state,apply,result.from,result.to)),{annotations:_pickedCompletion.of(option.completion)}));else apply(view,option.completion,result.from,result.to);return true;}var createTooltip=/* @__PURE__ */completionTooltip(completionState,applyCompletion);function _moveCompletionSelection(forward){var by=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"option";return function(view){var cState=view.state.field(completionState,false);if(!cState||!cState.open||cState.open.disabled||Date.now()-cState.open.timestamp<view.state.facet(completionConfig).interactionDelay)return false;var step=1,tooltip;if(by=="page"&&(tooltip=getTooltip(view,cState.open.tooltip)))step=Math.max(2,Math.floor(tooltip.dom.offsetHeight/tooltip.dom.querySelector("li").offsetHeight)-1);var length=cState.open.options.length;var selected=cState.open.selected>-1?cState.open.selected+step*(forward?1:-1):forward?0:length-1;if(selected<0)selected=by=="page"?0:length-1;else if(selected>=length)selected=by=="page"?length-1:0;view.dispatch({effects:setSelectedEffect.of(selected)});return true;};}var _acceptCompletion=function _acceptCompletion(view){var cState=view.state.field(completionState,false);if(view.state.readOnly||!cState||!cState.open||cState.open.selected<0||cState.open.disabled||Date.now()-cState.open.timestamp<view.state.facet(completionConfig).interactionDelay)return false;return applyCompletion(view,cState.open.options[cState.open.selected]);};var _startCompletion=function _startCompletion(view){var cState=view.state.field(completionState,false);if(!cState)return false;view.dispatch({effects:startCompletionEffect.of(true)});return true;};var _closeCompletion=function _closeCompletion(view){var cState=view.state.field(completionState,false);if(!cState||!cState.active.some(function(a){return a.state!=0;}))return false;view.dispatch({effects:closeCompletionEffect.of(null)});return true;};var RunningQuery=/*#__PURE__*/_createClass(function RunningQuery(active,context){_classCallCheck(this,RunningQuery);this.active=active;this.context=context;this.time=Date.now();this.updates=[];this.done=void 0;});var MaxUpdateCount=50;var MinAbortTime=1e3;var completionPlugin=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class14(view){_classCallCheck(this,_class14);this.view=view;this.debounceUpdate=-1;this.running=[];this.debounceAccept=-1;this.pendingStart=false;this.composing=0;var _iterator230=_createForOfIteratorHelper(view.state.field(completionState).active),_step230;try{for(_iterator230.s();!(_step230=_iterator230.n()).done;){var active=_step230.value;if(active.isPending)this.startQuery(active);}}catch(err){_iterator230.e(err);}finally{_iterator230.f();}}return _createClass(_class14,[{key:"update",value:function update(_update28){var _this90=this;var cState=_update28.state.field(completionState);var conf=_update28.state.facet(completionConfig);if(!_update28.selectionSet&&!_update28.docChanged&&_update28.startState.field(completionState)==cState)return;var doesReset=_update28.transactions.some(function(tr){var type=getUpdateType(tr,conf);return type&8||(tr.selection||tr.docChanged)&&!(type&3);});for(var _i166=0;_i166<this.running.length;_i166++){var query=this.running[_i166];if(doesReset||query.context.abortOnDocChange&&_update28.docChanged||query.updates.length+_update28.transactions.length>MaxUpdateCount&&Date.now()-query.time>MinAbortTime){var _iterator231=_createForOfIteratorHelper(query.context.abortListeners),_step231;try{for(_iterator231.s();!(_step231=_iterator231.n()).done;){var handler=_step231.value;try{handler();}catch(e){logException(this.view.state,e);}}}catch(err){_iterator231.e(err);}finally{_iterator231.f();}query.context.abortListeners=null;this.running.splice(_i166--,1);}else{var _query$updates;(_query$updates=query.updates).push.apply(_query$updates,_toConsumableArray(_update28.transactions));}}if(this.debounceUpdate>-1)clearTimeout(this.debounceUpdate);if(_update28.transactions.some(function(tr){return tr.effects.some(function(e){return e.is(startCompletionEffect);});}))this.pendingStart=true;var delay=this.pendingStart?50:conf.activateOnTypingDelay;this.debounceUpdate=cState.active.some(function(a){return a.isPending&&!_this90.running.some(function(q){return q.active.source==a.source;});})?setTimeout(function(){return _this90.startUpdate();},delay):-1;if(this.composing!=0){var _iterator232=_createForOfIteratorHelper(_update28.transactions),_step232;try{for(_iterator232.s();!(_step232=_iterator232.n()).done;){var tr=_step232.value;if(tr.isUserEvent("input.type"))this.composing=2;else if(this.composing==2&&tr.selection)this.composing=3;}}catch(err){_iterator232.e(err);}finally{_iterator232.f();}}}},{key:"startUpdate",value:function startUpdate(){var _this91=this;this.debounceUpdate=-1;this.pendingStart=false;var state=this.view.state,cState=state.field(completionState);var _iterator233=_createForOfIteratorHelper(cState.active),_step233;try{var _loop16=function _loop16(){var active=_step233.value;if(active.isPending&&!_this91.running.some(function(r){return r.active.source==active.source;}))_this91.startQuery(active);};for(_iterator233.s();!(_step233=_iterator233.n()).done;){_loop16();}}catch(err){_iterator233.e(err);}finally{_iterator233.f();}if(this.running.length&&cState.open&&cState.open.disabled)this.debounceAccept=setTimeout(function(){return _this91.accept();},this.view.state.facet(completionConfig).updateSyncTime);}},{key:"startQuery",value:function startQuery(active){var _this92=this;var state=this.view.state,pos=cur(state);var context=new _CompletionContext(state,pos,active.explicit,this.view);var pending=new RunningQuery(active,context);this.running.push(pending);Promise.resolve(active.source(context)).then(function(result){if(!pending.context.aborted){pending.done=result||null;_this92.scheduleAccept();}},function(err){_this92.view.dispatch({effects:closeCompletionEffect.of(null)});logException(_this92.view.state,err);});}},{key:"scheduleAccept",value:function scheduleAccept(){var _this93=this;if(this.running.every(function(q){return q.done!==void 0;}))this.accept();else if(this.debounceAccept<0)this.debounceAccept=setTimeout(function(){return _this93.accept();},this.view.state.facet(completionConfig).updateSyncTime);}},{key:"accept",value:function accept(){var _this94=this;var _a2;if(this.debounceAccept>-1)clearTimeout(this.debounceAccept);this.debounceAccept=-1;var updated=[];var conf=this.view.state.facet(completionConfig),cState=this.view.state.field(completionState);var _loop17=function _loop17(_i168){var query=_this94.running[_i168];if(query.done===void 0){_i167=_i168;return 0;}// continue
_this94.running.splice(_i168--,1);if(query.done){var pos=cur(query.updates.length?query.updates[0].startState:_this94.view.state);var limit=Math.min(pos,query.done.from+(query.active.explicit?0:1));var active=new _ActiveResult(query.active.source,query.active.explicit,limit,query.done,query.done.from,(_a2=query.done.to)!==null&&_a2!==void 0?_a2:pos);var _iterator234=_createForOfIteratorHelper(query.updates),_step234;try{for(_iterator234.s();!(_step234=_iterator234.n()).done;){var tr=_step234.value;active=active.update(tr,conf);}}catch(err){_iterator234.e(err);}finally{_iterator234.f();}if(active.hasResult()){updated.push(active);_i167=_i168;return 0;// continue
}}var current=cState.active.find(function(a){return a.source==query.active.source;});if(current&&current.isPending){if(query.done==null){var _active=new _ActiveSource(query.active.source,0);var _iterator235=_createForOfIteratorHelper(query.updates),_step235;try{for(_iterator235.s();!(_step235=_iterator235.n()).done;){var _tr2=_step235.value;_active=_active.update(_tr2,conf);}}catch(err){_iterator235.e(err);}finally{_iterator235.f();}if(!_active.isPending)updated.push(_active);}else{_this94.startQuery(current);}}_i167=_i168;},_ret3;for(var _i167=0;_i167<this.running.length;_i167++){_ret3=_loop17(_i167);if(_ret3===0)continue;}if(updated.length||cState.open&&cState.open.disabled)this.view.dispatch({effects:setActiveEffect.of(updated)});}}]);}(),{eventHandlers:{blur:function blur(event){var _this95=this;var state=this.view.state.field(completionState,false);if(state&&state.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){var dialog=state.open&&getTooltip(this.view,state.open.tooltip);if(!dialog||!dialog.dom.contains(event.relatedTarget))setTimeout(function(){return _this95.view.dispatch({effects:closeCompletionEffect.of(null)});},10);}},compositionstart:function compositionstart(){this.composing=1;},compositionend:function compositionend(){var _this96=this;if(this.composing==3){setTimeout(function(){return _this96.view.dispatch({effects:startCompletionEffect.of(false)});},20);}this.composing=0;}}});var windows=(typeof navigator==="undefined"?"undefined":_typeof(navigator))=="object"&&/* @__PURE__ *//Win/.test(navigator.platform);var commitCharacters=/* @__PURE__ */Prec.highest(/* @__PURE__ */_EditorView.domEventHandlers({keydown:function keydown(event,view){var field=view.state.field(completionState,false);if(!field||!field.open||field.open.disabled||field.open.selected<0||event.key.length>1||event.ctrlKey&&!(windows&&event.altKey)||event.metaKey)return false;var option=field.open.options[field.open.selected];var result=field.active.find(function(a){return a.source==option.source;});var commitChars=option.completion.commitCharacters||result.result.commitCharacters;if(commitChars&&commitChars.indexOf(event.key)>-1)applyCompletion(view,option);return false;}}));var baseTheme4=/* @__PURE__ */_EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:0.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:0.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var FieldPos=/*#__PURE__*/_createClass(function FieldPos(field,line,from,to){_classCallCheck(this,FieldPos);this.field=field;this.line=line;this.from=from;this.to=to;});var _FieldRange=/*#__PURE__*/function(){function FieldRange(field,from,to){_classCallCheck(this,FieldRange);this.field=field;this.from=from;this.to=to;}return _createClass(FieldRange,[{key:"map",value:function map(changes){var from=changes.mapPos(this.from,-1,MapMode.TrackDel);var to=changes.mapPos(this.to,1,MapMode.TrackDel);return from==null||to==null?null:new _FieldRange(this.field,from,to);}}]);}();var _Snippet=/*#__PURE__*/function(){function Snippet(lines,fieldPositions){_classCallCheck(this,Snippet);this.lines=lines;this.fieldPositions=fieldPositions;}return _createClass(Snippet,[{key:"instantiate",value:function instantiate(state,pos){var text=[],lineStart=[pos];var lineObj=state.doc.lineAt(pos),baseIndent=/^\s*/.exec(lineObj.text)[0];var _iterator236=_createForOfIteratorHelper(this.lines),_step236;try{for(_iterator236.s();!(_step236=_iterator236.n()).done;){var line=_step236.value;if(text.length){var indent=baseIndent,tabs=/^\t*/.exec(line)[0].length;for(var _i169=0;_i169<tabs;_i169++)indent+=state.facet(_indentUnit);lineStart.push(pos+indent.length-tabs);line=indent+line.slice(tabs);}text.push(line);pos+=line.length+1;}}catch(err){_iterator236.e(err);}finally{_iterator236.f();}var ranges=this.fieldPositions.map(function(pos2){return new _FieldRange(pos2.field,lineStart[pos2.line]+pos2.from,lineStart[pos2.line]+pos2.to);});return{text:text,ranges:ranges};}}],[{key:"parse",value:function parse(template){var fields=[];var lines=[],positions=[],m;var _iterator237=_createForOfIteratorHelper(template.split(/\r\n?|\n/)),_step237;try{for(_iterator237.s();!(_step237=_iterator237.n()).done;){var line=_step237.value;while(m=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(line)){var seq=m[1]?+m[1]:null,rawName=m[2]||m[3]||"",found=-1;var _name5=rawName.replace(/\\[{}]/g,function(m2){return m2[1];});for(var _i170=0;_i170<fields.length;_i170++){if(seq!=null?fields[_i170].seq==seq:_name5?fields[_i170].name==_name5:false)found=_i170;}if(found<0){var _i171=0;while(_i171<fields.length&&(seq==null||fields[_i171].seq!=null&&fields[_i171].seq<seq))_i171++;fields.splice(_i171,0,{seq:seq,name:_name5});found=_i171;var _iterator238=_createForOfIteratorHelper(positions),_step238;try{for(_iterator238.s();!(_step238=_iterator238.n()).done;){var pos=_step238.value;if(pos.field>=found)pos.field++;}}catch(err){_iterator238.e(err);}finally{_iterator238.f();}}positions.push(new FieldPos(found,lines.length,m.index,m.index+_name5.length));line=line.slice(0,m.index)+rawName+line.slice(m.index+m[0].length);}line=line.replace(/\\([{}])/g,function(_,brace,index){var _iterator239=_createForOfIteratorHelper(positions),_step239;try{for(_iterator239.s();!(_step239=_iterator239.n()).done;){var _pos2=_step239.value;if(_pos2.line==lines.length&&_pos2.from>index){_pos2.from--;_pos2.to--;}}}catch(err){_iterator239.e(err);}finally{_iterator239.f();}return brace;});lines.push(line);}}catch(err){_iterator237.e(err);}finally{_iterator237.f();}return new _Snippet(lines,positions);}}]);}();var fieldMarker=/* @__PURE__ */Decoration.widget({widget:/* @__PURE__ */new(/*#__PURE__*/function(_WidgetType8){function _class15(){_classCallCheck(this,_class15);return _callSuper(this,_class15,arguments);}_inherits(_class15,_WidgetType8);return _createClass(_class15,[{key:"toDOM",value:function toDOM(){var span=document.createElement("span");span.className="cm-snippetFieldPosition";return span;}},{key:"ignoreEvent",value:function ignoreEvent(){return false;}}]);}(WidgetType))()});var fieldRange=/* @__PURE__ */Decoration.mark({"class":"cm-snippetField"});var _ActiveSnippet=/*#__PURE__*/function(){function ActiveSnippet(ranges,active){_classCallCheck(this,ActiveSnippet);this.ranges=ranges;this.active=active;this.deco=Decoration.set(ranges.map(function(r){return(r.from==r.to?fieldMarker:fieldRange).range(r.from,r.to);}));}return _createClass(ActiveSnippet,[{key:"map",value:function map(changes){var ranges=[];var _iterator240=_createForOfIteratorHelper(this.ranges),_step240;try{for(_iterator240.s();!(_step240=_iterator240.n()).done;){var _r12=_step240.value;var mapped=_r12.map(changes);if(!mapped)return null;ranges.push(mapped);}}catch(err){_iterator240.e(err);}finally{_iterator240.f();}return new _ActiveSnippet(ranges,this.active);}},{key:"selectionInsideField",value:function selectionInsideField(sel){var _this97=this;return sel.ranges.every(function(range){return _this97.ranges.some(function(r){return r.field==_this97.active&&r.from<=range.from&&r.to>=range.to;});});}}]);}();var setActive=/* @__PURE__ */_StateEffect.define({map:function map(value,changes){return value&&value.map(changes);}});var moveToField=/* @__PURE__ */_StateEffect.define();var snippetState=/* @__PURE__ */_StateField.define({create:function create(){return null;},update:function update(value,tr){var _iterator241=_createForOfIteratorHelper(tr.effects),_step241;try{for(_iterator241.s();!(_step241=_iterator241.n()).done;){var effect=_step241.value;if(effect.is(setActive))return effect.value;if(effect.is(moveToField)&&value)return new _ActiveSnippet(value.ranges,effect.value);}}catch(err){_iterator241.e(err);}finally{_iterator241.f();}if(value&&tr.docChanged)value=value.map(tr.changes);if(value&&tr.selection&&!value.selectionInsideField(tr.selection))value=null;return value;},provide:function provide(f){return _EditorView.decorations.from(f,function(val){return val?val.deco:Decoration.none;});}});function fieldSelection(ranges,field){return _EditorSelection.create(ranges.filter(function(r){return r.field==field;}).map(function(r){return _EditorSelection.range(r.from,r.to);}));}function _snippet(template){var snippet2=_Snippet.parse(template);return function(editor,completion,from,to){var _snippet2$instantiate=snippet2.instantiate(editor.state,from),text=_snippet2$instantiate.text,ranges=_snippet2$instantiate.ranges;var main=editor.state.selection.main;var spec={changes:{from:from,to:to==main.from?main.to:to,insert:_Text.of(text)},scrollIntoView:true,annotations:completion?[_pickedCompletion.of(completion),_Transaction.userEvent.of("input.complete")]:void 0};if(ranges.length)spec.selection=fieldSelection(ranges,0);if(ranges.some(function(r){return r.field>0;})){var active=new _ActiveSnippet(ranges,0);var effects=spec.effects=[setActive.of(active)];if(editor.state.field(snippetState,false)===void 0)effects.push(_StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme4]));}editor.dispatch(editor.state.update(spec));};}function moveField(dir){return function(_ref54){var state=_ref54.state,dispatch=_ref54.dispatch;var active=state.field(snippetState,false);if(!active||dir<0&&active.active==0)return false;var next=active.active+dir,last=dir>0&&!active.ranges.some(function(r){return r.field==next+dir;});dispatch(state.update({selection:fieldSelection(active.ranges,next),effects:setActive.of(last?null:new _ActiveSnippet(active.ranges,next)),scrollIntoView:true}));return true;};}var _clearSnippet=function _clearSnippet(_ref55){var state=_ref55.state,dispatch=_ref55.dispatch;var active=state.field(snippetState,false);if(!active)return false;dispatch(state.update({effects:setActive.of(null)}));return true;};var _nextSnippetField=/* @__PURE__ */moveField(1);var _prevSnippetField=/* @__PURE__ */moveField(-1);function _hasNextSnippetField(state){var active=state.field(snippetState,false);return!!(active&&active.ranges.some(function(r){return r.field==active.active+1;}));}function _hasPrevSnippetField(state){var active=state.field(snippetState,false);return!!(active&&active.active>0);}var defaultSnippetKeymap=[{key:"Tab",run:_nextSnippetField,shift:_prevSnippetField},{key:"Escape",run:_clearSnippet}];var _snippetKeymap=/* @__PURE__ */_Facet.define({combine:function combine(maps){return maps.length?maps[0]:defaultSnippetKeymap;}});var addSnippetKeymap=/* @__PURE__ */Prec.highest(/* @__PURE__ */keymap.compute([_snippetKeymap],function(state){return state.facet(_snippetKeymap);}));function _snippetCompletion(template,completion){return Object.assign(Object.assign({},completion),{apply:_snippet(template)});}var snippetPointerHandler=/* @__PURE__ */_EditorView.domEventHandlers({mousedown:function mousedown(event,view){var active=view.state.field(snippetState,false),pos;if(!active||(pos=view.posAtCoords({x:event.clientX,y:event.clientY}))==null)return false;var match=active.ranges.find(function(r){return r.from<=pos&&r.to>=pos;});if(!match||match.field==active.active)return false;view.dispatch({selection:fieldSelection(active.ranges,match.field),effects:setActive.of(active.ranges.some(function(r){return r.field>match.field;})?new _ActiveSnippet(active.ranges,match.field):null),scrollIntoView:true});return true;}});function wordRE(wordChars){var escaped=wordChars.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp("[\\p{Alphabetic}\\p{Number}_".concat(escaped,"]+"),"ug");}catch(_a2){return new RegExp("[w".concat(escaped,"]"),"g");}}function mapRE(re,f){return new RegExp(f(re.source),re.unicode?"u":"");}var wordCaches=/* @__PURE__ */Object.create(null);function wordCache(wordChars){return wordCaches[wordChars]||(wordCaches[wordChars]=/* @__PURE__ */new WeakMap());}function storeWords(doc2,wordRE2,result,seen,ignoreAt){for(var lines=doc2.iterLines(),pos=0;!lines.next().done;){var value=lines.value,m=void 0;wordRE2.lastIndex=0;while(m=wordRE2.exec(value)){if(!seen[m[0]]&&pos+m.index!=ignoreAt){result.push({type:"text",label:m[0]});seen[m[0]]=true;if(result.length>=2e3)return;}}pos+=value.length+1;}}function collectWords(doc2,cache2,wordRE2,to,ignoreAt){var big=doc2.length>=1e3;var cached=big&&cache2.get(doc2);if(cached)return cached;var result=[],seen=/* @__PURE__ */Object.create(null);if(doc2.children){var pos=0;var _iterator242=_createForOfIteratorHelper(doc2.children),_step242;try{for(_iterator242.s();!(_step242=_iterator242.n()).done;){var ch=_step242.value;if(ch.length>=1e3){var _iterator243=_createForOfIteratorHelper(collectWords(ch,cache2,wordRE2,to-pos,ignoreAt-pos)),_step243;try{for(_iterator243.s();!(_step243=_iterator243.n()).done;){var c=_step243.value;if(!seen[c.label]){seen[c.label]=true;result.push(c);}}}catch(err){_iterator243.e(err);}finally{_iterator243.f();}}else{storeWords(ch,wordRE2,result,seen,ignoreAt-pos);}pos+=ch.length+1;}}catch(err){_iterator242.e(err);}finally{_iterator242.f();}}else{storeWords(doc2,wordRE2,result,seen,ignoreAt);}if(big&&result.length<2e3)cache2.set(doc2,result);return result;}var _completeAnyWord=function _completeAnyWord(context){var wordChars=context.state.languageDataAt("wordChars",context.pos).join("");var re=wordRE(wordChars);var token=context.matchBefore(mapRE(re,function(s){return s+"$";}));if(!token&&!context.explicit)return null;var from=token?token.from:context.pos;var options=collectWords(context.state.doc,wordCache(wordChars),re,5e4,from);return{from:from,options:options,validFor:mapRE(re,function(s){return"^"+s;})};};var defaults2={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]};var closeBracketEffect=/* @__PURE__ */_StateEffect.define({map:function map(value,mapping){var mapped=mapping.mapPos(value,-1,MapMode.TrackAfter);return mapped==null?void 0:mapped;}});var closedBracket=/* @__PURE__ */new(/*#__PURE__*/function(_RangeValue3){function _class16(){_classCallCheck(this,_class16);return _callSuper(this,_class16,arguments);}_inherits(_class16,_RangeValue3);return _createClass(_class16);}(RangeValue))();closedBracket.startSide=1;closedBracket.endSide=-1;var bracketState=/* @__PURE__ */_StateField.define({create:function create(){return _RangeSet.empty;},update:function update(value,tr){value=value.map(tr.changes);if(tr.selection){var line=tr.state.doc.lineAt(tr.selection.main.head);value=value.update({filter:function filter(from){return from>=line.from&&from<=line.to;}});}var _iterator244=_createForOfIteratorHelper(tr.effects),_step244;try{for(_iterator244.s();!(_step244=_iterator244.n()).done;){var effect=_step244.value;if(effect.is(closeBracketEffect))value=value.update({add:[closedBracket.range(effect.value,effect.value+1)]});}}catch(err){_iterator244.e(err);}finally{_iterator244.f();}return value;}});function _closeBrackets(){return[inputHandler2,bracketState];}var definedClosing="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function closing(ch){for(var _i172=0;_i172<definedClosing.length;_i172+=2)if(definedClosing.charCodeAt(_i172)==ch)return definedClosing.charAt(_i172+1);return fromCodePoint(ch<128?ch:ch+1);}function config(state,pos){return state.languageDataAt("closeBrackets",pos)[0]||defaults2;}var android=(typeof navigator==="undefined"?"undefined":_typeof(navigator))=="object"&&/* @__PURE__ *//Android\b/.test(navigator.userAgent);var inputHandler2=/* @__PURE__ */_EditorView.inputHandler.of(function(view,from,to,insert2){if((android?view.composing:view.compositionStarted)||view.state.readOnly)return false;var sel=view.state.selection.main;if(insert2.length>2||insert2.length==2&&codePointSize2(codePointAt2(insert2,0))==1||from!=sel.from||to!=sel.to)return false;var tr=_insertBracket(view.state,insert2);if(!tr)return false;view.dispatch(tr);return true;});var _deleteBracketPair=function _deleteBracketPair(_ref56){var state=_ref56.state,dispatch=_ref56.dispatch;if(state.readOnly)return false;var conf=config(state,state.selection.main.head);var tokens=conf.brackets||defaults2.brackets;var dont=null,changes=state.changeByRange(function(range){if(range.empty){var before=prevChar(state.doc,range.head);var _iterator245=_createForOfIteratorHelper(tokens),_step245;try{for(_iterator245.s();!(_step245=_iterator245.n()).done;){var token=_step245.value;if(token==before&&nextChar(state.doc,range.head)==closing(codePointAt2(token,0)))return{changes:{from:range.head-token.length,to:range.head+token.length},range:_EditorSelection.cursor(range.head-token.length)};}}catch(err){_iterator245.e(err);}finally{_iterator245.f();}}return{range:dont=range};});if(!dont)dispatch(state.update(changes,{scrollIntoView:true,userEvent:"delete.backward"}));return!dont;};var _closeBracketsKeymap=[{key:"Backspace",run:_deleteBracketPair}];function _insertBracket(state,bracket2){var conf=config(state,state.selection.main.head);var tokens=conf.brackets||defaults2.brackets;var _iterator246=_createForOfIteratorHelper(tokens),_step246;try{for(_iterator246.s();!(_step246=_iterator246.n()).done;){var tok=_step246.value;var closed=closing(codePointAt2(tok,0));if(bracket2==tok)return closed==tok?handleSame(state,tok,tokens.indexOf(tok+tok+tok)>-1,conf):handleOpen(state,tok,closed,conf.before||defaults2.before);if(bracket2==closed&&closedBracketAt(state,state.selection.main.from))return handleClose(state,tok,closed);}}catch(err){_iterator246.e(err);}finally{_iterator246.f();}return null;}function closedBracketAt(state,pos){var found=false;state.field(bracketState).between(0,state.doc.length,function(from){if(from==pos)found=true;});return found;}function nextChar(doc2,pos){var next=doc2.sliceString(pos,pos+2);return next.slice(0,codePointSize2(codePointAt2(next,0)));}function prevChar(doc2,pos){var prev=doc2.sliceString(pos-2,pos);return codePointSize2(codePointAt2(prev,0))==prev.length?prev:prev.slice(1);}function handleOpen(state,open,close,closeBefore){var dont=null,changes=state.changeByRange(function(range){if(!range.empty)return{changes:[{insert:open,from:range.from},{insert:close,from:range.to}],effects:closeBracketEffect.of(range.to+open.length),range:_EditorSelection.range(range.anchor+open.length,range.head+open.length)};var next=nextChar(state.doc,range.head);if(!next||/\s/.test(next)||closeBefore.indexOf(next)>-1)return{changes:{insert:open+close,from:range.head},effects:closeBracketEffect.of(range.head+open.length),range:_EditorSelection.cursor(range.head+open.length)};return{range:dont=range};});return dont?null:state.update(changes,{scrollIntoView:true,userEvent:"input.type"});}function handleClose(state,_open,close){var dont=null,changes=state.changeByRange(function(range){if(range.empty&&nextChar(state.doc,range.head)==close)return{changes:{from:range.head,to:range.head+close.length,insert:close},range:_EditorSelection.cursor(range.head+close.length)};return dont={range:range};});return dont?null:state.update(changes,{scrollIntoView:true,userEvent:"input.type"});}function handleSame(state,token,allowTriple,config2){var stringPrefixes=config2.stringPrefixes||defaults2.stringPrefixes;var dont=null,changes=state.changeByRange(function(range){if(!range.empty)return{changes:[{insert:token,from:range.from},{insert:token,from:range.to}],effects:closeBracketEffect.of(range.to+token.length),range:_EditorSelection.range(range.anchor+token.length,range.head+token.length)};var pos=range.head,next=nextChar(state.doc,pos),start;if(next==token){if(nodeStart(state,pos)){return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:_EditorSelection.cursor(pos+token.length)};}else if(closedBracketAt(state,pos)){var isTriple=allowTriple&&state.sliceDoc(pos,pos+token.length*3)==token+token+token;var content2=isTriple?token+token+token:token;return{changes:{from:pos,to:pos+content2.length,insert:content2},range:_EditorSelection.cursor(pos+content2.length)};}}else if(allowTriple&&state.sliceDoc(pos-2*token.length,pos)==token+token&&(start=canStartStringAt(state,pos-2*token.length,stringPrefixes))>-1&&nodeStart(state,start)){return{changes:{insert:token+token+token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:_EditorSelection.cursor(pos+token.length)};}else if(state.charCategorizer(pos)(next)!=CharCategory.Word){if(canStartStringAt(state,pos,stringPrefixes)>-1&&!probablyInString(state,pos,token,stringPrefixes))return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:_EditorSelection.cursor(pos+token.length)};}return{range:dont=range};});return dont?null:state.update(changes,{scrollIntoView:true,userEvent:"input.type"});}function nodeStart(state,pos){var tree=_syntaxTree(state).resolveInner(pos+1);return tree.parent&&tree.from==pos;}function probablyInString(state,pos,quoteToken,prefixes){var node=_syntaxTree(state).resolveInner(pos,-1);var maxPrefix=prefixes.reduce(function(m,p){return Math.max(m,p.length);},0);for(var _i173=0;_i173<5;_i173++){var start=state.sliceDoc(node.from,Math.min(node.to,node.from+quoteToken.length+maxPrefix));var quotePos=start.indexOf(quoteToken);if(!quotePos||quotePos>-1&&prefixes.indexOf(start.slice(0,quotePos))>-1){var first=node.firstChild;while(first&&first.from==node.from&&first.to-first.from>quoteToken.length+quotePos){if(state.sliceDoc(first.to-quoteToken.length,first.to)==quoteToken)return false;first=first.firstChild;}return true;}var parent=node.to==pos&&node.parent;if(!parent)break;node=parent;}return false;}function canStartStringAt(state,pos,prefixes){var charCat=state.charCategorizer(pos);if(charCat(state.sliceDoc(pos-1,pos))!=CharCategory.Word)return pos;var _iterator247=_createForOfIteratorHelper(prefixes),_step247;try{for(_iterator247.s();!(_step247=_iterator247.n()).done;){var prefix=_step247.value;var start=pos-prefix.length;if(state.sliceDoc(start,pos)==prefix&&charCat(state.sliceDoc(start-1,start))!=CharCategory.Word)return start;}}catch(err){_iterator247.e(err);}finally{_iterator247.f();}return-1;}function _autocompletion(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[commitCharacters,completionState,completionConfig.of(config2),completionPlugin,completionKeymapExt,baseTheme4];}var _completionKeymap=[{key:"Ctrl-Space",run:_startCompletion},{mac:"Alt-`",run:_startCompletion},{key:"Escape",run:_closeCompletion},{key:"ArrowDown",run:/* @__PURE__ */_moveCompletionSelection(true)},{key:"ArrowUp",run:/* @__PURE__ */_moveCompletionSelection(false)},{key:"PageDown",run:/* @__PURE__ */_moveCompletionSelection(true,"page")},{key:"PageUp",run:/* @__PURE__ */_moveCompletionSelection(false,"page")},{key:"Enter",run:_acceptCompletion}];var completionKeymapExt=/* @__PURE__ */Prec.highest(/* @__PURE__ */keymap.computeN([completionConfig],function(state){return state.facet(completionConfig).defaultKeymap?[_completionKeymap]:[];}));function _completionStatus(state){var cState=state.field(completionState,false);return cState&&cState.active.some(function(a){return a.isPending;})?"pending":cState&&cState.active.some(function(a){return a.state!=0;})?"active":null;}var completionArrayCache=/* @__PURE__ */new WeakMap();function _currentCompletions(state){var _a2;var open=(_a2=state.field(completionState,false))===null||_a2===void 0?void 0:_a2.open;if(!open||open.disabled)return[];var completions=completionArrayCache.get(open.options);if(!completions)completionArrayCache.set(open.options,completions=open.options.map(function(o){return o.completion;}));return completions;}function _selectedCompletion(state){var _a2;var open=(_a2=state.field(completionState,false))===null||_a2===void 0?void 0:_a2.open;return open&&!open.disabled&&open.selected>=0?open.options[open.selected].completion:null;}function _selectedCompletionIndex(state){var _a2;var open=(_a2=state.field(completionState,false))===null||_a2===void 0?void 0:_a2.open;return open&&!open.disabled&&open.selected>=0?open.selected:null;}function _setSelectedCompletion(index){return setSelectedEffect.of(index);}// ../node_modules/@codemirror/lint/dist/index.js
var dist_exports3={};__export(dist_exports3,{closeLintPanel:function closeLintPanel(){return _closeLintPanel;},diagnosticCount:function diagnosticCount(){return _diagnosticCount;},forEachDiagnostic:function forEachDiagnostic(){return _forEachDiagnostic;},forceLinting:function forceLinting(){return _forceLinting;},lintGutter:function lintGutter(){return _lintGutter;},lintKeymap:function lintKeymap(){return _lintKeymap;},linter:function linter(){return _linter;},nextDiagnostic:function nextDiagnostic(){return _nextDiagnostic;},openLintPanel:function openLintPanel(){return _openLintPanel;},previousDiagnostic:function previousDiagnostic(){return _previousDiagnostic;},setDiagnostics:function setDiagnostics(){return _setDiagnostics;},setDiagnosticsEffect:function setDiagnosticsEffect(){return _setDiagnosticsEffect;}});var SelectedDiagnostic=/*#__PURE__*/_createClass(function SelectedDiagnostic(from,to,diagnostic){_classCallCheck(this,SelectedDiagnostic);this.from=from;this.to=to;this.diagnostic=diagnostic;});var _LintState=/*#__PURE__*/function(){function LintState(diagnostics,panel,selected){_classCallCheck(this,LintState);this.diagnostics=diagnostics;this.panel=panel;this.selected=selected;}return _createClass(LintState,null,[{key:"init",value:function init(diagnostics,panel,state){var diagnosticFilter=state.facet(lintConfig).markerFilter;if(diagnosticFilter)diagnostics=diagnosticFilter(diagnostics,state);var sorted=diagnostics.slice().sort(function(a,b){return a.from-b.from||a.to-b.to;});var deco=new _RangeSetBuilder(),active=[],pos=0;var _loop18=function _loop18(_i175){var next=_i175==sorted.length?null:sorted[_i175];if(!next&&!active.length){_i174=_i175;return 1;}// break
var from,to;if(active.length){from=pos;to=active.reduce(function(p,d){return Math.min(p,d.to);},next&&next.from>from?next.from:1e8);}else{from=next.from;to=next.to;active.push(next);_i175++;}while(_i175<sorted.length){var next2=sorted[_i175];if(next2.from==from&&(next2.to>next2.from||next2.to==from)){active.push(next2);_i175++;to=Math.min(next2.to,to);}else{to=Math.min(next2.from,to);break;}}var sev=maxSeverity(active);if(active.some(function(d){return d.from==d.to||d.from==d.to-1&&state.doc.lineAt(d.from).to==d.from;})){deco.add(from,from,Decoration.widget({widget:new DiagnosticWidget(sev),diagnostics:active.slice()}));}else{var markClass=active.reduce(function(c,d){return d.markClass?c+" "+d.markClass:c;},"");deco.add(from,to,Decoration.mark({"class":"cm-lintRange cm-lintRange-"+sev+markClass,diagnostics:active.slice(),inclusiveEnd:active.some(function(a){return a.to>to;})}));}pos=to;for(var i2=0;i2<active.length;i2++)if(active[i2].to<=pos)active.splice(i2--,1);_i174=_i175;};for(var _i174=0;;){if(_loop18(_i174))break;}var set=deco.finish();return new _LintState(set,panel,findDiagnostic(set));}}]);}();function findDiagnostic(diagnostics){var diagnostic=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var after=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var found=null;diagnostics.between(after,1e9,function(from,to,_ref57){var spec=_ref57.spec;if(diagnostic&&spec.diagnostics.indexOf(diagnostic)<0)return;if(!found)found=new SelectedDiagnostic(from,to,diagnostic||spec.diagnostics[0]);else if(spec.diagnostics.indexOf(found.diagnostic)<0)return false;else found=new SelectedDiagnostic(found.from,to,found.diagnostic);});return found;}function hideTooltip(tr,tooltip){var from=tooltip.pos,to=tooltip.end||from;var result=tr.state.facet(lintConfig).hideOn(tr,from,to);if(result!=null)return result;var line=tr.startState.doc.lineAt(tooltip.pos);return!!(tr.effects.some(function(e){return e.is(_setDiagnosticsEffect);})||tr.changes.touchesRange(line.from,Math.max(line.to,to)));}function maybeEnableLint(state,effects){return state.field(lintState,false)?effects:effects.concat(_StateEffect.appendConfig.of(lintExtensions));}function _setDiagnostics(state,diagnostics){return{effects:maybeEnableLint(state,[_setDiagnosticsEffect.of(diagnostics)])};}var _setDiagnosticsEffect=/* @__PURE__ */_StateEffect.define();var togglePanel2=/* @__PURE__ */_StateEffect.define();var movePanelSelection=/* @__PURE__ */_StateEffect.define();var lintState=/* @__PURE__ */_StateField.define({create:function create(){return new _LintState(Decoration.none,null,null);},update:function update(value,tr){if(tr.docChanged&&value.diagnostics.size){var mapped=value.diagnostics.map(tr.changes),selected=null,panel=value.panel;if(value.selected){var selPos=tr.changes.mapPos(value.selected.from,1);selected=findDiagnostic(mapped,value.selected.diagnostic,selPos)||findDiagnostic(mapped,null,selPos);}if(!mapped.size&&panel&&tr.state.facet(lintConfig).autoPanel)panel=null;value=new _LintState(mapped,panel,selected);}var _iterator248=_createForOfIteratorHelper(tr.effects),_step248;try{for(_iterator248.s();!(_step248=_iterator248.n()).done;){var effect=_step248.value;if(effect.is(_setDiagnosticsEffect)){var _panel=!tr.state.facet(lintConfig).autoPanel?value.panel:effect.value.length?_LintPanel.open:null;value=_LintState.init(effect.value,_panel,tr.state);}else if(effect.is(togglePanel2)){value=new _LintState(value.diagnostics,effect.value?_LintPanel.open:null,value.selected);}else if(effect.is(movePanelSelection)){value=new _LintState(value.diagnostics,value.panel,effect.value);}}}catch(err){_iterator248.e(err);}finally{_iterator248.f();}return value;},provide:function provide(f){return[showPanel.from(f,function(val){return val.panel;}),_EditorView.decorations.from(f,function(s){return s.diagnostics;})];}});function _diagnosticCount(state){var lint=state.field(lintState,false);return lint?lint.diagnostics.size:0;}var activeMark=/* @__PURE__ */Decoration.mark({"class":"cm-lintRange cm-lintRange-active"});function lintTooltip(view,pos,side){var _view$state$field=view.state.field(lintState),diagnostics=_view$state$field.diagnostics;var found,start=-1,end=-1;diagnostics.between(pos-(side<0?1:0),pos+(side>0?1:0),function(from,to,_ref58){var spec=_ref58.spec;if(pos>=from&&pos<=to&&(from==to||(pos>from||side>0)&&(pos<to||side<0))){found=spec.diagnostics;start=from;end=to;return false;}});var diagnosticFilter=view.state.facet(lintConfig).tooltipFilter;if(found&&diagnosticFilter)found=diagnosticFilter(found,view.state);if(!found)return null;return{pos:start,end:end,above:view.state.doc.lineAt(start).to<end,create:function create(){return{dom:diagnosticsTooltip(view,found)};}};}function diagnosticsTooltip(view,diagnostics){return crelt("ul",{"class":"cm-tooltip-lint"},diagnostics.map(function(d){return renderDiagnostic(view,d,false);}));}var _openLintPanel=function _openLintPanel(view){var field=view.state.field(lintState,false);if(!field||!field.panel)view.dispatch({effects:maybeEnableLint(view.state,[togglePanel2.of(true)])});var panel=getPanel(view,_LintPanel.open);if(panel)panel.dom.querySelector(".cm-panel-lint ul").focus();return true;};var _closeLintPanel=function _closeLintPanel(view){var field=view.state.field(lintState,false);if(!field||!field.panel)return false;view.dispatch({effects:togglePanel2.of(false)});return true;};var _nextDiagnostic=function _nextDiagnostic(view){var field=view.state.field(lintState,false);if(!field)return false;var sel=view.state.selection.main,next=field.diagnostics.iter(sel.to+1);if(!next.value){next=field.diagnostics.iter(0);if(!next.value||next.from==sel.from&&next.to==sel.to)return false;}view.dispatch({selection:{anchor:next.from,head:next.to},scrollIntoView:true});return true;};var _previousDiagnostic=function _previousDiagnostic(view){var state=view.state,field=state.field(lintState,false);if(!field)return false;var sel=state.selection.main;var prevFrom,prevTo,lastFrom,lastTo;field.diagnostics.between(0,state.doc.length,function(from,to){if(to<sel.to&&(prevFrom==null||prevFrom<from)){prevFrom=from;prevTo=to;}if(lastFrom==null||from>lastFrom){lastFrom=from;lastTo=to;}});if(lastFrom==null||prevFrom==null&&lastFrom==sel.from)return false;view.dispatch({selection:{anchor:prevFrom!==null&&prevFrom!==void 0?prevFrom:lastFrom,head:prevTo!==null&&prevTo!==void 0?prevTo:lastTo},scrollIntoView:true});return true;};var _lintKeymap=[{key:"Mod-Shift-m",run:_openLintPanel,preventDefault:true},{key:"F8",run:_nextDiagnostic}];var lintPlugin=/* @__PURE__ */_ViewPlugin.fromClass(/*#__PURE__*/function(){function _class17(view){_classCallCheck(this,_class17);this.view=view;this.timeout=-1;this.set=true;var _view$state$facet=view.state.facet(lintConfig),delay=_view$state$facet.delay;this.lintTime=Date.now()+delay;this.run=this.run.bind(this);this.timeout=setTimeout(this.run,delay);}return _createClass(_class17,[{key:"run",value:function run(){var _this98=this;clearTimeout(this.timeout);var now=Date.now();if(now<this.lintTime-10){this.timeout=setTimeout(this.run,this.lintTime-now);}else{this.set=false;var state=this.view.state,_state$facet=state.facet(lintConfig),sources=_state$facet.sources;if(sources.length)batchResults(sources.map(function(s){return Promise.resolve(s(_this98.view));}),function(annotations){if(_this98.view.state.doc==state.doc)_this98.view.dispatch(_setDiagnostics(_this98.view.state,annotations.reduce(function(a,b){return a.concat(b);})));},function(error){logException(_this98.view.state,error);});}}},{key:"update",value:function update(_update29){var config2=_update29.state.facet(lintConfig);if(_update29.docChanged||config2!=_update29.startState.facet(lintConfig)||config2.needsRefresh&&config2.needsRefresh(_update29)){this.lintTime=Date.now()+config2.delay;if(!this.set){this.set=true;this.timeout=setTimeout(this.run,config2.delay);}}}},{key:"force",value:function force(){if(this.set){this.lintTime=Date.now();this.run();}}},{key:"destroy",value:function destroy(){clearTimeout(this.timeout);}}]);}());function batchResults(promises,sink,error){var collected=[],timeout=-1;var _iterator249=_createForOfIteratorHelper(promises),_step249;try{for(_iterator249.s();!(_step249=_iterator249.n()).done;){var _p8=_step249.value;_p8.then(function(value){collected.push(value);clearTimeout(timeout);if(collected.length==promises.length)sink(collected);else timeout=setTimeout(function(){return sink(collected);},200);},error);}}catch(err){_iterator249.e(err);}finally{_iterator249.f();}}var lintConfig=/* @__PURE__ */_Facet.define({combine:function combine(input){return Object.assign({sources:input.map(function(i){return i.source;}).filter(function(x){return x!=null;})},combineConfig(input.map(function(i){return i.config;}),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:function hideOn(){return null;}},{needsRefresh:function needsRefresh(a,b){return!a?b:!b?a:function(u){return a(u)||b(u);};}}));}});function _linter(source){var config2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return[lintConfig.of({source:source,config:config2}),lintPlugin,lintExtensions];}function _forceLinting(view){var plugin=view.plugin(lintPlugin);if(plugin)plugin.force();}function assignKeys(actions){var assigned=[];if(actions){var _iterator250=_createForOfIteratorHelper(actions),_step250;try{actions:for(_iterator250.s();!(_step250=_iterator250.n()).done;){var _name6=_step250.value.name;var _loop19=function _loop19(){var ch=_name6[_i176];if(/[a-zA-Z]/.test(ch)&&!assigned.some(function(c){return c.toLowerCase()==ch.toLowerCase();})){assigned.push(ch);return 1;// continue actions
}};for(var _i176=0;_i176<_name6.length;_i176++){if(_loop19())continue actions;}assigned.push("");}}catch(err){_iterator250.e(err);}finally{_iterator250.f();}}return assigned;}function renderDiagnostic(view,diagnostic,inPanel){var _a2;var keys2=inPanel?assignKeys(diagnostic.actions):[];return crelt("li",{"class":"cm-diagnostic cm-diagnostic-"+diagnostic.severity},crelt("span",{"class":"cm-diagnosticText"},diagnostic.renderMessage?diagnostic.renderMessage(view):diagnostic.message),(_a2=diagnostic.actions)===null||_a2===void 0?void 0:_a2.map(function(action,i){var fired=false,click=function click(e){e.preventDefault();if(fired)return;fired=true;var found=findDiagnostic(view.state.field(lintState).diagnostics,diagnostic);if(found)action.apply(view,found.from,found.to);};var name2=action.name,keyIndex=keys2[i]?name2.indexOf(keys2[i]):-1;var nameElt=keyIndex<0?name2:[name2.slice(0,keyIndex),crelt("u",name2.slice(keyIndex,keyIndex+1)),name2.slice(keyIndex+1)];return crelt("button",{type:"button","class":"cm-diagnosticAction",onclick:click,onmousedown:click,"aria-label":" Action: ".concat(name2).concat(keyIndex<0?"":" (access key \"".concat(keys2[i],")\""),".")},nameElt);}),diagnostic.source&&crelt("div",{"class":"cm-diagnosticSource"},diagnostic.source));}var DiagnosticWidget=/*#__PURE__*/function(_WidgetType9){function DiagnosticWidget(sev){var _this99;_classCallCheck(this,DiagnosticWidget);_this99=_callSuper(this,DiagnosticWidget);_this99.sev=sev;return _this99;}_inherits(DiagnosticWidget,_WidgetType9);return _createClass(DiagnosticWidget,[{key:"eq",value:function eq(other){return other.sev==this.sev;}},{key:"toDOM",value:function toDOM(){return crelt("span",{"class":"cm-lintPoint cm-lintPoint-"+this.sev});}}]);}(WidgetType);var PanelItem=/*#__PURE__*/_createClass(function PanelItem(view,diagnostic){_classCallCheck(this,PanelItem);this.diagnostic=diagnostic;this.id="item_"+Math.floor(Math.random()*4294967295).toString(16);this.dom=renderDiagnostic(view,diagnostic,true);this.dom.id=this.id;this.dom.setAttribute("role","option");});var _LintPanel=/*#__PURE__*/function(){function LintPanel(view){var _this100=this;_classCallCheck(this,LintPanel);this.view=view;this.items=[];var onkeydown=function onkeydown(event){if(event.keyCode==27){_closeLintPanel(_this100.view);_this100.view.focus();}else if(event.keyCode==38||event.keyCode==33){_this100.moveSelection((_this100.selectedIndex-1+_this100.items.length)%_this100.items.length);}else if(event.keyCode==40||event.keyCode==34){_this100.moveSelection((_this100.selectedIndex+1)%_this100.items.length);}else if(event.keyCode==36){_this100.moveSelection(0);}else if(event.keyCode==35){_this100.moveSelection(_this100.items.length-1);}else if(event.keyCode==13){_this100.view.focus();}else if(event.keyCode>=65&&event.keyCode<=90&&_this100.selectedIndex>=0){var diagnostic=_this100.items[_this100.selectedIndex].diagnostic,keys2=assignKeys(diagnostic.actions);for(var _i177=0;_i177<keys2.length;_i177++)if(keys2[_i177].toUpperCase().charCodeAt(0)==event.keyCode){var found=findDiagnostic(_this100.view.state.field(lintState).diagnostics,diagnostic);if(found)diagnostic.actions[_i177].apply(view,found.from,found.to);}}else{return;}event.preventDefault();};var onclick=function onclick(event){for(var _i178=0;_i178<_this100.items.length;_i178++){if(_this100.items[_i178].dom.contains(event.target))_this100.moveSelection(_i178);}};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:onkeydown,onclick:onclick});this.dom=crelt("div",{"class":"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function onclick(){return _closeLintPanel(_this100.view);}},"\xD7"));this.update();}return _createClass(LintPanel,[{key:"selectedIndex",get:function get(){var selected=this.view.state.field(lintState).selected;if(!selected)return-1;for(var _i179=0;_i179<this.items.length;_i179++)if(this.items[_i179].diagnostic==selected.diagnostic)return _i179;return-1;}},{key:"update",value:function update(){var _this101=this;var _this$view$state$fiel=this.view.state.field(lintState),diagnostics=_this$view$state$fiel.diagnostics,selected=_this$view$state$fiel.selected;var i=0,needsSync=false,newSelectedItem=null;var seen=/* @__PURE__ */new Set();diagnostics.between(0,this.view.state.doc.length,function(_start,_end,_ref59){var spec=_ref59.spec;var _iterator251=_createForOfIteratorHelper(spec.diagnostics),_step251;try{for(_iterator251.s();!(_step251=_iterator251.n()).done;){var diagnostic=_step251.value;if(seen.has(diagnostic))continue;seen.add(diagnostic);var found=-1,item=void 0;for(var j=i;j<_this101.items.length;j++)if(_this101.items[j].diagnostic==diagnostic){found=j;break;}if(found<0){item=new PanelItem(_this101.view,diagnostic);_this101.items.splice(i,0,item);needsSync=true;}else{item=_this101.items[found];if(found>i){_this101.items.splice(i,found-i);needsSync=true;}}if(selected&&item.diagnostic==selected.diagnostic){if(!item.dom.hasAttribute("aria-selected")){item.dom.setAttribute("aria-selected","true");newSelectedItem=item;}}else if(item.dom.hasAttribute("aria-selected")){item.dom.removeAttribute("aria-selected");}i++;}}catch(err){_iterator251.e(err);}finally{_iterator251.f();}});while(i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0)){needsSync=true;this.items.pop();}if(this.items.length==0){this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")}));needsSync=true;}if(newSelectedItem){this.list.setAttribute("aria-activedescendant",newSelectedItem.id);this.view.requestMeasure({key:this,read:function read(){return{sel:newSelectedItem.dom.getBoundingClientRect(),panel:_this101.list.getBoundingClientRect()};},write:function write(_ref60){var sel=_ref60.sel,panel=_ref60.panel;var scaleY=panel.height/_this101.list.offsetHeight;if(sel.top<panel.top)_this101.list.scrollTop-=(panel.top-sel.top)/scaleY;else if(sel.bottom>panel.bottom)_this101.list.scrollTop+=(sel.bottom-panel.bottom)/scaleY;}});}else if(this.selectedIndex<0){this.list.removeAttribute("aria-activedescendant");}if(needsSync)this.sync();}},{key:"sync",value:function sync(){var domPos=this.list.firstChild;function rm2(){var prev=domPos;domPos=prev.nextSibling;prev.remove();}var _iterator252=_createForOfIteratorHelper(this.items),_step252;try{for(_iterator252.s();!(_step252=_iterator252.n()).done;){var item=_step252.value;if(item.dom.parentNode==this.list){while(domPos!=item.dom)rm2();domPos=item.dom.nextSibling;}else{this.list.insertBefore(item.dom,domPos);}}}catch(err){_iterator252.e(err);}finally{_iterator252.f();}while(domPos)rm2();}},{key:"moveSelection",value:function moveSelection(selectedIndex){if(this.selectedIndex<0)return;var field=this.view.state.field(lintState);var selection2=findDiagnostic(field.diagnostics,this.items[selectedIndex].diagnostic);if(!selection2)return;this.view.dispatch({selection:{anchor:selection2.from,head:selection2.to},scrollIntoView:true,effects:movePanelSelection.of(selection2)});}}],[{key:"open",value:function open(view){return new _LintPanel(view);}}]);}();function svg(content2){var attrs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"viewBox=\"0 0 40 40\"";return"url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ".concat(attrs,">").concat(encodeURIComponent(content2),"</svg>')");}function underline(color2){return svg("<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"".concat(color2,"\" fill=\"none\" stroke-width=\".7\"/>"),"width=\"6\" height=\"3\"");}var baseTheme5=/* @__PURE__ */_EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:0.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:/* @__PURE__ */underline("#d11")},".cm-lintRange-warning":{backgroundImage:/* @__PURE__ */underline("orange")},".cm-lintRange-info":{backgroundImage:/* @__PURE__ */underline("#999")},".cm-lintRange-hint":{backgroundImage:/* @__PURE__ */underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(sev){return sev=="error"?4:sev=="warning"?3:sev=="info"?2:1;}function maxSeverity(diagnostics){var sev="hint",weight=1;var _iterator253=_createForOfIteratorHelper(diagnostics),_step253;try{for(_iterator253.s();!(_step253=_iterator253.n()).done;){var d=_step253.value;var w=severityWeight(d.severity);if(w>weight){weight=w;sev=d.severity;}}}catch(err){_iterator253.e(err);}finally{_iterator253.f();}return sev;}var LintGutterMarker=/*#__PURE__*/function(_GutterMarker4){function LintGutterMarker(diagnostics){var _this102;_classCallCheck(this,LintGutterMarker);_this102=_callSuper(this,LintGutterMarker);_this102.diagnostics=diagnostics;_this102.severity=maxSeverity(diagnostics);return _this102;}_inherits(LintGutterMarker,_GutterMarker4);return _createClass(LintGutterMarker,[{key:"toDOM",value:function toDOM(view){var elt2=document.createElement("div");elt2.className="cm-lint-marker cm-lint-marker-"+this.severity;var diagnostics=this.diagnostics;var diagnosticsFilter=view.state.facet(lintGutterConfig).tooltipFilter;if(diagnosticsFilter)diagnostics=diagnosticsFilter(diagnostics,view.state);if(diagnostics.length)elt2.onmouseover=function(){return gutterMarkerMouseOver(view,elt2,diagnostics);};return elt2;}}]);}(GutterMarker);function trackHoverOn(view,marker){var _mousemove=function mousemove(event){var rect=marker.getBoundingClientRect();if(event.clientX>rect.left-10&&event.clientX<rect.right+10&&event.clientY>rect.top-10&&event.clientY<rect.bottom+10)return;for(var target=event.target;target;target=target.parentNode){if(target.nodeType==1&&target.classList.contains("cm-tooltip-lint"))return;}window.removeEventListener("mousemove",_mousemove);if(view.state.field(lintGutterTooltip))view.dispatch({effects:setLintGutterTooltip.of(null)});};window.addEventListener("mousemove",_mousemove);}function gutterMarkerMouseOver(view,marker,diagnostics){function hovered(){var line=view.elementAtHeight(marker.getBoundingClientRect().top+5-view.documentTop);var linePos=view.coordsAtPos(line.from);if(linePos){view.dispatch({effects:setLintGutterTooltip.of({pos:line.from,above:false,clip:false,create:function create(){return{dom:diagnosticsTooltip(view,diagnostics),getCoords:function getCoords(){return marker.getBoundingClientRect();}};}})});}marker.onmouseout=marker.onmousemove=null;trackHoverOn(view,marker);}var _view$state$facet2=view.state.facet(lintGutterConfig),hoverTime=_view$state$facet2.hoverTime;var hoverTimeout=setTimeout(hovered,hoverTime);marker.onmouseout=function(){clearTimeout(hoverTimeout);marker.onmouseout=marker.onmousemove=null;};marker.onmousemove=function(){clearTimeout(hoverTimeout);hoverTimeout=setTimeout(hovered,hoverTime);};}function markersForDiagnostics(doc2,diagnostics){var byLine=/* @__PURE__ */Object.create(null);var _iterator254=_createForOfIteratorHelper(diagnostics),_step254;try{for(_iterator254.s();!(_step254=_iterator254.n()).done;){var diagnostic=_step254.value;var _line6=doc2.lineAt(diagnostic.from);(byLine[_line6.from]||(byLine[_line6.from]=[])).push(diagnostic);}}catch(err){_iterator254.e(err);}finally{_iterator254.f();}var markers=[];for(var line in byLine){markers.push(new LintGutterMarker(byLine[line]).range(+line));}return _RangeSet.of(markers,true);}var lintGutterExtension=/* @__PURE__ */gutter({"class":"cm-gutter-lint",markers:function markers(view){return view.state.field(lintGutterMarkers);},widgetMarker:function widgetMarker(view,widget,block){var diagnostics=[];view.state.field(lintGutterMarkers).between(block.from,block.to,function(from,to,value){if(from>block.from&&from<block.to)diagnostics.push.apply(diagnostics,_toConsumableArray(value.diagnostics));});return diagnostics.length?new LintGutterMarker(diagnostics):null;}});var lintGutterMarkers=/* @__PURE__ */_StateField.define({create:function create(){return _RangeSet.empty;},update:function update(markers,tr){markers=markers.map(tr.changes);var diagnosticFilter=tr.state.facet(lintGutterConfig).markerFilter;var _iterator255=_createForOfIteratorHelper(tr.effects),_step255;try{for(_iterator255.s();!(_step255=_iterator255.n()).done;){var effect=_step255.value;if(effect.is(_setDiagnosticsEffect)){var diagnostics=effect.value;if(diagnosticFilter)diagnostics=diagnosticFilter(diagnostics||[],tr.state);markers=markersForDiagnostics(tr.state.doc,diagnostics.slice(0));}}}catch(err){_iterator255.e(err);}finally{_iterator255.f();}return markers;}});var setLintGutterTooltip=/* @__PURE__ */_StateEffect.define();var lintGutterTooltip=/* @__PURE__ */_StateField.define({create:function create(){return null;},update:function update(tooltip,tr){if(tooltip&&tr.docChanged)tooltip=hideTooltip(tr,tooltip)?null:Object.assign(Object.assign({},tooltip),{pos:tr.changes.mapPos(tooltip.pos)});return tr.effects.reduce(function(t2,e){return e.is(setLintGutterTooltip)?e.value:t2;},tooltip);},provide:function provide(field){return showTooltip.from(field);}});var lintGutterTheme=/* @__PURE__ */_EditorView.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:/* @__PURE__ */svg("<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>")},".cm-lint-marker-warning":{content:/* @__PURE__ */svg("<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>")},".cm-lint-marker-error":{content:/* @__PURE__ */svg("<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>")}});var lintExtensions=[lintState,/* @__PURE__ */_EditorView.decorations.compute([lintState],function(state){var _state$field=state.field(lintState),selected=_state$field.selected,panel=_state$field.panel;return!selected||!panel||selected.from==selected.to?Decoration.none:Decoration.set([activeMark.range(selected.from,selected.to)]);}),/* @__PURE__ */hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme5];var lintGutterConfig=/* @__PURE__ */_Facet.define({combine:function combine(configs){return combineConfig(configs,{hoverTime:300,markerFilter:null,tooltipFilter:null});}});function _lintGutter(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return[lintGutterConfig.of(config2),lintGutterMarkers,lintGutterExtension,lintGutterTheme,lintGutterTooltip];}function _forEachDiagnostic(state,f){var lState=state.field(lintState,false);if(lState&&lState.diagnostics.size){var pending=[],pendingStart=[],lastEnd=-1;for(var iter=_RangeSet.iter([lState.diagnostics]);;iter.next()){for(var _i180=0;_i180<pending.length;_i180++)if(!iter.value||iter.value.spec.diagnostics.indexOf(pending[_i180])<0){f(pending[_i180],pendingStart[_i180],lastEnd);pending.splice(_i180,1);pendingStart.splice(_i180--,1);}if(!iter.value)break;var _iterator256=_createForOfIteratorHelper(iter.value.spec.diagnostics),_step256;try{for(_iterator256.s();!(_step256=_iterator256.n()).done;){var d=_step256.value;if(pending.indexOf(d)<0){pending.push(d);pendingStart.push(iter.from);}}}catch(err){_iterator256.e(err);}finally{_iterator256.f();}lastEnd=iter.to;}}}// ../node_modules/codemirror/dist/index.js
var basicSetup=/* @__PURE__ */function(){return[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),_foldGutter(),drawSelection(),dropCursor(),_EditorState.allowMultipleSelections.of(true),_indentOnInput(),_syntaxHighlighting(_defaultHighlightStyle,{fallback:true}),_bracketMatching(),_closeBrackets(),_autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([].concat(_closeBracketsKeymap,_toConsumableArray(defaultKeymap),searchKeymap,historyKeymap,_foldKeymap,_completionKeymap,_lintKeymap))];}();// ../node_modules/@codemirror/theme-one-dark/dist/index.js
var dist_exports4={};__export(dist_exports4,{color:function color(){return _color;},oneDark:function oneDark(){return _oneDark;},oneDarkHighlightStyle:function oneDarkHighlightStyle(){return _oneDarkHighlightStyle;},oneDarkTheme:function oneDarkTheme(){return _oneDarkTheme;}});var chalky="#e5c07b";var coral="#e06c75";var cyan="#56b6c2";var invalid="#ffffff";var ivory="#abb2bf";var stone="#7d8799";var malibu="#61afef";var sage="#98c379";var whiskey="#d19a66";var violet="#c678dd";var darkBackground="#21252b";var highlightBackground="#2c313a";var background="#282c34";var tooltipBackground="#353a42";var selection="#3E4451";var cursor="#528bff";var _color={chalky:chalky,coral:coral,cyan:cyan,invalid:invalid,ivory:ivory,stone:stone,malibu:malibu,sage:sage,whiskey:whiskey,violet:violet,darkBackground:darkBackground,highlightBackground:highlightBackground,background:background,tooltipBackground:tooltipBackground,selection:selection,cursor:cursor};var _oneDarkTheme=/* @__PURE__ */_EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:true});var _oneDarkHighlightStyle=/* @__PURE__ */_HighlightStyle2.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[/* @__PURE__ */tags["function"](tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,/* @__PURE__ */tags.constant(tags.name),/* @__PURE__ */tags.standard(tags.name)],color:whiskey},{tag:[/* @__PURE__ */tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,/* @__PURE__ */tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,/* @__PURE__ */tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]);var _oneDark=[_oneDarkTheme,/* @__PURE__ */_syntaxHighlighting(_oneDarkHighlightStyle)];// ../node_modules/@codemirror/legacy-modes/mode/mllike.js
function mlLike(parserConfig){var words={"as":"keyword","do":"keyword","else":"keyword","end":"keyword","exception":"keyword","fun":"keyword","functor":"keyword","if":"keyword","in":"keyword","include":"keyword","let":"keyword","of":"keyword","open":"keyword","rec":"keyword","struct":"keyword","then":"keyword","type":"keyword","val":"keyword","while":"keyword","with":"keyword"};var extraWords=parserConfig.extraWords||{};for(var prop in extraWords){if(extraWords.hasOwnProperty(prop)){words[prop]=parserConfig.extraWords[prop];}}var hintWords=[];for(var k in words){hintWords.push(k);}function tokenBase(stream,state){var ch=stream.next();if(ch==='"'){state.tokenize=tokenString;return state.tokenize(stream,state);}if(ch==="{"){if(stream.eat("|")){state.longString=true;state.tokenize=tokenLongString;return state.tokenize(stream,state);}}if(ch==="("){if(stream.match(/^\*(?!\))/)){state.commentLevel++;state.tokenize=tokenComment;return state.tokenize(stream,state);}}if(ch==="~"||ch==="?"){stream.eatWhile(/\w/);return"variableName.special";}if(ch==="`"){stream.eatWhile(/\w/);return"quote";}if(ch==="/"&&parserConfig.slashComments&&stream.eat("/")){stream.skipToEnd();return"comment";}if(/\d/.test(ch)){if(ch==="0"&&stream.eat(/[bB]/)){stream.eatWhile(/[01]/);}if(ch==="0"&&stream.eat(/[xX]/)){stream.eatWhile(/[0-9a-fA-F]/);}if(ch==="0"&&stream.eat(/[oO]/)){stream.eatWhile(/[0-7]/);}else{stream.eatWhile(/[\d_]/);if(stream.eat(".")){stream.eatWhile(/[\d]/);}if(stream.eat(/[eE]/)){stream.eatWhile(/[\d\-+]/);}}return"number";}if(/[+\-*&%=<>!?|@\.~:]/.test(ch)){return"operator";}if(/[\w\xa1-\uffff]/.test(ch)){stream.eatWhile(/[\w\xa1-\uffff]/);var cur2=stream.current();return words.hasOwnProperty(cur2)?words[cur2]:"variable";}return null;}function tokenString(stream,state){var next,end=false,escaped=false;while((next=stream.next())!=null){if(next==='"'&&!escaped){end=true;break;}escaped=!escaped&&next==="\\";}if(end&&!escaped){state.tokenize=tokenBase;}return"string";};function tokenComment(stream,state){var prev,next;while(state.commentLevel>0&&(next=stream.next())!=null){if(prev==="("&&next==="*")state.commentLevel++;if(prev==="*"&&next===")")state.commentLevel--;prev=next;}if(state.commentLevel<=0){state.tokenize=tokenBase;}return"comment";}function tokenLongString(stream,state){var prev,next;while(state.longString&&(next=stream.next())!=null){if(prev==="|"&&next==="}")state.longString=false;prev=next;}if(!state.longString){state.tokenize=tokenBase;}return"string";}return{startState:function startState(){return{tokenize:tokenBase,commentLevel:0,longString:false};},token:function token(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state);},languageData:{autocomplete:hintWords,commentTokens:{line:parserConfig.slashComments?"//":void 0,block:{open:"(*",close:"*)"}}}};}var oCaml=mlLike({name:"ocaml",extraWords:{"and":"keyword","assert":"keyword","begin":"keyword","class":"keyword","constraint":"keyword","done":"keyword","downto":"keyword","external":"keyword","function":"keyword","initializer":"keyword","lazy":"keyword","match":"keyword","method":"keyword","module":"keyword","mutable":"keyword","new":"keyword","nonrec":"keyword","object":"keyword","private":"keyword","sig":"keyword","to":"keyword","try":"keyword","value":"keyword","virtual":"keyword","when":"keyword","raise":"builtin","failwith":"builtin","true":"builtin","false":"builtin","asr":"builtin","land":"builtin","lor":"builtin","lsl":"builtin","lsr":"builtin","lxor":"builtin","mod":"builtin","or":"builtin","raise_notrace":"builtin","trace":"builtin","exit":"builtin","print_string":"builtin","print_endline":"builtin","int":"type","float":"type","bool":"type","char":"type","string":"type","unit":"type","List":"builtin"}});var fSharp=mlLike({name:"fsharp",extraWords:{"abstract":"keyword","assert":"keyword","base":"keyword","begin":"keyword","class":"keyword","default":"keyword","delegate":"keyword","do!":"keyword","done":"keyword","downcast":"keyword","downto":"keyword","elif":"keyword","extern":"keyword","finally":"keyword","for":"keyword","function":"keyword","global":"keyword","inherit":"keyword","inline":"keyword","interface":"keyword","internal":"keyword","lazy":"keyword","let!":"keyword","match":"keyword","member":"keyword","module":"keyword","mutable":"keyword","namespace":"keyword","new":"keyword","null":"keyword","override":"keyword","private":"keyword","public":"keyword","return!":"keyword","return":"keyword","select":"keyword","static":"keyword","to":"keyword","try":"keyword","upcast":"keyword","use!":"keyword","use":"keyword","void":"keyword","when":"keyword","yield!":"keyword","yield":"keyword","atomic":"keyword","break":"keyword","checked":"keyword","component":"keyword","const":"keyword","constraint":"keyword","constructor":"keyword","continue":"keyword","eager":"keyword","event":"keyword","external":"keyword","fixed":"keyword","method":"keyword","mixin":"keyword","object":"keyword","parallel":"keyword","process":"keyword","protected":"keyword","pure":"keyword","sealed":"keyword","tailcall":"keyword","trait":"keyword","virtual":"keyword","volatile":"keyword","List":"builtin","Seq":"builtin","Map":"builtin","Set":"builtin","Option":"builtin","int":"builtin","string":"builtin","not":"builtin","true":"builtin","false":"builtin","raise":"builtin","failwith":"builtin"},slashComments:true});var sml=mlLike({name:"sml",extraWords:{"abstype":"keyword","and":"keyword","andalso":"keyword","case":"keyword","datatype":"keyword","fn":"keyword","handle":"keyword","infix":"keyword","infixr":"keyword","local":"keyword","nonfix":"keyword","op":"keyword","orelse":"keyword","raise":"keyword","withtype":"keyword","eqtype":"keyword","sharing":"keyword","sig":"keyword","signature":"keyword","structure":"keyword","where":"keyword","true":"keyword","false":"keyword","int":"builtin","real":"builtin","string":"builtin","char":"builtin","bool":"builtin"},slashComments:true});// ../node_modules/@lezer/markdown/dist/index.js
var _CompositeBlock=/*#__PURE__*/function(){function CompositeBlock(type,value,from,hash2,end,children,positions){_classCallCheck(this,CompositeBlock);this.type=type;this.value=value;this.from=from;this.hash=hash2;this.end=end;this.children=children;this.positions=positions;this.hashProp=[[NodeProp.contextHash,hash2]];}return _createClass(CompositeBlock,[{key:"addChild",value:function addChild(child,pos){if(child.prop(NodeProp.contextHash)!=this.hash)child=new _Tree(child.type,child.children,child.positions,child.length,this.hashProp);this.children.push(child);this.positions.push(pos);}},{key:"toTree",value:function toTree(nodeSet2){var _this103=this;var end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.end;var last=this.children.length-1;if(last>=0)end=Math.max(end,this.positions[last]+this.children[last].length+this.from);return new _Tree(nodeSet2.types[this.type],this.children,this.positions,end-this.from).balance({makeTree:function makeTree(children,positions,length){return new _Tree(_NodeType.none,children,positions,length,_this103.hashProp);}});}}],[{key:"create",value:function create(type,value,from,parentHash,end){var hash2=parentHash+(parentHash<<8)+type+(value<<4)|0;return new _CompositeBlock(type,value,from,hash2,end,[],[]);}}]);}();var Type;(function(Type2){Type2[Type2["Document"]=1]="Document";Type2[Type2["CodeBlock"]=2]="CodeBlock";Type2[Type2["FencedCode"]=3]="FencedCode";Type2[Type2["Blockquote"]=4]="Blockquote";Type2[Type2["HorizontalRule"]=5]="HorizontalRule";Type2[Type2["BulletList"]=6]="BulletList";Type2[Type2["OrderedList"]=7]="OrderedList";Type2[Type2["ListItem"]=8]="ListItem";Type2[Type2["ATXHeading1"]=9]="ATXHeading1";Type2[Type2["ATXHeading2"]=10]="ATXHeading2";Type2[Type2["ATXHeading3"]=11]="ATXHeading3";Type2[Type2["ATXHeading4"]=12]="ATXHeading4";Type2[Type2["ATXHeading5"]=13]="ATXHeading5";Type2[Type2["ATXHeading6"]=14]="ATXHeading6";Type2[Type2["SetextHeading1"]=15]="SetextHeading1";Type2[Type2["SetextHeading2"]=16]="SetextHeading2";Type2[Type2["HTMLBlock"]=17]="HTMLBlock";Type2[Type2["LinkReference"]=18]="LinkReference";Type2[Type2["Paragraph"]=19]="Paragraph";Type2[Type2["CommentBlock"]=20]="CommentBlock";Type2[Type2["ProcessingInstructionBlock"]=21]="ProcessingInstructionBlock";Type2[Type2["Escape"]=22]="Escape";Type2[Type2["Entity"]=23]="Entity";Type2[Type2["HardBreak"]=24]="HardBreak";Type2[Type2["Emphasis"]=25]="Emphasis";Type2[Type2["StrongEmphasis"]=26]="StrongEmphasis";Type2[Type2["Link"]=27]="Link";Type2[Type2["Image"]=28]="Image";Type2[Type2["InlineCode"]=29]="InlineCode";Type2[Type2["HTMLTag"]=30]="HTMLTag";Type2[Type2["Comment"]=31]="Comment";Type2[Type2["ProcessingInstruction"]=32]="ProcessingInstruction";Type2[Type2["Autolink"]=33]="Autolink";Type2[Type2["HeaderMark"]=34]="HeaderMark";Type2[Type2["QuoteMark"]=35]="QuoteMark";Type2[Type2["ListMark"]=36]="ListMark";Type2[Type2["LinkMark"]=37]="LinkMark";Type2[Type2["EmphasisMark"]=38]="EmphasisMark";Type2[Type2["CodeMark"]=39]="CodeMark";Type2[Type2["CodeText"]=40]="CodeText";Type2[Type2["CodeInfo"]=41]="CodeInfo";Type2[Type2["LinkTitle"]=42]="LinkTitle";Type2[Type2["LinkLabel"]=43]="LinkLabel";Type2[Type2["URL"]=44]="URL";})(Type||(Type={}));var LeafBlock=/*#__PURE__*/_createClass(function LeafBlock(start,content2){_classCallCheck(this,LeafBlock);this.start=start;this.content=content2;this.marks=[];this.parsers=[];});var Line2=/*#__PURE__*/function(){function Line2(){_classCallCheck(this,Line2);this.text="";this.baseIndent=0;this.basePos=0;this.depth=0;this.markers=[];this.pos=0;this.indent=0;this.next=-1;}return _createClass(Line2,[{key:"forward",value:function forward(){if(this.basePos>this.pos)this.forwardInner();}},{key:"forwardInner",value:function forwardInner(){var newPos=this.skipSpace(this.basePos);this.indent=this.countIndent(newPos,this.pos,this.indent);this.pos=newPos;this.next=newPos==this.text.length?-1:this.text.charCodeAt(newPos);}},{key:"skipSpace",value:function skipSpace(from){return _skipSpace(this.text,from);}},{key:"reset",value:function reset(text){this.text=text;this.baseIndent=this.basePos=this.pos=this.indent=0;this.forwardInner();this.depth=1;while(this.markers.length)this.markers.pop();}},{key:"moveBase",value:function moveBase(to){this.basePos=to;this.baseIndent=this.countIndent(to,this.pos,this.indent);}},{key:"moveBaseColumn",value:function moveBaseColumn(indent){this.baseIndent=indent;this.basePos=this.findColumn(indent);}},{key:"addMarker",value:function addMarker(elt2){this.markers.push(elt2);}},{key:"countIndent",value:function countIndent(to){var from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var indent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;for(var _i181=from;_i181<to;_i181++)indent+=this.text.charCodeAt(_i181)==9?4-indent%4:1;return indent;}},{key:"findColumn",value:function findColumn(goal){var i=0;for(var indent=0;i<this.text.length&&indent<goal;i++)indent+=this.text.charCodeAt(i)==9?4-indent%4:1;return i;}},{key:"scrub",value:function scrub(){if(!this.baseIndent)return this.text;var result="";for(var _i182=0;_i182<this.basePos;_i182++)result+=" ";return result+this.text.slice(this.basePos);}}]);}();function skipForList(bl,cx,line){if(line.pos==line.text.length||bl!=cx.block&&line.indent>=cx.stack[line.depth+1].value+line.baseIndent)return true;if(line.indent>=line.baseIndent+4)return false;var size=(bl.type==Type.OrderedList?isOrderedList:isBulletList)(line,cx,false);return size>0&&(bl.type!=Type.BulletList||isHorizontalRule(line,cx,false)<0)&&line.text.charCodeAt(line.pos+size-1)==bl.value;}var DefaultSkipMarkup=_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},Type.Blockquote,function(bl,cx,line){if(line.next!=62)return false;line.markers.push(_elt(Type.QuoteMark,cx.lineStart+line.pos,cx.lineStart+line.pos+1));line.moveBase(line.pos+(space(line.text.charCodeAt(line.pos+1))?2:1));bl.end=cx.lineStart+line.text.length;return true;}),Type.ListItem,function(bl,_cx,line){if(line.indent<line.baseIndent+bl.value&&line.next>-1)return false;line.moveBaseColumn(line.baseIndent+bl.value);return true;}),Type.OrderedList,skipForList),Type.BulletList,skipForList),Type.Document,function(){return true;});function space(ch){return ch==32||ch==9||ch==10||ch==13;}function _skipSpace(line){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;while(i<line.length&&space(line.charCodeAt(i)))i++;return i;}function skipSpaceBack(line,i,to){while(i>to&&space(line.charCodeAt(i-1)))i--;return i;}function isFencedCode(line){if(line.next!=96&&line.next!=126)return-1;var pos=line.pos+1;while(pos<line.text.length&&line.text.charCodeAt(pos)==line.next)pos++;if(pos<line.pos+3)return-1;if(line.next==96){for(var _i183=pos;_i183<line.text.length;_i183++)if(line.text.charCodeAt(_i183)==96)return-1;}return pos;}function isBlockquote(line){return line.next!=62?-1:line.text.charCodeAt(line.pos+1)==32?2:1;}function isHorizontalRule(line,cx,breaking){if(line.next!=42&&line.next!=45&&line.next!=95)return-1;var count2=1;for(var pos=line.pos+1;pos<line.text.length;pos++){var ch=line.text.charCodeAt(pos);if(ch==line.next)count2++;else if(!space(ch))return-1;}if(breaking&&line.next==45&&isSetextUnderline(line)>-1&&line.depth==cx.stack.length&&cx.parser.leafBlockParsers.indexOf(DefaultLeafBlocks.SetextHeading)>-1)return-1;return count2<3?-1:1;}function inList(cx,type){for(var _i184=cx.stack.length-1;_i184>=0;_i184--)if(cx.stack[_i184].type==type)return true;return false;}function isBulletList(line,cx,breaking){return(line.next==45||line.next==43||line.next==42)&&(line.pos==line.text.length-1||space(line.text.charCodeAt(line.pos+1)))&&(!breaking||inList(cx,Type.BulletList)||line.skipSpace(line.pos+2)<line.text.length)?1:-1;}function isOrderedList(line,cx,breaking){var pos=line.pos,next=line.next;for(;;){if(next>=48&&next<=57)pos++;else break;if(pos==line.text.length)return-1;next=line.text.charCodeAt(pos);}if(pos==line.pos||pos>line.pos+9||next!=46&&next!=41||pos<line.text.length-1&&!space(line.text.charCodeAt(pos+1))||breaking&&!inList(cx,Type.OrderedList)&&(line.skipSpace(pos+1)==line.text.length||pos>line.pos+1||line.next!=49))return-1;return pos+1-line.pos;}function isAtxHeading(line){if(line.next!=35)return-1;var pos=line.pos+1;while(pos<line.text.length&&line.text.charCodeAt(pos)==35)pos++;if(pos<line.text.length&&line.text.charCodeAt(pos)!=32)return-1;var size=pos-line.pos;return size>6?-1:size;}function isSetextUnderline(line){if(line.next!=45&&line.next!=61||line.indent>=line.baseIndent+4)return-1;var pos=line.pos+1;while(pos<line.text.length&&line.text.charCodeAt(pos)==line.next)pos++;var end=pos;while(pos<line.text.length&&space(line.text.charCodeAt(pos)))pos++;return pos==line.text.length?end:-1;}var EmptyLine=/^[ \t]*$/;var CommentEnd=/-->/;var ProcessingEnd=/\?>/;var HTMLBlockStyle=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,CommentEnd],[/^\s*<\?/,ProcessingEnd],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,EmptyLine],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,EmptyLine]];function isHTMLBlock(line,_cx,breaking){if(line.next!=60)return-1;var rest=line.text.slice(line.pos);for(var _i185=0,e=HTMLBlockStyle.length-(breaking?1:0);_i185<e;_i185++)if(HTMLBlockStyle[_i185][0].test(rest))return _i185;return-1;}function getListIndent(line,pos){var indentAfter=line.countIndent(pos,line.pos,line.indent);var indented=line.countIndent(line.skipSpace(pos),pos,indentAfter);return indented>=indentAfter+5?indentAfter+1:indented;}function addCodeText(marks2,from,to){var last=marks2.length-1;if(last>=0&&marks2[last].to==from&&marks2[last].type==Type.CodeText)marks2[last].to=to;else marks2.push(_elt(Type.CodeText,from,to));}var DefaultBlockParsers={LinkReference:void 0,IndentedCode:function IndentedCode(cx,line){var base2=line.baseIndent+4;if(line.indent<base2)return false;var start=line.findColumn(base2);var from=cx.lineStart+start,to=cx.lineStart+line.text.length;var marks2=[],pendingMarks=[];addCodeText(marks2,from,to);while(cx.nextLine()&&line.depth>=cx.stack.length){if(line.pos==line.text.length){addCodeText(pendingMarks,cx.lineStart-1,cx.lineStart);var _iterator257=_createForOfIteratorHelper(line.markers),_step257;try{for(_iterator257.s();!(_step257=_iterator257.n()).done;){var m=_step257.value;pendingMarks.push(m);}}catch(err){_iterator257.e(err);}finally{_iterator257.f();}}else if(line.indent<base2){break;}else{if(pendingMarks.length){var _iterator258=_createForOfIteratorHelper(pendingMarks),_step258;try{for(_iterator258.s();!(_step258=_iterator258.n()).done;){var _m=_step258.value;if(_m.type==Type.CodeText)addCodeText(marks2,_m.from,_m.to);else marks2.push(_m);}}catch(err){_iterator258.e(err);}finally{_iterator258.f();}pendingMarks=[];}addCodeText(marks2,cx.lineStart-1,cx.lineStart);var _iterator259=_createForOfIteratorHelper(line.markers),_step259;try{for(_iterator259.s();!(_step259=_iterator259.n()).done;){var _m2=_step259.value;marks2.push(_m2);}}catch(err){_iterator259.e(err);}finally{_iterator259.f();}to=cx.lineStart+line.text.length;var codeStart=cx.lineStart+line.findColumn(line.baseIndent+4);if(codeStart<to)addCodeText(marks2,codeStart,to);}}if(pendingMarks.length){pendingMarks=pendingMarks.filter(function(m){return m.type!=Type.CodeText;});if(pendingMarks.length)line.markers=pendingMarks.concat(line.markers);}cx.addNode(cx.buffer.writeElements(marks2,-from).finish(Type.CodeBlock,to-from),from);return true;},FencedCode:function FencedCode(cx,line){var fenceEnd=isFencedCode(line);if(fenceEnd<0)return false;var from=cx.lineStart+line.pos,ch=line.next,len=fenceEnd-line.pos;var infoFrom=line.skipSpace(fenceEnd),infoTo=skipSpaceBack(line.text,line.text.length,infoFrom);var marks2=[_elt(Type.CodeMark,from,from+len)];if(infoFrom<infoTo)marks2.push(_elt(Type.CodeInfo,cx.lineStart+infoFrom,cx.lineStart+infoTo));for(var first=true;cx.nextLine()&&line.depth>=cx.stack.length;first=false){var _i186=line.pos;if(line.indent-line.baseIndent<4)while(_i186<line.text.length&&line.text.charCodeAt(_i186)==ch)_i186++;if(_i186-line.pos>=len&&line.skipSpace(_i186)==line.text.length){var _iterator260=_createForOfIteratorHelper(line.markers),_step260;try{for(_iterator260.s();!(_step260=_iterator260.n()).done;){var m=_step260.value;marks2.push(m);}}catch(err){_iterator260.e(err);}finally{_iterator260.f();}marks2.push(_elt(Type.CodeMark,cx.lineStart+line.pos,cx.lineStart+_i186));cx.nextLine();break;}else{if(!first)addCodeText(marks2,cx.lineStart-1,cx.lineStart);var _iterator261=_createForOfIteratorHelper(line.markers),_step261;try{for(_iterator261.s();!(_step261=_iterator261.n()).done;){var _m3=_step261.value;marks2.push(_m3);}}catch(err){_iterator261.e(err);}finally{_iterator261.f();}var textStart=cx.lineStart+line.basePos,textEnd=cx.lineStart+line.text.length;if(textStart<textEnd)addCodeText(marks2,textStart,textEnd);}}cx.addNode(cx.buffer.writeElements(marks2,-from).finish(Type.FencedCode,cx.prevLineEnd()-from),from);return true;},Blockquote:function Blockquote(cx,line){var size=isBlockquote(line);if(size<0)return false;cx.startContext(Type.Blockquote,line.pos);cx.addNode(Type.QuoteMark,cx.lineStart+line.pos,cx.lineStart+line.pos+1);line.moveBase(line.pos+size);return null;},HorizontalRule:function HorizontalRule(cx,line){if(isHorizontalRule(line,cx,false)<0)return false;var from=cx.lineStart+line.pos;cx.nextLine();cx.addNode(Type.HorizontalRule,from);return true;},BulletList:function BulletList(cx,line){var size=isBulletList(line,cx,false);if(size<0)return false;if(cx.block.type!=Type.BulletList)cx.startContext(Type.BulletList,line.basePos,line.next);var newBase=getListIndent(line,line.pos+1);cx.startContext(Type.ListItem,line.basePos,newBase-line.baseIndent);cx.addNode(Type.ListMark,cx.lineStart+line.pos,cx.lineStart+line.pos+size);line.moveBaseColumn(newBase);return null;},OrderedList:function OrderedList(cx,line){var size=isOrderedList(line,cx,false);if(size<0)return false;if(cx.block.type!=Type.OrderedList)cx.startContext(Type.OrderedList,line.basePos,line.text.charCodeAt(line.pos+size-1));var newBase=getListIndent(line,line.pos+size);cx.startContext(Type.ListItem,line.basePos,newBase-line.baseIndent);cx.addNode(Type.ListMark,cx.lineStart+line.pos,cx.lineStart+line.pos+size);line.moveBaseColumn(newBase);return null;},ATXHeading:function ATXHeading(cx,line){var size=isAtxHeading(line);if(size<0)return false;var off=line.pos,from=cx.lineStart+off;var endOfSpace=skipSpaceBack(line.text,line.text.length,off),after=endOfSpace;while(after>off&&line.text.charCodeAt(after-1)==line.next)after--;if(after==endOfSpace||after==off||!space(line.text.charCodeAt(after-1)))after=line.text.length;var buf=cx.buffer.write(Type.HeaderMark,0,size).writeElements(cx.parser.parseInline(line.text.slice(off+size+1,after),from+size+1),-from);if(after<line.text.length)buf.write(Type.HeaderMark,after-off,endOfSpace-off);var node=buf.finish(Type.ATXHeading1-1+size,line.text.length-off);cx.nextLine();cx.addNode(node,from);return true;},HTMLBlock:function HTMLBlock(cx,line){var type=isHTMLBlock(line,cx,false);if(type<0)return false;var from=cx.lineStart+line.pos,end=HTMLBlockStyle[type][1];var marks2=[],trailing=end!=EmptyLine;while(!end.test(line.text)&&cx.nextLine()){if(line.depth<cx.stack.length){trailing=false;break;}var _iterator262=_createForOfIteratorHelper(line.markers),_step262;try{for(_iterator262.s();!(_step262=_iterator262.n()).done;){var m=_step262.value;marks2.push(m);}}catch(err){_iterator262.e(err);}finally{_iterator262.f();}}if(trailing)cx.nextLine();var nodeType=end==CommentEnd?Type.CommentBlock:end==ProcessingEnd?Type.ProcessingInstructionBlock:Type.HTMLBlock;var to=cx.prevLineEnd();cx.addNode(cx.buffer.writeElements(marks2,-from).finish(nodeType,to-from),from);return true;},SetextHeading:void 0};var LinkReferenceParser=/*#__PURE__*/function(){function LinkReferenceParser(leaf){_classCallCheck(this,LinkReferenceParser);this.stage=0;this.elts=[];this.pos=0;this.start=leaf.start;this.advance(leaf.content);}return _createClass(LinkReferenceParser,[{key:"nextLine",value:function nextLine(cx,line,leaf){if(this.stage==-1)return false;var content2=leaf.content+"\n"+line.scrub();var finish=this.advance(content2);if(finish>-1&&finish<content2.length)return this.complete(cx,leaf,finish);return false;}},{key:"finish",value:function finish(cx,leaf){if((this.stage==2||this.stage==3)&&_skipSpace(leaf.content,this.pos)==leaf.content.length)return this.complete(cx,leaf,leaf.content.length);return false;}},{key:"complete",value:function complete(cx,leaf,len){cx.addLeafElement(leaf,_elt(Type.LinkReference,this.start,this.start+len,this.elts));return true;}},{key:"nextStage",value:function nextStage(elt2){if(elt2){this.pos=elt2.to-this.start;this.elts.push(elt2);this.stage++;return true;}if(elt2===false)this.stage=-1;return false;}},{key:"advance",value:function advance(content2){for(;;){if(this.stage==-1){return-1;}else if(this.stage==0){if(!this.nextStage(parseLinkLabel(content2,this.pos,this.start,true)))return-1;if(content2.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(_elt(Type.LinkMark,this.pos+this.start,this.pos+this.start+1));this.pos++;}else if(this.stage==1){if(!this.nextStage(parseURL(content2,_skipSpace(content2,this.pos),this.start)))return-1;}else if(this.stage==2){var skip=_skipSpace(content2,this.pos),end=0;if(skip>this.pos){var title=parseLinkTitle(content2,skip,this.start);if(title){var titleEnd=lineEnd(content2,title.to-this.start);if(titleEnd>0){this.nextStage(title);end=titleEnd;}}}if(!end)end=lineEnd(content2,this.pos);return end>0&&end<content2.length?end:-1;}else{return lineEnd(content2,this.pos);}}}}]);}();function lineEnd(text,pos){for(;pos<text.length;pos++){var next=text.charCodeAt(pos);if(next==10)break;if(!space(next))return-1;}return pos;}var SetextHeadingParser=/*#__PURE__*/function(){function SetextHeadingParser(){_classCallCheck(this,SetextHeadingParser);}return _createClass(SetextHeadingParser,[{key:"nextLine",value:function nextLine(cx,line,leaf){var underline2=line.depth<cx.stack.length?-1:isSetextUnderline(line);var next=line.next;if(underline2<0)return false;var underlineMark=_elt(Type.HeaderMark,cx.lineStart+line.pos,cx.lineStart+underline2);cx.nextLine();cx.addLeafElement(leaf,_elt(next==61?Type.SetextHeading1:Type.SetextHeading2,leaf.start,cx.prevLineEnd(),[].concat(_toConsumableArray(cx.parser.parseInline(leaf.content,leaf.start)),[underlineMark])));return true;}},{key:"finish",value:function finish(){return false;}}]);}();var DefaultLeafBlocks={LinkReference:function LinkReference(_,leaf){return leaf.content.charCodeAt(0)==91?new LinkReferenceParser(leaf):null;},SetextHeading:function SetextHeading(){return new SetextHeadingParser();}};var DefaultEndLeaf=[function(_,line){return isAtxHeading(line)>=0;},function(_,line){return isFencedCode(line)>=0;},function(_,line){return isBlockquote(line)>=0;},function(p,line){return isBulletList(line,p,true)>=0;},function(p,line){return isOrderedList(line,p,true)>=0;},function(p,line){return isHorizontalRule(line,p,true)>=0;},function(p,line){return isHTMLBlock(line,p,true)>=0;}];var scanLineResult={text:"",end:0};var BlockContext=/*#__PURE__*/function(){function BlockContext(parser5,input,fragments,ranges){_classCallCheck(this,BlockContext);this.parser=parser5;this.input=input;this.ranges=ranges;this.line=new Line2();this.atEnd=false;this.reusePlaceholders=/* @__PURE__ */new Map();this.stoppedAt=null;this.rangeI=0;this.to=ranges[ranges.length-1].to;this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=ranges[0].from;this.block=_CompositeBlock.create(Type.Document,0,this.lineStart,0,0);this.stack=[this.block];this.fragments=fragments.length?new FragmentCursor2(fragments,input):null;this.readLine();}return _createClass(BlockContext,[{key:"parsedPos",get:function get(){return this.absoluteLineStart;}},{key:"advance",value:function advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();var line=this.line;for(;;){for(var markI=0;;){var next=line.depth<this.stack.length?this.stack[this.stack.length-1]:null;while(markI<line.markers.length&&(!next||line.markers[markI].from<next.end)){var mark=line.markers[markI++];this.addNode(mark.type,mark.from,mark.to);}if(!next)break;this.finishContext();}if(line.pos<line.text.length)break;if(!this.nextLine())return this.finish();}if(this.fragments&&this.reuseFragment(line.basePos))return null;start:for(;;){var _iterator263=_createForOfIteratorHelper(this.parser.blockParsers),_step263;try{for(_iterator263.s();!(_step263=_iterator263.n()).done;){var type=_step263.value;if(type){var result=type(this,line);if(result!=false){if(result==true)return null;line.forward();continue start;}}}}catch(err){_iterator263.e(err);}finally{_iterator263.f();}break;}var leaf=new LeafBlock(this.lineStart+line.pos,line.text.slice(line.pos));var _iterator264=_createForOfIteratorHelper(this.parser.leafBlockParsers),_step264;try{for(_iterator264.s();!(_step264=_iterator264.n()).done;){var parse=_step264.value;if(parse){var _parser=parse(this,leaf);if(_parser)leaf.parsers.push(_parser);}}}catch(err){_iterator264.e(err);}finally{_iterator264.f();}lines:while(this.nextLine()){if(line.pos==line.text.length)break;if(line.indent<line.baseIndent+4){var _iterator265=_createForOfIteratorHelper(this.parser.endLeafBlock),_step265;try{for(_iterator265.s();!(_step265=_iterator265.n()).done;){var stop=_step265.value;if(stop(this,line,leaf))break lines;}}catch(err){_iterator265.e(err);}finally{_iterator265.f();}}var _iterator266=_createForOfIteratorHelper(leaf.parsers),_step266;try{for(_iterator266.s();!(_step266=_iterator266.n()).done;){var parser5=_step266.value;if(parser5.nextLine(this,line,leaf))return null;}}catch(err){_iterator266.e(err);}finally{_iterator266.f();}leaf.content+="\n"+line.scrub();var _iterator267=_createForOfIteratorHelper(line.markers),_step267;try{for(_iterator267.s();!(_step267=_iterator267.n()).done;){var m=_step267.value;leaf.marks.push(m);}}catch(err){_iterator267.e(err);}finally{_iterator267.f();}}this.finishLeaf(leaf);return null;}},{key:"stopAt",value:function stopAt(pos){if(this.stoppedAt!=null&&this.stoppedAt<pos)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=pos;}},{key:"reuseFragment",value:function reuseFragment(start){if(!this.fragments.moveTo(this.absoluteLineStart+start,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return false;var taken=this.fragments.takeNodes(this);if(!taken)return false;this.absoluteLineStart+=taken;this.lineStart=toRelative(this.absoluteLineStart,this.ranges);this.moveRangeI();if(this.absoluteLineStart<this.to){this.lineStart++;this.absoluteLineStart++;this.readLine();}else{this.atEnd=true;this.readLine();}return true;}},{key:"depth",get:function get(){return this.stack.length;}},{key:"parentType",value:function parentType(){var depth=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.depth-1;return this.parser.nodeSet.types[this.stack[depth].type];}},{key:"nextLine",value:function nextLine(){this.lineStart+=this.line.text.length;if(this.absoluteLineEnd>=this.to){this.absoluteLineStart=this.absoluteLineEnd;this.atEnd=true;this.readLine();return false;}else{this.lineStart++;this.absoluteLineStart=this.absoluteLineEnd+1;this.moveRangeI();this.readLine();return true;}}},{key:"peekLine",value:function peekLine(){return this.scanLine(this.absoluteLineEnd+1).text;}},{key:"moveRangeI",value:function moveRangeI(){while(this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to){this.rangeI++;this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from);}}},{key:"scanLine",value:function scanLine(start){var r=scanLineResult;r.end=start;if(start>=this.to){r.text="";}else{r.text=this.lineChunkAt(start);r.end+=r.text.length;if(this.ranges.length>1){var textOffset=this.absoluteLineStart,rangeI=this.rangeI;while(this.ranges[rangeI].to<r.end){rangeI++;var nextFrom=this.ranges[rangeI].from;var after=this.lineChunkAt(nextFrom);r.end=nextFrom+after.length;r.text=r.text.slice(0,this.ranges[rangeI-1].to-textOffset)+after;textOffset=r.end-r.text.length;}}}return r;}},{key:"readLine",value:function readLine(){var line=this.line,_this$scanLine=this.scanLine(this.absoluteLineStart),text=_this$scanLine.text,end=_this$scanLine.end;this.absoluteLineEnd=end;line.reset(text);for(;line.depth<this.stack.length;line.depth++){var cx=this.stack[line.depth],handler=this.parser.skipContextMarkup[cx.type];if(!handler)throw new Error("Unhandled block context "+Type[cx.type]);if(!handler(cx,this,line))break;line.forward();}}},{key:"lineChunkAt",value:function lineChunkAt(pos){var next=this.input.chunk(pos),text;if(!this.input.lineChunks){var eol=next.indexOf("\n");text=eol<0?next:next.slice(0,eol);}else{text=next=="\n"?"":next;}return pos+text.length>this.to?text.slice(0,this.to-pos):text;}},{key:"prevLineEnd",value:function prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1;}},{key:"startContext",value:function startContext(type,start){var value=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.block=_CompositeBlock.create(type,value,this.lineStart+start,this.block.hash,this.lineStart+this.line.text.length);this.stack.push(this.block);}},{key:"startComposite",value:function startComposite(type,start){var value=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.startContext(this.parser.getNodeType(type),start,value);}},{key:"addNode",value:function addNode(block,from,to){if(typeof block=="number")block=new _Tree(this.parser.nodeSet.types[block],none4,none4,(to!==null&&to!==void 0?to:this.prevLineEnd())-from);this.block.addChild(block,from-this.block.from);}},{key:"addElement",value:function addElement(elt2){this.block.addChild(elt2.toTree(this.parser.nodeSet),elt2.from-this.block.from);}},{key:"addLeafElement",value:function addLeafElement(leaf,elt2){this.addNode(this.buffer.writeElements(injectMarks(elt2.children,leaf.marks),-elt2.from).finish(elt2.type,elt2.to-elt2.from),elt2.from);}},{key:"finishContext",value:function finishContext(){var cx=this.stack.pop();var top2=this.stack[this.stack.length-1];top2.addChild(cx.toTree(this.parser.nodeSet),cx.from-top2.from);this.block=top2;}},{key:"finish",value:function finish(){while(this.stack.length>1)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart));}},{key:"addGaps",value:function addGaps(tree){return this.ranges.length>1?injectGaps(this.ranges,0,tree.topNode,this.ranges[0].from,this.reusePlaceholders):tree;}},{key:"finishLeaf",value:function finishLeaf(leaf){var _iterator268=_createForOfIteratorHelper(leaf.parsers),_step268;try{for(_iterator268.s();!(_step268=_iterator268.n()).done;){var parser5=_step268.value;if(parser5.finish(this,leaf))return;}}catch(err){_iterator268.e(err);}finally{_iterator268.f();}var inline=injectMarks(this.parser.parseInline(leaf.content,leaf.start),leaf.marks);this.addNode(this.buffer.writeElements(inline,-leaf.start).finish(Type.Paragraph,leaf.content.length),leaf.start);}},{key:"elt",value:function elt(type,from,to,children){if(typeof type=="string")return _elt(this.parser.getNodeType(type),from,to,children);return new TreeElement(type,from);}},{key:"buffer",get:function get(){return new Buffer2(this.parser.nodeSet);}}]);}();function injectGaps(ranges,rangeI,tree,offset,dummies){var rangeEnd2=ranges[rangeI].to;var children=[],positions=[],start=tree.from+offset;function movePastNext(upto,inclusive){while(inclusive?upto>=rangeEnd2:upto>rangeEnd2){var size=ranges[rangeI+1].from-rangeEnd2;offset+=size;upto+=size;rangeI++;rangeEnd2=ranges[rangeI].to;}}for(var ch=tree.firstChild;ch;ch=ch.nextSibling){movePastNext(ch.from+offset,true);var from=ch.from+offset,node=void 0,reuse=dummies.get(ch.tree);if(reuse){node=reuse;}else if(ch.to+offset>rangeEnd2){node=injectGaps(ranges,rangeI,ch,offset,dummies);movePastNext(ch.to+offset,false);}else{node=ch.toTree();}children.push(node);positions.push(from-start);}movePastNext(tree.to+offset,false);return new _Tree(tree.type,children,positions,tree.to+offset-start,tree.tree?tree.tree.propValues:void 0);}var _MarkdownParser=/*#__PURE__*/function(_Parser3){function MarkdownParser(nodeSet2,blockParsers,leafBlockParsers,blockNames,endLeafBlock,skipContextMarkup,inlineParsers,inlineNames,wrappers){var _this104;_classCallCheck(this,MarkdownParser);_this104=_callSuper(this,MarkdownParser);_this104.nodeSet=nodeSet2;_this104.blockParsers=blockParsers;_this104.leafBlockParsers=leafBlockParsers;_this104.blockNames=blockNames;_this104.endLeafBlock=endLeafBlock;_this104.skipContextMarkup=skipContextMarkup;_this104.inlineParsers=inlineParsers;_this104.inlineNames=inlineNames;_this104.wrappers=wrappers;_this104.nodeTypes=/* @__PURE__ */Object.create(null);var _iterator269=_createForOfIteratorHelper(nodeSet2.types),_step269;try{for(_iterator269.s();!(_step269=_iterator269.n()).done;){var t2=_step269.value;_this104.nodeTypes[t2.name]=t2.id;}}catch(err){_iterator269.e(err);}finally{_iterator269.f();}return _this104;}_inherits(MarkdownParser,_Parser3);return _createClass(MarkdownParser,[{key:"createParse",value:function createParse(input,fragments,ranges){var parse=new BlockContext(this,input,fragments,ranges);var _iterator270=_createForOfIteratorHelper(this.wrappers),_step270;try{for(_iterator270.s();!(_step270=_iterator270.n()).done;){var w=_step270.value;parse=w(parse,input,fragments,ranges);}}catch(err){_iterator270.e(err);}finally{_iterator270.f();}return parse;}},{key:"configure",value:function configure(spec){var _nodeSet;var config2=resolveConfig(spec);if(!config2)return this;var nodeSet2=this.nodeSet,skipContextMarkup=this.skipContextMarkup;var blockParsers=this.blockParsers.slice(),leafBlockParsers=this.leafBlockParsers.slice(),blockNames=this.blockNames.slice(),inlineParsers=this.inlineParsers.slice(),inlineNames=this.inlineNames.slice(),endLeafBlock=this.endLeafBlock.slice(),wrappers=this.wrappers;if(nonEmpty(config2.defineNodes)){skipContextMarkup=Object.assign({},skipContextMarkup);var nodeTypes2=nodeSet2.types.slice(),styles;var _iterator271=_createForOfIteratorHelper(config2.defineNodes),_step271;try{var _loop20=function _loop20(){var s=_step271.value;var _ref61=typeof s=="string"?{name:s}:s,name2=_ref61.name,block=_ref61.block,composite=_ref61.composite,style=_ref61.style;if(nodeTypes2.some(function(t2){return t2.name==name2;}))return 1;// continue
if(composite)skipContextMarkup[nodeTypes2.length]=function(bl,cx,line){return composite(cx,line,bl.value);};var id2=nodeTypes2.length;var group=composite?["Block","BlockContext"]:!block?void 0:id2>=Type.ATXHeading1&&id2<=Type.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"];nodeTypes2.push(_NodeType.define({id:id2,name:name2,props:group&&[[NodeProp.group,group]]}));if(style){if(!styles)styles={};if(Array.isArray(style)||style instanceof _Tag)styles[name2]=style;else Object.assign(styles,style);}};for(_iterator271.s();!(_step271=_iterator271.n()).done;){if(_loop20())continue;}}catch(err){_iterator271.e(err);}finally{_iterator271.f();}nodeSet2=new _NodeSet(nodeTypes2);if(styles)nodeSet2=nodeSet2.extend(styleTags(styles));}if(nonEmpty(config2.props))nodeSet2=(_nodeSet=nodeSet2).extend.apply(_nodeSet,_toConsumableArray(config2.props));if(nonEmpty(config2.remove)){var _iterator272=_createForOfIteratorHelper(config2.remove),_step272;try{for(_iterator272.s();!(_step272=_iterator272.n()).done;){var rm2=_step272.value;var block=this.blockNames.indexOf(rm2),inline=this.inlineNames.indexOf(rm2);if(block>-1)blockParsers[block]=leafBlockParsers[block]=void 0;if(inline>-1)inlineParsers[inline]=void 0;}}catch(err){_iterator272.e(err);}finally{_iterator272.f();}}if(nonEmpty(config2.parseBlock)){var _iterator273=_createForOfIteratorHelper(config2.parseBlock),_step273;try{for(_iterator273.s();!(_step273=_iterator273.n()).done;){var spec2=_step273.value;var found=blockNames.indexOf(spec2.name);if(found>-1){blockParsers[found]=spec2.parse;leafBlockParsers[found]=spec2.leaf;}else{var pos=spec2.before?findName(blockNames,spec2.before):spec2.after?findName(blockNames,spec2.after)+1:blockNames.length-1;blockParsers.splice(pos,0,spec2.parse);leafBlockParsers.splice(pos,0,spec2.leaf);blockNames.splice(pos,0,spec2.name);}if(spec2.endLeaf)endLeafBlock.push(spec2.endLeaf);}}catch(err){_iterator273.e(err);}finally{_iterator273.f();}}if(nonEmpty(config2.parseInline)){var _iterator274=_createForOfIteratorHelper(config2.parseInline),_step274;try{for(_iterator274.s();!(_step274=_iterator274.n()).done;){var _spec=_step274.value;var _found=inlineNames.indexOf(_spec.name);if(_found>-1){inlineParsers[_found]=_spec.parse;}else{var _pos3=_spec.before?findName(inlineNames,_spec.before):_spec.after?findName(inlineNames,_spec.after)+1:inlineNames.length-1;inlineParsers.splice(_pos3,0,_spec.parse);inlineNames.splice(_pos3,0,_spec.name);}}}catch(err){_iterator274.e(err);}finally{_iterator274.f();}}if(config2.wrap)wrappers=wrappers.concat(config2.wrap);return new _MarkdownParser(nodeSet2,blockParsers,leafBlockParsers,blockNames,endLeafBlock,skipContextMarkup,inlineParsers,inlineNames,wrappers);}},{key:"getNodeType",value:function getNodeType(name2){var found=this.nodeTypes[name2];if(found==null)throw new RangeError("Unknown node type '".concat(name2,"'"));return found;}},{key:"parseInline",value:function parseInline(text,offset){var cx=new InlineContext(this,text,offset);outer:for(var pos=offset;pos<cx.end;){var next=cx["char"](pos);var _iterator275=_createForOfIteratorHelper(this.inlineParsers),_step275;try{for(_iterator275.s();!(_step275=_iterator275.n()).done;){var token=_step275.value;if(token){var result=token(cx,next,pos);if(result>=0){pos=result;continue outer;}}}}catch(err){_iterator275.e(err);}finally{_iterator275.f();}pos++;}return cx.resolveMarkers(0);}}]);}(Parser);function nonEmpty(a){return a!=null&&a.length>0;}function resolveConfig(spec){if(!Array.isArray(spec))return spec;if(spec.length==0)return null;var conf=resolveConfig(spec[0]);if(spec.length==1)return conf;var rest=resolveConfig(spec.slice(1));if(!rest||!conf)return conf||rest;var conc2=function conc2(a,b){return(a||none4).concat(b||none4);};var wrapA=conf.wrap,wrapB=rest.wrap;return{props:conc2(conf.props,rest.props),defineNodes:conc2(conf.defineNodes,rest.defineNodes),parseBlock:conc2(conf.parseBlock,rest.parseBlock),parseInline:conc2(conf.parseInline,rest.parseInline),remove:conc2(conf.remove,rest.remove),wrap:!wrapA?wrapB:!wrapB?wrapA:function(inner,input,fragments,ranges){return wrapA(wrapB(inner,input,fragments,ranges),input,fragments,ranges);}};}function findName(names,name2){var found=names.indexOf(name2);if(found<0)throw new RangeError("Position specified relative to unknown parser ".concat(name2));return found;}var nodeTypes=[_NodeType.none];for(var _i187=1,_name7;_name7=Type[_i187];_i187++){nodeTypes[_i187]=_NodeType.define({id:_i187,name:_name7,props:_i187>=Type.Escape?[]:[[NodeProp.group,_i187 in DefaultSkipMarkup?["Block","BlockContext"]:["Block","LeafBlock"]]],top:_name7=="Document"});}var none4=[];var Buffer2=/*#__PURE__*/function(){function Buffer2(nodeSet2){_classCallCheck(this,Buffer2);this.nodeSet=nodeSet2;this.content=[];this.nodes=[];}return _createClass(Buffer2,[{key:"write",value:function write(type,from,to){var children=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;this.content.push(type,from,to,4+children*4);return this;}},{key:"writeElements",value:function writeElements(elts){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var _iterator276=_createForOfIteratorHelper(elts),_step276;try{for(_iterator276.s();!(_step276=_iterator276.n()).done;){var e=_step276.value;e.writeTo(this,offset);}}catch(err){_iterator276.e(err);}finally{_iterator276.f();}return this;}},{key:"finish",value:function finish(type,length){return _Tree.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:type,length:length});}}]);}();var Element=/*#__PURE__*/function(){function Element(type,from,to){var children=arguments.length>3&&arguments[3]!==undefined?arguments[3]:none4;_classCallCheck(this,Element);this.type=type;this.from=from;this.to=to;this.children=children;}return _createClass(Element,[{key:"writeTo",value:function writeTo(buf,offset){var startOff=buf.content.length;buf.writeElements(this.children,offset);buf.content.push(this.type,this.from+offset,this.to+offset,buf.content.length+4-startOff);}},{key:"toTree",value:function toTree(nodeSet2){return new Buffer2(nodeSet2).writeElements(this.children,-this.from).finish(this.type,this.to-this.from);}}]);}();var TreeElement=/*#__PURE__*/function(){function TreeElement(tree,from){_classCallCheck(this,TreeElement);this.tree=tree;this.from=from;}return _createClass(TreeElement,[{key:"to",get:function get(){return this.from+this.tree.length;}},{key:"type",get:function get(){return this.tree.type.id;}},{key:"children",get:function get(){return none4;}},{key:"writeTo",value:function writeTo(buf,offset){buf.nodes.push(this.tree);buf.content.push(buf.nodes.length-1,this.from+offset,this.to+offset,-1);}},{key:"toTree",value:function toTree(){return this.tree;}}]);}();function _elt(type,from,to,children){return new Element(type,from,to,children);}var EmphasisUnderscore={resolve:"Emphasis",mark:"EmphasisMark"};var EmphasisAsterisk={resolve:"Emphasis",mark:"EmphasisMark"};var LinkStart={};var ImageStart={};var InlineDelimiter=/*#__PURE__*/_createClass(function InlineDelimiter(type,from,to,side){_classCallCheck(this,InlineDelimiter);this.type=type;this.from=from;this.to=to;this.side=side;});var Escapable="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";var Punctuation=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Punctuation=new RegExp("[\\p{S}|\\p{P}]","u");}catch(_){}var DefaultInline={Escape:function Escape(cx,next,start){if(next!=92||start==cx.end-1)return-1;var escaped=cx["char"](start+1);for(var _i188=0;_i188<Escapable.length;_i188++)if(Escapable.charCodeAt(_i188)==escaped)return cx.append(_elt(Type.Escape,start,start+2));return-1;},Entity:function Entity(cx,next,start){if(next!=38)return-1;var m=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(cx.slice(start+1,start+31));return m?cx.append(_elt(Type.Entity,start,start+1+m[0].length)):-1;},InlineCode:function InlineCode(cx,next,start){if(next!=96||start&&cx["char"](start-1)==96)return-1;var pos=start+1;while(pos<cx.end&&cx["char"](pos)==96)pos++;var size=pos-start,curSize=0;for(;pos<cx.end;pos++){if(cx["char"](pos)==96){curSize++;if(curSize==size&&cx["char"](pos+1)!=96)return cx.append(_elt(Type.InlineCode,start,pos+1,[_elt(Type.CodeMark,start,start+size),_elt(Type.CodeMark,pos+1-size,pos+1)]));}else{curSize=0;}}return-1;},HTMLTag:function HTMLTag(cx,next,start){if(next!=60||start==cx.end-1)return-1;var after=cx.slice(start+1,cx.end);var url=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(after);if(url){return cx.append(_elt(Type.Autolink,start,start+1+url[0].length,[_elt(Type.LinkMark,start,start+1),_elt(Type.URL,start+1,start+url[0].length),_elt(Type.LinkMark,start+url[0].length,start+1+url[0].length)]));}var comment2=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(after);if(comment2)return cx.append(_elt(Type.Comment,start,start+1+comment2[0].length));var procInst=/^\?[^]*?\?>/.exec(after);if(procInst)return cx.append(_elt(Type.ProcessingInstruction,start,start+1+procInst[0].length));var m=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(after);if(!m)return-1;return cx.append(_elt(Type.HTMLTag,start,start+1+m[0].length));},Emphasis:function Emphasis(cx,next,start){if(next!=95&&next!=42)return-1;var pos=start+1;while(cx["char"](pos)==next)pos++;var before=cx.slice(start-1,start),after=cx.slice(pos,pos+1);var pBefore=Punctuation.test(before),pAfter=Punctuation.test(after);var sBefore=/\s|^$/.test(before),sAfter=/\s|^$/.test(after);var leftFlanking=!sAfter&&(!pAfter||sBefore||pBefore);var rightFlanking=!sBefore&&(!pBefore||sAfter||pAfter);var canOpen=leftFlanking&&(next==42||!rightFlanking||pBefore);var canClose=rightFlanking&&(next==42||!leftFlanking||pAfter);return cx.append(new InlineDelimiter(next==95?EmphasisUnderscore:EmphasisAsterisk,start,pos,(canOpen?1:0)|(canClose?2:0)));},HardBreak:function HardBreak(cx,next,start){if(next==92&&cx["char"](start+1)==10)return cx.append(_elt(Type.HardBreak,start,start+2));if(next==32){var pos=start+1;while(cx["char"](pos)==32)pos++;if(cx["char"](pos)==10&&pos>=start+2)return cx.append(_elt(Type.HardBreak,start,pos+1));}return-1;},Link:function Link(cx,next,start){return next==91?cx.append(new InlineDelimiter(LinkStart,start,start+1,1)):-1;},Image:function Image(cx,next,start){return next==33&&cx["char"](start+1)==91?cx.append(new InlineDelimiter(ImageStart,start,start+2,1)):-1;},LinkEnd:function LinkEnd(cx,next,start){if(next!=93)return-1;for(var _i189=cx.parts.length-1;_i189>=0;_i189--){var part=cx.parts[_i189];if(part instanceof InlineDelimiter&&(part.type==LinkStart||part.type==ImageStart)){if(!part.side||cx.skipSpace(part.to)==start&&!/[(\[]/.test(cx.slice(start+1,start+2))){cx.parts[_i189]=null;return-1;}var content2=cx.takeContent(_i189);var link=cx.parts[_i189]=finishLink(cx,content2,part.type==LinkStart?Type.Link:Type.Image,part.from,start+1);if(part.type==LinkStart)for(var j=0;j<_i189;j++){var _p9=cx.parts[j];if(_p9 instanceof InlineDelimiter&&_p9.type==LinkStart)_p9.side=0;}return link.to;}}return-1;}};function finishLink(cx,content2,type,start,startPos){var text=cx.text,next=cx["char"](startPos),endPos=startPos;content2.unshift(_elt(Type.LinkMark,start,start+(type==Type.Image?2:1)));content2.push(_elt(Type.LinkMark,startPos-1,startPos));if(next==40){var pos=cx.skipSpace(startPos+1);var dest=parseURL(text,pos-cx.offset,cx.offset),title;if(dest){pos=cx.skipSpace(dest.to);if(pos!=dest.to){title=parseLinkTitle(text,pos-cx.offset,cx.offset);if(title)pos=cx.skipSpace(title.to);}}if(cx["char"](pos)==41){content2.push(_elt(Type.LinkMark,startPos,startPos+1));endPos=pos+1;if(dest)content2.push(dest);if(title)content2.push(title);content2.push(_elt(Type.LinkMark,pos,endPos));}}else if(next==91){var label=parseLinkLabel(text,startPos-cx.offset,cx.offset,false);if(label){content2.push(label);endPos=label.to;}}return _elt(type,start,endPos,content2);}function parseURL(text,start,offset){var next=text.charCodeAt(start);if(next==60){for(var pos=start+1;pos<text.length;pos++){var ch=text.charCodeAt(pos);if(ch==62)return _elt(Type.URL,start+offset,pos+1+offset);if(ch==60||ch==10)return false;}return null;}else{var depth=0,_pos4=start;for(var escaped=false;_pos4<text.length;_pos4++){var _ch2=text.charCodeAt(_pos4);if(space(_ch2)){break;}else if(escaped){escaped=false;}else if(_ch2==40){depth++;}else if(_ch2==41){if(!depth)break;depth--;}else if(_ch2==92){escaped=true;}}return _pos4>start?_elt(Type.URL,start+offset,_pos4+offset):_pos4==text.length?null:false;}}function parseLinkTitle(text,start,offset){var next=text.charCodeAt(start);if(next!=39&&next!=34&&next!=40)return false;var end=next==40?41:next;for(var pos=start+1,escaped=false;pos<text.length;pos++){var ch=text.charCodeAt(pos);if(escaped)escaped=false;else if(ch==end)return _elt(Type.LinkTitle,start+offset,pos+1+offset);else if(ch==92)escaped=true;}return null;}function parseLinkLabel(text,start,offset,requireNonWS){for(var escaped=false,pos=start+1,end=Math.min(text.length,pos+999);pos<end;pos++){var ch=text.charCodeAt(pos);if(escaped)escaped=false;else if(ch==93)return requireNonWS?false:_elt(Type.LinkLabel,start+offset,pos+1+offset);else{if(requireNonWS&&!space(ch))requireNonWS=false;if(ch==91)return false;else if(ch==92)escaped=true;}}return null;}var InlineContext=/*#__PURE__*/function(){function InlineContext(parser5,text,offset){_classCallCheck(this,InlineContext);this.parser=parser5;this.text=text;this.offset=offset;this.parts=[];}return _createClass(InlineContext,[{key:"char",value:function _char4(pos){return pos>=this.end?-1:this.text.charCodeAt(pos-this.offset);}},{key:"end",get:function get(){return this.offset+this.text.length;}},{key:"slice",value:function slice(from,to){return this.text.slice(from-this.offset,to-this.offset);}},{key:"append",value:function append(elt2){this.parts.push(elt2);return elt2.to;}},{key:"addDelimiter",value:function addDelimiter(type,from,to,open,close){return this.append(new InlineDelimiter(type,from,to,(open?1:0)|(close?2:0)));}},{key:"hasOpenLink",get:function get(){for(var _i190=this.parts.length-1;_i190>=0;_i190--){var part=this.parts[_i190];if(part instanceof InlineDelimiter&&(part.type==LinkStart||part.type==ImageStart))return true;}return false;}},{key:"addElement",value:function addElement(elt2){return this.append(elt2);}},{key:"resolveMarkers",value:function resolveMarkers(from){for(var _i191=from;_i191<this.parts.length;_i191++){var close=this.parts[_i191];if(!(close instanceof InlineDelimiter&&close.type.resolve&&close.side&2))continue;var emp=close.type==EmphasisUnderscore||close.type==EmphasisAsterisk;var closeSize=close.to-close.from;var open=void 0,j=_i191-1;for(;j>=from;j--){var part=this.parts[j];if(part instanceof InlineDelimiter&&part.side&1&&part.type==close.type&&!(emp&&(close.side&1||part.side&2)&&(part.to-part.from+closeSize)%3==0&&((part.to-part.from)%3||closeSize%3))){open=part;break;}}if(!open)continue;var type=close.type.resolve,content2=[];var start=open.from,end=close.to;if(emp){var size=Math.min(2,open.to-open.from,closeSize);start=open.to-size;end=close.from+size;type=size==1?"Emphasis":"StrongEmphasis";}if(open.type.mark)content2.push(this.elt(open.type.mark,start,open.to));for(var k=j+1;k<_i191;k++){if(this.parts[k]instanceof Element)content2.push(this.parts[k]);this.parts[k]=null;}if(close.type.mark)content2.push(this.elt(close.type.mark,close.from,end));var element=this.elt(type,start,end,content2);this.parts[j]=emp&&open.from!=start?new InlineDelimiter(open.type,open.from,start,open.side):null;var keep=this.parts[_i191]=emp&&close.to!=end?new InlineDelimiter(close.type,end,close.to,close.side):null;if(keep)this.parts.splice(_i191,0,element);else this.parts[_i191]=element;}var result=[];for(var _i192=from;_i192<this.parts.length;_i192++){var _part=this.parts[_i192];if(_part instanceof Element)result.push(_part);}return result;}},{key:"findOpeningDelimiter",value:function findOpeningDelimiter(type){for(var _i193=this.parts.length-1;_i193>=0;_i193--){var part=this.parts[_i193];if(part instanceof InlineDelimiter&&part.type==type)return _i193;}return null;}},{key:"takeContent",value:function takeContent(startIndex){var content2=this.resolveMarkers(startIndex);this.parts.length=startIndex;return content2;}},{key:"skipSpace",value:function skipSpace(from){return _skipSpace(this.text,from-this.offset)+this.offset;}},{key:"elt",value:function elt(type,from,to,children){if(typeof type=="string")return _elt(this.parser.getNodeType(type),from,to,children);return new TreeElement(type,from);}}]);}();function injectMarks(elements,marks2){if(!marks2.length)return elements;if(!elements.length)return marks2;var elts=elements.slice(),eI=0;var _iterator277=_createForOfIteratorHelper(marks2),_step277;try{for(_iterator277.s();!(_step277=_iterator277.n()).done;){var mark=_step277.value;while(eI<elts.length&&elts[eI].to<mark.to)eI++;if(eI<elts.length&&elts[eI].from<mark.from){var e=elts[eI];if(e instanceof Element)elts[eI]=new Element(e.type,e.from,e.to,injectMarks(e.children,[mark]));}else{elts.splice(eI++,0,mark);}}}catch(err){_iterator277.e(err);}finally{_iterator277.f();}return elts;}var NotLast=[Type.CodeBlock,Type.ListItem,Type.OrderedList,Type.BulletList];var FragmentCursor2=/*#__PURE__*/function(){function FragmentCursor2(fragments,input){_classCallCheck(this,FragmentCursor2);this.fragments=fragments;this.input=input;this.i=0;this.fragment=null;this.fragmentEnd=-1;this.cursor=null;if(fragments.length)this.fragment=fragments[this.i++];}return _createClass(FragmentCursor2,[{key:"nextFragment",value:function nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null;this.cursor=null;this.fragmentEnd=-1;}},{key:"moveTo",value:function moveTo(pos,lineStart){while(this.fragment&&this.fragment.to<=pos)this.nextFragment();if(!this.fragment||this.fragment.from>(pos?pos-1:0))return false;if(this.fragmentEnd<0){var end=this.fragment.to;while(end>0&&this.input.read(end-1,end)!="\n")end--;this.fragmentEnd=end?end-1:0;}var c=this.cursor;if(!c){c=this.cursor=this.fragment.tree.cursor();c.firstChild();}var rPos=pos+this.fragment.offset;while(c.to<=rPos)if(!c.parent())return false;for(;;){if(c.from>=rPos)return this.fragment.from<=lineStart;if(!c.childAfter(rPos))return false;}}},{key:"matches",value:function matches(hash2){var tree=this.cursor.tree;return tree&&tree.prop(NodeProp.contextHash)==hash2;}},{key:"takeNodes",value:function takeNodes(cx){var cur2=this.cursor,off=this.fragment.offset,fragEnd=this.fragmentEnd-(this.fragment.openEnd?1:0);var start=cx.absoluteLineStart,end=start,blockI=cx.block.children.length;var prevEnd=end,prevI=blockI;for(;;){if(cur2.to-off>fragEnd){if(cur2.type.isAnonymous&&cur2.firstChild())continue;break;}var pos=toRelative(cur2.from-off,cx.ranges);if(cur2.to-off<=cx.ranges[cx.rangeI].to){cx.addNode(cur2.tree,pos);}else{var dummy=new _Tree(cx.parser.nodeSet.types[Type.Paragraph],[],[],0,cx.block.hashProp);cx.reusePlaceholders.set(dummy,cur2.tree);cx.addNode(dummy,pos);}if(cur2.type.is("Block")){if(NotLast.indexOf(cur2.type.id)<0){end=cur2.to-off;blockI=cx.block.children.length;}else{end=prevEnd;blockI=prevI;prevEnd=cur2.to-off;prevI=cx.block.children.length;}}if(!cur2.nextSibling())break;}while(cx.block.children.length>blockI){cx.block.children.pop();cx.block.positions.pop();}return end-start;}}]);}();function toRelative(abs,ranges){var pos=abs;for(var _i194=1;_i194<ranges.length;_i194++){var gapFrom=ranges[_i194-1].to,gapTo=ranges[_i194].from;if(gapFrom<abs)pos-=gapTo-gapFrom;}return pos;}var markdownHighlighting=styleTags({"Blockquote/...":tags.quote,HorizontalRule:tags.contentSeparator,"ATXHeading1/... SetextHeading1/...":tags.heading1,"ATXHeading2/... SetextHeading2/...":tags.heading2,"ATXHeading3/...":tags.heading3,"ATXHeading4/...":tags.heading4,"ATXHeading5/...":tags.heading5,"ATXHeading6/...":tags.heading6,"Comment CommentBlock":tags.comment,Escape:tags.escape,Entity:tags.character,"Emphasis/...":tags.emphasis,"StrongEmphasis/...":tags.strong,"Link/... Image/...":tags.link,"OrderedList/... BulletList/...":tags.list,"BlockQuote/...":tags.quote,"InlineCode CodeText":tags.monospace,"URL Autolink":tags.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":tags.processingInstruction,"CodeInfo LinkLabel":tags.labelName,LinkTitle:tags.string,Paragraph:tags.content});var parser=new _MarkdownParser(new _NodeSet(nodeTypes).extend(markdownHighlighting),Object.keys(DefaultBlockParsers).map(function(n){return DefaultBlockParsers[n];}),Object.keys(DefaultBlockParsers).map(function(n){return DefaultLeafBlocks[n];}),Object.keys(DefaultBlockParsers),DefaultEndLeaf,DefaultSkipMarkup,Object.keys(DefaultInline).map(function(n){return DefaultInline[n];}),Object.keys(DefaultInline),[]);function leftOverSpace(node,from,to){var ranges=[];for(var n=node.firstChild,pos=from;;n=n.nextSibling){var nextPos=n?n.from:to;if(nextPos>pos)ranges.push({from:pos,to:nextPos});if(!n)break;pos=n.to;}return ranges;}function parseCode(config2){var codeParser=config2.codeParser,htmlParser=config2.htmlParser;var wrap=parseMixed(function(node,input){var id2=node.type.id;if(codeParser&&(id2==Type.CodeBlock||id2==Type.FencedCode)){var info="";if(id2==Type.FencedCode){var infoNode=node.node.getChild(Type.CodeInfo);if(infoNode)info=input.read(infoNode.from,infoNode.to);}var parser5=codeParser(info);if(parser5)return{parser:parser5,overlay:function overlay(node2){return node2.type.id==Type.CodeText;}};}else if(htmlParser&&(id2==Type.HTMLBlock||id2==Type.HTMLTag||id2==Type.CommentBlock)){return{parser:htmlParser,overlay:leftOverSpace(node.node,node.from,node.to)};}return null;});return{wrap:wrap};}var StrikethroughDelim={resolve:"Strikethrough",mark:"StrikethroughMark"};var Strikethrough={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":tags.strikethrough}},{name:"StrikethroughMark",style:tags.processingInstruction}],parseInline:[{name:"Strikethrough",parse:function parse(cx,next,pos){if(next!=126||cx["char"](pos+1)!=126||cx["char"](pos+2)==126)return-1;var before=cx.slice(pos-1,pos),after=cx.slice(pos+2,pos+3);var sBefore=/\s|^$/.test(before),sAfter=/\s|^$/.test(after);var pBefore=Punctuation.test(before),pAfter=Punctuation.test(after);return cx.addDelimiter(StrikethroughDelim,pos,pos+2,!sAfter&&(!pAfter||sBefore||pBefore),!sBefore&&(!pBefore||sAfter||pAfter));},after:"Emphasis"}]};function parseRow(cx,line){var startI=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var elts=arguments.length>3?arguments[3]:undefined;var offset=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var count2=0,first=true,cellStart=-1,cellEnd=-1,esc=false;var parseCell=function parseCell(){elts.push(cx.elt("TableCell",offset+cellStart,offset+cellEnd,cx.parser.parseInline(line.slice(cellStart,cellEnd),offset+cellStart)));};for(var _i195=startI;_i195<line.length;_i195++){var next=line.charCodeAt(_i195);if(next==124&&!esc){if(!first||cellStart>-1)count2++;first=false;if(elts){if(cellStart>-1)parseCell();elts.push(cx.elt("TableDelimiter",_i195+offset,_i195+offset+1));}cellStart=cellEnd=-1;}else if(esc||next!=32&&next!=9){if(cellStart<0)cellStart=_i195;cellEnd=_i195+1;}esc=!esc&&next==92;}if(cellStart>-1){count2++;if(elts)parseCell();}return count2;}function hasPipe(str,start){for(var _i196=start;_i196<str.length;_i196++){var next=str.charCodeAt(_i196);if(next==124)return true;if(next==92)_i196++;}return false;}var delimiterLine=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;var TableParser=/*#__PURE__*/function(){function TableParser(){_classCallCheck(this,TableParser);this.rows=null;}return _createClass(TableParser,[{key:"nextLine",value:function nextLine(cx,line,leaf){if(this.rows==null){this.rows=false;var lineText;if((line.next==45||line.next==58||line.next==124)&&delimiterLine.test(lineText=line.text.slice(line.pos))){var firstRow=[],firstCount=parseRow(cx,leaf.content,0,firstRow,leaf.start);if(firstCount==parseRow(cx,lineText,line.pos))this.rows=[cx.elt("TableHeader",leaf.start,leaf.start+leaf.content.length,firstRow),cx.elt("TableDelimiter",cx.lineStart+line.pos,cx.lineStart+line.text.length)];}}else if(this.rows){var content2=[];parseRow(cx,line.text,line.pos,content2,cx.lineStart);this.rows.push(cx.elt("TableRow",cx.lineStart+line.pos,cx.lineStart+line.text.length,content2));}return false;}},{key:"finish",value:function finish(cx,leaf){if(!this.rows)return false;cx.addLeafElement(leaf,cx.elt("Table",leaf.start,leaf.start+leaf.content.length,this.rows));return true;}}]);}();var Table={defineNodes:[{name:"Table",block:true},{name:"TableHeader",style:{"TableHeader/...":tags.heading}},"TableRow",{name:"TableCell",style:tags.content},{name:"TableDelimiter",style:tags.processingInstruction}],parseBlock:[{name:"Table",leaf:function leaf(_,_leaf){return hasPipe(_leaf.content,0)?new TableParser():null;},endLeaf:function endLeaf(cx,line,leaf){if(leaf.parsers.some(function(p){return p instanceof TableParser;})||!hasPipe(line.text,line.basePos))return false;var next=cx.peekLine();return delimiterLine.test(next)&&parseRow(cx,line.text,line.basePos)==parseRow(cx,next,line.basePos);},before:"SetextHeading"}]};var TaskParser=/*#__PURE__*/function(){function TaskParser(){_classCallCheck(this,TaskParser);}return _createClass(TaskParser,[{key:"nextLine",value:function nextLine(){return false;}},{key:"finish",value:function finish(cx,leaf){cx.addLeafElement(leaf,cx.elt("Task",leaf.start,leaf.start+leaf.content.length,[cx.elt("TaskMarker",leaf.start,leaf.start+3)].concat(_toConsumableArray(cx.parser.parseInline(leaf.content.slice(3),leaf.start+3)))));return true;}}]);}();var TaskList={defineNodes:[{name:"Task",block:true,style:tags.list},{name:"TaskMarker",style:tags.atom}],parseBlock:[{name:"TaskList",leaf:function leaf(cx,_leaf2){return /^\[[ xX]\][ \t]/.test(_leaf2.content)&&cx.parentType().name=="ListItem"?new TaskParser():null;},after:"SetextHeading"}]};var autolinkRE=new RegExp("(www\\.)|(https?:\\/\\/)|([\\w.+-]{1,100}@)|(mailto:|xmpp:)","gy");var urlRE=new RegExp("[\\w-]+(\\.[\\w-]+)+(\\/[^\\s<]*)?","gy");var lastTwoDomainWords=/[\w-]+\.[\w-]+($|\/)/;var emailRE=new RegExp("[\\w.+-]+@[\\w-]+(\\.[\\w.-]+)+","gy");var xmppResourceRE=new RegExp("\\/[a-zA-Z\\d@.]+","gy");function count(str,from,to,ch){var result=0;for(var _i197=from;_i197<to;_i197++)if(str[_i197]==ch)result++;return result;}function autolinkURLEnd(text,from){urlRE.lastIndex=from;var m=urlRE.exec(text);if(!m||lastTwoDomainWords.exec(m[0])[0].indexOf("_")>-1)return-1;var end=from+m[0].length;for(;;){var last=text[end-1],m2=void 0;if(/[?!.,:*_~]/.test(last)||last==")"&&count(text,from,end,")")>count(text,from,end,"("))end--;else if(last==";"&&(m2=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(text.slice(from,end))))end=from+m2.index;else break;}return end;}function autolinkEmailEnd(text,from){emailRE.lastIndex=from;var m=emailRE.exec(text);if(!m)return-1;var last=m[0][m[0].length-1];return last=="_"||last=="-"?-1:from+m[0].length-(last=="."?1:0);}var Autolink={parseInline:[{name:"Autolink",parse:function parse(cx,next,absPos){var pos=absPos-cx.offset;if(pos&&/\w/.test(cx.text[pos-1]))return-1;autolinkRE.lastIndex=pos;var m=autolinkRE.exec(cx.text),end=-1;if(!m)return-1;if(m[1]||m[2]){end=autolinkURLEnd(cx.text,pos+m[0].length);if(end>-1&&cx.hasOpenLink){var noBracket=/([^\[\]]|\[[^\]]*\])*/.exec(cx.text.slice(pos,end));end=pos+noBracket[0].length;}}else if(m[3]){end=autolinkEmailEnd(cx.text,pos);}else{end=autolinkEmailEnd(cx.text,pos+m[0].length);if(end>-1&&m[0]=="xmpp:"){xmppResourceRE.lastIndex=end;m=xmppResourceRE.exec(cx.text);if(m)end=m.index+m[0].length;}}if(end<0)return-1;cx.addElement(cx.elt("URL",absPos,end+cx.offset));return end+cx.offset;}}]};var GFM=[Table,TaskList,Strikethrough,Autolink];function parseSubSuper(ch,node,mark){return function(cx,next,pos){if(next!=ch||cx["char"](pos+1)==ch)return-1;var elts=[cx.elt(mark,pos,pos+1)];for(var _i198=pos+1;_i198<cx.end;_i198++){var next2=cx["char"](_i198);if(next2==ch)return cx.addElement(cx.elt(node,pos,_i198+1,elts.concat(cx.elt(mark,_i198,_i198+1))));if(next2==92)elts.push(cx.elt("Escape",_i198,_i198++ +2));if(space(next2))break;}return-1;};}var Superscript={defineNodes:[{name:"Superscript",style:tags.special(tags.content)},{name:"SuperscriptMark",style:tags.processingInstruction}],parseInline:[{name:"Superscript",parse:parseSubSuper(94,"Superscript","SuperscriptMark")}]};var Subscript={defineNodes:[{name:"Subscript",style:tags.special(tags.content)},{name:"SubscriptMark",style:tags.processingInstruction}],parseInline:[{name:"Subscript",parse:parseSubSuper(126,"Subscript","SubscriptMark")}]};var Emoji={defineNodes:[{name:"Emoji",style:tags.character}],parseInline:[{name:"Emoji",parse:function parse(cx,next,pos){var match;if(next!=58||!(match=/^[a-zA-Z_0-9]+:/.exec(cx.slice(pos+1,cx.end))))return-1;return cx.addElement(cx.elt("Emoji",pos,pos+1+match[0].length));}}]};// ../node_modules/@lezer/lr/dist/index.js
var _Stack=/*#__PURE__*/function(){function Stack(p,stack,state,reducePos,pos,score2,buffer,bufferBase,curContext){var lookAhead=arguments.length>9&&arguments[9]!==undefined?arguments[9]:0;var parent=arguments.length>10?arguments[10]:undefined;_classCallCheck(this,Stack);this.p=p;this.stack=stack;this.state=state;this.reducePos=reducePos;this.pos=pos;this.score=score2;this.buffer=buffer;this.bufferBase=bufferBase;this.curContext=curContext;this.lookAhead=lookAhead;this.parent=parent;}return _createClass(Stack,[{key:"toString",value:function toString(){return"[".concat(this.stack.filter(function(_,i){return i%3==0;}).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"");}},{key:"context",get:function get(){return this.curContext?this.curContext.context:null;}},{key:"pushState",value:function pushState(state,start){this.stack.push(this.state,start,this.bufferBase+this.buffer.length);this.state=state;}},{key:"reduce",value:function reduce(action){var _a2;var depth=action>>19,type=action&65535;var parser5=this.p.parser;var lookaheadRecord=this.reducePos<this.pos-25;if(lookaheadRecord)this.setLookAhead(this.pos);var dPrec=parser5.dynamicPrecedence(type);if(dPrec)this.score+=dPrec;if(depth==0){this.pushState(parser5.getGoto(this.state,type,true),this.reducePos);if(type<parser5.minRepeatTerm)this.storeNode(type,this.reducePos,this.reducePos,lookaheadRecord?8:4,true);this.reduceContext(type,this.reducePos);return;}var base2=this.stack.length-(depth-1)*3-(action&262144?6:0);var start=base2?this.stack[base2-2]:this.p.ranges[0].from,size=this.reducePos-start;if(size>=2e3&&!((_a2=this.p.parser.nodeSet.types[type])===null||_a2===void 0?void 0:_a2.isAnonymous)){if(start==this.p.lastBigReductionStart){this.p.bigReductionCount++;this.p.lastBigReductionSize=size;}else if(this.p.lastBigReductionSize<size){this.p.bigReductionCount=1;this.p.lastBigReductionStart=start;this.p.lastBigReductionSize=size;}}var bufferBase=base2?this.stack[base2-1]:0,count2=this.bufferBase+this.buffer.length-bufferBase;if(type<parser5.minRepeatTerm||action&131072){var pos=parser5.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(type,start,pos,count2+4,true);}if(action&262144){this.state=this.stack[base2];}else{var baseStateID=this.stack[base2-3];this.state=parser5.getGoto(baseStateID,type,true);}while(this.stack.length>base2)this.stack.pop();this.reduceContext(type,start);}},{key:"storeNode",value:function storeNode(term,start,end){var size=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;var mustSink=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;if(term==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){var cur2=this,top2=this.buffer.length;if(top2==0&&cur2.parent){top2=cur2.bufferBase-cur2.parent.bufferBase;cur2=cur2.parent;}if(top2>0&&cur2.buffer[top2-4]==0&&cur2.buffer[top2-1]>-1){if(start==end)return;if(cur2.buffer[top2-2]>=start){cur2.buffer[top2-2]=end;return;}}}if(!mustSink||this.pos==end){this.buffer.push(term,start,end,size);}else{var index=this.buffer.length;if(index>0&&this.buffer[index-4]!=0){var mustMove=false;for(var scan=index;scan>0&&this.buffer[scan-2]>end;scan-=4){if(this.buffer[scan-1]>=0){mustMove=true;break;}}if(mustMove)while(index>0&&this.buffer[index-2]>end){this.buffer[index]=this.buffer[index-4];this.buffer[index+1]=this.buffer[index-3];this.buffer[index+2]=this.buffer[index-2];this.buffer[index+3]=this.buffer[index-1];index-=4;if(size>4)size-=4;}}this.buffer[index]=term;this.buffer[index+1]=start;this.buffer[index+2]=end;this.buffer[index+3]=size;}}},{key:"shift",value:function shift(action,type,start,end){if(action&131072){this.pushState(action&65535,this.pos);}else if((action&262144)==0){var nextState=action,parser5=this.p.parser;if(end>this.pos||type<=parser5.maxNode){this.pos=end;if(!parser5.stateFlag(nextState,1))this.reducePos=end;}this.pushState(nextState,start);this.shiftContext(type,start);if(type<=parser5.maxNode)this.buffer.push(type,start,end,4);}else{this.pos=end;this.shiftContext(type,start);if(type<=this.p.parser.maxNode)this.buffer.push(type,start,end,4);}}},{key:"apply",value:function apply(action,next,nextStart,nextEnd){if(action&65536)this.reduce(action);else this.shift(action,next,nextStart,nextEnd);}},{key:"useNode",value:function useNode(value,next){var index=this.p.reused.length-1;if(index<0||this.p.reused[index]!=value){this.p.reused.push(value);index++;}var start=this.pos;this.reducePos=this.pos=start+value.length;this.pushState(next,start);this.buffer.push(index,start,this.reducePos,-1);if(this.curContext)this.updateContext(this.curContext.tracker.reuse(this.curContext.context,value,this,this.p.stream.reset(this.pos-value.length)));}},{key:"split",value:function split(){var parent=this;var off=parent.buffer.length;while(off>0&&parent.buffer[off-2]>parent.reducePos)off-=4;var buffer=parent.buffer.slice(off),base2=parent.bufferBase+off;while(parent&&base2==parent.bufferBase)parent=parent.parent;return new _Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,buffer,base2,this.curContext,this.lookAhead,parent);}},{key:"recoverByDelete",value:function recoverByDelete(next,nextEnd){var isNode=next<=this.p.parser.maxNode;if(isNode)this.storeNode(next,this.pos,nextEnd,4);this.storeNode(0,this.pos,nextEnd,isNode?8:4);this.pos=this.reducePos=nextEnd;this.score-=190;}},{key:"canShift",value:function canShift(term){for(var sim=new SimulatedStack(this);;){var action=this.p.parser.stateSlot(sim.state,4)||this.p.parser.hasAction(sim.state,term);if(action==0)return false;if((action&65536)==0)return true;sim.reduce(action);}}},{key:"recoverByInsert",value:function recoverByInsert(next){if(this.stack.length>=300)return[];var nextStates=this.p.parser.nextStates(this.state);if(nextStates.length>4<<1||this.stack.length>=120){var best=[];for(var _i199=0,s;_i199<nextStates.length;_i199+=2){if((s=nextStates[_i199+1])!=this.state&&this.p.parser.hasAction(s,next))best.push(nextStates[_i199],s);}if(this.stack.length<120){var _loop21=function _loop21(){var s=nextStates[_i200+1];if(!best.some(function(v,i2){return i2&1&&v==s;}))best.push(nextStates[_i200],s);};for(var _i200=0;best.length<4<<1&&_i200<nextStates.length;_i200+=2){_loop21();}}nextStates=best;}var result=[];for(var _i201=0;_i201<nextStates.length&&result.length<4;_i201+=2){var _s2=nextStates[_i201+1];if(_s2==this.state)continue;var stack=this.split();stack.pushState(_s2,this.pos);stack.storeNode(0,stack.pos,stack.pos,4,true);stack.shiftContext(nextStates[_i201],this.pos);stack.reducePos=this.pos;stack.score-=200;result.push(stack);}return result;}},{key:"forceReduce",value:function forceReduce(){var parser5=this.p.parser;var reduce=parser5.stateSlot(this.state,5);if((reduce&65536)==0)return false;if(!parser5.validAction(this.state,reduce)){var depth=reduce>>19,term=reduce&65535;var target=this.stack.length-depth*3;if(target<0||parser5.getGoto(this.stack[target],term,false)<0){var backup=this.findForcedReduction();if(backup==null)return false;reduce=backup;}this.storeNode(0,this.pos,this.pos,4,true);this.score-=100;}this.reducePos=this.pos;this.reduce(reduce);return true;}},{key:"findForcedReduction",value:function findForcedReduction(){var _this105=this;var parser5=this.p.parser,seen=[];var _explore2=function explore(state,depth){if(seen.includes(state))return;seen.push(state);return parser5.allActions(state,function(action){if(action&(262144|131072));else if(action&65536){var rDepth=(action>>19)-depth;if(rDepth>1){var term=action&65535,target=_this105.stack.length-rDepth*3;if(target>=0&&parser5.getGoto(_this105.stack[target],term,false)>=0)return rDepth<<19|65536|term;}}else{var found=_explore2(action,depth+1);if(found!=null)return found;}});};return _explore2(this.state,0);}},{key:"forceAll",value:function forceAll(){while(!this.p.parser.stateFlag(this.state,2)){if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,true);break;}}return this;}},{key:"deadEnd",get:function get(){if(this.stack.length!=3)return false;var parser5=this.p.parser;return parser5.data[parser5.stateSlot(this.state,1)]==65535&&!parser5.stateSlot(this.state,4);}},{key:"restart",value:function restart(){this.storeNode(0,this.pos,this.pos,4,true);this.state=this.stack[0];this.stack.length=0;}},{key:"sameState",value:function sameState(other){if(this.state!=other.state||this.stack.length!=other.stack.length)return false;for(var _i202=0;_i202<this.stack.length;_i202+=3)if(this.stack[_i202]!=other.stack[_i202])return false;return true;}},{key:"parser",get:function get(){return this.p.parser;}},{key:"dialectEnabled",value:function dialectEnabled(dialectID){return this.p.parser.dialect.flags[dialectID];}},{key:"shiftContext",value:function shiftContext(term,start){if(this.curContext)this.updateContext(this.curContext.tracker.shift(this.curContext.context,term,this,this.p.stream.reset(start)));}},{key:"reduceContext",value:function reduceContext(term,start){if(this.curContext)this.updateContext(this.curContext.tracker.reduce(this.curContext.context,term,this,this.p.stream.reset(start)));}},{key:"emitContext",value:function emitContext(){var last=this.buffer.length-1;if(last<0||this.buffer[last]!=-3)this.buffer.push(this.curContext.hash,this.pos,this.pos,-3);}},{key:"emitLookAhead",value:function emitLookAhead(){var last=this.buffer.length-1;if(last<0||this.buffer[last]!=-4)this.buffer.push(this.lookAhead,this.pos,this.pos,-4);}},{key:"updateContext",value:function updateContext(context){if(context!=this.curContext.context){var newCx=new StackContext(this.curContext.tracker,context);if(newCx.hash!=this.curContext.hash)this.emitContext();this.curContext=newCx;}}},{key:"setLookAhead",value:function setLookAhead(lookAhead){if(lookAhead>this.lookAhead){this.emitLookAhead();this.lookAhead=lookAhead;}}},{key:"close",value:function close(){if(this.curContext&&this.curContext.tracker.strict)this.emitContext();if(this.lookAhead>0)this.emitLookAhead();}}],[{key:"start",value:function start(p,state){var pos=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var cx=p.parser.context;return new _Stack(p,[],state,pos,pos,0,[],0,cx?new StackContext(cx,cx.start):null,0,null);}}]);}();var StackContext=/*#__PURE__*/_createClass(function StackContext(tracker,context){_classCallCheck(this,StackContext);this.tracker=tracker;this.context=context;this.hash=tracker.strict?tracker.hash(context):0;});var SimulatedStack=/*#__PURE__*/function(){function SimulatedStack(start){_classCallCheck(this,SimulatedStack);this.start=start;this.state=start.state;this.stack=start.stack;this.base=this.stack.length;}return _createClass(SimulatedStack,[{key:"reduce",value:function reduce(action){var term=action&65535,depth=action>>19;if(depth==0){if(this.stack==this.start.stack)this.stack=this.stack.slice();this.stack.push(this.state,0,0);this.base+=3;}else{this.base-=(depth-1)*3;}var _goto4=this.start.p.parser.getGoto(this.stack[this.base-3],term,true);this.state=_goto4;}}]);}();var _StackBufferCursor=/*#__PURE__*/function(){function StackBufferCursor(stack,pos,index){_classCallCheck(this,StackBufferCursor);this.stack=stack;this.pos=pos;this.index=index;this.buffer=stack.buffer;if(this.index==0)this.maybeNext();}return _createClass(StackBufferCursor,[{key:"maybeNext",value:function maybeNext(){var next=this.stack.parent;if(next!=null){this.index=this.stack.bufferBase-next.bufferBase;this.stack=next;this.buffer=next.buffer;}}},{key:"id",get:function get(){return this.buffer[this.index-4];}},{key:"start",get:function get(){return this.buffer[this.index-3];}},{key:"end",get:function get(){return this.buffer[this.index-2];}},{key:"size",get:function get(){return this.buffer[this.index-1];}},{key:"next",value:function next(){this.index-=4;this.pos-=4;if(this.index==0)this.maybeNext();}},{key:"fork",value:function fork(){return new _StackBufferCursor(this.stack,this.pos,this.index);}}],[{key:"create",value:function create(stack){var pos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:stack.bufferBase+stack.buffer.length;return new _StackBufferCursor(stack,pos,pos-stack.bufferBase);}}]);}();function decodeArray(input){var Type2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Uint16Array;if(typeof input!="string")return input;var array=null;for(var pos=0,out=0;pos<input.length;){var value=0;for(;;){var next=input.charCodeAt(pos++),stop=false;if(next==126){value=65535;break;}if(next>=92)next--;if(next>=34)next--;var digit=next-32;if(digit>=46){digit-=46;stop=true;}value+=digit;if(stop)break;value*=46;}if(array)array[out++]=value;else array=new Type2(value);}return array;}var CachedToken=/*#__PURE__*/_createClass(function CachedToken(){_classCallCheck(this,CachedToken);this.start=-1;this.value=-1;this.end=-1;this.extended=-1;this.lookAhead=0;this.mask=0;this.context=0;});var nullToken=new CachedToken();var InputStream=/*#__PURE__*/function(){function InputStream(input,ranges){_classCallCheck(this,InputStream);this.input=input;this.ranges=ranges;this.chunk="";this.chunkOff=0;this.chunk2="";this.chunk2Pos=0;this.next=-1;this.token=nullToken;this.rangeIndex=0;this.pos=this.chunkPos=ranges[0].from;this.range=ranges[0];this.end=ranges[ranges.length-1].to;this.readNext();}return _createClass(InputStream,[{key:"resolveOffset",value:function resolveOffset(offset,assoc){var range=this.range,index=this.rangeIndex;var pos=this.pos+offset;while(pos<range.from){if(!index)return null;var next=this.ranges[--index];pos-=range.from-next.to;range=next;}while(assoc<0?pos>range.to:pos>=range.to){if(index==this.ranges.length-1)return null;var _next5=this.ranges[++index];pos+=_next5.from-range.to;range=_next5;}return pos;}},{key:"clipPos",value:function clipPos(pos){if(pos>=this.range.from&&pos<this.range.to)return pos;var _iterator278=_createForOfIteratorHelper(this.ranges),_step278;try{for(_iterator278.s();!(_step278=_iterator278.n()).done;){var range=_step278.value;if(range.to>pos)return Math.max(pos,range.from);}}catch(err){_iterator278.e(err);}finally{_iterator278.f();}return this.end;}},{key:"peek",value:function peek(offset){var idx=this.chunkOff+offset,pos,result;if(idx>=0&&idx<this.chunk.length){pos=this.pos+offset;result=this.chunk.charCodeAt(idx);}else{var resolved=this.resolveOffset(offset,1);if(resolved==null)return-1;pos=resolved;if(pos>=this.chunk2Pos&&pos<this.chunk2Pos+this.chunk2.length){result=this.chunk2.charCodeAt(pos-this.chunk2Pos);}else{var _i203=this.rangeIndex,range=this.range;while(range.to<=pos)range=this.ranges[++_i203];this.chunk2=this.input.chunk(this.chunk2Pos=pos);if(pos+this.chunk2.length>range.to)this.chunk2=this.chunk2.slice(0,range.to-pos);result=this.chunk2.charCodeAt(0);}}if(pos>=this.token.lookAhead)this.token.lookAhead=pos+1;return result;}},{key:"acceptToken",value:function acceptToken(token){var endOffset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var end=endOffset?this.resolveOffset(endOffset,-1):this.pos;if(end==null||end<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=token;this.token.end=end;}},{key:"acceptTokenTo",value:function acceptTokenTo(token,endPos){this.token.value=token;this.token.end=endPos;}},{key:"getChunk",value:function getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){var chunk=this.chunk,chunkPos=this.chunkPos;this.chunk=this.chunk2;this.chunkPos=this.chunk2Pos;this.chunk2=chunk;this.chunk2Pos=chunkPos;this.chunkOff=this.pos-this.chunkPos;}else{this.chunk2=this.chunk;this.chunk2Pos=this.chunkPos;var nextChunk=this.input.chunk(this.pos);var end=this.pos+nextChunk.length;this.chunk=end>this.range.to?nextChunk.slice(0,this.range.to-this.pos):nextChunk;this.chunkPos=this.pos;this.chunkOff=0;}}},{key:"readNext",value:function readNext(){if(this.chunkOff>=this.chunk.length){this.getChunk();if(this.chunkOff==this.chunk.length)return this.next=-1;}return this.next=this.chunk.charCodeAt(this.chunkOff);}},{key:"advance",value:function advance(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.chunkOff+=n;while(this.pos+n>=this.range.to){if(this.rangeIndex==this.ranges.length-1)return this.setDone();n-=this.range.to-this.pos;this.range=this.ranges[++this.rangeIndex];this.pos=this.range.from;}this.pos+=n;if(this.pos>=this.token.lookAhead)this.token.lookAhead=this.pos+1;return this.readNext();}},{key:"setDone",value:function setDone(){this.pos=this.chunkPos=this.end;this.range=this.ranges[this.rangeIndex=this.ranges.length-1];this.chunk="";return this.next=-1;}},{key:"reset",value:function reset(pos,token){if(token){this.token=token;token.start=pos;token.lookAhead=pos+1;token.value=token.extended=-1;}else{this.token=nullToken;}if(this.pos!=pos){this.pos=pos;if(pos==this.end){this.setDone();return this;}while(pos<this.range.from)this.range=this.ranges[--this.rangeIndex];while(pos>=this.range.to)this.range=this.ranges[++this.rangeIndex];if(pos>=this.chunkPos&&pos<this.chunkPos+this.chunk.length){this.chunkOff=pos-this.chunkPos;}else{this.chunk="";this.chunkOff=0;}this.readNext();}return this;}},{key:"read",value:function read(from,to){if(from>=this.chunkPos&&to<=this.chunkPos+this.chunk.length)return this.chunk.slice(from-this.chunkPos,to-this.chunkPos);if(from>=this.chunk2Pos&&to<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(from-this.chunk2Pos,to-this.chunk2Pos);if(from>=this.range.from&&to<=this.range.to)return this.input.read(from,to);var result="";var _iterator279=_createForOfIteratorHelper(this.ranges),_step279;try{for(_iterator279.s();!(_step279=_iterator279.n()).done;){var _r13=_step279.value;if(_r13.from>=to)break;if(_r13.to>from)result+=this.input.read(Math.max(_r13.from,from),Math.min(_r13.to,to));}}catch(err){_iterator279.e(err);}finally{_iterator279.f();}return result;}}]);}();var TokenGroup=/*#__PURE__*/function(){function TokenGroup(data2,id2){_classCallCheck(this,TokenGroup);this.data=data2;this.id=id2;}return _createClass(TokenGroup,[{key:"token",value:function token(input,stack){var parser5=stack.p.parser;readToken2(this.data,input,stack,this.id,parser5.data,parser5.tokenPrecTable);}}]);}();TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=false;var LocalTokenGroup=/*#__PURE__*/function(){function LocalTokenGroup(data2,precTable,elseToken){_classCallCheck(this,LocalTokenGroup);this.precTable=precTable;this.elseToken=elseToken;this.data=typeof data2=="string"?decodeArray(data2):data2;}return _createClass(LocalTokenGroup,[{key:"token",value:function token(input,stack){var start=input.pos,skipped=0;for(;;){var atEof=input.next<0,nextPos=input.resolveOffset(1,1);readToken2(this.data,input,stack,0,this.data,this.precTable);if(input.token.value>-1)break;if(this.elseToken==null)return;if(!atEof)skipped++;if(nextPos==null)break;input.reset(nextPos,input.token);}if(skipped){input.reset(start,input.token);input.acceptToken(this.elseToken,skipped);}}}]);}();LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=false;var ExternalTokenizer=/*#__PURE__*/_createClass(function ExternalTokenizer(token){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ExternalTokenizer);this.token=token;this.contextual=!!options.contextual;this.fallback=!!options.fallback;this.extend=!!options.extend;});function readToken2(data2,input,stack,group,precTable,precOffset){var state=0,groupMask=1<<group,dialect=stack.p.parser.dialect;scan:for(;;){if((groupMask&data2[state])==0)break;var accEnd=data2[state+1];for(var _i204=state+3;_i204<accEnd;_i204+=2)if((data2[_i204+1]&groupMask)>0){var term=data2[_i204];if(dialect.allows(term)&&(input.token.value==-1||input.token.value==term||overrides(term,input.token.value,precTable,precOffset))){input.acceptToken(term);break;}}var next=input.next,low=0,high=data2[state+2];if(input.next<0&&high>low&&data2[accEnd+high*3-3]==65535){state=data2[accEnd+high*3-1];continue scan;}for(;low<high;){var mid=low+high>>1;var index=accEnd+mid+(mid<<1);var from=data2[index],to=data2[index+1]||65536;if(next<from)high=mid;else if(next>=to)low=mid+1;else{state=data2[index+2];input.advance();continue scan;}}break;}}function findOffset(data2,start,term){for(var _i205=start,next;(next=data2[_i205])!=65535;_i205++)if(next==term)return _i205-start;return-1;}function overrides(token,prev,tableData,tableOffset){var iPrev=findOffset(tableData,tableOffset,prev);return iPrev<0||findOffset(tableData,tableOffset,token)<iPrev;}var verbose=typeof process!="undefined"&&process.env&&/\bparse\b/.test(process.env.LOG);var stackIDs=null;function cutAt(tree,pos,side){var cursor2=tree.cursor(IterMode.IncludeAnonymous);cursor2.moveTo(pos);for(;;){if(!(side<0?cursor2.childBefore(pos):cursor2.childAfter(pos)))for(;;){if((side<0?cursor2.to<pos:cursor2.from>pos)&&!cursor2.type.isError)return side<0?Math.max(0,Math.min(cursor2.to-1,pos-25)):Math.min(tree.length,Math.max(cursor2.from+1,pos+25));if(side<0?cursor2.prevSibling():cursor2.nextSibling())break;if(!cursor2.parent())return side<0?0:tree.length;}}}var FragmentCursor3=/*#__PURE__*/function(){function FragmentCursor3(fragments,nodeSet2){_classCallCheck(this,FragmentCursor3);this.fragments=fragments;this.nodeSet=nodeSet2;this.i=0;this.fragment=null;this.safeFrom=-1;this.safeTo=-1;this.trees=[];this.start=[];this.index=[];this.nextFragment();}return _createClass(FragmentCursor3,[{key:"nextFragment",value:function nextFragment(){var fr=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(fr){this.safeFrom=fr.openStart?cutAt(fr.tree,fr.from+fr.offset,1)-fr.offset:fr.from;this.safeTo=fr.openEnd?cutAt(fr.tree,fr.to+fr.offset,-1)-fr.offset:fr.to;while(this.trees.length){this.trees.pop();this.start.pop();this.index.pop();}this.trees.push(fr.tree);this.start.push(-fr.offset);this.index.push(0);this.nextStart=this.safeFrom;}else{this.nextStart=1e9;}}},{key:"nodeAt",value:function nodeAt(pos){if(pos<this.nextStart)return null;while(this.fragment&&this.safeTo<=pos)this.nextFragment();if(!this.fragment)return null;for(;;){var last=this.trees.length-1;if(last<0){this.nextFragment();return null;}var top2=this.trees[last],index=this.index[last];if(index==top2.children.length){this.trees.pop();this.start.pop();this.index.pop();continue;}var next=top2.children[index];var start=this.start[last]+top2.positions[index];if(start>pos){this.nextStart=start;return null;}if(next instanceof _Tree){if(start==pos){if(start<this.safeFrom)return null;var end=start+next.length;if(end<=this.safeTo){var lookAhead=next.prop(NodeProp.lookAhead);if(!lookAhead||end+lookAhead<this.fragment.to)return next;}}this.index[last]++;if(start+next.length>=Math.max(this.safeFrom,pos)){this.trees.push(next);this.start.push(start);this.index.push(0);}}else{this.index[last]++;this.nextStart=start+next.length;}}}}]);}();var TokenCache=/*#__PURE__*/function(){function TokenCache(parser5,stream){_classCallCheck(this,TokenCache);this.stream=stream;this.tokens=[];this.mainToken=null;this.actions=[];this.tokens=parser5.tokenizers.map(function(_){return new CachedToken();});}return _createClass(TokenCache,[{key:"getActions",value:function getActions(stack){var actionIndex=0;var main=null;var parser5=stack.p.parser,tokenizers=parser5.tokenizers;var mask=parser5.stateSlot(stack.state,3);var context=stack.curContext?stack.curContext.hash:0;var lookAhead=0;for(var _i206=0;_i206<tokenizers.length;_i206++){if((1<<_i206&mask)==0)continue;var tokenizer=tokenizers[_i206],token=this.tokens[_i206];if(main&&!tokenizer.fallback)continue;if(tokenizer.contextual||token.start!=stack.pos||token.mask!=mask||token.context!=context){this.updateCachedToken(token,tokenizer,stack);token.mask=mask;token.context=context;}if(token.lookAhead>token.end+25)lookAhead=Math.max(token.lookAhead,lookAhead);if(token.value!=0){var startIndex=actionIndex;if(token.extended>-1)actionIndex=this.addActions(stack,token.extended,token.end,actionIndex);actionIndex=this.addActions(stack,token.value,token.end,actionIndex);if(!tokenizer.extend){main=token;if(actionIndex>startIndex)break;}}}while(this.actions.length>actionIndex)this.actions.pop();if(lookAhead)stack.setLookAhead(lookAhead);if(!main&&stack.pos==this.stream.end){main=new CachedToken();main.value=stack.p.parser.eofTerm;main.start=main.end=stack.pos;actionIndex=this.addActions(stack,main.value,main.end,actionIndex);}this.mainToken=main;return this.actions;}},{key:"getMainToken",value:function getMainToken(stack){if(this.mainToken)return this.mainToken;var main=new CachedToken(),pos=stack.pos,p=stack.p;main.start=pos;main.end=Math.min(pos+1,p.stream.end);main.value=pos==p.stream.end?p.parser.eofTerm:0;return main;}},{key:"updateCachedToken",value:function updateCachedToken(token,tokenizer,stack){var start=this.stream.clipPos(stack.pos);tokenizer.token(this.stream.reset(start,token),stack);if(token.value>-1){var parser5=stack.p.parser;for(var _i207=0;_i207<parser5.specialized.length;_i207++)if(parser5.specialized[_i207]==token.value){var result=parser5.specializers[_i207](this.stream.read(token.start,token.end),stack);if(result>=0&&stack.p.parser.dialect.allows(result>>1)){if((result&1)==0)token.value=result>>1;else token.extended=result>>1;break;}}}else{token.value=0;token.end=this.stream.clipPos(start+1);}}},{key:"putAction",value:function putAction(action,token,end,index){for(var _i208=0;_i208<index;_i208+=3)if(this.actions[_i208]==action)return index;this.actions[index++]=action;this.actions[index++]=token;this.actions[index++]=end;return index;}},{key:"addActions",value:function addActions(stack,token,end,index){var state=stack.state,parser5=stack.p.parser,data2=parser5.data;for(var set=0;set<2;set++){for(var _i209=parser5.stateSlot(state,set?2:1);;_i209+=3){if(data2[_i209]==65535){if(data2[_i209+1]==1){_i209=pair(data2,_i209+2);}else{if(index==0&&data2[_i209+1]==2)index=this.putAction(pair(data2,_i209+2),token,end,index);break;}}if(data2[_i209]==token)index=this.putAction(pair(data2,_i209+1),token,end,index);}}return index;}}]);}();var Parse2=/*#__PURE__*/function(){function Parse2(parser5,input,fragments,ranges){_classCallCheck(this,Parse2);this.parser=parser5;this.input=input;this.ranges=ranges;this.recovering=0;this.nextStackID=9812;this.minStackPos=0;this.reused=[];this.stoppedAt=null;this.lastBigReductionStart=-1;this.lastBigReductionSize=0;this.bigReductionCount=0;this.stream=new InputStream(input,ranges);this.tokens=new TokenCache(parser5,this.stream);this.topTerm=parser5.top[1];var from=ranges[0].from;this.stacks=[_Stack.start(this,parser5.top[0],from)];this.fragments=fragments.length&&this.stream.end-from>parser5.bufferLength*4?new FragmentCursor3(fragments,parser5.nodeSet):null;}return _createClass(Parse2,[{key:"parsedPos",get:function get(){return this.minStackPos;}},{key:"advance",value:function advance(){var stacks=this.stacks,pos=this.minStackPos;var newStacks=this.stacks=[];var stopped,stoppedTokens;if(this.bigReductionCount>300&&stacks.length==1){var _stacks=_slicedToArray(stacks,1),s=_stacks[0];while(s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart){}this.bigReductionCount=this.lastBigReductionSize=0;}for(var _i210=0;_i210<stacks.length;_i210++){var stack=stacks[_i210];for(;;){this.tokens.mainToken=null;if(stack.pos>pos){newStacks.push(stack);}else if(this.advanceStack(stack,newStacks,stacks)){continue;}else{if(!stopped){stopped=[];stoppedTokens=[];}stopped.push(stack);var tok=this.tokens.getMainToken(stack);stoppedTokens.push(tok.value,tok.end);}break;}}if(!newStacks.length){var finished=stopped&&findFinished(stopped);if(finished){if(verbose)console.log("Finish with "+this.stackID(finished));return this.stackToTree(finished);}if(this.parser.strict){if(verbose&&stopped)console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none"));throw new SyntaxError("No parse at "+pos);}if(!this.recovering)this.recovering=5;}if(this.recovering&&stopped){var _finished=this.stoppedAt!=null&&stopped[0].pos>this.stoppedAt?stopped[0]:this.runRecovery(stopped,stoppedTokens,newStacks);if(_finished){if(verbose)console.log("Force-finish "+this.stackID(_finished));return this.stackToTree(_finished.forceAll());}}if(this.recovering){var maxRemaining=this.recovering==1?1:this.recovering*3;if(newStacks.length>maxRemaining){newStacks.sort(function(a,b){return b.score-a.score;});while(newStacks.length>maxRemaining)newStacks.pop();}if(newStacks.some(function(s){return s.reducePos>pos;}))this.recovering--;}else if(newStacks.length>1){outer:for(var _i211=0;_i211<newStacks.length-1;_i211++){var _stack=newStacks[_i211];for(var j=_i211+1;j<newStacks.length;j++){var other=newStacks[j];if(_stack.sameState(other)||_stack.buffer.length>500&&other.buffer.length>500){if((_stack.score-other.score||_stack.buffer.length-other.buffer.length)>0){newStacks.splice(j--,1);}else{newStacks.splice(_i211--,1);continue outer;}}}}if(newStacks.length>12)newStacks.splice(12,newStacks.length-12);}this.minStackPos=newStacks[0].pos;for(var _i212=1;_i212<newStacks.length;_i212++)if(newStacks[_i212].pos<this.minStackPos)this.minStackPos=newStacks[_i212].pos;return null;}},{key:"stopAt",value:function stopAt(pos){if(this.stoppedAt!=null&&this.stoppedAt<pos)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=pos;}},{key:"advanceStack",value:function advanceStack(stack,stacks,split){var start=stack.pos,parser5=this.parser;var base2=verbose?this.stackID(stack)+" -> ":"";if(this.stoppedAt!=null&&start>this.stoppedAt)return stack.forceReduce()?stack:null;if(this.fragments){var strictCx=stack.curContext&&stack.curContext.tracker.strict,cxHash=strictCx?stack.curContext.hash:0;for(var cached=this.fragments.nodeAt(start);cached;){var match=this.parser.nodeSet.types[cached.type.id]==cached.type?parser5.getGoto(stack.state,cached.type.id):-1;if(match>-1&&cached.length&&(!strictCx||(cached.prop(NodeProp.contextHash)||0)==cxHash)){stack.useNode(cached,match);if(verbose)console.log(base2+this.stackID(stack)+" (via reuse of ".concat(parser5.getName(cached.type.id),")"));return true;}if(!(cached instanceof _Tree)||cached.children.length==0||cached.positions[0]>0)break;var inner=cached.children[0];if(inner instanceof _Tree&&cached.positions[0]==0)cached=inner;else break;}}var defaultReduce=parser5.stateSlot(stack.state,4);if(defaultReduce>0){stack.reduce(defaultReduce);if(verbose)console.log(base2+this.stackID(stack)+" (via always-reduce ".concat(parser5.getName(defaultReduce&65535),")"));return true;}if(stack.stack.length>=8400){while(stack.stack.length>6e3&&stack.forceReduce()){}}var actions=this.tokens.getActions(stack);for(var _i213=0;_i213<actions.length;){var action=actions[_i213++],term=actions[_i213++],end=actions[_i213++];var last=_i213==actions.length||!split;var localStack=last?stack:stack.split();var main=this.tokens.mainToken;localStack.apply(action,term,main?main.start:localStack.pos,end);if(verbose)console.log(base2+this.stackID(localStack)+" (via ".concat((action&65536)==0?"shift":"reduce of ".concat(parser5.getName(action&65535))," for ").concat(parser5.getName(term)," @ ").concat(start).concat(localStack==stack?"":", split",")"));if(last)return true;else if(localStack.pos>start)stacks.push(localStack);else split.push(localStack);}return false;}},{key:"advanceFully",value:function advanceFully(stack,newStacks){var pos=stack.pos;for(;;){if(!this.advanceStack(stack,null,null))return false;if(stack.pos>pos){pushStackDedup(stack,newStacks);return true;}}}},{key:"runRecovery",value:function runRecovery(stacks,tokens,newStacks){var finished=null,restarted=false;for(var _i214=0;_i214<stacks.length;_i214++){var stack=stacks[_i214],token=tokens[_i214<<1],tokenEnd=tokens[(_i214<<1)+1];var base2=verbose?this.stackID(stack)+" -> ":"";if(stack.deadEnd){if(restarted)continue;restarted=true;stack.restart();if(verbose)console.log(base2+this.stackID(stack)+" (restarted)");var done=this.advanceFully(stack,newStacks);if(done)continue;}var force=stack.split(),forceBase=base2;for(var j=0;force.forceReduce()&&j<10;j++){if(verbose)console.log(forceBase+this.stackID(force)+" (via force-reduce)");var _done=this.advanceFully(force,newStacks);if(_done)break;if(verbose)forceBase=this.stackID(force)+" -> ";}var _iterator280=_createForOfIteratorHelper(stack.recoverByInsert(token)),_step280;try{for(_iterator280.s();!(_step280=_iterator280.n()).done;){var insert2=_step280.value;if(verbose)console.log(base2+this.stackID(insert2)+" (via recover-insert)");this.advanceFully(insert2,newStacks);}}catch(err){_iterator280.e(err);}finally{_iterator280.f();}if(this.stream.end>stack.pos){if(tokenEnd==stack.pos){tokenEnd++;token=0;}stack.recoverByDelete(token,tokenEnd);if(verbose)console.log(base2+this.stackID(stack)+" (via recover-delete ".concat(this.parser.getName(token),")"));pushStackDedup(stack,newStacks);}else if(!finished||finished.score<stack.score){finished=stack;}}return finished;}},{key:"stackToTree",value:function stackToTree(stack){stack.close();return _Tree.build({buffer:_StackBufferCursor.create(stack),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:stack.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm});}},{key:"stackID",value:function stackID(stack){var id2=(stackIDs||(stackIDs=/* @__PURE__ */new WeakMap())).get(stack);if(!id2)stackIDs.set(stack,id2=String.fromCodePoint(this.nextStackID++));return id2+stack;}}]);}();function pushStackDedup(stack,newStacks){for(var _i215=0;_i215<newStacks.length;_i215++){var other=newStacks[_i215];if(other.pos==stack.pos&&other.sameState(stack)){if(newStacks[_i215].score<stack.score)newStacks[_i215]=stack;return;}}newStacks.push(stack);}var Dialect=/*#__PURE__*/function(){function Dialect(source,flags,disabled){_classCallCheck(this,Dialect);this.source=source;this.flags=flags;this.disabled=disabled;}return _createClass(Dialect,[{key:"allows",value:function allows(term){return!this.disabled||this.disabled[term]==0;}}]);}();var id=function id(x){return x;};var ContextTracker=/*#__PURE__*/_createClass(function ContextTracker(spec){_classCallCheck(this,ContextTracker);this.start=spec.start;this.shift=spec.shift||id;this.reduce=spec.reduce||id;this.reuse=spec.reuse||id;this.hash=spec.hash||function(){return 0;};this.strict=spec.strict!==false;});var _LRParser=/*#__PURE__*/function(_Parser4){function LRParser(spec){var _this106$nodeSet;var _this106;_classCallCheck(this,LRParser);_this106=_callSuper(this,LRParser);_this106.wrappers=[];if(spec.version!=14)throw new RangeError("Parser version (".concat(spec.version,") doesn't match runtime version (",14,")"));var nodeNames=spec.nodeNames.split(" ");_this106.minRepeatTerm=nodeNames.length;for(var _i216=0;_i216<spec.repeatNodeCount;_i216++)nodeNames.push("");var topTerms=Object.keys(spec.topRules).map(function(r){return spec.topRules[r][1];});var nodeProps=[];for(var _i217=0;_i217<nodeNames.length;_i217++)nodeProps.push([]);function setProp(nodeID,prop,value){nodeProps[nodeID].push([prop,prop.deserialize(String(value))]);}if(spec.nodeProps){var _iterator281=_createForOfIteratorHelper(spec.nodeProps),_step281;try{for(_iterator281.s();!(_step281=_iterator281.n()).done;){var propSpec=_step281.value;var prop=propSpec[0];if(typeof prop=="string")prop=NodeProp[prop];for(var _i218=1;_i218<propSpec.length;){var next=propSpec[_i218++];if(next>=0){setProp(next,prop,propSpec[_i218++]);}else{var value=propSpec[_i218+-next];for(var j=-next;j>0;j--)setProp(propSpec[_i218++],prop,value);_i218++;}}}}catch(err){_iterator281.e(err);}finally{_iterator281.f();}}_this106.nodeSet=new _NodeSet(nodeNames.map(function(name2,i){return _NodeType.define({name:i>=_this106.minRepeatTerm?void 0:name2,id:i,props:nodeProps[i],top:topTerms.indexOf(i)>-1,error:i==0,skipped:spec.skippedNodes&&spec.skippedNodes.indexOf(i)>-1});}));if(spec.propSources)_this106.nodeSet=(_this106$nodeSet=_this106.nodeSet).extend.apply(_this106$nodeSet,_toConsumableArray(spec.propSources));_this106.strict=false;_this106.bufferLength=DefaultBufferLength;var tokenArray=decodeArray(spec.tokenData);_this106.context=spec.context;_this106.specializerSpecs=spec.specialized||[];_this106.specialized=new Uint16Array(_this106.specializerSpecs.length);for(var _i219=0;_i219<_this106.specializerSpecs.length;_i219++)_this106.specialized[_i219]=_this106.specializerSpecs[_i219].term;_this106.specializers=_this106.specializerSpecs.map(getSpecializer);_this106.states=decodeArray(spec.states,Uint32Array);_this106.data=decodeArray(spec.stateData);_this106["goto"]=decodeArray(spec["goto"]);_this106.maxTerm=spec.maxTerm;_this106.tokenizers=spec.tokenizers.map(function(value){return typeof value=="number"?new TokenGroup(tokenArray,value):value;});_this106.topRules=spec.topRules;_this106.dialects=spec.dialects||{};_this106.dynamicPrecedences=spec.dynamicPrecedences||null;_this106.tokenPrecTable=spec.tokenPrec;_this106.termNames=spec.termNames||null;_this106.maxNode=_this106.nodeSet.types.length-1;_this106.dialect=_this106.parseDialect();_this106.top=_this106.topRules[Object.keys(_this106.topRules)[0]];return _this106;}_inherits(LRParser,_Parser4);return _createClass(LRParser,[{key:"createParse",value:function createParse(input,fragments,ranges){var parse=new Parse2(this,input,fragments,ranges);var _iterator282=_createForOfIteratorHelper(this.wrappers),_step282;try{for(_iterator282.s();!(_step282=_iterator282.n()).done;){var w=_step282.value;parse=w(parse,input,fragments,ranges);}}catch(err){_iterator282.e(err);}finally{_iterator282.f();}return parse;}},{key:"getGoto",value:function getGoto(state,term){var loose=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var table=this["goto"];if(term>=table[0])return-1;for(var pos=table[term+1];;){var groupTag=table[pos++],last=groupTag&1;var target=table[pos++];if(last&&loose)return target;for(var end=pos+(groupTag>>1);pos<end;pos++)if(table[pos]==state)return target;if(last)return-1;}}},{key:"hasAction",value:function hasAction(state,terminal){var data2=this.data;for(var set=0;set<2;set++){for(var _i220=this.stateSlot(state,set?2:1),next;;_i220+=3){if((next=data2[_i220])==65535){if(data2[_i220+1]==1)next=data2[_i220=pair(data2,_i220+2)];else if(data2[_i220+1]==2)return pair(data2,_i220+2);else break;}if(next==terminal||next==0)return pair(data2,_i220+1);}}return 0;}},{key:"stateSlot",value:function stateSlot(state,slot){return this.states[state*6+slot];}},{key:"stateFlag",value:function stateFlag(state,flag){return(this.stateSlot(state,0)&flag)>0;}},{key:"validAction",value:function validAction(state,action){return!!this.allActions(state,function(a){return a==action?true:null;});}},{key:"allActions",value:function allActions(state,action){var deflt=this.stateSlot(state,4);var result=deflt?action(deflt):void 0;for(var _i221=this.stateSlot(state,1);result==null;_i221+=3){if(this.data[_i221]==65535){if(this.data[_i221+1]==1)_i221=pair(this.data,_i221+2);else break;}result=action(pair(this.data,_i221+1));}return result;}},{key:"nextStates",value:function nextStates(state){var _this107=this;var result=[];var _loop22=function _loop22(_i223){if(_this107.data[_i223]==65535){if(_this107.data[_i223+1]==1)_i223=pair(_this107.data,_i223+2);else{_i222=_i223;return 1;}// break
}if((_this107.data[_i223+2]&65536>>16)==0){var value=_this107.data[_i223+1];if(!result.some(function(v,i2){return i2&1&&v==value;}))result.push(_this107.data[_i223],value);}_i222=_i223;};for(var _i222=this.stateSlot(state,1);;_i222+=3){if(_loop22(_i222))break;}return result;}},{key:"configure",value:function configure(config2){var _this$nodeSet;var copy=Object.assign(Object.create(_LRParser.prototype),this);if(config2.props)copy.nodeSet=(_this$nodeSet=this.nodeSet).extend.apply(_this$nodeSet,_toConsumableArray(config2.props));if(config2.top){var info=this.topRules[config2.top];if(!info)throw new RangeError("Invalid top rule name ".concat(config2.top));copy.top=info;}if(config2.tokenizers)copy.tokenizers=this.tokenizers.map(function(t2){var found=config2.tokenizers.find(function(r){return r.from==t2;});return found?found.to:t2;});if(config2.specializers){copy.specializers=this.specializers.slice();copy.specializerSpecs=this.specializerSpecs.map(function(s,i){var found=config2.specializers.find(function(r){return r.from==s.external;});if(!found)return s;var spec=Object.assign(Object.assign({},s),{external:found.to});copy.specializers[i]=getSpecializer(spec);return spec;});}if(config2.contextTracker)copy.context=config2.contextTracker;if(config2.dialect)copy.dialect=this.parseDialect(config2.dialect);if(config2.strict!=null)copy.strict=config2.strict;if(config2.wrap)copy.wrappers=copy.wrappers.concat(config2.wrap);if(config2.bufferLength!=null)copy.bufferLength=config2.bufferLength;return copy;}},{key:"hasWrappers",value:function hasWrappers(){return this.wrappers.length>0;}},{key:"getName",value:function getName(term){return this.termNames?this.termNames[term]:String(term<=this.maxNode&&this.nodeSet.types[term].name||term);}},{key:"eofTerm",get:function get(){return this.maxNode+1;}},{key:"topNode",get:function get(){return this.nodeSet.types[this.top[1]];}},{key:"dynamicPrecedence",value:function dynamicPrecedence(term){var prec2=this.dynamicPrecedences;return prec2==null?0:prec2[term]||0;}},{key:"parseDialect",value:function parseDialect(dialect){var values2=Object.keys(this.dialects),flags=values2.map(function(){return false;});if(dialect){var _iterator283=_createForOfIteratorHelper(dialect.split(" ")),_step283;try{for(_iterator283.s();!(_step283=_iterator283.n()).done;){var part=_step283.value;var id2=values2.indexOf(part);if(id2>=0)flags[id2]=true;}}catch(err){_iterator283.e(err);}finally{_iterator283.f();}}var disabled=null;for(var _i224=0;_i224<values2.length;_i224++)if(!flags[_i224]){for(var j=this.dialects[values2[_i224]],_id;(_id=this.data[j++])!=65535;)(disabled||(disabled=new Uint8Array(this.maxTerm+1)))[_id]=1;}return new Dialect(dialect,flags,disabled);}}],[{key:"deserialize",value:function deserialize(spec){return new _LRParser(spec);}}]);}(Parser);function pair(data2,off){return data2[off]|data2[off+1]<<16;}function findFinished(stacks){var best=null;var _iterator284=_createForOfIteratorHelper(stacks),_step284;try{for(_iterator284.s();!(_step284=_iterator284.n()).done;){var stack=_step284.value;var stopped=stack.p.stoppedAt;if((stack.pos==stack.p.stream.end||stopped!=null&&stack.pos>stopped)&&stack.p.parser.stateFlag(stack.state,2)&&(!best||best.score<stack.score))best=stack;}}catch(err){_iterator284.e(err);}finally{_iterator284.f();}return best;}function getSpecializer(spec){if(spec.external){var mask=spec.extend?1:0;return function(value,stack){return spec.external(value,stack)<<1|mask;};}return spec.get;}// ../node_modules/@lezer/html/dist/index.js
var scriptText=54;var StartCloseScriptTag=1;var styleText=55;var StartCloseStyleTag=2;var textareaText=56;var StartCloseTextareaTag=3;var EndTag=4;var SelfClosingEndTag=5;var StartTag=6;var StartScriptTag=7;var StartStyleTag=8;var StartTextareaTag=9;var StartSelfClosingTag=10;var StartCloseTag=11;var NoMatchStartCloseTag=12;var MismatchedStartCloseTag=13;var missingCloseTag=57;var IncompleteCloseTag=14;var commentContent$1=58;var Element2=20;var TagName=22;var Attribute=23;var AttributeName=24;var AttributeValue=26;var UnquotedAttributeValue=27;var ScriptText=28;var StyleText=31;var TextareaText=34;var OpenTag=36;var CloseTag=37;var Dialect_noMatch=0;var Dialect_selfClosing=1;var selfClosers={area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true};var implicitlyClosed={dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true};var closeOnOpen={dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}};function nameChar(ch){return ch==45||ch==46||ch==58||ch>=65&&ch<=90||ch==95||ch>=97&&ch<=122||ch>=161;}function isSpace(ch){return ch==9||ch==10||ch==13||ch==32;}var cachedName=null;var cachedInput=null;var cachedPos=0;function tagNameAfter(input,offset){var pos=input.pos+offset;if(cachedPos==pos&&cachedInput==input)return cachedName;var next=input.peek(offset);while(isSpace(next))next=input.peek(++offset);var name2="";for(;;){if(!nameChar(next))break;name2+=String.fromCharCode(next);next=input.peek(++offset);}cachedInput=input;cachedPos=pos;return cachedName=name2?name2.toLowerCase():next==question||next==bang?void 0:null;}var lessThan=60;var greaterThan=62;var slash=47;var question=63;var bang=33;var dash=45;function ElementContext(name2,parent){this.name=name2;this.parent=parent;}var startTagTerms=[StartTag,StartSelfClosingTag,StartScriptTag,StartStyleTag,StartTextareaTag];var elementContext=new ContextTracker({start:null,shift:function shift(context,term,stack,input){return startTagTerms.indexOf(term)>-1?new ElementContext(tagNameAfter(input,1)||"",context):context;},reduce:function reduce(context,term){return term==Element2&&context?context.parent:context;},reuse:function reuse(context,node,stack,input){var type=node.type.id;return type==StartTag||type==OpenTag?new ElementContext(tagNameAfter(input,1)||"",context):context;},strict:false});var tagStart=new ExternalTokenizer(function(input,stack){if(input.next!=lessThan){if(input.next<0&&stack.context)input.acceptToken(missingCloseTag);return;}input.advance();var close=input.next==slash;if(close)input.advance();var name2=tagNameAfter(input,0);if(name2===void 0)return;if(!name2)return input.acceptToken(close?IncompleteCloseTag:StartTag);var parent=stack.context?stack.context.name:null;if(close){if(name2==parent)return input.acceptToken(StartCloseTag);if(parent&&implicitlyClosed[parent])return input.acceptToken(missingCloseTag,-2);if(stack.dialectEnabled(Dialect_noMatch))return input.acceptToken(NoMatchStartCloseTag);for(var cx=stack.context;cx;cx=cx.parent)if(cx.name==name2)return;input.acceptToken(MismatchedStartCloseTag);}else{if(name2=="script")return input.acceptToken(StartScriptTag);if(name2=="style")return input.acceptToken(StartStyleTag);if(name2=="textarea")return input.acceptToken(StartTextareaTag);if(selfClosers.hasOwnProperty(name2))return input.acceptToken(StartSelfClosingTag);if(parent&&closeOnOpen[parent]&&closeOnOpen[parent][name2])input.acceptToken(missingCloseTag,-1);else input.acceptToken(StartTag);}},{contextual:true});var commentContent=new ExternalTokenizer(function(input){for(var dashes=0,_i225=0;;_i225++){if(input.next<0){if(_i225)input.acceptToken(commentContent$1);break;}if(input.next==dash){dashes++;}else if(input.next==greaterThan&&dashes>=2){if(_i225>=3)input.acceptToken(commentContent$1,-2);break;}else{dashes=0;}input.advance();}});function inForeignElement(context){for(;context;context=context.parent)if(context.name=="svg"||context.name=="math")return true;return false;}var endTag=new ExternalTokenizer(function(input,stack){if(input.next==slash&&input.peek(1)==greaterThan){var selfClosing=stack.dialectEnabled(Dialect_selfClosing)||inForeignElement(stack.context);input.acceptToken(selfClosing?SelfClosingEndTag:EndTag,2);}else if(input.next==greaterThan){input.acceptToken(EndTag,1);}});function contentTokenizer(tag,textToken,endToken){var lastState=2+tag.length;return new ExternalTokenizer(function(input){for(var state=0,matchedLen=0,_i226=0;;_i226++){if(input.next<0){if(_i226)input.acceptToken(textToken);break;}if(state==0&&input.next==lessThan||state==1&&input.next==slash||state>=2&&state<lastState&&input.next==tag.charCodeAt(state-2)){state++;matchedLen++;}else if((state==2||state==lastState)&&isSpace(input.next)){matchedLen++;}else if(state==lastState&&input.next==greaterThan){if(_i226>matchedLen)input.acceptToken(textToken,-matchedLen);else input.acceptToken(endToken,-(matchedLen-2));break;}else if((input.next==10||input.next==13)&&_i226){input.acceptToken(textToken,1);break;}else{state=matchedLen=0;}input.advance();}});}var scriptTokens=contentTokenizer("script",scriptText,StartCloseScriptTag);var styleTokens=contentTokenizer("style",styleText,StartCloseStyleTag);var textareaTokens=contentTokenizer("textarea",textareaText,StartCloseTextareaTag);var htmlHighlighting=styleTags({"Text RawText":tags.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags.angleBracket,TagName:tags.tagName,"MismatchedCloseTag/TagName":[tags.tagName,tags.invalid],AttributeName:tags.attributeName,"AttributeValue UnquotedAttributeValue":tags.attributeValue,Is:tags.definitionOperator,"EntityReference CharacterReference":tags.character,Comment:tags.blockComment,ProcessingInst:tags.processingInstruction,DoctypeDecl:tags.documentMeta});var parser2=_LRParser.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~","goto":"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{"Document":[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function getAttrs2(openTag,input){var attrs=/* @__PURE__ */Object.create(null);var _iterator285=_createForOfIteratorHelper(openTag.getChildren(Attribute)),_step285;try{for(_iterator285.s();!(_step285=_iterator285.n()).done;){var att=_step285.value;var _name8=att.getChild(AttributeName),value=att.getChild(AttributeValue)||att.getChild(UnquotedAttributeValue);if(_name8)attrs[input.read(_name8.from,_name8.to)]=!value?"":value.type.id==AttributeValue?input.read(value.from+1,value.to-1):input.read(value.from,value.to);}}catch(err){_iterator285.e(err);}finally{_iterator285.f();}return attrs;}function findTagName(openTag,input){var tagNameNode=openTag.getChild(TagName);return tagNameNode?input.read(tagNameNode.from,tagNameNode.to):" ";}function maybeNest(node,input,tags3){var attrs;var _iterator286=_createForOfIteratorHelper(tags3),_step286;try{for(_iterator286.s();!(_step286=_iterator286.n()).done;){var tag=_step286.value;if(!tag.attrs||tag.attrs(attrs||(attrs=getAttrs2(node.node.parent.firstChild,input))))return{parser:tag.parser};}}catch(err){_iterator286.e(err);}finally{_iterator286.f();}return null;}function configureNesting(){var tags3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var attributes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var script=[],style=[],textarea=[],other=[];var _iterator287=_createForOfIteratorHelper(tags3),_step287;try{for(_iterator287.s();!(_step287=_iterator287.n()).done;){var tag=_step287.value;var array=tag.tag=="script"?script:tag.tag=="style"?style:tag.tag=="textarea"?textarea:other;array.push(tag);}}catch(err){_iterator287.e(err);}finally{_iterator287.f();}var attrs=attributes.length?/* @__PURE__ */Object.create(null):null;var _iterator288=_createForOfIteratorHelper(attributes),_step288;try{for(_iterator288.s();!(_step288=_iterator288.n()).done;){var attr=_step288.value;(attrs[attr.name]||(attrs[attr.name]=[])).push(attr);}}catch(err){_iterator288.e(err);}finally{_iterator288.f();}return parseMixed(function(node,input){var id2=node.type.id;if(id2==ScriptText)return maybeNest(node,input,script);if(id2==StyleText)return maybeNest(node,input,style);if(id2==TextareaText)return maybeNest(node,input,textarea);if(id2==Element2&&other.length){var n=node.node,open=n.firstChild,tagName=open&&findTagName(open,input),attrs2;if(tagName)for(var _i227=0,_other=other;_i227<_other.length;_i227++){var tag=_other[_i227];if(tag.tag==tagName&&(!tag.attrs||tag.attrs(attrs2||(attrs2=getAttrs2(open,input))))){var close=n.lastChild;var to=close.type.id==CloseTag?close.from:n.to;if(to>open.to)return{parser:tag.parser,overlay:[{from:open.to,to:to}]};}}}if(attrs&&id2==Attribute){var _n=node.node,nameNode;if(nameNode=_n.firstChild){var matches=attrs[input.read(nameNode.from,nameNode.to)];if(matches){var _iterator289=_createForOfIteratorHelper(matches),_step289;try{for(_iterator289.s();!(_step289=_iterator289.n()).done;){var attr=_step289.value;if(attr.tagName&&attr.tagName!=findTagName(_n.parent,input))continue;var value=_n.lastChild;if(value.type.id==AttributeValue){var from=value.from+1;var last=value.lastChild,_to3=value.to-(last&&last.isError?0:1);if(_to3>from)return{parser:attr.parser,overlay:[{from:from,to:_to3}]};}else if(value.type.id==UnquotedAttributeValue){return{parser:attr.parser,overlay:[{from:value.from,to:value.to}]};}}}catch(err){_iterator289.e(err);}finally{_iterator289.f();}}}}return null;});}// ../node_modules/@lezer/css/dist/index.js
var descendantOp=101;var Unit=1;var callee=102;var identifier=103;var VariableName=2;var space2=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];var colon=58;var parenL=40;var underscore=95;var bracketL=91;var dash2=45;var period=46;var hash=35;var percent=37;var ampersand=38;var backslash=92;var newline=10;function isAlpha(ch){return ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=161;}function isDigit(ch){return ch>=48&&ch<=57;}var identifiers=new ExternalTokenizer(function(input,stack){for(var inside2=false,dashes=0,_i228=0;;_i228++){var next=input.next;if(isAlpha(next)||next==dash2||next==underscore||inside2&&isDigit(next)){if(!inside2&&(next!=dash2||_i228>0))inside2=true;if(dashes===_i228&&next==dash2)dashes++;input.advance();}else if(next==backslash&&input.peek(1)!=newline){input.advance();if(input.next>-1)input.advance();inside2=true;}else{if(inside2)input.acceptToken(next==parenL?callee:dashes==2&&stack.canShift(VariableName)?VariableName:identifier);break;}}});var descendant=new ExternalTokenizer(function(input){if(space2.includes(input.peek(-1))){var next=input.next;if(isAlpha(next)||next==underscore||next==hash||next==period||next==bracketL||next==colon&&isAlpha(input.peek(1))||next==dash2||next==ampersand)input.acceptToken(descendantOp);}});var unitToken=new ExternalTokenizer(function(input){if(!space2.includes(input.peek(-1))){var next=input.next;if(next==percent){input.advance();input.acceptToken(Unit);}if(isAlpha(next)){do{input.advance();}while(isAlpha(input.next)||isDigit(input.next));input.acceptToken(Unit);}}});var cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags.definitionKeyword,"from to selector":tags.keyword,NamespaceName:tags.namespace,KeyframeName:tags.labelName,KeyframeRangeName:tags.operatorKeyword,TagName:tags.tagName,ClassName:tags.className,PseudoClassName:tags.constant(tags.className),IdName:tags.labelName,"FeatureName PropertyName":tags.propertyName,AttributeName:tags.attributeName,NumberLiteral:tags.number,KeywordQuery:tags.keyword,UnaryQueryOp:tags.operatorKeyword,"CallTag ValueName":tags.atom,VariableName:tags.variableName,Callee:tags.operatorKeyword,Unit:tags.unit,"UniversalSelector NestingSelector":tags.definitionOperator,MatchOp:tags.compareOperator,"ChildOp SiblingOp, LogicOp":tags.logicOperator,BinOp:tags.arithmeticOperator,Important:tags.modifier,Comment:tags.blockComment,ColorLiteral:tags.color,"ParenthesizedContent StringLiteral":tags.string,":":tags.punctuation,"PseudoOp #":tags.derefOperator,"; ,":tags.separator,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace});var spec_callee={__proto__:null,lang:34,"nth-child":34,"nth-last-child":34,"nth-of-type":34,"nth-last-of-type":34,dir:34,"host-context":34,url:62,"url-prefix":62,domain:62,regexp:62,selector:140};var spec_AtKeyword={__proto__:null,"@import":120,"@media":144,"@charset":148,"@namespace":152,"@keyframes":158,"@supports":170};var spec_identifier={__proto__:null,not:134,only:134};var parser3=_LRParser.deserialize({version:14,states:":|QYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$[QXO'#CaO$fQ[O'#CiO$qQ[O'#DUO$vQ[O'#DXOOQP'#Eo'#EoO${QdO'#DhO%jQ[O'#DuO${QdO'#DwO%{Q[O'#DyO&WQ[O'#D|O&`Q[O'#ESO&nQ[O'#EUOOQS'#En'#EnOOQS'#EX'#EXQYQ[OOO&uQXO'#CdO'jQWO'#DdO'oQWO'#EtO'zQ[O'#EtQOQWOOP(UO#tO'#C_POOO)C@^)C@^OOQP'#Ch'#ChOOQP,59Q,59QO#kQ[O,59QO(aQ[O,59TO$qQ[O,59pO$vQ[O,59sO(lQ[O,59vO(lQ[O,59xO(lQ[O,59yO(lQ[O'#E^O)WQWO,58{O)`Q[O'#DcOOQS,58{,58{OOQP'#Cl'#ClOOQO'#DS'#DSOOQP,59T,59TO)gQWO,59TO)lQWO,59TOOQP'#DW'#DWOOQP,59p,59pOOQO'#DY'#DYO)qQ`O,59sOOQS'#Cq'#CqO${QdO'#CrO)yQvO'#CtO+ZQtO,5:SOOQO'#Cy'#CyO)lQWO'#CxO+oQWO'#CzO+tQ[O'#DPOOQS'#Eq'#EqOOQO'#Dk'#DkO+|Q[O'#DrO,[QWO'#EuO&`Q[O'#DpO,jQWO'#DsOOQO'#Ev'#EvO)ZQWO,5:aO,oQpO,5:cOOQS'#D{'#D{O,wQWO,5:eO,|Q[O,5:eOOQO'#EO'#EOO-UQWO,5:hO-ZQWO,5:nO-cQWO,5:pOOQS-E8V-E8VO-kQdO,5:OO-{Q[O'#E`O.YQWO,5;`O.YQWO,5;`POOO'#EW'#EWP.eO#tO,58yPOOO,58y,58yOOQP1G.l1G.lOOQP1G.o1G.oO)gQWO1G.oO)lQWO1G.oOOQP1G/[1G/[O.pQ`O1G/_O/ZQXO1G/bO/qQXO1G/dO0XQXO1G/eO0oQXO,5:xOOQO-E8[-E8[OOQS1G.g1G.gO0yQWO,59}O1OQ[O'#DTO1VQdO'#CpOOQP1G/_1G/_O${QdO1G/_O1^QpO,59^OOQS,59`,59`O${QdO,59bO1fQWO1G/nOOQS,59d,59dO1kQ!bO,59fOOQS'#DQ'#DQOOQS'#EZ'#EZO1vQ[O,59kOOQS,59k,59kO2OQWO'#DkO2ZQWO,5:WO2`QWO,5:^O&`Q[O,5:YO2hQ[O'#EaO3PQWO,5;aO3[QWO,5:[O(lQ[O,5:_OOQS1G/{1G/{OOQS1G/}1G/}OOQS1G0P1G0PO3mQWO1G0PO3rQdO'#EPOOQS1G0S1G0SOOQS1G0Y1G0YOOQS1G0[1G0[O3}QtO1G/jOOQO1G/j1G/jOOQO,5:z,5:zO4eQ[O,5:zOOQO-E8^-E8^O4rQWO1G0zPOOO-E8U-E8UPOOO1G.e1G.eOOQP7+$Z7+$ZOOQP7+$y7+$yO${QdO7+$yOOQS1G/i1G/iO4}QXO'#EsO5XQWO,59oO5^QtO'#EYO6UQdO'#EpO6`QWO,59[O6eQpO7+$yOOQS1G.x1G.xOOQS1G.|1G.|OOQS7+%Y7+%YOOQS1G/Q1G/QO6mQWO1G/QOOQS-E8X-E8XOOQS1G/V1G/VO${QdO1G/rOOQO1G/x1G/xOOQO1G/t1G/tO6rQWO,5:{OOQO-E8_-E8_O7QQXO1G/yOOQS7+%k7+%kO7XQYO'#CtOOQO'#ER'#ERO7dQ`O'#EQOOQO'#EQ'#EQO7oQWO'#EbO7wQdO,5:kOOQS,5:k,5:kO8SQtO'#E_O${QdO'#E_O9TQdO7+%UOOQO7+%U7+%UOOQO1G0f1G0fO9hQpO<<HeO9pQ[O'#E]O9zQWO,5;_OOQP1G/Z1G/ZOOQS-E8W-E8WO:SQdO'#E[O:^QWO,5;[OOQT1G.v1G.vOOQP<<He<<HeOOQS7+$l7+$lO:fQdO7+%^OOQO7+%e7+%eOOQO,5:l,5:lO3uQdO'#EcO7oQWO,5:|OOQS,5:|,5:|OOQS-E8`-E8`OOQS1G0V1G0VO:mQtO,5:yOOQS-E8]-E8]OOQO<<Hp<<HpOOQPAN>PAN>PO;nQXO,5:wOOQO-E8Z-E8ZO;xQdO,5:vOOQO-E8Y-E8YOOQO<<Hx<<HxOOQO,5:},5:}OOQO-E8a-E8aOOQS1G0h1G0h",stateData:"<[~O#]OS#^QQ~OUYOXYOZTO^VO_VOrXOyWO!]aO!^ZO!j[O!l]O!n^O!q_O!w`O#ZRO~OQfOUYOXYOZTO^VO_VOrXOyWO!]aO!^ZO!j[O!l]O!n^O!q_O!w`O#ZeO~O#W#hP~P!ZO#^jO~O#ZlO~OZnO^oO_oOrqOypO!PrO!StO#XsO~OuuO!UwO~P#pOa}O#YzO#ZyO~O#Z!OO~O#Z!QO~OQ![Oc!TOg![Oi![Oo!YOr!ZO#Y!WO#Z!SO#f!UO~Oc!^O!e!`O!h!aO#Z!]O!U#iP~Oi!fOo!YO#Z!eO~Oi!hO#Z!hO~Oc!^O!e!`O!h!aO#Z!]O~O!Z#iP~P%jOZWX^WX^!XX_WXrWXuWXyWX!PWX!SWX!UWX#XWX~O^!mO~O!Z!nO#W#hX!T#hX~O#W#hX!T#hX~P!ZO#_!qO#`!qO#a!sO~Oa!wO#YzO#ZyO~OUYOXYOZTO^VO_VOrXOyWO#ZRO~OuuO!UwO~O!T#hP~P!ZOc#RO~Oc#SO~Oq#TO}#UO~OP#WOchXkhX!ZhX!ehX!hhX#ZhXbhXQhXghXihXohXrhXuhX!YhX#WhX#YhX#fhXqhX!ThX~Oc!^Ok#XO!e!`O!h!aO#Z!]O!Z#iP~Oc#[O~Oq#`O#Z#]O~Oc!^O!e!`O!h!aO#Z#aO~Ou#eO!c#dO!U#iX!Z#iX~Oc#hO~Ok#XO!Z#jO~O!Z#kO~Oi#lOo!YO~O!U#mO~O!UwO!c#dO~O!UwO!Z#pO~O!Y#rO!Z!Wa#W!Wa!T!Wa~P${O!Z#SX#W#SX!T#SX~P!ZO!Z!nO#W#ha!T#ha~O#_!qO#`!qO#a#xO~Oq#zO}#{O~OZnO^oO_oOrqOypO~Ou!Oi!P!Oi!S!Oi!U!Oi#X!Oib!Oi~P.xOu!Qi!P!Qi!S!Qi!U!Qi#X!Qib!Qi~P.xOu!Ri!P!Ri!S!Ri!U!Ri#X!Rib!Ri~P.xOu#Qa!U#Qa~P#pO!T#|O~Ob#gP~P(lOb#dP~P${Ob$TOk#XO~O!Z$VO~Ob$WOi$XOp$XO~Oq$ZO#Z#]O~O^!aXb!_X!c!_X~O^$[O~Ob$]O!c#dO~Oc!^O!e!`O!h!aO#Z!]Ou#TX!U#TX!Z#TX~Ou#eO!U#ia!Z#ia~O!c#dOu!da!U!da!Z!dab!da~O!Z$bO~O!T$iO#Z$dO#f$cO~Ok#XOu$kO!Y$mO!Z!Wi#W!Wi!T!Wi~P${O!Z#Sa#W#Sa!T#Sa~P!ZO!Z!nO#W#hi!T#hi~Ou$pOb#gX~P#pOb$rO~Ok#XOQ!|Xb!|Xc!|Xg!|Xi!|Xo!|Xr!|Xu!|X#Y!|X#Z!|X#f!|X~Ou$tOb#dX~P${Ob$vO~Ok#XOq$wO~Ob$xO~O!c#dOu#Ta!U#Ta!Z#Ta~Ob$zO~P#pOP#WOuhX!UhX~O#f$cOu!tX!U!tX~Ou$|O!UwO~O!T%QO#Z$dO#f$cO~Ok#XOQ#RXc#RXg#RXi#RXo#RXr#RXu#RX!Y#RX!Z#RX#W#RX#Y#RX#Z#RX#f#RX!T#RX~Ou$kO!Y%TO!Z!Wq#W!Wq!T!Wq~P${Ok#XOq%UO~Ob#PXu#PX~P(lOu$pOb#ga~Ob#OXu#OX~P${Ou$tOb#da~Ob%ZO~P${Ok#XOQ#Rac#Rag#Rai#Rao#Rar#Rau#Ra!Y#Ra!Z#Ra#W#Ra#Y#Ra#Z#Ra#f#Ra!T#Ra~Ob#Pau#Pa~P#pOb#Oau#Oa~P${O#]p#^#fk!S#f~","goto":"-o#kPPP#lP#oP#x$YP#xP$j#xPP$pPPP$v%P%PP%cP%PP%P%}&aPPPP%P&yP&}'T#xP'Z#x'aP#xP#x#xPPP'g'|(ZPP#oPP(b(b(l(bP(bP(b(bP#oP#oP#oP(o#oP(r(u(x)P#oP#oP)U)[)k)y*P*V*]*c*i*s*y+PPPPPPPPPPP+V+`,O,RP,w,z-Q-ZRkQ_bOPdhw!n#tmYOPdhrstuw!n#R#h#t$pmSOPdhrstuw!n#R#h#t$pQmTR!tnQ{VR!uoQ!u}Q#Z!XR#y!wq![Z]!T!m#S#U#X#q#{$Q$[$k$l$t$y%Xp![Z]!T!m#S#U#X#q#{$Q$[$k$l$t$y%XU$f#m$h$|R${$eq!XZ]!T!m#S#U#X#q#{$Q$[$k$l$t$y%Xp![Z]!T!m#S#U#X#q#{$Q$[$k$l$t$y%XQ!f^R#l!gT#^!Z#_Q|VR!voQ!u|R#y!vQ!PWR!xpQ!RXR!yqQxUQ#PvQ#i!cQ#o!jQ#p!kQ%O$gR%^$}SgPwQ!phQ#s!nR$n#tZfPhw!n#ta!b[`a!V!^!`#d#eR#b!^R!g^R!i_R#n!iS$g#m$hR%[$|V$e#m$h$|Q!rjR#w!rQdOShPwU!ldh#tR#t!nQ$Q#SU$s$Q$y%XQ$y$[R%X$tQ#_!ZR$Y#_Q$u$QR%Y$uQ$q#}R%W$qQvUR#OvQ$l#qR%S$lQ!ogS#u!o#vR#v!pQ#f!_R$`#fQ$h#mR%P$hQ$}$gR%]$}_cOPdhw!n#t^UOPdhw!n#tQ!zrQ!{sQ!|tQ!}uQ#}#RQ$a#hR%V$pR$R#SQ!VZQ!d]Q#V!TQ#q!m[$P#S$Q$[$t$y%XQ$S#UQ$U#XS$j#q$lQ$o#{R%R$kR$O#RQiPR#QwQ!c[Q!kaR#Y!VU!_[a!VQ!j`Q#c!^Q#g!`Q$^#dR$_#e",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:118,nodeProps:[["isolate",-2,3,25,""],["openedBy",18,"(",33,"[",51,"{"],["closedBy",19,")",34,"]",52,"}"]],propSources:[cssHighlighting],skippedNodes:[0,3,88],repeatNodeCount:12,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSp`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#]~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#]~p`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUp`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Up`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUp`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Up`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUp`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Up`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUp`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Up`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!Y[p`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOi~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYyQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYp`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYp`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYg[p`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYg[p`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYp`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYg[p`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYp`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSg[p`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS}Sp`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSc^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOb~n9{UUQkWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWkW!SQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUp`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYp`#f[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYp`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUp`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUp`#f[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[p`#f[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSu^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWkWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VUZQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTkWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSp`#^~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#f[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU^QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S_Qp`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Z^Oy%^z;'S%^;'S;=`%o<%lO%^dCoS}SOy%^z;'S%^;'S;=`%o<%lO%^bDQU!PQOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS!PQp`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[!]Qp`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^nFfSr^Oy%^z;'S%^;'S;=`%o<%lO%^nFwSq^Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUp`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!cQp`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!UUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!T^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!SQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[descendant,unitToken,identifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#`~~dP!P!Qg~lO#a~~",28,107)],topRules:{"StyleSheet":[0,4],"Styles":[1,87]},specialized:[{term:102,get:function get(value){return spec_callee[value]||-1;}},{term:59,get:function get(value){return spec_AtKeyword[value]||-1;}},{term:103,get:function get(value){return spec_identifier[value]||-1;}}],tokenPrec:1246});// ../node_modules/@codemirror/lang-css/dist/index.js
var _properties=null;function properties(){if(!_properties&&(typeof document==="undefined"?"undefined":_typeof(document))=="object"&&document.body){var style=document.body.style,names=[],seen=/* @__PURE__ */new Set();for(var prop in style)if(prop!="cssText"&&prop!="cssFloat"){if(typeof style[prop]=="string"){if(/[A-Z]/.test(prop))prop=prop.replace(/[A-Z]/g,function(ch){return"-"+ch.toLowerCase();});if(!seen.has(prop)){names.push(prop);seen.add(prop);}}}_properties=names.sort().map(function(name2){return{type:"property",label:name2,apply:name2+": "};});}return _properties||[];}var pseudoClasses=/* @__PURE__ */["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(function(name2){return{type:"class",label:name2};});var values=/* @__PURE__ */["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(function(name2){return{type:"keyword",label:name2};}).concat(/* @__PURE__ */["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(function(name2){return{type:"constant",label:name2};}));var tags2=/* @__PURE__ */["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(function(name2){return{type:"type",label:name2};});var atRules=/* @__PURE__ */["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(function(label){return{type:"keyword",label:label};});var identifier2=/^(\w[\w-]*|-\w[\w-]*|)$/;var variable=/^-(-[\w-]*)?$/;function isVarArg(node,doc2){var _a2;if(node.name=="("||node.type.isError)node=node.parent||node;if(node.name!="ArgList")return false;var callee2=(_a2=node.parent)===null||_a2===void 0?void 0:_a2.firstChild;if((callee2===null||callee2===void 0?void 0:callee2.name)!="Callee")return false;return doc2.sliceString(callee2.from,callee2.to)=="var";}var VariablesByNode=/* @__PURE__ */new NodeWeakMap();var declSelector=["Declaration"];function astTop(node){for(var cur2=node;;){if(cur2.type.isTop)return cur2;if(!(cur2=cur2.parent))return node;}}function variableNames(doc2,node,isVariable){if(node.to-node.from>4096){var known=VariablesByNode.get(node);if(known)return known;var result=[],seen=/* @__PURE__ */new Set(),cursor2=node.cursor(IterMode.IncludeAnonymous);if(cursor2.firstChild())do{var _iterator290=_createForOfIteratorHelper(variableNames(doc2,cursor2.node,isVariable)),_step290;try{for(_iterator290.s();!(_step290=_iterator290.n()).done;){var option=_step290.value;if(!seen.has(option.label)){seen.add(option.label);result.push(option);}}}catch(err){_iterator290.e(err);}finally{_iterator290.f();}}while(cursor2.nextSibling());VariablesByNode.set(node,result);return result;}else{var _result2=[],_seen=/* @__PURE__ */new Set();node.cursor().iterate(function(node2){var _a2;if(isVariable(node2)&&node2.matchContext(declSelector)&&((_a2=node2.node.nextSibling)===null||_a2===void 0?void 0:_a2.name)==":"){var _name9=doc2.sliceString(node2.from,node2.to);if(!_seen.has(_name9)){_seen.add(_name9);_result2.push({label:_name9,type:"variable"});}}});return _result2;}}var defineCSSCompletionSource=function defineCSSCompletionSource(isVariable){return function(context){var state=context.state,pos=context.pos,node=_syntaxTree(state).resolveInner(pos,-1);var isDash=node.type.isError&&node.from==node.to-1&&state.doc.sliceString(node.from,node.to)=="-";if(node.name=="PropertyName"||(isDash||node.name=="TagName")&&/^(Block|Styles)$/.test(node.resolve(node.to).name))return{from:node.from,options:properties(),validFor:identifier2};if(node.name=="ValueName")return{from:node.from,options:values,validFor:identifier2};if(node.name=="PseudoClassName")return{from:node.from,options:pseudoClasses,validFor:identifier2};if(isVariable(node)||(context.explicit||isDash)&&isVarArg(node,state.doc))return{from:isVariable(node)||isDash?node.from:pos,options:variableNames(state.doc,astTop(node),isVariable),validFor:variable};if(node.name=="TagName"){for(var parent=node.parent;parent;parent=parent.parent)if(parent.name=="Block")return{from:node.from,options:properties(),validFor:identifier2};return{from:node.from,options:tags2,validFor:identifier2};}if(node.name=="AtKeyword")return{from:node.from,options:atRules,validFor:identifier2};if(!context.explicit)return null;var above=node.resolve(pos),before=above.childBefore(pos);if(before&&before.name==":"&&above.name=="PseudoClassSelector")return{from:pos,options:pseudoClasses,validFor:identifier2};if(before&&before.name==":"&&above.name=="Declaration"||above.name=="ArgList")return{from:pos,options:values,validFor:identifier2};if(above.name=="Block"||above.name=="Styles")return{from:pos,options:properties(),validFor:identifier2};return null;};};var cssCompletionSource=/* @__PURE__ */defineCSSCompletionSource(function(n){return n.name=="VariableName";});var cssLanguage=/* @__PURE__ */_LRLanguage2.define({name:"css",parser:/* @__PURE__ */parser3.configure({props:[/* @__PURE__ */_indentNodeProp.add({Declaration:/* @__PURE__ */_continuedIndent()}),/* @__PURE__ */_foldNodeProp.add({"Block KeyframeList":_foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new _LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}));}// ../node_modules/@lezer/javascript/dist/index.js
var noSemi=315;var noSemiType=316;var incdec=1;var incdecPrefix=2;var questionDot=3;var JSXStartTag=4;var insertSemi=317;var spaces=319;var newline2=320;var LineComment=5;var BlockComment=6;var Dialect_jsx=0;var space3=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];var braceR=125;var semicolon=59;var slash2=47;var star=42;var plus=43;var minus=45;var lt=60;var comma=44;var question2=63;var dot=46;var bracketL2=91;var trackNewline=new ContextTracker({start:false,shift:function shift(context,term){return term==LineComment||term==BlockComment||term==spaces?context:term==newline2;},strict:false});var insertSemicolon=new ExternalTokenizer(function(input,stack){var next=input.next;if(next==braceR||next==-1||stack.context)input.acceptToken(insertSemi);},{contextual:true,fallback:true});var noSemicolon=new ExternalTokenizer(function(input,stack){var next=input.next,after;if(space3.indexOf(next)>-1)return;if(next==slash2&&((after=input.peek(1))==slash2||after==star))return;if(next!=braceR&&next!=semicolon&&next!=-1&&!stack.context)input.acceptToken(noSemi);},{contextual:true});var noSemicolonType=new ExternalTokenizer(function(input,stack){if(input.next==bracketL2&&!stack.context)input.acceptToken(noSemiType);},{contextual:true});var operatorToken=new ExternalTokenizer(function(input,stack){var next=input.next;if(next==plus||next==minus){input.advance();if(next==input.next){input.advance();var mayPostfix=!stack.context&&stack.canShift(incdec);input.acceptToken(mayPostfix?incdec:incdecPrefix);}}else if(next==question2&&input.peek(1)==dot){input.advance();input.advance();if(input.next<48||input.next>57)input.acceptToken(questionDot);}},{contextual:true});function identifierChar(ch,start){return ch>=65&&ch<=90||ch>=97&&ch<=122||ch==95||ch>=192||!start&&ch>=48&&ch<=57;}var jsx=new ExternalTokenizer(function(input,stack){if(input.next!=lt||!stack.dialectEnabled(Dialect_jsx))return;input.advance();if(input.next==slash2)return;var back=0;while(space3.indexOf(input.next)>-1){input.advance();back++;}if(identifierChar(input.next,true)){input.advance();back++;while(identifierChar(input.next,false)){input.advance();back++;}while(space3.indexOf(input.next)>-1){input.advance();back++;}if(input.next==comma)return;for(var _i229=0;;_i229++){if(_i229==7){if(!identifierChar(input.next,true))return;break;}if(input.next!="extends".charCodeAt(_i229))break;input.advance();back++;}}input.acceptToken(JSXStartTag,-back);});var jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger new":tags.keyword,TemplateString:tags.special(tags.string),"super":tags.atom,BooleanLiteral:tags.bool,"this":tags.self,"null":tags["null"],Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags["function"](tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags["function"](tags.propertyName),"FunctionDeclaration/VariableDefinition":tags["function"](tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),"NewExpression/VariableName":tags.className,PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags["function"](tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer asserts":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)});var spec_identifier2={__proto__:null,"export":20,as:25,from:33,"default":36,async:41,"function":42,"in":52,out:55,"const":56,"extends":60,"this":64,"true":72,"false":72,"null":84,"void":88,"typeof":92,"super":108,"new":142,"delete":154,"yield":163,"await":167,"class":172,"public":235,"private":235,"protected":235,readonly:237,"instanceof":256,satisfies:259,"import":292,keyof:349,unique:353,infer:359,asserts:395,is:397,"abstract":417,"implements":419,type:421,"let":424,"var":426,using:429,"interface":435,"enum":439,namespace:445,module:447,declare:451,global:455,"for":474,of:483,"while":486,"with":490,"do":494,"if":498,"else":500,"switch":504,"case":510,"try":516,"catch":520,"finally":524,"return":528,"throw":532,"break":536,"continue":540,"debugger":544};var spec_word={__proto__:null,async:129,get:131,set:133,declare:195,"public":197,"private":197,"protected":197,"static":199,"abstract":201,override:203,readonly:209,accessor:211,"new":401};var spec_LessThan={__proto__:null,"<":193};var parser4=_LRParser.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~","goto":"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"\u26A0 ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new LocalTokenGroup("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{"Script":[0,7],"SingleExpression":[1,275],"SingleClassItem":[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{"80":1,"82":1,"94":1,"169":1,"199":1},specialized:[{term:326,get:function get(value){return spec_identifier2[value]||-1;}},{term:342,get:function get(value){return spec_word[value]||-1;}},{term:95,get:function get(value){return spec_LessThan[value]||-1;}}],tokenPrec:15124});// ../node_modules/@codemirror/lang-javascript/dist/index.js
var snippets=[/* @__PURE__ */_snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),/* @__PURE__ */_snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),/* @__PURE__ */_snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),/* @__PURE__ */_snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),/* @__PURE__ */_snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),/* @__PURE__ */_snippetCompletion("try {\n	${}\n} catch (${error}) {\n	${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),/* @__PURE__ */_snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),/* @__PURE__ */_snippetCompletion("if (${}) {\n	${}\n} else {\n	${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),/* @__PURE__ */_snippetCompletion("class ${name} {\n	constructor(${params}) {\n		${}\n	}\n}",{label:"class",detail:"definition",type:"keyword"}),/* @__PURE__ */_snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),/* @__PURE__ */_snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})];var typescriptSnippets=/* @__PURE__ */snippets.concat([/* @__PURE__ */_snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),/* @__PURE__ */_snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),/* @__PURE__ */_snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]);var cache=/* @__PURE__ */new NodeWeakMap();var ScopeNodes=/* @__PURE__ */new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(type){return function(node,def){var id2=node.node.getChild("VariableDefinition");if(id2)def(id2,type);return true;};}var functionContext=["FunctionDeclaration"];var gatherCompletions={FunctionDeclaration:/* @__PURE__ */defID("function"),ClassDeclaration:/* @__PURE__ */defID("class"),ClassExpression:function ClassExpression(){return true;},EnumDeclaration:/* @__PURE__ */defID("constant"),TypeAliasDeclaration:/* @__PURE__ */defID("type"),NamespaceDeclaration:/* @__PURE__ */defID("namespace"),VariableDefinition:function VariableDefinition(node,def){if(!node.matchContext(functionContext))def(node,"variable");},TypeDefinition:function TypeDefinition(node,def){def(node,"type");},__proto__:null};function getScope(doc2,node){var cached=cache.get(node);if(cached)return cached;var completions=[],top2=true;function def(node2,type){var name2=doc2.sliceString(node2.from,node2.to);completions.push({label:name2,type:type});}node.cursor(IterMode.IncludeAnonymous).iterate(function(node2){if(top2){top2=false;}else if(node2.name){var gather=gatherCompletions[node2.name];if(gather&&gather(node2,def)||ScopeNodes.has(node2.name))return false;}else if(node2.to-node2.from>8192){var _iterator291=_createForOfIteratorHelper(getScope(doc2,node2.node)),_step291;try{for(_iterator291.s();!(_step291=_iterator291.n()).done;){var c=_step291.value;completions.push(c);}}catch(err){_iterator291.e(err);}finally{_iterator291.f();}return false;}});cache.set(node,completions);return completions;}var Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;var dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function localCompletionSource(context){var inner=_syntaxTree(context.state).resolveInner(context.pos,-1);if(dontComplete.indexOf(inner.name)>-1)return null;var isWord=inner.name=="VariableName"||inner.to-inner.from<20&&Identifier.test(context.state.sliceDoc(inner.from,inner.to));if(!isWord&&!context.explicit)return null;var options=[];for(var pos=inner;pos;pos=pos.parent){if(ScopeNodes.has(pos.name))options=options.concat(getScope(context.state.doc,pos));}return{options:options,from:isWord?inner.from:context.pos,validFor:Identifier};}var javascriptLanguage=/* @__PURE__ */_LRLanguage2.define({name:"javascript",parser:/* @__PURE__ */parser4.configure({props:[/* @__PURE__ */_indentNodeProp.add({IfStatement:/* @__PURE__ */_continuedIndent({except:/^\s*({|else\b)/}),TryStatement:/* @__PURE__ */_continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:_flatIndent,SwitchBody:function SwitchBody(context){var after=context.textAfter,closed=/^\s*\}/.test(after),isCase=/^\s*(case|default)\b/.test(after);return context.baseIndent+(closed?0:isCase?1:2)*context.unit;},Block:/* @__PURE__ */_delimitedIndent({closing:"}"}),ArrowFunction:function ArrowFunction(cx){return cx.baseIndent+cx.unit;},"TemplateString BlockComment":function TemplateString_BlockComment(){return null;},"Statement Property":/* @__PURE__ */_continuedIndent({except:/^{/}),JSXElement:function JSXElement(context){var closed=/^\s*<\//.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit);},JSXEscape:function JSXEscape(context){var closed=/\s*\}/.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit);},"JSXOpenTag JSXSelfClosingTag":function JSXOpenTag_JSXSelfClosingTag(context){return context.column(context.node.from)+context.unit;}}),/* @__PURE__ */_foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":_foldInside,BlockComment:function BlockComment(tree){return{from:tree.from+2,to:tree.to-2};}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}});var jsxSublanguage={test:function test(node){return /^JSX/.test(node.name);},facet:/* @__PURE__ */_defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})};var typescriptLanguage=/* @__PURE__ */javascriptLanguage.configure({dialect:"ts"},"typescript");var jsxLanguage=/* @__PURE__ */javascriptLanguage.configure({dialect:"jsx",props:[/* @__PURE__ */_sublanguageProp.add(function(n){return n.isTop?[jsxSublanguage]:void 0;})]});var tsxLanguage=/* @__PURE__ */javascriptLanguage.configure({dialect:"jsx ts",props:[/* @__PURE__ */_sublanguageProp.add(function(n){return n.isTop?[jsxSublanguage]:void 0;})]},"typescript");var kwCompletion=function kwCompletion(name2){return{label:name2,type:"keyword"};};var keywords=/* @__PURE__ */"break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion);var typescriptKeywords=/* @__PURE__ */keywords.concat(/* @__PURE__ */["declare","implements","private","protected","public"].map(kwCompletion));function javascript(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var lang=config2.jsx?config2.typescript?tsxLanguage:jsxLanguage:config2.typescript?typescriptLanguage:javascriptLanguage;var completions=config2.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new _LanguageSupport(lang,[javascriptLanguage.data.of({autocomplete:_ifNotIn(dontComplete,_completeFromList(completions))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),config2.jsx?autoCloseTags:[]]);}function findOpenTag(node){for(;;){if(node.name=="JSXOpenTag"||node.name=="JSXSelfClosingTag"||node.name=="JSXFragmentTag")return node;if(node.name=="JSXEscape"||!node.parent)return null;node=node.parent;}}function elementName(doc2,tree){var max=arguments.length>2&&arguments[2]!==undefined?arguments[2]:doc2.length;for(var ch=tree===null||tree===void 0?void 0:tree.firstChild;ch;ch=ch.nextSibling){if(ch.name=="JSXIdentifier"||ch.name=="JSXBuiltin"||ch.name=="JSXNamespacedName"||ch.name=="JSXMemberExpression")return doc2.sliceString(ch.from,Math.min(ch.to,max));}return"";}var android2=(typeof navigator==="undefined"?"undefined":_typeof(navigator))=="object"&&/* @__PURE__ *//Android\b/.test(navigator.userAgent);var autoCloseTags=/* @__PURE__ */_EditorView.inputHandler.of(function(view,from,to,text,defaultInsert){if((android2?view.composing:view.compositionStarted)||view.state.readOnly||from!=to||text!=">"&&text!="/"||!javascriptLanguage.isActiveAt(view.state,from,-1))return false;var base2=defaultInsert(),state=base2.state;var closeTags=state.changeByRange(function(range){var _a2;var head=range.head,around=_syntaxTree(state).resolveInner(head-1,-1),name2;if(around.name=="JSXStartTag")around=around.parent;if(state.doc.sliceString(head-1,head)!=text||around.name=="JSXAttributeValue"&&around.to>head);else if(text==">"&&around.name=="JSXFragmentTag"){return{range:range,changes:{from:head,insert:"</>"}};}else if(text=="/"&&around.name=="JSXStartCloseTag"){var empty2=around.parent,base3=empty2.parent;if(base3&&empty2.from==head-2&&((name2=elementName(state.doc,base3.firstChild,head))||((_a2=base3.firstChild)===null||_a2===void 0?void 0:_a2.name)=="JSXFragmentTag")){var insert2="".concat(name2,">");return{range:_EditorSelection.cursor(head+insert2.length,-1),changes:{from:head,insert:insert2}};}}else if(text==">"){var openTag=findOpenTag(around);if(openTag&&openTag.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(state.doc.sliceString(head,head+2))&&(name2=elementName(state.doc,openTag,head)))return{range:range,changes:{from:head,insert:"</".concat(name2,">")}};}return{range:range};});if(closeTags.changes.empty)return false;view.dispatch([base2,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:true})]);return true;});// ../node_modules/@codemirror/lang-html/dist/index.js
var Targets=["_blank","_self","_top","_parent"];var Charsets=["ascii","utf-8","utf-16","latin1","latin1"];var Methods=["get","post","put","delete"];var Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];var Bool=["true","false"];var S={};var Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:S,address:S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:S,aside:S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:S,base:{attrs:{href:null,target:Targets}},bdi:S,bdo:S,blockquote:{attrs:{cite:null}},body:S,br:S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:S,center:S,cite:S,code:S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:S,div:S,dl:S,dt:S,em:S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:S,figure:S,footer:S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:S,h2:S,h3:S,h4:S,h5:S,h6:S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:S,hgroup:S,hr:S,html:{attrs:{manifest:null}},i:S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:S,noscript:S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:S,param:{attrs:{name:null,value:null}},pre:S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:S,rt:S,ruby:S,samp:S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:S,source:{attrs:{src:null,type:null,media:null}},span:S,strong:S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:S,summary:S,sup:S,table:S,tbody:S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:S,time:{attrs:{datetime:null}},title:S,tr:S,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},"var":S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:S};var GlobalAttrs={accesskey:null,"class":null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:/* @__PURE__ */"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null};var eventAttributes=/* @__PURE__ */"beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(function(n){return"on"+n;});var _iterator292=_createForOfIteratorHelper(eventAttributes),_step292;try{for(_iterator292.s();!(_step292=_iterator292.n()).done;){var a=_step292.value;GlobalAttrs[a]=null;}}catch(err){_iterator292.e(err);}finally{_iterator292.f();}var Schema=/*#__PURE__*/_createClass(function Schema(extraTags,extraAttrs){_classCallCheck(this,Schema);this.tags=Object.assign(Object.assign({},Tags),extraTags);this.globalAttrs=Object.assign(Object.assign({},GlobalAttrs),extraAttrs);this.allTags=Object.keys(this.tags);this.globalAttrNames=Object.keys(this.globalAttrs);});Schema["default"]=/* @__PURE__ */new Schema();function elementName2(doc2,tree){var max=arguments.length>2&&arguments[2]!==undefined?arguments[2]:doc2.length;if(!tree)return"";var tag=tree.firstChild;var name2=tag&&tag.getChild("TagName");return name2?doc2.sliceString(name2.from,Math.min(name2.to,max)):"";}function findParentElement(tree){var skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;for(;tree;tree=tree.parent)if(tree.name=="Element"){if(skip)skip=false;else return tree;}return null;}function allowedChildren(doc2,tree,schema){var parentInfo=schema.tags[elementName2(doc2,findParentElement(tree))];return(parentInfo===null||parentInfo===void 0?void 0:parentInfo.children)||schema.allTags;}function openTags(doc2,tree){var open=[];for(var parent=findParentElement(tree);parent&&!parent.type.isTop;parent=findParentElement(parent.parent)){var tagName=elementName2(doc2,parent);if(tagName&&parent.lastChild.name=="CloseTag")break;if(tagName&&open.indexOf(tagName)<0&&(tree.name=="EndTag"||tree.from>=parent.firstChild.to))open.push(tagName);}return open;}var identifier3=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(state,schema,tree,from,to){var end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">";var parent=findParentElement(tree,true);return{from:from,to:to,options:allowedChildren(state.doc,parent,schema).map(function(tagName){return{label:tagName,type:"type"};}).concat(openTags(state.doc,tree).map(function(tag,i){return{label:"/"+tag,apply:"/"+tag+end,type:"type",boost:99-i};})),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/};}function completeCloseTag(state,tree,from,to){var end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">";return{from:from,to:to,options:openTags(state.doc,tree).map(function(tag,i){return{label:tag,apply:tag+end,type:"type",boost:99-i};}),validFor:identifier3};}function completeStartTag(state,schema,tree,pos){var options=[],level=0;var _iterator293=_createForOfIteratorHelper(allowedChildren(state.doc,tree,schema)),_step293;try{for(_iterator293.s();!(_step293=_iterator293.n()).done;){var tagName=_step293.value;options.push({label:"<"+tagName,type:"type"});}}catch(err){_iterator293.e(err);}finally{_iterator293.f();}var _iterator294=_createForOfIteratorHelper(openTags(state.doc,tree)),_step294;try{for(_iterator294.s();!(_step294=_iterator294.n()).done;){var open=_step294.value;options.push({label:"</"+open+">",type:"type",boost:99-level++});}}catch(err){_iterator294.e(err);}finally{_iterator294.f();}return{from:pos,to:pos,options:options,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/};}function completeAttrName(state,schema,tree,from,to){var elt2=findParentElement(tree),info=elt2?schema.tags[elementName2(state.doc,elt2)]:null;var localAttrs=info&&info.attrs?Object.keys(info.attrs):[];var names=info&&info.globalAttrs===false?localAttrs:localAttrs.length?localAttrs.concat(schema.globalAttrNames):schema.globalAttrNames;return{from:from,to:to,options:names.map(function(attrName){return{label:attrName,type:"property"};}),validFor:identifier3};}function completeAttrValue(state,schema,tree,from,to){var _a2;var nameNode=(_a2=tree.parent)===null||_a2===void 0?void 0:_a2.getChild("AttributeName");var options=[],token=void 0;if(nameNode){var attrName=state.sliceDoc(nameNode.from,nameNode.to);var attrs=schema.globalAttrs[attrName];if(!attrs){var elt2=findParentElement(tree),info=elt2?schema.tags[elementName2(state.doc,elt2)]:null;attrs=(info===null||info===void 0?void 0:info.attrs)&&info.attrs[attrName];}if(attrs){var base2=state.sliceDoc(from,to).toLowerCase(),quoteStart='"',quoteEnd='"';if(/^['"]/.test(base2)){token=base2[0]=='"'?/^[^"]*$/:/^[^']*$/;quoteStart="";quoteEnd=state.sliceDoc(to,to+1)==base2[0]?"":base2[0];base2=base2.slice(1);from++;}else{token=/^[^\s<>='"]*$/;}var _iterator295=_createForOfIteratorHelper(attrs),_step295;try{for(_iterator295.s();!(_step295=_iterator295.n()).done;){var value=_step295.value;options.push({label:value,apply:quoteStart+value+quoteEnd,type:"constant"});}}catch(err){_iterator295.e(err);}finally{_iterator295.f();}}}return{from:from,to:to,options:options,validFor:token};}function htmlCompletionFor(schema,context){var state=context.state,pos=context.pos,tree=_syntaxTree(state).resolveInner(pos,-1),around=tree.resolve(pos);for(var scan=pos,before;around==tree&&(before=tree.childBefore(scan));){var last=before.lastChild;if(!last||!last.type.isError||last.from<last.to)break;around=tree=before;scan=last.from;}if(tree.name=="TagName"){return tree.parent&&/CloseTag$/.test(tree.parent.name)?completeCloseTag(state,tree,tree.from,pos):completeTag(state,schema,tree,tree.from,pos);}else if(tree.name=="StartTag"){return completeTag(state,schema,tree,pos,pos);}else if(tree.name=="StartCloseTag"||tree.name=="IncompleteCloseTag"){return completeCloseTag(state,tree,pos,pos);}else if(tree.name=="OpenTag"||tree.name=="SelfClosingTag"||tree.name=="AttributeName"){return completeAttrName(state,schema,tree,tree.name=="AttributeName"?tree.from:pos,pos);}else if(tree.name=="Is"||tree.name=="AttributeValue"||tree.name=="UnquotedAttributeValue"){return completeAttrValue(state,schema,tree,tree.name=="Is"?pos:tree.from,pos);}else if(context.explicit&&(around.name=="Element"||around.name=="Text"||around.name=="Document")){return completeStartTag(state,schema,tree,pos);}else{return null;}}function htmlCompletionSource(context){return htmlCompletionFor(Schema["default"],context);}function htmlCompletionSourceWith(config2){var extraTags=config2.extraTags,extraAttrs=config2.extraGlobalAttributes;var schema=extraAttrs||extraTags?new Schema(extraTags,extraAttrs):Schema["default"];return function(context){return htmlCompletionFor(schema,context);};}var jsonParser=/* @__PURE__ */javascriptLanguage.parser.configure({top:"SingleExpression"});var defaultNesting=[{tag:"script",attrs:function attrs(_attrs){return _attrs.type=="text/typescript"||_attrs.lang=="ts";},parser:typescriptLanguage.parser},{tag:"script",attrs:function attrs(_attrs2){return _attrs2.type=="text/babel"||_attrs2.type=="text/jsx";},parser:jsxLanguage.parser},{tag:"script",attrs:function attrs(_attrs3){return _attrs3.type=="text/typescript-jsx";},parser:tsxLanguage.parser},{tag:"script",attrs:function attrs(_attrs4){return /^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(_attrs4.type);},parser:jsonParser},{tag:"script",attrs:function attrs(_attrs5){return!_attrs5.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(_attrs5.type);},parser:javascriptLanguage.parser},{tag:"style",attrs:function attrs(_attrs6){return(!_attrs6.lang||_attrs6.lang=="css")&&(!_attrs6.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(_attrs6.type));},parser:cssLanguage.parser}];var defaultAttrs=/* @__PURE__ */[{name:"style",parser:/* @__PURE__ */cssLanguage.parser.configure({top:"Styles"})}].concat(/* @__PURE__ */eventAttributes.map(function(name2){return{name:name2,parser:javascriptLanguage.parser};}));var htmlPlain=/* @__PURE__ */_LRLanguage2.define({name:"html",parser:/* @__PURE__ */parser2.configure({props:[/* @__PURE__ */_indentNodeProp.add({Element:function Element(context){var after=/^(\s*)(<\/)?/.exec(context.textAfter);if(context.node.to<=context.pos+after[0].length)return context["continue"]();return context.lineIndent(context.node.from)+(after[2]?0:context.unit);},"OpenTag CloseTag SelfClosingTag":function OpenTag_CloseTag_SelfClosingTag(context){return context.column(context.node.from)+context.unit;},Document:function Document(context){if(context.pos+/\s*/.exec(context.textAfter)[0].length<context.node.to)return context["continue"]();var endElt=null,close;for(var cur2=context.node;;){var last=cur2.lastChild;if(!last||last.name!="Element"||last.to!=cur2.to)break;endElt=cur2=last;}if(endElt&&!((close=endElt.lastChild)&&(close.name=="CloseTag"||close.name=="SelfClosingTag")))return context.lineIndent(endElt.from)+context.unit;return null;}}),/* @__PURE__ */_foldNodeProp.add({Element:function Element(node){var first=node.firstChild,last=node.lastChild;if(!first||first.name!="OpenTag")return null;return{from:first.to,to:last.name=="CloseTag"?last.from:node.to};}}),/* @__PURE__ */_bracketMatchingHandle.add({"OpenTag CloseTag":function OpenTag_CloseTag(node){return node.getChild("TagName");}})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});var htmlLanguage=/* @__PURE__ */htmlPlain.configure({wrap:/* @__PURE__ */configureNesting(defaultNesting,defaultAttrs)});function html(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var dialect="",wrap;if(config2.matchClosingTags===false)dialect="noMatch";if(config2.selfClosingTags===true)dialect=(dialect?dialect+" ":"")+"selfClosing";if(config2.nestedLanguages&&config2.nestedLanguages.length||config2.nestedAttributes&&config2.nestedAttributes.length)wrap=configureNesting((config2.nestedLanguages||[]).concat(defaultNesting),(config2.nestedAttributes||[]).concat(defaultAttrs));var lang=wrap?htmlPlain.configure({wrap:wrap,dialect:dialect}):dialect?htmlLanguage.configure({dialect:dialect}):htmlLanguage;return new _LanguageSupport(lang,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(config2)}),config2.autoCloseTags!==false?autoCloseTags2:[],javascript().support,css().support]);}var selfClosers2=/* @__PURE__ */new Set(/* @__PURE__ */"area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" "));var autoCloseTags2=/* @__PURE__ */_EditorView.inputHandler.of(function(view,from,to,text,insertTransaction){if(view.composing||view.state.readOnly||from!=to||text!=">"&&text!="/"||!htmlLanguage.isActiveAt(view.state,from,-1))return false;var base2=insertTransaction(),state=base2.state;var closeTags=state.changeByRange(function(range){var _a2,_b,_c;var didType=state.doc.sliceString(range.from-1,range.to)==text;var head=range.head,after=_syntaxTree(state).resolveInner(head,-1),name2;if(didType&&text==">"&&after.name=="EndTag"){var tag=after.parent;if(((_b=(_a2=tag.parent)===null||_a2===void 0?void 0:_a2.lastChild)===null||_b===void 0?void 0:_b.name)!="CloseTag"&&(name2=elementName2(state.doc,tag.parent,head))&&!selfClosers2.has(name2)){var to2=head+(state.doc.sliceString(head,head+1)===">"?1:0);var insert2="</".concat(name2,">");return{range:range,changes:{from:head,to:to2,insert:insert2}};}}else if(didType&&text=="/"&&after.name=="IncompleteCloseTag"){var _tag=after.parent;if(after.from==head-2&&((_c=_tag.lastChild)===null||_c===void 0?void 0:_c.name)!="CloseTag"&&(name2=elementName2(state.doc,_tag,head))&&!selfClosers2.has(name2)){var _to4=head+(state.doc.sliceString(head,head+1)===">"?1:0);var _insert="".concat(name2,">");return{range:_EditorSelection.cursor(head+_insert.length,-1),changes:{from:head,to:_to4,insert:_insert}};}}return{range:range};});if(closeTags.changes.empty)return false;view.dispatch([base2,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:true})]);return true;});// ../node_modules/@codemirror/lang-markdown/dist/index.js
var data=/* @__PURE__ */_defineLanguageFacet({commentTokens:{block:{open:"<!--",close:"-->"}}});var headingProp=/* @__PURE__ */new NodeProp();var commonmark=/* @__PURE__ */parser.configure({props:[/* @__PURE__ */_foldNodeProp.add(function(type){return!type.is("Block")||type.is("Document")||isHeading(type)!=null||isList(type)?void 0:function(tree,state){return{from:state.doc.lineAt(tree.from).to,to:tree.to};};}),/* @__PURE__ */headingProp.add(isHeading),/* @__PURE__ */_indentNodeProp.add({Document:function Document(){return null;}}),/* @__PURE__ */_languageDataProp.add({Document:data})]});function isHeading(type){var match=/^(?:ATX|Setext)Heading(\d)$/.exec(type.name);return match?+match[1]:void 0;}function isList(type){return type.name=="OrderedList"||type.name=="BulletList";}function findSectionEnd(headerNode,level){var last=headerNode;for(;;){var next=last.nextSibling,heading2=void 0;if(!next||(heading2=isHeading(next.type))!=null&&heading2<=level)break;last=next;}return last.to;}var headerIndent=/* @__PURE__ */_foldService.of(function(state,start,end){for(var node=_syntaxTree(state).resolveInner(end,-1);node;node=node.parent){if(node.from<start)break;var heading2=node.type.prop(headingProp);if(heading2==null)continue;var upto=findSectionEnd(node,heading2);if(upto>end)return{from:end,to:upto};}return null;});function mkLang(parser5){return new _Language(data,parser5,[headerIndent],"markdown");}var commonmarkLanguage=/* @__PURE__ */mkLang(commonmark);var extended=/* @__PURE__ */commonmark.configure([GFM,Subscript,Superscript,Emoji,{props:[/* @__PURE__ */_foldNodeProp.add({Table:function Table(tree,state){return{from:state.doc.lineAt(tree.from).to,to:tree.to};}})]}]);var markdownLanguage=/* @__PURE__ */mkLang(extended);function getCodeParser(languages,defaultLanguage){return function(info){if(info&&languages){var found=null;info=/\S*/.exec(info)[0];if(typeof languages=="function")found=languages(info);else found=_LanguageDescription2.matchLanguageName(languages,info,true);if(found instanceof _LanguageDescription2)return found.support?found.support.language.parser:_ParseContext2.getSkippingParser(found.load());else if(found)return found.parser;}return defaultLanguage?defaultLanguage.parser:null;};}var Context=/*#__PURE__*/function(){function Context(node,from,to,spaceBefore,spaceAfter,type,item){_classCallCheck(this,Context);this.node=node;this.from=from;this.to=to;this.spaceBefore=spaceBefore;this.spaceAfter=spaceAfter;this.type=type;this.item=item;}return _createClass(Context,[{key:"blank",value:function blank(maxWidth){var trailing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var result=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(maxWidth!=null){while(result.length<maxWidth)result+=" ";return result;}else{for(var _i230=this.to-this.from-result.length-this.spaceAfter.length;_i230>0;_i230--)result+=" ";return result+(trailing?this.spaceAfter:"");}}},{key:"marker",value:function marker(doc2,add2){var number2=this.node.name=="OrderedList"?String(+itemNumber(this.item,doc2)[2]+add2):"";return this.spaceBefore+number2+this.type+this.spaceAfter;}}]);}();function getContext(node,doc2){var nodes=[],context=[];for(var cur2=node;cur2;cur2=cur2.parent){if(cur2.name=="FencedCode")return context;if(cur2.name=="ListItem"||cur2.name=="Blockquote")nodes.push(cur2);}for(var _i231=nodes.length-1;_i231>=0;_i231--){var node2=nodes[_i231],match=void 0;var line=doc2.lineAt(node2.from),startPos=node2.from-line.from;if(node2.name=="Blockquote"&&(match=/^ *>( ?)/.exec(line.text.slice(startPos)))){context.push(new Context(node2,startPos,startPos+match[0].length,"",match[1],">",null));}else if(node2.name=="ListItem"&&node2.parent.name=="OrderedList"&&(match=/^( *)\d+([.)])( *)/.exec(line.text.slice(startPos)))){var after=match[3],len=match[0].length;if(after.length>=4){after=after.slice(0,after.length-4);len-=4;}context.push(new Context(node2.parent,startPos,startPos+len,match[1],after,match[2],node2));}else if(node2.name=="ListItem"&&node2.parent.name=="BulletList"&&(match=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(line.text.slice(startPos)))){var _after=match[4],_len8=match[0].length;if(_after.length>4){_after=_after.slice(0,_after.length-4);_len8-=4;}var type=match[2];if(match[3])type+=match[3].replace(/[xX]/," ");context.push(new Context(node2.parent,startPos,startPos+_len8,match[1],_after,type,node2));}}return context;}function itemNumber(item,doc2){return /^(\s*)(\d+)(?=[.)])/.exec(doc2.sliceString(item.from,item.from+10));}function renumberList(after,doc2,changes){var offset=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;for(var prev=-1,node=after;;){if(node.name=="ListItem"){var m=itemNumber(node,doc2);var number2=+m[2];if(prev>=0){if(number2!=prev+1)return;changes.push({from:node.from+m[1].length,to:node.from+m[0].length,insert:String(prev+2+offset)});}prev=number2;}var next=node.nextSibling;if(!next)break;node=next;}}function normalizeIndent(content2,state){var blank=/^[ \t]*/.exec(content2)[0].length;if(!blank||state.facet(_indentUnit)!="	")return content2;var col=_countColumn(content2,4,blank);var space4="";for(var _i232=col;_i232>0;){if(_i232>=4){space4+="	";_i232-=4;}else{space4+=" ";_i232--;}}return space4+content2.slice(blank);}var insertNewlineContinueMarkup=function insertNewlineContinueMarkup(_ref62){var state=_ref62.state,dispatch=_ref62.dispatch;var tree=_syntaxTree(state),doc2=state.doc;var dont=null,changes=state.changeByRange(function(range){if(!range.empty||!markdownLanguage.isActiveAt(state,range.from,0))return dont={range:range};var pos=range.from,line=doc2.lineAt(pos);var context=getContext(tree.resolveInner(pos,-1),doc2);while(context.length&&context[context.length-1].from>pos-line.from)context.pop();if(!context.length)return dont={range:range};var inner=context[context.length-1];if(inner.to-inner.spaceAfter.length>pos-line.from)return dont={range:range};var emptyLine=pos>=inner.to-inner.spaceAfter.length&&!/\S/.test(line.text.slice(inner.to));if(inner.item&&emptyLine){var first=inner.node.firstChild,second=inner.node.getChild("ListItem","ListItem");if(first.to>=pos||second&&second.to<pos||line.from>0&&!/[^\s>]/.test(doc2.lineAt(line.from-1).text)){var next=context.length>1?context[context.length-2]:null;var delTo,insert3="";if(next&&next.item){delTo=line.from+next.from;insert3=next.marker(doc2,1);}else{delTo=line.from+(next?next.to:0);}var changes3=[{from:delTo,to:pos,insert:insert3}];if(inner.node.name=="OrderedList")renumberList(inner.item,doc2,changes3,-2);if(next&&next.node.name=="OrderedList")renumberList(next.item,doc2,changes3);return{range:_EditorSelection.cursor(delTo+insert3.length),changes:changes3};}else{var _insert2=blankLine(context,state,line);return{range:_EditorSelection.cursor(pos+_insert2.length+1),changes:{from:line.from,insert:_insert2+state.lineBreak}};}}if(inner.node.name=="Blockquote"&&emptyLine&&line.from){var prevLine=doc2.lineAt(line.from-1),quoted=/>\s*$/.exec(prevLine.text);if(quoted&&quoted.index==inner.from){var _changes3=state.changes([{from:prevLine.from+quoted.index,to:prevLine.to},{from:line.from+inner.from,to:line.to}]);return{range:range.map(_changes3),changes:_changes3};}}var changes2=[];if(inner.node.name=="OrderedList")renumberList(inner.item,doc2,changes2);var continued=inner.item&&inner.item.from<line.from;var insert2="";if(!continued||/^[\s\d.)\-+*>]*/.exec(line.text)[0].length>=inner.to){for(var _i233=0,e=context.length-1;_i233<=e;_i233++){insert2+=_i233==e&&!continued?context[_i233].marker(doc2,1):context[_i233].blank(_i233<e?_countColumn(line.text,4,context[_i233+1].from)-insert2.length:null);}}var from=pos;while(from>line.from&&/\s/.test(line.text.charAt(from-line.from-1)))from--;insert2=normalizeIndent(insert2,state);if(nonTightList(inner.node,state.doc))insert2=blankLine(context,state,line)+state.lineBreak+insert2;changes2.push({from:from,to:pos,insert:state.lineBreak+insert2});return{range:_EditorSelection.cursor(from+insert2.length+1),changes:changes2};});if(dont)return false;dispatch(state.update(changes,{scrollIntoView:true,userEvent:"input"}));return true;};function isMark(node){return node.name=="QuoteMark"||node.name=="ListMark";}function nonTightList(node,doc2){if(node.name!="OrderedList"&&node.name!="BulletList")return false;var first=node.firstChild,second=node.getChild("ListItem","ListItem");if(!second)return false;var line1=doc2.lineAt(first.to),line2=doc2.lineAt(second.from);var empty2=/^[\s>]*$/.test(line1.text);return line1.number+(empty2?0:1)<line2.number;}function blankLine(context,state,line){var insert2="";for(var _i234=0,e=context.length-2;_i234<=e;_i234++){insert2+=context[_i234].blank(_i234<e?_countColumn(line.text,4,Math.min(line.text.length,context[_i234+1].from))-insert2.length:null,_i234<e);}return normalizeIndent(insert2,state);}function contextNodeForDelete(tree,pos){var node=tree.resolveInner(pos,-1),scan=pos;if(isMark(node)){scan=node.from;node=node.parent;}for(var prev;prev=node.childBefore(scan);){if(isMark(prev)){scan=prev.from;}else if(prev.name=="OrderedList"||prev.name=="BulletList"){node=prev.lastChild;scan=node.to;}else{break;}}return node;}var deleteMarkupBackward=function deleteMarkupBackward(_ref63){var state=_ref63.state,dispatch=_ref63.dispatch;var tree=_syntaxTree(state);var dont=null,changes=state.changeByRange(function(range){var pos=range.from,doc2=state.doc;if(range.empty&&markdownLanguage.isActiveAt(state,range.from)){var line=doc2.lineAt(pos);var context=getContext(contextNodeForDelete(tree,pos),doc2);if(context.length){var inner=context[context.length-1];var spaceEnd=inner.to-inner.spaceAfter.length+(inner.spaceAfter?1:0);if(pos-line.from>spaceEnd&&!/\S/.test(line.text.slice(spaceEnd,pos-line.from)))return{range:_EditorSelection.cursor(line.from+spaceEnd),changes:{from:line.from+spaceEnd,to:pos}};if(pos-line.from==spaceEnd&&(!inner.item||line.from<=inner.item.from||!/\S/.test(line.text.slice(0,inner.to)))){var start=line.from+inner.from;if(inner.item&&inner.node.from<inner.item.from&&/\S/.test(line.text.slice(inner.from,inner.to))){var insert2=inner.blank(_countColumn(line.text,4,inner.to)-_countColumn(line.text,4,inner.from));if(start==line.from)insert2=normalizeIndent(insert2,state);return{range:_EditorSelection.cursor(start+insert2.length),changes:{from:start,to:line.from+inner.to,insert:insert2}};}if(start<pos)return{range:_EditorSelection.cursor(start),changes:{from:start,to:pos}};}}}return dont={range:range};});if(dont)return false;dispatch(state.update(changes,{scrollIntoView:true,userEvent:"delete"}));return true;};var markdownKeymap=[{key:"Enter",run:insertNewlineContinueMarkup},{key:"Backspace",run:deleteMarkupBackward}];var htmlNoMatch=/* @__PURE__ */html({matchClosingTags:false});function markdown(){var config2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var codeLanguages=config2.codeLanguages,defaultCodeLanguage=config2.defaultCodeLanguage,_config2$addKeymap=config2.addKeymap,addKeymap=_config2$addKeymap===void 0?true:_config2$addKeymap,_config2$base=config2.base,_config2$base2=_config2$base===void 0?commonmarkLanguage:_config2$base,parser5=_config2$base2.parser,_config2$completeHTML=config2.completeHTMLTags,completeHTMLTags=_config2$completeHTML===void 0?true:_config2$completeHTML,_config2$htmlTagLangu=config2.htmlTagLanguage,htmlTagLanguage=_config2$htmlTagLangu===void 0?htmlNoMatch:_config2$htmlTagLangu;if(!(parser5 instanceof _MarkdownParser))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");var extensions=config2.extensions?[config2.extensions]:[];var support=[htmlTagLanguage.support],defaultCode;if(defaultCodeLanguage instanceof _LanguageSupport){support.push(defaultCodeLanguage.support);defaultCode=defaultCodeLanguage.language;}else if(defaultCodeLanguage){defaultCode=defaultCodeLanguage;}var codeParser=codeLanguages||defaultCode?getCodeParser(codeLanguages,defaultCode):void 0;extensions.push(parseCode({codeParser:codeParser,htmlParser:htmlTagLanguage.language.parser}));if(addKeymap)support.push(Prec.high(keymap.of(markdownKeymap)));var lang=mkLang(parser5.configure(extensions));if(completeHTMLTags)support.push(lang.data.of({autocomplete:htmlTagCompletion}));return new _LanguageSupport(lang,support);}function htmlTagCompletion(context){var state=context.state,pos=context.pos,m=/<[:\-\.\w\u00b7-\uffff]*$/.exec(state.sliceDoc(pos-25,pos));if(!m)return null;var tree=_syntaxTree(state).resolveInner(pos,-1);while(tree&&!tree.type.isTop){if(tree.name=="CodeBlock"||tree.name=="FencedCode"||tree.name=="ProcessingInstructionBlock"||tree.name=="CommentBlock"||tree.name=="Link"||tree.name=="Image")return null;tree=tree.parent;}return{from:pos-m[0].length,to:pos,options:htmlTagCompletions(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/};}var _tagCompletions=null;function htmlTagCompletions(){if(_tagCompletions)return _tagCompletions;var result=htmlCompletionSource(new _CompletionContext(_EditorState.create({extensions:htmlNoMatch}),0,true));return _tagCompletions=result?result.options:[];}// ../node_modules/thememirror/dist/create-theme.js
var createTheme=function createTheme(_ref64){var variant=_ref64.variant,settings=_ref64.settings,styles=_ref64.styles;var theme2=_EditorView.theme({"&":{backgroundColor:settings.background,color:settings.foreground},".cm-content":{caretColor:settings.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:settings.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:settings.selection},".cm-activeLine":{backgroundColor:settings.lineHighlight},".cm-gutters":{backgroundColor:settings.gutterBackground,color:settings.gutterForeground},".cm-activeLineGutter":{backgroundColor:settings.lineHighlight}},{dark:variant==="dark"});var highlightStyle=_HighlightStyle2.define(styles);var extension=[theme2,_syntaxHighlighting(highlightStyle)];return extension;};var create_theme_default=createTheme;// ../node_modules/thememirror/dist/themes/amy.js
var amy=create_theme_default({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:tags.comment,color:"#404080"},{tag:[tags.string,tags.regexp],color:"#999999"},{tag:tags.number,color:"#7090B0"},{tag:[tags.bool,tags["null"]],color:"#8080A0"},{tag:[tags.punctuation,tags.derefOperator],color:"#805080"},{tag:tags.keyword,color:"#60B0FF"},{tag:tags.definitionKeyword,color:"#B0FFF0"},{tag:tags.moduleKeyword,color:"#60B0FF"},{tag:tags.operator,color:"#A0A0FF"},{tag:[tags.variableName,tags.self],color:"#008080"},{tag:tags.operatorKeyword,color:"#A0A0FF"},{tag:tags.controlKeyword,color:"#80A0FF"},{tag:tags.className,color:"#70E080"},{tag:[tags["function"](tags.propertyName),tags.propertyName],color:"#50A0A0"},{tag:tags.tagName,color:"#009090"},{tag:tags.modifier,color:"#B0FFF0"},{tag:[tags.squareBracket,tags.attributeName],color:"#D0D0FF"}]});// ../node_modules/thememirror/dist/themes/ayu-light.js
var ayuLight=create_theme_default({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:tags.comment,color:"#787b8099"},{tag:tags.string,color:"#86b300"},{tag:tags.regexp,color:"#4cbf99"},{tag:[tags.number,tags.bool,tags["null"]],color:"#ffaa33"},{tag:tags.variableName,color:"#5c6166"},{tag:[tags.definitionKeyword,tags.modifier],color:"#fa8d3e"},{tag:[tags.keyword,tags.special(tags.brace)],color:"#fa8d3e"},{tag:tags.operator,color:"#ed9366"},{tag:tags.separator,color:"#5c6166b3"},{tag:tags.punctuation,color:"#5c6166"},{tag:[tags.definition(tags.propertyName),tags["function"](tags.variableName)],color:"#f2ae49"},{tag:[tags.className,tags.definition(tags.typeName)],color:"#22a4e6"},{tag:[tags.tagName,tags.typeName,tags.self,tags.labelName],color:"#55b4d4"},{tag:tags.angleBracket,color:"#55b4d480"},{tag:tags.attributeName,color:"#f2ae49"}]});// ../node_modules/thememirror/dist/themes/barf.js
var barf=create_theme_default({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:tags.comment,color:"#6E6E6E"},{tag:[tags.string,tags.regexp,tags.special(tags.brace)],color:"#5C81B3"},{tag:tags.number,color:"#C1E1B8"},{tag:tags.bool,color:"#53667D"},{tag:[tags.definitionKeyword,tags.modifier,tags["function"](tags.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[tags.keyword,tags.moduleKeyword,tags.operatorKeyword,tags.operator],color:"#697A8E",fontWeight:"bold"},{tag:[tags.variableName,tags.attributeName],color:"#708E67"},{tag:[tags["function"](tags.variableName),tags.definition(tags.propertyName),tags.derefOperator],color:"#fff"},{tag:tags.tagName,color:"#A3D295"}]});// ../node_modules/thememirror/dist/themes/bespin.js
var bespin=create_theme_default({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:tags.comment,color:"#666666"},{tag:[tags.string,tags.special(tags.brace)],color:"#54BE0D"},{tag:tags.regexp,color:"#E9C062"},{tag:tags.number,color:"#CF6A4C"},{tag:[tags.keyword,tags.operator],color:"#5EA6EA"},{tag:tags.variableName,color:"#7587A6"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F9EE98"},{tag:[tags.propertyName,tags["function"](tags.variableName)],color:"#937121"},{tag:[tags.typeName,tags.angleBracket,tags.tagName],color:"#9B859D"}]});// ../node_modules/thememirror/dist/themes/birds-of-paradise.js
var birdsOfParadise=create_theme_default({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:tags.comment,color:"#6B4E32"},{tag:[tags.keyword,tags.operator,tags.derefOperator],color:"#EF5D32"},{tag:tags.className,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.typeName,tags.propertyName,tags["function"](tags.variableName),tags.definition(tags.variableName)],color:"#EFAC32"},{tag:tags.definition(tags.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:tags.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.number,tags.bool],color:"#6C99BB"},{tag:[tags.variableName,tags.self],color:"#7DAF9C"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#D9D762"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#EFCB43"}]});// ../node_modules/thememirror/dist/themes/boys-and-girls.js
var boysAndGirls=create_theme_default({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:tags.comment,color:"#404040"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#00D8FF"},{tag:tags.number,color:"#E62286"},{tag:[tags.variableName,tags.attributeName,tags.self],color:"#E62286",fontWeight:"bold"},{tag:tags["function"](tags.variableName),color:"#fff",fontWeight:"bold"}]});// ../node_modules/thememirror/dist/themes/clouds.js
var clouds=create_theme_default({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:tags.comment,color:"#BCC8BA"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#5D90CD"},{tag:[tags.number,tags.bool,tags["null"]],color:"#46A609"},{tag:tags.keyword,color:"#AF956F"},{tag:[tags.definitionKeyword,tags.modifier],color:"#C52727"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#606060"},{tag:tags.self,color:"#000"}]});// ../node_modules/thememirror/dist/themes/cobalt.js
var cobalt=create_theme_default({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:tags.comment,color:"#0088FF"},{tag:tags.string,color:"#3AD900"},{tag:tags.regexp,color:"#80FFC2"},{tag:[tags.number,tags.bool,tags["null"]],color:"#FF628C"},{tag:[tags.definitionKeyword,tags.modifier],color:"#FFEE80"},{tag:tags.variableName,color:"#CCCCCC"},{tag:tags.self,color:"#FF80E1"},{tag:[tags.className,tags.definition(tags.propertyName),tags["function"](tags.variableName),tags.definition(tags.typeName),tags.labelName],color:"#FFDD00"},{tag:[tags.keyword,tags.operator],color:"#FF9D00"},{tag:[tags.propertyName,tags.typeName],color:"#80FFBB"},{tag:tags.special(tags.brace),color:"#EDEF7D"},{tag:tags.attributeName,color:"#9EFFFF"},{tag:tags.derefOperator,color:"#fff"}]});// ../node_modules/thememirror/dist/themes/cool-glow.js
var coolGlow=create_theme_default({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:tags.comment,color:"#AEAEAE"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#8DFF8E"},{tag:[tags.className,tags.definition(tags.propertyName),tags["function"](tags.variableName),tags["function"](tags.definition(tags.variableName)),tags.definition(tags.typeName)],color:"#A3EBFF"},{tag:[tags.number,tags.bool,tags["null"]],color:"#62E9BD"},{tag:[tags.keyword,tags.operator],color:"#2BF1DC"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F8FBB1"},{tag:[tags.variableName,tags.self],color:"#B683CA"},{tag:[tags.angleBracket,tags.tagName,tags.typeName,tags.propertyName],color:"#60A4F1"},{tag:tags.derefOperator,color:"#E0E0E0"},{tag:tags.attributeName,color:"#7BACCA"}]});// ../node_modules/thememirror/dist/themes/dracula.js
var dracula=create_theme_default({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:tags.comment,color:"#6272a4"},{tag:[tags.string,tags.special(tags.brace)],color:"#f1fa8c"},{tag:[tags.number,tags.self,tags.bool,tags["null"]],color:"#bd93f9"},{tag:[tags.keyword,tags.operator],color:"#ff79c6"},{tag:[tags.definitionKeyword,tags.typeName],color:"#8be9fd"},{tag:tags.definition(tags.typeName),color:"#f8f8f2"},{tag:[tags.className,tags.definition(tags.propertyName),tags["function"](tags.variableName),tags.attributeName],color:"#50fa7b"}]});// ../node_modules/thememirror/dist/themes/espresso.js
var espresso=create_theme_default({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:tags.comment,color:"#AAAAAA"},{tag:[tags.keyword,tags.operator,tags.typeName,tags.tagName,tags.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[tags.attributeName,tags.definition(tags.propertyName)],color:"#4F9FD0"},{tag:[tags.className,tags.string,tags.special(tags.brace)],color:"#CF4F5F"},{tag:tags.number,color:"#CF4F5F",fontWeight:"bold"},{tag:tags.variableName,fontWeight:"bold"}]});// ../node_modules/thememirror/dist/themes/noctis-lilac.js
var noctisLilac=create_theme_default({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags["null"],tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags["function"](tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"}]});// ../node_modules/thememirror/dist/themes/rose-pine-dawn.js
var rosePineDawn=create_theme_default({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:tags.comment,color:"#9893a5"},{tag:[tags.bool,tags["null"]],color:"#286983"},{tag:tags.number,color:"#d7827e"},{tag:tags.className,color:"#d7827e"},{tag:[tags.angleBracket,tags.tagName,tags.typeName],color:"#56949f"},{tag:tags.attributeName,color:"#907aa9"},{tag:tags.punctuation,color:"#797593"},{tag:[tags.keyword,tags.modifier],color:"#286983"},{tag:[tags.string,tags.regexp],color:"#ea9d34"},{tag:tags.variableName,color:"#d7827e"}]});// ../node_modules/thememirror/dist/themes/smoothy.js
var smoothy=create_theme_default({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:tags.comment,color:"#CFCFCF"},{tag:[tags.number,tags.bool,tags["null"]],color:"#E66C29"},{tag:[tags.className,tags.definition(tags.propertyName),tags["function"](tags.variableName),tags.labelName,tags.definition(tags.typeName)],color:"#2EB43B"},{tag:tags.keyword,color:"#D8B229"},{tag:tags.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#925A47"},{tag:tags.string,color:"#704D3D"},{tag:tags.typeName,color:"#2F8996"},{tag:[tags.variableName,tags.propertyName],color:"#77ACB0"},{tag:tags.self,color:"#77ACB0",fontWeight:"bold"},{tag:tags.regexp,color:"#E3965E"},{tag:[tags.tagName,tags.angleBracket],color:"#BAA827"},{tag:tags.attributeName,color:"#B06520"},{tag:tags.derefOperator,color:"#000"}]});// ../node_modules/thememirror/dist/themes/solarized-light.js
var solarizedLight=create_theme_default({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:tags.comment,color:"#93A1A1"},{tag:tags.string,color:"#2AA198"},{tag:tags.regexp,color:"#D30102"},{tag:tags.number,color:"#D33682"},{tag:tags.variableName,color:"#268BD2"},{tag:[tags.keyword,tags.operator,tags.punctuation],color:"#859900"},{tag:[tags.definitionKeyword,tags.modifier],color:"#073642",fontWeight:"bold"},{tag:[tags.className,tags.self,tags.definition(tags.propertyName)],color:"#268BD2"},{tag:tags["function"](tags.variableName),color:"#268BD2"},{tag:[tags.bool,tags["null"]],color:"#B58900"},{tag:tags.tagName,color:"#268BD2",fontWeight:"bold"},{tag:tags.angleBracket,color:"#93A1A1"},{tag:tags.attributeName,color:"#93A1A1"},{tag:tags.typeName,color:"#859900"}]});// ../node_modules/thememirror/dist/themes/tomorrow.js
var tomorrow=create_theme_default({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:tags.comment,color:"#8E908C"},{tag:[tags.variableName,tags.self,tags.propertyName,tags.attributeName,tags.regexp],color:"#C82829"},{tag:[tags.number,tags.bool,tags["null"]],color:"#F5871F"},{tag:[tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#C99E00"},{tag:[tags.string,tags.special(tags.brace)],color:"#718C00"},{tag:tags.operator,color:"#3E999F"},{tag:[tags.definition(tags.propertyName),tags["function"](tags.variableName)],color:"#4271AE"},{tag:tags.keyword,color:"#8959A8"},{tag:tags.derefOperator,color:"#4D4D4C"}]});// includes.js
joo_global_object.__CM__view=_EditorView;joo_global_object.__CM__state=_EditorState;joo_global_object.__CM__Decoration=Decoration;joo_global_object.__CM__RangeSet=_RangeSet;joo_global_object.__CM__EditorSelection=_EditorSelection;joo_global_object.__CM__lint=dist_exports3;joo_global_object.__CM__autocomplete=dist_exports2;joo_global_object.__CM__hoverTooltip=hoverTooltip;joo_global_object.__CM__basic_setup=basicSetup;joo_global_object.__CM__dark=dist_exports4;joo_global_object.__CM__language=dist_exports;joo_global_object.__CM__mllike=oCaml;joo_global_object.__CM__markdown=markdown;joo_global_object.__CM__showPanel=showPanel;joo_global_object.__CM__StateField=_StateField;joo_global_object.__CM__StateEffect=_StateEffect;joo_global_object.__CM__keymap=keymap;joo_global_object.__CM__theme_dracula=dracula;})();
